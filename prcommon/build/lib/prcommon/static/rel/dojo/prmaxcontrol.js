/*
	Copyright (c) 2004-2011, The Dojo Foundation All Rights Reserved.
	Available via Academic Free License >= 2.1 OR the modified BSD license.
	see: http://dojotoolkit.org/license for details
*/

//>>built
require({cache:{"dojo/currency":function(){define(["./_base/array","./_base/lang","./number","./i18n","./i18n!./cldr/nls/currency","./cldr/monetary"],function(_1,_2,_3,_4,_5,_6){var _7={};_2.setObject("dojo.currency",_7);_7._mixInDefaults=function(_8){_8=_8||{};_8.type="currency";var _9=_4.getLocalization("dojo.cldr","currency",_8.locale)||{};var _a=_8.currency;var _b=_6.getData(_a);_1.forEach(["displayName","symbol","group","decimal"],function(_c){_b[_c]=_9[_a+"_"+_c];});_b.fractional=[true,false];return _2.mixin(_b,_8);};_7.format=function(_d,_e){return _3.format(_d,_7._mixInDefaults(_e));};_7.regexp=function(_f){return _3.regexp(_7._mixInDefaults(_f));};_7.parse=function(_10,_11){return _3.parse(_10,_7._mixInDefaults(_11));};return _7;});},"dijit/selection":function(){define(["dojo/_base/array","dojo/dom","dojo/_base/lang","dojo/sniff","dojo/_base/window","dijit/focus"],function(_12,dom,_13,has,_14,_15){var _16=function(win){var doc=win.document;this.getType=function(){if(doc.getSelection){var _17="text";var _18;try{_18=win.getSelection();}catch(e){}if(_18&&_18.rangeCount==1){var _19=_18.getRangeAt(0);if((_19.startContainer==_19.endContainer)&&((_19.endOffset-_19.startOffset)==1)&&(_19.startContainer.nodeType!=3)){_17="control";}}return _17;}else{return doc.selection.type.toLowerCase();}};this.getSelectedText=function(){if(doc.getSelection){var _1a=win.getSelection();return _1a?_1a.toString():"";}else{if(this.getType()=="control"){return null;}return doc.selection.createRange().text;}};this.getSelectedHtml=function(){if(doc.getSelection){var _1b=win.getSelection();if(_1b&&_1b.rangeCount){var i;var _1c="";for(i=0;i<_1b.rangeCount;i++){var _1d=_1b.getRangeAt(i).cloneContents();var div=doc.createElement("div");div.appendChild(_1d);_1c+=div.innerHTML;}return _1c;}return null;}else{if(this.getType()=="control"){return null;}return doc.selection.createRange().htmlText;}};this.getSelectedElement=function(){if(this.getType()=="control"){if(doc.getSelection){var _1e=win.getSelection();return _1e.anchorNode.childNodes[_1e.anchorOffset];}else{var _1f=doc.selection.createRange();if(_1f&&_1f.item){return doc.selection.createRange().item(0);}}}return null;};this.getParentElement=function(){if(this.getType()=="control"){var p=this.getSelectedElement();if(p){return p.parentNode;}}else{if(doc.getSelection){var _20=doc.getSelection();if(_20){var _21=_20.anchorNode;while(_21&&(_21.nodeType!=1)){_21=_21.parentNode;}return _21;}}else{var r=doc.selection.createRange();r.collapse(true);return r.parentElement();}}return null;};this.hasAncestorElement=function(_22){return this.getAncestorElement.apply(this,arguments)!=null;};this.getAncestorElement=function(_23){var _24=this.getSelectedElement()||this.getParentElement();return this.getParentOfType(_24,arguments);};this.isTag=function(_25,_26){if(_25&&_25.tagName){var _27=_25.tagName.toLowerCase();for(var i=0;i<_26.length;i++){var _28=String(_26[i]).toLowerCase();if(_27==_28){return _28;}}}return "";};this.getParentOfType=function(_29,_2a){while(_29){if(this.isTag(_29,_2a).length){return _29;}_29=_29.parentNode;}return null;};this.collapse=function(_2b){if(doc.getSelection){var _2c=win.getSelection();if(_2c.removeAllRanges){if(_2b){_2c.collapseToStart();}else{_2c.collapseToEnd();}}else{_2c.collapse(_2b);}}else{var _2d=doc.selection.createRange();_2d.collapse(_2b);_2d.select();}};this.remove=function(){var sel=doc.selection;if(doc.getSelection){sel=win.getSelection();sel.deleteFromDocument();return sel;}else{if(sel.type.toLowerCase()!="none"){sel.clear();}return sel;}};this.selectElementChildren=function(_2e,_2f){var _30;_2e=dom.byId(_2e);if(doc.getSelection){var _31=win.getSelection();if(has("opera")){if(_31.rangeCount){_30=_31.getRangeAt(0);}else{_30=doc.createRange();}_30.setStart(_2e,0);_30.setEnd(_2e,(_2e.nodeType==3)?_2e.length:_2e.childNodes.length);_31.addRange(_30);}else{_31.selectAllChildren(_2e);}}else{_30=_2e.ownerDocument.body.createTextRange();_30.moveToElementText(_2e);if(!_2f){try{_30.select();}catch(e){}}}};this.selectElement=function(_32,_33){var _34;_32=dom.byId(_32);if(doc.getSelection){var _35=doc.getSelection();_34=doc.createRange();if(_35.removeAllRanges){if(has("opera")){if(_35.getRangeAt(0)){_34=_35.getRangeAt(0);}}_34.selectNode(_32);_35.removeAllRanges();_35.addRange(_34);}}else{try{var tg=_32.tagName?_32.tagName.toLowerCase():"";if(tg==="img"||tg==="table"){_34=_14.body(doc).createControlRange();}else{_34=_14.body(doc).createRange();}_34.addElement(_32);if(!_33){_34.select();}}catch(e){this.selectElementChildren(_32,_33);}}};this.inSelection=function(_36){if(_36){var _37;var _38;if(doc.getSelection){var sel=win.getSelection();if(sel&&sel.rangeCount>0){_38=sel.getRangeAt(0);}if(_38&&_38.compareBoundaryPoints&&doc.createRange){try{_37=doc.createRange();_37.setStart(_36,0);if(_38.compareBoundaryPoints(_38.START_TO_END,_37)===1){return true;}}catch(e){}}}else{_38=doc.selection.createRange();try{_37=_36.ownerDocument.body.createTextRange();_37.moveToElementText(_36);}catch(e2){}if(_38&&_37){if(_38.compareEndPoints("EndToStart",_37)===1){return true;}}}}return false;};this.getBookmark=function(){var bm,rg,tg,sel=doc.selection,cf=_15.curNode;if(doc.getSelection){sel=win.getSelection();if(sel){if(sel.isCollapsed){tg=cf?cf.tagName:"";if(tg){tg=tg.toLowerCase();if(tg=="textarea"||(tg=="input"&&(!cf.type||cf.type.toLowerCase()=="text"))){sel={start:cf.selectionStart,end:cf.selectionEnd,node:cf,pRange:true};return {isCollapsed:(sel.end<=sel.start),mark:sel};}}bm={isCollapsed:true};if(sel.rangeCount){bm.mark=sel.getRangeAt(0).cloneRange();}}else{rg=sel.getRangeAt(0);bm={isCollapsed:false,mark:rg.cloneRange()};}}}else{if(sel){tg=cf?cf.tagName:"";tg=tg.toLowerCase();if(cf&&tg&&(tg=="button"||tg=="textarea"||tg=="input")){if(sel.type&&sel.type.toLowerCase()=="none"){return {isCollapsed:true,mark:null};}else{rg=sel.createRange();return {isCollapsed:rg.text&&rg.text.length?false:true,mark:{range:rg,pRange:true}};}}bm={};try{rg=sel.createRange();bm.isCollapsed=!(sel.type=="Text"?rg.htmlText.length:rg.length);}catch(e){bm.isCollapsed=true;return bm;}if(sel.type.toUpperCase()=="CONTROL"){if(rg.length){bm.mark=[];var i=0,len=rg.length;while(i<len){bm.mark.push(rg.item(i++));}}else{bm.isCollapsed=true;bm.mark=null;}}else{bm.mark=rg.getBookmark();}}else{}}return bm;};this.moveToBookmark=function(_39){var _3a=_39.mark;if(_3a){if(doc.getSelection){var sel=win.getSelection();if(sel&&sel.removeAllRanges){if(_3a.pRange){var n=_3a.node;n.selectionStart=_3a.start;n.selectionEnd=_3a.end;}else{sel.removeAllRanges();sel.addRange(_3a);}}else{}}else{if(doc.selection&&_3a){var rg;if(_3a.pRange){rg=_3a.range;}else{if(_13.isArray(_3a)){rg=doc.body.createControlRange();_12.forEach(_3a,function(n){rg.addElement(n);});}else{rg=doc.body.createTextRange();rg.moveToBookmark(_3a);}}rg.select();}}}};this.isCollapsed=function(){return this.getBookmark().isCollapsed;};};var _3b=new _16(window);_3b.SelectionManager=_16;return _3b;});},"dojox/grid/DataGrid":function(){define(["../main","dojo/_base/array","dojo/_base/lang","dojo/_base/json","dojo/_base/sniff","dojo/_base/declare","./_Grid","./DataSelection","dojo/_base/html","dojo/has","dojo/has!dojo-bidi?./bidi/_BidiMixin"],function(_3c,_3d,_3e,_3f,has,_40,_41,_42,_43){var _44=_40("dojox.grid.DataGrid",_41,{store:null,query:null,queryOptions:null,fetchText:"...",sortFields:null,updateDelay:1,items:null,_store_connects:null,_by_idty:null,_by_idx:null,_cache:null,_pages:null,_pending_requests:null,_bop:-1,_eop:-1,_requests:0,rowCount:0,_isLoaded:false,_isLoading:false,keepSelection:false,postCreate:function(){this._pages=[];this._store_connects=[];this._by_idty={};this._by_idx=[];this._cache=[];this._pending_requests={};this._setStore(this.store);this.inherited(arguments);},destroy:function(){this.selection.destroy();this.inherited(arguments);},createSelection:function(){this.selection=new _42(this);},get:function(_45,_46){if(_46&&this.field=="_item"&&!this.fields){return _46;}else{if(_46&&this.fields){var ret=[];var s=this.grid.store;_3d.forEach(this.fields,function(f){ret=ret.concat(s.getValues(_46,f));});return ret;}else{if(!_46&&typeof _45==="string"){return this.inherited(arguments);}}}return (!_46?this.defaultValue:(!this.field?this.value:(this.field=="_item"?_46:this.grid.store.getValue(_46,this.field))));},_checkUpdateStatus:function(){if(this.updateDelay>0){var _47=false;if(this._endUpdateDelay){clearTimeout(this._endUpdateDelay);delete this._endUpdateDelay;_47=true;}if(!this.updating){this.beginUpdate();_47=true;}if(_47){var _48=this;this._endUpdateDelay=setTimeout(function(){delete _48._endUpdateDelay;_48.endUpdate();},this.updateDelay);}}},_onSet:function(_49,_4a,_4b,_4c){this._checkUpdateStatus();var idx=this.getItemIndex(_49);if(idx>-1){this.updateRow(idx);}},_createItem:function(_4d,_4e){var _4f=this._hasIdentity?this.store.getIdentity(_4d):_3f.toJson(this.query)+":idx:"+_4e+":sort:"+_3f.toJson(this.getSortProps());var o=this._by_idty[_4f]={idty:_4f,item:_4d};return o;},_addItem:function(_50,_51,_52){this._by_idx[_51]=this._createItem(_50,_51);if(!_52){this.updateRow(_51);}},_onNew:function(_53,_54){this._checkUpdateStatus();var _55=this.get("rowCount");this._addingItem=true;this.updateRowCount(_55+1);this._addingItem=false;this._addItem(_53,_55);this.showMessage();},_onDelete:function(_56){this._checkUpdateStatus();var idx=this._getItemIndex(_56,true);if(idx>=0){this._pages=[];this._bop=-1;this._eop=-1;var o=this._by_idx[idx];this._by_idx.splice(idx,1);delete this._by_idty[o.idty];this.updateRowCount(this.get("rowCount")-1);if(this.get("rowCount")===0){this.showMessage(this.noDataMessage);}}if(this.selection.isSelected(idx)){this.selection.deselect(idx);this.selection.selected.splice(idx,1);}},_onRevert:function(){this._refresh();},setStore:function(_57,_58,_59){if(this._requestsPending(0)){return;}this._setQuery(_58,_59);this._setStore(_57);this._refresh(true);},setQuery:function(_5a,_5b){if(this._requestsPending(0)){return;}this._setQuery(_5a,_5b);this._refresh(true);},setItems:function(_5c){this.items=_5c;this._setStore(this.store);this._refresh(true);},_setQuery:function(_5d,_5e){this.query=_5d;this.queryOptions=_5e||this.queryOptions;},_setStore:function(_5f){if(this.store&&this._store_connects){_3d.forEach(this._store_connects,this.disconnect,this);}this.store=_5f;if(this.store){var f=this.store.getFeatures();var h=[];this._canEdit=!!f["dojo.data.api.Write"]&&!!f["dojo.data.api.Identity"];this._hasIdentity=!!f["dojo.data.api.Identity"];if(!!f["dojo.data.api.Notification"]&&!this.items){h.push(this.connect(this.store,"onSet","_onSet"));h.push(this.connect(this.store,"onNew","_onNew"));h.push(this.connect(this.store,"onDelete","_onDelete"));}if(this._canEdit){h.push(this.connect(this.store,"revert","_onRevert"));}this._store_connects=h;}},_onFetchBegin:function(_60,req){if(!this.scroller){return;}if(this.rowCount!=_60){if(req.isRender){this.scroller.init(_60,this.keepRows,this.rowsPerPage);this.rowCount=_60;this._setAutoHeightAttr(this.autoHeight,true);this._skipRowRenormalize=true;this.prerender();this._skipRowRenormalize=false;}else{this.updateRowCount(_60);}}if(!_60){this.views.render();this._resize();this.showMessage(this.noDataMessage);this.focus.initFocusView();}else{this.showMessage();}},_onFetchComplete:function(_61,req){if(!this.scroller){return;}if(_61&&_61.length>0){_3d.forEach(_61,function(_62,idx){this._addItem(_62,req.start+idx,true);},this);this.updateRows(req.start,_61.length);if(req.isRender){this.setScrollTop(0);this.postrender();}else{if(this._lastScrollTop){this.setScrollTop(this._lastScrollTop);}}if(has("ie")){_43.setSelectable(this.domNode,this.selectable);}}delete this._lastScrollTop;if(!this._isLoaded){this._isLoading=false;this._isLoaded=true;}this._pending_requests[req.start]=false;},_onFetchError:function(err,req){delete this._lastScrollTop;if(!this._isLoaded){this._isLoading=false;this._isLoaded=true;this.showMessage(this.errorMessage);}this._pending_requests[req.start]=false;this.onFetchError(err,req);},onFetchError:function(err,req){},_fetch:function(_63,_64){_63=_63||0;if(this.store&&!this._pending_requests[_63]){if(!this._isLoaded&&!this._isLoading){this._isLoading=true;this.showMessage(this.loadingMessage);}this._pending_requests[_63]=true;try{if(this.items){var _65=this.items;var _66=this.store;this.rowsPerPage=_65.length;var req={start:_63,count:this.rowsPerPage,isRender:_64};this._onFetchBegin(_65.length,req);var _67=0;_3d.forEach(_65,function(i){if(!_66.isItemLoaded(i)){_67++;}});if(_67===0){this._onFetchComplete(_65,req);}else{var _68=function(_69){_67--;if(_67===0){this._onFetchComplete(_65,req);}};_3d.forEach(_65,function(i){if(!_66.isItemLoaded(i)){_66.loadItem({item:i,onItem:_68,scope:this});}},this);}}else{this.store.fetch({start:_63,count:this.rowsPerPage,query:this.query,sort:this.getSortProps(),queryOptions:this.queryOptions,isRender:_64,onBegin:_3e.hitch(this,"_onFetchBegin"),onComplete:_3e.hitch(this,"_onFetchComplete"),onError:_3e.hitch(this,"_onFetchError")});}}catch(e){this._onFetchError(e,{start:_63,count:this.rowsPerPage});}}},_clearData:function(){this.updateRowCount(0);this._by_idty={};this._by_idx=[];this._pages=[];this._bop=this._eop=-1;this._isLoaded=false;this._isLoading=false;},getItem:function(idx){var _6a=this._by_idx[idx];if(!_6a||(_6a&&!_6a.item)){this._preparePage(idx);return null;}return _6a.item;},getItemIndex:function(_6b){return this._getItemIndex(_6b,false);},_getItemIndex:function(_6c,_6d){if(!_6d&&!this.store.isItem(_6c)){return -1;}var _6e=this._hasIdentity?this.store.getIdentity(_6c):null;for(var i=0,l=this._by_idx.length;i<l;i++){var d=this._by_idx[i];if(d&&((_6e&&d.idty==_6e)||(d.item===_6c))){return i;}}return -1;},filter:function(_6f,_70){this.query=_6f;if(_70){this._clearData();}this._fetch();},_getItemAttr:function(idx,_71){var _72=this.getItem(idx);return (!_72?this.fetchText:this.store.getValue(_72,_71));},_render:function(){if(this.domNode.parentNode){this.scroller.init(this.get("rowCount"),this.keepRows,this.rowsPerPage);this.prerender();this._fetch(0,true);}},_requestsPending:function(_73){return this._pending_requests[_73];},_rowToPage:function(_74){return (this.rowsPerPage?Math.floor(_74/this.rowsPerPage):_74);},_pageToRow:function(_75){return (this.rowsPerPage?this.rowsPerPage*_75:_75);},_preparePage:function(_76){if((_76<this._bop||_76>=this._eop)&&!this._addingItem){var _77=this._rowToPage(_76);this._needPage(_77);this._bop=_77*this.rowsPerPage;this._eop=this._bop+(this.rowsPerPage||this.get("rowCount"));}},_needPage:function(_78){if(!this._pages[_78]){this._pages[_78]=true;this._requestPage(_78);}},_requestPage:function(_79){var row=this._pageToRow(_79);var _7a=Math.min(this.rowsPerPage,this.get("rowCount")-row);if(_7a>0){this._requests++;if(!this._requestsPending(row)){setTimeout(_3e.hitch(this,"_fetch",row,false),1);}}},getCellName:function(_7b){return _7b.field;},_refresh:function(_7c){this._clearData();this._fetch(0,_7c);},sort:function(){this.edit.apply();this._lastScrollTop=this.scrollTop;this._refresh();},canSort:function(){return (!this._isLoading);},getSortProps:function(){var c=this.getCell(this.getSortIndex());if(!c){if(this.sortFields){return this.sortFields;}return null;}else{var _7d=c["sortDesc"];var si=!(this.sortInfo>0);if(typeof _7d=="undefined"){_7d=si;}else{_7d=si?!_7d:_7d;}return [{attribute:c.field,descending:_7d}];}},styleRowState:function(_7e){if(this.store&&this.store.getState){var _7f=this.store.getState(_7e.index),c="";for(var i=0,ss=["inflight","error","inserting"],s;s=ss[i];i++){if(_7f[s]){c=" dojoxGridRow-"+s;break;}}_7e.customClasses+=c;}},onStyleRow:function(_80){this.styleRowState(_80);this.inherited(arguments);},canEdit:function(_81,_82){return this._canEdit;},_copyAttr:function(idx,_83){var row={};var _84={};var src=this.getItem(idx);return this.store.getValue(src,_83);},doStartEdit:function(_85,_86){if(!this._cache[_86]){this._cache[_86]=this._copyAttr(_86,_85.field);}this.onStartEdit(_85,_86);},doApplyCellEdit:function(_87,_88,_89){this.store.fetchItemByIdentity({identity:this._by_idx[_88].idty,onItem:_3e.hitch(this,function(_8a){var _8b=this.store.getValue(_8a,_89);if(typeof _8b=="number"){_87=isNaN(_87)?_87:parseFloat(_87);}else{if(typeof _8b=="boolean"){_87=_87=="true"?true:_87=="false"?false:_87;}else{if(_8b instanceof Date){var _8c=new Date(_87);_87=isNaN(_8c.getTime())?_87:_8c;}}}this.store.setValue(_8a,_89,_87);this.onApplyCellEdit(_87,_88,_89);})});},doCancelEdit:function(_8d){var _8e=this._cache[_8d];if(_8e){this.updateRow(_8d);delete this._cache[_8d];}this.onCancelEdit.apply(this,arguments);},doApplyEdit:function(_8f,_90){var _91=this._cache[_8f];this.onApplyEdit(_8f);},removeSelectedRows:function(){if(this._canEdit){this.edit.apply();var fx=_3e.hitch(this,function(_92){if(_92.length){_3d.forEach(_92,this.store.deleteItem,this.store);this.selection.clear();}});if(this.allItemsSelected){this.store.fetch({query:this.query,queryOptions:this.queryOptions,onComplete:fx});}else{fx(this.selection.getSelected());}}}});_44.cell_markupFactory=function(_93,_94,_95){var _96=_3e.trim(_43.attr(_94,"field")||"");if(_96){_95.field=_96;}_95.field=_95.field||_95.name;var _97=_3e.trim(_43.attr(_94,"fields")||"");if(_97){_95.fields=_97.split(",");}if(_93){_93(_94,_95);}};_44.markupFactory=function(_98,_99,_9a,_9b){return _41.markupFactory(_98,_99,_9a,_3e.partial(_44.cell_markupFactory,_9b));};return _44;});},"control/customer/options/emailserver":function(){define(["dojo/_base/declare","ttl/BaseWidgetAMD","dojo/text!../options/templates/emailserver.html","ttl/utilities2","dojo/request","dojo/_base/lang","dojo/dom-style","dojo/dom-attr","dojo/dom-class","dojo/data/ItemFileReadStore","dijit/ProgressBar","dojox/form/PasswordValidator"],function(_9c,_9d,_9e,_9f,_a0,_a1,_a2,_a3,_a4,_a5){return _9c("control.customer.options.emailserver",[_9d],{templateString:_9e,constructor:function(){this._emailservertypes=new _a5({url:"/common/lookups?searchtype=emailservertypes"});this._update_call_back=_a1.hitch(this,this._update_call);},load:function(_a6,_a7){this.thirdparty.set("checked",_a6.thirdparty);this.customerid.set("value",_a6.customerid);this.email_password.set("value","");if(_a7){this.emailservertypeid.set("value",_a7.emailservertypeid);this.hostname.set("value",_a7.email_host);this.email_username.set("value",_a7.email_username);}else{this.emailservertypeid.set("value",1);this.hostname.set("value","");this.email_username.set("value","");this.email_password.set("value","");}this._set_options_display();},postCreate:function(){this.emailservertypeid.set("store",this._emailservertypes);this.emailservertypeid.set("value",1);},_change:function(){this._set_options_display();},_set_options_display:function(){if(this.thirdparty.get("checked")){_a4.remove(this.emailservertypeid.domNode,"prmaxhidden");_a4.remove(this.emailservertype_label,"prmaxhidden");switch(this.emailservertypeid.get("value")){case "2":_a4.remove(this.hostname.domNode,"prmaxhidden");_a4.remove(this.hostname_label,"prmaxhidden");this.email_username.set("required",false);_a4.add(this.email_username.domNode,"prmaxhidden");break;case "3":_a4.add(this.hostname.domNode,"prmaxhidden");_a4.add(this.hostname_label,"prmaxhidden");_a4.remove(this.user_name_label,"prmaxhidden");_a4.remove(this.email_username.domNode,"prmaxhidden");_a4.remove(this.email_password.domNode,"prmaxhidden");this.email_username.set("required",true);break;case "4":_a4.remove(this.hostname.domNode,"prmaxhidden");_a4.remove(this.hostname_label,"prmaxhidden");this.email_username.set("required",false);_a4.add(this.email_username.domNode,"prmaxhidden");break;default:this.email_username.set("required",false);_a4.add(this.email_username.domNode,"prmaxhidden");_a4.add(this.user_name_label,"prmaxhidden");_a4.add(this.email_password.domNode,"prmaxhidden");_a4.add(this.hostname.domNode,"prmaxhidden");_a4.add(this.hostname_label,"prmaxhidden");break;}}else{_a4.add(this.emailservertypeid.domNode,"prmaxhidden");_a4.add(this.emailservertype_label,"prmaxhidden");_a4.add(this.hostname.domNode,"prmaxhidden");_a4.add(this.hostname_label,"prmaxhidden");_a4.add(this.user_name_label,"prmaxhidden");this.email_username.set("required",false);_a4.add(this.email_username.domNode,"prmaxhidden");_a4.add(this.email_password.domNode,"prmaxhidden");}},_set_emailservertype:function(){this._set_options_display();},_update:function(){var _a8=this.form.get("value");_a8["icustomerid"]=this.customerid.value;_a0.post("/emailserver/update_emailserver",_9f.make_params({data:_a8})).then(this._update_call_back);},_update_call:function(_a9){if(_a9.success=="OK"){alert("Updated");}else{alert("Problem");}this.updatebtn.cancel();}});});},"control/customer/options/SetExpireDate":function(){define(["dojo/_base/declare","ttl/BaseWidgetAMD","dojo/text!../options/templates/SetExpireDate.html","dijit/layout/BorderContainer","dijit/layout/ContentPane","ttl/utilities2","dojo/request","dojo/_base/lang","dojo/dom-style","dojo/dom-attr","dojo/dom-class","dojo/data/ItemFileReadStore","dijit/ProgressBar","dijit/form/FilteringSelect","dijit/form/Button","dijit/form/Form","dijit/form/NumberTextBox","dojox/form/BusyButton","dijit/form/CheckBox","dijit/form/SimpleTextarea"],function(_aa,_ab,_ac,_ad,_ae,_af,_b0,_b1,_b2,_b3,_b4,_b5){return _aa("control.customer.options.SetExpireDate",[_ab],{templateString:_ac,constructor:function(){this._SetExpireDateCall=_b1.hitch(this,this._SetExpireDate);this._LoadedCallBack=_b1.hitch(this,this._LoadedCall);},Load:function(_b6,_b7){this.icustomerid.set("value",_b6);this.taskid.set("value",_b7);_b0.post("/customer/get_internal",_af.make_params({data:{icustomerid:this.icustomerid.get("value")}})).then(this._LoadedCallBack);},_LoadedCall:function(_b8){if(_b8.success=="OK"){this._advancefeatures=_b8.data.cust.advancefeatures;this.licence_expire.set("value",new Date(_b8.data.cust.licence_expire.year,_b8.data.cust.licence_expire.month-1,_b8.data.cust.licence_expire.day));if(_b8.data.cust.licence_start_date_d){this.licence_start_date.set("value",new Date(_b8.data.cust.licence_start_date_d.year,_b8.data.cust.licence_start_date_d.month-1,_b8.data.cust.licence_start_date_d.day));}else{this.licence_start_date.set("value",null);}if(this._advancefeatures){_b4.remove(this.view1,"prmaxhidden");if(_b8.data.cust.advance_licence_expired_d){this.advance_licence_expired.set("value",new Date(_b8.data.cust.advance_licence_expired_d.year,_b8.data.cust.advance_licence_expired_d.month-1,_b8.data.cust.advance_licence_expired_d.day));}else{this.advance_licence_expired.set("value",null);}if(_b8.data.cust.advance_licence_start_d){this.advance_licence_start.set("value",new Date(_b8.data.cust.advance_licence_start_d.year,_b8.data.cust.advance_licence_start_d.month-1,_b8.data.cust.advance_licence_start_d.day));}else{this.advance_licence_start.set("value",null);}}else{_b4.add(this.view1,"prmaxhidden");}if(_b8.data.cust.updatum){_b4.remove(this.view2,"prmaxhidden");if(_b8.data.cust.updatum_end_date_d){this.updatum_end_date.set("value",new Date(_b8.data.cust.updatum_end_date_d.year,_b8.data.cust.updatum_end_date_d.month-1,_b8.data.cust.updatum_end_date_d.day));}else{this.updatum_end_date.set("value",null);}if(_b8.data.cust.updatum_start_date_d){this.updatum_start_date.set("value",new Date(_b8.data.cust.updatum_start_date_d.year,_b8.data.cust.updatum_start_date_d.month-1,_b8.data.cust.updatum_start_date_d.day));}else{this.updatum_start_date.set("value",null);}}else{_b4.add(this.view2,"prmaxhidden");}this.reason.set("value","");this.dlg.show();}else{alert("Problem Loading Expire Details");}},_SetExpireDate:function(_b9){if(_b9.success=="OK"){alert("expire date re-set");dojo.publish(PRCOMMON.Events.Expire_Date_Changed,[_b9.data.cust]);this.dlg.hide();}else{alert("Problem resetting expire date");}},_Update:function(){if(_af.form_validator(this.form)==false){alert("Invalid Expire Date");return false;}if(this.reason.get("value")==""){alert("No Reason Given");this.reason.focus();return false;}var _ba=this.form.get("value");_ba["licence_expire"]=_af.to_json_date(this.licence_expire.get("value"));_ba["licence_start_date"]=_af.to_json_date(this.licence_start_date.get("value"));_ba["advance_licence_start"]=_af.to_json_date(this.advance_licence_start.get("value"));_ba["advance_licence_expired"]=_af.to_json_date(this.advance_licence_expired.get("value"));_ba["updatum_start_date"]=_af.to_json_date(this.updatum_start_date.get("value"));_ba["updatum_end_date"]=_af.to_json_date(this.updatum_end_date.get("value"));_b0.post("/customer/set_expire_date",_af.make_params({data:_ba})).then(this._SetExpireDateCall);},_Close:function(){this.dlg.hide();}});});},"control/accounts/SalesPartner":function(){define(["dojo/_base/declare","ttl/BaseWidgetAMD","dojo/text!../accounts/templates/SalesPartner.html","dijit/layout/BorderContainer","dijit/layout/ContentPane","dojo/request","ttl/utilities2","dojo/_base/lang","dojo/topic","dojo/dom-class","dojo/dom-attr","dojo/data/ItemFileReadStore","ttl/store/JsonRest","dojo/store/Observable","ttl/grid/Grid","dijit/form/Select","dijit/form/ValidationTextBox","dojox/form/BusyButton","dijit/form/Button","dijit/form/CurrencyTextBox","dijit/form/NumberTextBox","dijit/Toolbar","dijit/Dialog","dijit/form/Form","dijit/form/FilteringSelect","prcommon2/reports/ReportBuilder","prcommon2/date/daterange","dojox/validate/regexp"],function(_bb,_bc,_bd,_be,_bf,_c0,_c1,_c2,_c3,_c4,_c5,_c6,_c7,_c8,_c9){return _bb("control.accounts.SalesPartner",[_bc,_be],{templateString:_bd,gutters:false,constructor:function(){this.financial_data=new _c8(new _c7({target:"/audit/partners_financial",idProperty:"audittrailid",onError:_c1.globalerrorchecker,clearOnClose:true,nocallback:true,urlPreventCache:true}));this.customers_data=new _c8(new _c7({target:"/customer/partner_customers",idProperty:"customerid",onError:_c1.globalerrorchecker,clearOnClose:true,nocallback:true,urlPreventCache:true}));this._customersources=new _c6({url:"/common/lookups?searchtype=customersources&nofilter=-1"});this._countries=new _c6({url:"/common/lookups?searchtype=countries"});this._customerstatus=new _c6({url:"/common/lookups?searchtype=customerstatus&show_all=0"});this._get_partner_call_back=_c2.hitch(this,this._get_partner_call);this._update_partner_call_back=_c2.hitch(this,this._update_partner_call);this._complete_listing_call_back=_c2.hitch(this,this._complete_listing_call);this._complete_statement_call_back=_c2.hitch(this,this._complete_statement_call);this._complete_listing_excel_call_back=_c2.hitch(this,this._complete_listing_excel_call);this._complete_statement_excel_call_back=_c2.hitch(this,this._complete_statement_excel_call);},postCreate:function(){this.customersourceid.set("store",this._customersources);this.customersourceid.set("value",-1);this.country.set("store",this._countries);this.customerstatus.set("store",this._customerstatus);this.customerstatus.set("value",0);this.inherited(arguments);var _ca=[{label:"Customer",className:"dgrid-column-status-large",field:"customername"},{label:"Logged",className:"dgrid-column-status-small",field:"auditdate"},{label:"Date",className:"dgrid-column-date",field:"invoice_date"},{label:"Text",className:"dgrid-column-status-large",field:"audittext"},{label:"Charge",className:"dgrid-column-money",field:"charge",formatter:_c1.display_money},{label:"Paid",className:"dgrid-column-money",field:"paid",formatter:_c1.display_money},{label:"Un All.",className:"dgrid-column-money",field:"unallocated",formatter:_c1.display_money},{label:"Inv/Cd Nbr",className:"dgrid-column-nbr-right",field:"invoicenbr"},{label:"Month",className:"dgrid-column-status-small",field:"payment_month_display"},{label:" ",className:"dgrid-column-type-boolean",field:"documentpresent",formatter:_c1.document_exists},{label:"Reason",className:"dgrid-column-status-large",field:"reason"}];var _cb=[{label:"Customer",className:"dgrid-column-status-large",field:"customername"},{label:"Contact",className:"dgrid-column-status-large",field:"contactname"},{label:"Status",className:"dgrid-column-status-small",field:"customerstatusname"}];this.view1=new _c9({columns:_ca,selectionMode:"single",store:this.financial_data,sort:[{attribute:"auditdate",descending:true}],query:{}});this.view2=new _c9({columns:_cb,selectionMode:"single",store:this.customers_data,sort:[{attribute:"customername"}],query:{}});this.financialgrid.set("content",this.view1);this.view1.on(".dgrid-cell:click",_c2.hitch(this,this._OnSelectFinancial));this.customersgrid.set("content",this.view2);},_change_partner:function(){this.customersourceid.get("value");this._customersourceid=this.customersourceid;_c0.post("/partners/get_partner",_c1.make_params({data:{"customersourceid":this.customersourceid}})).then(this._get_partner_call_back);},_update_partner:function(){if(_c1.form_validator(this.DetailsForm)==false){alert("Not all required field filled in");return false;}var _cc=this.DetailsForm.get("value");_cc["customersourceid"]=this.customersourceid.get("value");_c0.post("/partners/update_partner",_c1.make_params({data:_cc})).then(this._update_partner_call_back);},_get_partner_call:function(_cd){if(_cd.success=="OK"){this.name.set("value",_cd.data.name);this.contactname.set("value",_cd.data.contactname);this.address1.set("value",_cd.data.address1);this.address2.set("value",_cd.data.address2);this.county.set("value",_cd.data.county);this.postcode.set("value",_cd.data.postcode);this.townname.set("value",_cd.data.townname);this.country.set("value",_cd.data.country);this.email.set("value",_cd.data.email);this.phone.set("value",_cd.data.phone);var _ce=this._get_filters();var _cf=_c2.mixin(_c1.get_prevent_cache(),_ce);this.view1.set("query",_cf);this.view2.set("query",_cf);}else{alert("Problem Loading Partner");}},_update_partner_call:function(_d0){if(_d0.success=="OK"){alert("Partner Updated");}else{alert("Problem Updating Partner");}},_listing_report:function(){var _d1={};_d1["reportoutputtypeid"]=0;_d1["reporttemplateid"]=28;_d1["customersourceid"]=this.customersourceid.get("value");_d1["customerid"]=-1;_d1["customerstatusid"]=this.customerstatus.get("value");this.listing_report_dlg.show();this.listing_report_node.SetCompleted(this._complete_listing_call_back);this.listing_report_node.start(_d1);},_listing_report_excel:function(){var _d2={};_d2["reportoutputtypeid"]=4;_d2["reporttemplateid"]=28;_d2["customersourceid"]=this.customersourceid.get("value");_d2["customerid"]=-1;_d2["customerstatusid"]=this.customerstatus.get("value");this.listing_report_dlg.show();this.listing_report_node.SetCompleted(this._complete_listing_excel_call_back);this.listing_report_node.start(_d2);},_complete_listing_call:function(){this.listingreportbtn.cancel();this.listing_report_dlg.hide();},_complete_listing_excel_call:function(){this.listingreportexcelbtn.cancel();this.listing_report_dlg.hide();},_statement_report:function(){var _d3={};_d3["reportoutputtypeid"]=0;_d3["reporttemplateid"]=29;_d3["customersourceid"]=this.customersourceid.get("value");_d3["customerid"]=-1;this.statement_report_dlg.show();this.statement_report_node.SetCompleted(this._complete_statement_call_back);this.statement_report_node.start(_d3);},_statement_report_excel:function(){var _d4={};_d4["reportoutputtypeid"]=4;_d4["reporttemplateid"]=29;_d4["customersourceid"]=this.customersourceid.get("value");_d4["customerid"]=-1;this.statement_report_dlg.show();this.statement_report_node.SetCompleted(this._complete_statement_excel_call_back);this.statement_report_node.start(_d4);},_complete_statement_call:function(){this.statementreportbtn.cancel();this.statement_report_dlg.hide();},_complete_statement_excel_call:function(){this.statementreportexcelbtn.cancel();this.statement_report_dlg.hide();},_OnSelectFinancial:function(e){var _d5=this.view1.cell(e);this._row=_d5.row.data;if(_d5.column.id==9&&this._row.documentpresent==true){if(this._row.audittypeid==17){_c5.set(this.htmlform_audittrailid,"value",this._row.audittrailid);_c5.set(this.htmlform,"action","/audit/viewhtml/"+this._row.audittrailid);this.htmlform.submit();}else{_c5.set(this.documentform_audittrailid,"value",this._row.audittrailid);_c5.set(this.documentform,"action","/audit/viewpdf/"+this._row.audittrailid);this.documentform.submit();}}else{var _d6=_c2.mixin(_c1.get_prevent_cache(),{keyid:this._row.keyid});this.view2.set("query",_d6);this.zone.selectChild((this._row.keyid==null)?this.blank_view:this.allocations_view);if(this._row.keyid==null){_c4.add(this.reallocate,"prmaxhidden");}else{_c4.remove(this.reallocate,"prmaxhidden");}}},_getFilterAttr:function(){return this._get_filters();},_get_filters:function(){var _d7={customersourceid:this._customersourceid,daterange:this.date_search.get("value"),unallocated:this.unallocated.get("checked")};return _d7;},_get_filters_customers:function(){var _d8={customersourceid:this._customersourceid,customerstatus:this.customerstatus.get("value")};return _d8;},_FilterBy:function(){var _d9=this._get_filters();var _da=_c2.mixin(_c1.get_prevent_cache(),_d9);this.view1.set("query",_da);},_FilterBy_Customers:function(){var _db=this._get_filters_customers();var _dc=_c2.mixin(_c1.get_prevent_cache(),_db);this.view2.set("query",_dc);}});});},"control/customer/manual_allocate_amount":function(){define(["dojo/_base/declare","ttl/BaseWidgetAMD","dojo/text!../customer/templates/manual_allocate_amount.html","dojo/request","ttl/utilities2","dojo/_base/lang","dojo/topic","dojo/dom-class","dojo/dom-attr","dojo/store/util/SimpleQueryEngine","dijit/Dialog","dijit/form/CurrencyTextBox","dijit/form/Button"],function(_dd,_de,_df,_e0,_e1,_e2,_e3,_e4,_e5,_e6){return _dd("control.customer.manual_allocate_amount",[_de],{templateString:_df,gutters:false,setValues:function(_e7,_e8){this.pctrl=_e7;this.clear();this.toallocate_value.constraints.max=_e8;this.popup_view.show();},clear:function(){this.toallocate_value.set("value",0.01);},_close:function(){this.popup_view.hide();this.clear();},_allocate:function(){if(this.toallocate_value.isValid()==false){return;}if(this.pctrl._allocted_row.unpaidamount_display<this.toallocate_value.get("value")){alert("Over Allocation");return false;}this.pctrl._allocted_row.allocated=this.toallocate_value.get("value");this.pctrl._allocation.put(this.pctrl._allocted_row);this.pctrl._onBlur();this._close();}});});},"dijit/Viewport":function(){define(["dojo/Evented","dojo/on","dojo/domReady","dojo/sniff","dojo/window"],function(_e9,on,_ea,has,_eb){var _ec=new _e9();var _ed;_ea(function(){var _ee=_eb.getBox();_ec._rlh=on(window,"resize",function(){var _ef=_eb.getBox();if(_ee.h==_ef.h&&_ee.w==_ef.w){return;}_ee=_ef;_ec.emit("resize");});if(has("ie")==8){var _f0=screen.deviceXDPI;setInterval(function(){if(screen.deviceXDPI!=_f0){_f0=screen.deviceXDPI;_ec.emit("resize");}},500);}if(has("ios")){on(document,"focusin",function(evt){_ed=evt.target;});on(document,"focusout",function(evt){_ed=null;});}});_ec.getEffectiveBox=function(doc){var box=_eb.getBox(doc);var tag=_ed&&_ed.tagName&&_ed.tagName.toLowerCase();if(has("ios")&&_ed&&!_ed.readOnly&&(tag=="textarea"||(tag=="input"&&/^(color|email|number|password|search|tel|text|url)$/.test(_ed.type)))){box.h*=(orientation==0||orientation==180?0.66:0.4);var _f1=_ed.getBoundingClientRect();box.h=Math.max(box.h,_f1.top+_f1.height);}return box;};return _ec;});},"dijit/Dialog":function(){define(["require","dojo/_base/array","dojo/aspect","dojo/_base/declare","dojo/Deferred","dojo/dom","dojo/dom-class","dojo/dom-geometry","dojo/dom-style","dojo/_base/fx","dojo/i18n","dojo/keys","dojo/_base/lang","dojo/on","dojo/ready","dojo/sniff","dojo/window","dojo/dnd/Moveable","dojo/dnd/TimedMoveable","./focus","./_base/manager","./_Widget","./_TemplatedMixin","./_CssStateMixin","./form/_FormMixin","./_DialogMixin","./DialogUnderlay","./layout/ContentPane","./layout/utils","dojo/text!./templates/Dialog.html","./a11yclick","dojo/i18n!./nls/common"],function(_f2,_f3,_f4,_f5,_f6,dom,_f7,_f8,_f9,fx,_fa,_fb,_fc,on,_fd,has,_fe,_ff,_100,_101,_102,_103,_104,_105,_106,_107,_108,_109,_10a,_10b){var _10c=new _f6();_10c.resolve(true);function nop(){};var _10d=_f5("dijit._DialogBase"+(has("dojo-bidi")?"_NoBidi":""),[_104,_106,_107,_105],{templateString:_10b,baseClass:"dijitDialog",cssStateNodes:{closeButtonNode:"dijitDialogCloseIcon"},_setTitleAttr:{node:"titleNode",type:"innerHTML"},open:false,duration:_102.defaultDuration,refocus:true,autofocus:true,_firstFocusItem:null,_lastFocusItem:null,draggable:true,_setDraggableAttr:function(val){this._set("draggable",val);},maxRatio:0.9,closable:true,_setClosableAttr:function(val){this.closeButtonNode.style.display=val?"":"none";this._set("closable",val);},postMixInProperties:function(){var _10e=_fa.getLocalization("dijit","common");_fc.mixin(this,_10e);this.inherited(arguments);},postCreate:function(){_f9.set(this.domNode,{display:"none",position:"absolute"});this.ownerDocumentBody.appendChild(this.domNode);this.inherited(arguments);_f4.after(this,"onExecute",_fc.hitch(this,"hide"),true);_f4.after(this,"onCancel",_fc.hitch(this,"hide"),true);this._modalconnects=[];},onLoad:function(){this.resize();this._position();if(this.autofocus&&_10f.isTop(this)){this._getFocusItems();_101.focus(this._firstFocusItem);}this.inherited(arguments);},focus:function(){this._getFocusItems();_101.focus(this._firstFocusItem);},_endDrag:function(){var _110=_f8.position(this.domNode),_111=_fe.getBox(this.ownerDocument);_110.y=Math.min(Math.max(_110.y,0),(_111.h-_110.h));_110.x=Math.min(Math.max(_110.x,0),(_111.w-_110.w));this._relativePosition=_110;this._position();},_setup:function(){var node=this.domNode;if(this.titleBar&&this.draggable){this._moveable=new ((has("ie")==6)?_100:_ff)(node,{handle:this.titleBar});_f4.after(this._moveable,"onMoveStop",_fc.hitch(this,"_endDrag"),true);}else{_f7.add(node,"dijitDialogFixed");}this.underlayAttrs={dialogId:this.id,"class":_f3.map(this["class"].split(/\s/),function(s){return s+"_underlay";}).join(" "),_onKeyDown:_fc.hitch(this,"_onKey"),ownerDocument:this.ownerDocument};},_size:function(){this.resize();},_position:function(){if(!_f7.contains(this.ownerDocumentBody,"dojoMove")){var node=this.domNode,_112=_fe.getBox(this.ownerDocument),p=this._relativePosition,bb=_f8.position(node),l=Math.floor(_112.l+(p?Math.min(p.x,_112.w-bb.w):(_112.w-bb.w)/2)),t=Math.floor(_112.t+(p?Math.min(p.y,_112.h-bb.h):(_112.h-bb.h)/2));_f9.set(node,{left:l+"px",top:t+"px"});}},_onKey:function(evt){if(evt.keyCode==_fb.TAB){this._getFocusItems();var node=evt.target;if(this._firstFocusItem==this._lastFocusItem){evt.stopPropagation();evt.preventDefault();}else{if(node==this._firstFocusItem&&evt.shiftKey){_101.focus(this._lastFocusItem);evt.stopPropagation();evt.preventDefault();}else{if(node==this._lastFocusItem&&!evt.shiftKey){_101.focus(this._firstFocusItem);evt.stopPropagation();evt.preventDefault();}}}}else{if(this.closable&&evt.keyCode==_fb.ESCAPE){this.onCancel();evt.stopPropagation();evt.preventDefault();}}},show:function(){if(this.open){return _10c.promise;}if(!this._started){this.startup();}if(!this._alreadyInitialized){this._setup();this._alreadyInitialized=true;}if(this._fadeOutDeferred){this._fadeOutDeferred.cancel();_10f.hide(this);}var win=_fe.get(this.ownerDocument);this._modalconnects.push(on(win,"scroll",_fc.hitch(this,"resize",null)));this._modalconnects.push(on(this.domNode,"keydown",_fc.hitch(this,"_onKey")));_f9.set(this.domNode,{opacity:0,display:""});this._set("open",true);this._onShow();this.resize();this._position();var _113;this._fadeInDeferred=new _f6(_fc.hitch(this,function(){_113.stop();delete this._fadeInDeferred;}));this._fadeInDeferred.then(undefined,nop);var _114=this._fadeInDeferred.promise;_113=fx.fadeIn({node:this.domNode,duration:this.duration,beforeBegin:_fc.hitch(this,function(){_10f.show(this,this.underlayAttrs);}),onEnd:_fc.hitch(this,function(){if(this.autofocus&&_10f.isTop(this)){this._getFocusItems();_101.focus(this._firstFocusItem);}this._fadeInDeferred.resolve(true);delete this._fadeInDeferred;})}).play();return _114;},hide:function(){if(!this._alreadyInitialized||!this.open){return _10c.promise;}if(this._fadeInDeferred){this._fadeInDeferred.cancel();}var _115;this._fadeOutDeferred=new _f6(_fc.hitch(this,function(){_115.stop();delete this._fadeOutDeferred;}));this._fadeOutDeferred.then(undefined,nop);this._fadeOutDeferred.then(_fc.hitch(this,"onHide"));var _116=this._fadeOutDeferred.promise;_115=fx.fadeOut({node:this.domNode,duration:this.duration,onEnd:_fc.hitch(this,function(){this.domNode.style.display="none";_10f.hide(this);this._fadeOutDeferred.resolve(true);delete this._fadeOutDeferred;})}).play();if(this._scrollConnected){this._scrollConnected=false;}var h;while(h=this._modalconnects.pop()){h.remove();}if(this._relativePosition){delete this._relativePosition;}this._set("open",false);return _116;},resize:function(dim){if(this.domNode.style.display!="none"){this._checkIfSingleChild();if(!dim){if(this._shrunk){if(this._singleChild){if(typeof this._singleChildOriginalStyle!="undefined"){this._singleChild.domNode.style.cssText=this._singleChildOriginalStyle;delete this._singleChildOriginalStyle;}}_f3.forEach([this.domNode,this.containerNode,this.titleBar,this.actionBarNode],function(node){if(node){_f9.set(node,{position:"static",width:"auto",height:"auto"});}});this.domNode.style.position="absolute";}var _117=_fe.getBox(this.ownerDocument);_117.w*=this.maxRatio;_117.h*=this.maxRatio;var bb=_f8.position(this.domNode);if(bb.w>=_117.w||bb.h>=_117.h){dim={w:Math.min(bb.w,_117.w),h:Math.min(bb.h,_117.h)};this._shrunk=true;}else{this._shrunk=false;}}if(dim){_f8.setMarginBox(this.domNode,dim);var _118=[];if(this.titleBar){_118.push({domNode:this.titleBar,region:"top"});}if(this.actionBarNode){_118.push({domNode:this.actionBarNode,region:"bottom"});}var _119={domNode:this.containerNode,region:"center"};_118.push(_119);var _11a=_10a.marginBox2contentBox(this.domNode,dim);_10a.layoutChildren(this.domNode,_11a,_118);if(this._singleChild){var cb=_10a.marginBox2contentBox(this.containerNode,_119);this._singleChild.resize({w:cb.w,h:cb.h});}else{this.containerNode.style.overflow="auto";this._layoutChildren();}}else{this._layoutChildren();}if(!has("touch")&&!dim){this._position();}}},_layoutChildren:function(){_f3.forEach(this.getChildren(),function(_11b){if(_11b.resize){_11b.resize();}});},destroy:function(){if(this._fadeInDeferred){this._fadeInDeferred.cancel();}if(this._fadeOutDeferred){this._fadeOutDeferred.cancel();}if(this._moveable){this._moveable.destroy();}var h;while(h=this._modalconnects.pop()){h.remove();}_10f.hide(this);this.inherited(arguments);}});if(has("dojo-bidi")){_10d=_f5("dijit._DialogBase",_10d,{_setTitleAttr:function(_11c){this._set("title",_11c);this.titleNode.innerHTML=_11c;this.applyTextDir(this.titleNode);},_setTextDirAttr:function(_11d){if(this._created&&this.textDir!=_11d){this._set("textDir",_11d);this.set("title",this.title);}}});}var _11e=_f5("dijit.Dialog",[_109,_10d],{});_11e._DialogBase=_10d;var _10f=_11e._DialogLevelManager={_beginZIndex:950,show:function(_11f,_120){ds[ds.length-1].focus=_101.curNode;var _121=ds[ds.length-1].dialog?ds[ds.length-1].zIndex+2:_11e._DialogLevelManager._beginZIndex;_f9.set(_11f.domNode,"zIndex",_121);_108.show(_120,_121-1);ds.push({dialog:_11f,underlayAttrs:_120,zIndex:_121});},hide:function(_122){if(ds[ds.length-1].dialog==_122){ds.pop();var pd=ds[ds.length-1];if(ds.length==1){_108.hide();}else{_108.show(pd.underlayAttrs,pd.zIndex-1);}if(_122.refocus){var _123=pd.focus;if(pd.dialog&&(!_123||!dom.isDescendant(_123,pd.dialog.domNode))){pd.dialog._getFocusItems();_123=pd.dialog._firstFocusItem;}if(_123){try{_123.focus();}catch(e){}}}}else{var idx=_f3.indexOf(_f3.map(ds,function(elem){return elem.dialog;}),_122);if(idx!=-1){ds.splice(idx,1);}}},isTop:function(_124){return ds[ds.length-1].dialog==_124;}};var ds=_11e._dialogStack=[{dialog:null,focus:null,underlayAttrs:null}];_101.watch("curNode",function(attr,_125,node){var _126=ds[ds.length-1].dialog;if(node&&_126&&!_126._fadeOutDeferred&&node.ownerDocument==_126.ownerDocument){do{if(node==_126.domNode||_f7.contains(node,"dijitPopup")){return;}}while(node=node.parentNode);_126.focus();}});if(has("dijit-legacy-requires")){_fd(0,function(){var _127=["dijit/TooltipDialog"];_f2(_127);});}return _11e;});},"dojox/html/metrics":function(){define(["dojo/_base/kernel","dojo/_base/lang","dojo/_base/sniff","dojo/ready","dojo/_base/unload","dojo/_base/window","dojo/dom-geometry"],function(_128,lang,has,_129,_12a,_12b,_12c){var dhm=lang.getObject("dojox.html.metrics",true);var _12d=lang.getObject("dojox");dhm.getFontMeasurements=function(){var _12e={"1em":0,"1ex":0,"100%":0,"12pt":0,"16px":0,"xx-small":0,"x-small":0,"small":0,"medium":0,"large":0,"x-large":0,"xx-large":0};var _12f;if(has("ie")){_12f=_12b.doc.documentElement.style.fontSize||"";if(!_12f){_12b.doc.documentElement.style.fontSize="100%";}}var div=_12b.doc.createElement("div");var ds=div.style;ds.position="absolute";ds.left="-100px";ds.top="0";ds.width="30px";ds.height="1000em";ds.borderWidth="0";ds.margin="0";ds.padding="0";ds.outline="0";ds.lineHeight="1";ds.overflow="hidden";_12b.body().appendChild(div);for(var p in _12e){ds.fontSize=p;_12e[p]=Math.round(div.offsetHeight*12/16)*16/12/1000;}if(has("ie")){_12b.doc.documentElement.style.fontSize=_12f;}_12b.body().removeChild(div);div=null;return _12e;};var _130=null;dhm.getCachedFontMeasurements=function(_131){if(_131||!_130){_130=dhm.getFontMeasurements();}return _130;};var _132=null,_133={};dhm.getTextBox=function(text,_134,_135){var m,s;if(!_132){m=_132=_12b.doc.createElement("div");var c=_12b.doc.createElement("div");c.appendChild(m);s=c.style;s.overflow="scroll";s.position="absolute";s.left="0px";s.top="-10000px";s.width="1px";s.height="1px";s.visibility="hidden";s.borderWidth="0";s.margin="0";s.padding="0";s.outline="0";_12b.body().appendChild(c);}else{m=_132;}m.className="";s=m.style;s.borderWidth="0";s.margin="0";s.padding="0";s.outline="0";if(arguments.length>1&&_134){for(var i in _134){if(i in _133){continue;}s[i]=_134[i];}}if(arguments.length>2&&_135){m.className=_135;}m.innerHTML=text;var box=_12c.position(m);box.w=m.parentNode.scrollWidth;return box;};var _136={w:16,h:16};dhm.getScrollbar=function(){return {w:_136.w,h:_136.h};};dhm._fontResizeNode=null;dhm.initOnFontResize=function(_137){var f=dhm._fontResizeNode=_12b.doc.createElement("iframe");var fs=f.style;fs.position="absolute";fs.width="5em";fs.height="10em";fs.top="-10000px";fs.display="none";if(has("ie")){f.onreadystatechange=function(){if(f.contentWindow.document.readyState=="complete"){f.onresize=f.contentWindow.parent[_12d._scopeName].html.metrics._fontresize;}};}else{f.onload=function(){f.contentWindow.onresize=f.contentWindow.parent[_12d._scopeName].html.metrics._fontresize;};}f.setAttribute("src","javascript:'<html><head><script>if(\"loadFirebugConsole\" in window){window.loadFirebugConsole();}</script></head><body></body></html>'");_12b.body().appendChild(f);dhm.initOnFontResize=function(){};};dhm.onFontResize=function(){};dhm._fontresize=function(){dhm.onFontResize();};_12a.addOnUnload(function(){var f=dhm._fontResizeNode;if(f){if(has("ie")&&f.onresize){f.onresize=null;}else{if(f.contentWindow&&f.contentWindow.onresize){f.contentWindow.onresize=null;}}dhm._fontResizeNode=null;}});_129(function(){try{var n=_12b.doc.createElement("div");n.style.cssText="top:0;left:0;width:100px;height:100px;overflow:scroll;position:absolute;visibility:hidden;";_12b.body().appendChild(n);_136.w=n.offsetWidth-n.clientWidth;_136.h=n.offsetHeight-n.clientHeight;_12b.body().removeChild(n);delete n;}catch(e){}if("fontSizeWatch" in _128.config&&!!_128.config.fontSizeWatch){dhm.initOnFontResize();}});return dhm;});},"control/customer/view_partner":function(){define(["dojo/_base/declare","ttl/BaseWidgetAMD","dojo/text!../customer/templates/view_partner.html","dijit/layout/BorderContainer","dojo/request","ttl/utilities2","dojo/_base/lang","dojo/topic","dojo/dom-class","dojo/string","control/customer/users","control/customer/partner_options","control/customer/details",],function(_138,_139,_13a,_13b,_13c,_13d,lang,_13e,_13f,_140){return _138("control.customer.view_partner",[_139,_13b],{templateString:_13a,gutters:false,mainViewString:"/customer/summary?icustomerid=${icustomerid}",constructor:function(){this._load_details_call_back=lang.hitch(this,this._load_details_call);this._error_call_back=lang.hitch(this,this._error_call);_13e.subscribe("/customer/p_upd",lang.hitch(this,this._refresh_event));this._icustomerid=null;},postCreate:function(){},load:function(_141,_142){this._display_func=_142;this._icustomerid=_141;_13c.post("/customer/get_internal",_13d.make_params({data:{icustomerid:_141}})).then(this._load_details_call_back,this._error_call_back);this.view_summary.set("href",_140.substitute(this.mainViewString,{icustomerid:_141}));},_load_details_call:function(_143){if(_143.success=="OK"){this.view_users.load(this._icustomerid);this.view_options.load(_143.data);this.view_details.load(_143.data);this._display_func("view_partner");}else{}},_error_call:function(){alert(arguments[0]);},clear:function(){this.view_summary.set("content","");},_refresh_event:function(){if(this._icustomerid!=null){this.view_summary.set("href",_140.substitute(this.mainViewString,{icustomerid:this._icustomerid}));}}});});},"dijit/MenuSeparator":function(){define(["dojo/_base/declare","dojo/dom","./_WidgetBase","./_TemplatedMixin","./_Contained","dojo/text!./templates/MenuSeparator.html"],function(_144,dom,_145,_146,_147,_148){return _144("dijit.MenuSeparator",[_145,_146,_147],{templateString:_148,buildRendering:function(){this.inherited(arguments);dom.setSelectable(this.domNode,false);},isFocusable:function(){return false;}});});},"dijit/form/ToggleButton":function(){define(["dojo/_base/declare","dojo/_base/kernel","./Button","./_ToggleButtonMixin"],function(_149,_14a,_14b,_14c){return _149("dijit.form.ToggleButton",[_14b,_14c],{baseClass:"dijitToggleButton",setChecked:function(_14d){_14a.deprecated("setChecked("+_14d+") is deprecated. Use set('checked',"+_14d+") instead.","","2.0");this.set("checked",_14d);}});});},"dijit/CheckedMenuItem":function(){define(["dojo/_base/declare","dojo/dom-class","./MenuItem","dojo/text!./templates/CheckedMenuItem.html","./hccss"],function(_14e,_14f,_150,_151){return _14e("dijit.CheckedMenuItem",_150,{baseClass:"dijitMenuItem dijitCheckedMenuItem",templateString:_151,checked:false,_setCheckedAttr:function(_152){this.domNode.setAttribute("aria-checked",_152?"true":"false");this._set("checked",_152);},iconClass:"",role:"menuitemcheckbox",checkedChar:"&#10003;",onChange:function(){},_onClick:function(evt){if(!this.disabled){this.set("checked",!this.checked);this.onChange(this.checked);}this.onClick(evt);}});});},"dgrid/_StoreMixin":function(){define(["dojo/_base/kernel","dojo/_base/declare","dojo/_base/lang","dojo/_base/Deferred","dojo/on","dojo/aspect","put-selector/put"],function(_153,_154,lang,_155,_156,_157,put){function noop(_158){return _158;};function _159(err){if(typeof err!=="object"){err=new Error(err);}else{if(err.dojoType==="cancel"){return;}}err.grid=this;if(_156.emit(this.domNode,"dgrid-error",{grid:this,error:err,cancelable:true,bubbles:true})){}};return _154(null,{store:null,query:null,queryOptions:null,getBeforePut:true,noDataMessage:"",loadingMessage:"",constructor:function(){this.query={};this.queryOptions={};this.dirty={};this._updating={};this._columnsWithSet={};_157.before(this,"configStructure",lang.hitch(this,function(){this._columnsWithSet={};}));},postCreate:function(){this.inherited(arguments);if(this.store){this._updateNotifyHandle(this.store);}},destroy:function(){this.inherited(arguments);if(this._notifyHandle){this._notifyHandle.remove();}},_configColumn:function(_15a){if(_15a.set){this._columnsWithSet[_15a.field]=_15a;}this.inherited(arguments);},_updateNotifyHandle:function(_15b){if(this._notifyHandle){this._notifyHandle.remove();delete this._notifyHandle;}if(_15b&&typeof _15b.notify==="function"){this._notifyHandle=_157.after(_15b,"notify",lang.hitch(this,"_onNotify"),true);var sort=this.get("sort");if(!sort||!sort.length){}}},_setStore:function(_15c,_15d,_15e){this._updateNotifyHandle(_15c);this.store=_15c;this.dirty={};this.set("query",_15d,_15e);},_setQuery:function(_15f,_160){var sort=_160&&_160.sort;this.query=_15f!==undefined?_15f:this.query;this.queryOptions=_160||this.queryOptions;sort?this.set("sort",sort):this.refresh();},setStore:function(_161,_162,_163){_153.deprecated("setStore(...)","use set(\"store\", ...) instead","dgrid 0.4");this.set("store",_161,_162,_163);},setQuery:function(_164,_165){_153.deprecated("setQuery(...)","use set(\"query\", ...) instead","dgrid 0.4");this.set("query",_164,_165);},_getQueryOptions:function(){var _166=lang.delegate(this.queryOptions,{});if(typeof (this._sort)==="function"||this._sort.length){_166.sort=this._sort;}return _166;},_getQuery:function(){var q=this.query;return typeof q=="object"&&q!=null?lang.delegate(q,{}):q;},_setSort:function(_167,_168){if(this.store){this._lastCollection=null;}this.inherited(arguments);},_onNotify:function(_169,_16a){this.inherited(arguments);if(_169&&this._numObservers<1){this.refresh({keepScrollPosition:true});}},refresh:function(){var _16b=this.inherited(arguments);if(!this.store){this.noDataNode=put(this.contentNode,"div.dgrid-no-data");this.noDataNode.innerHTML=this.noDataMessage;}return _16b;},renderArray:function(){var self=this;var rows=this.inherited(arguments);if(!this.store){_155.when(rows,function(_16c){if(_16c.length&&self.noDataNode){put(self.noDataNode,"!");}});}return rows;},insertRow:function(_16d,_16e,_16f,i,_170){var _171=this.store,_172=this.dirty,id=_171&&_171.getIdentity(_16d),_173;if(id in _172&&!(id in this._updating)){_173=_172[id];}if(_173){_16d=lang.delegate(_16d,_173);}return this.inherited(arguments);},updateDirty:function(id,_174,_175){var _176=this.dirty,_177=_176[id];if(!_177){_177=_176[id]={};}_177[_174]=_175;},setDirty:function(id,_178,_179){_153.deprecated("setDirty(...)","use updateDirty() instead","dgrid 0.4");this.updateDirty(id,_178,_179);},save:function(){var self=this,_17a=this.store,_17b=this.dirty,dfd=new _155(),_17c=dfd.promise,_17d=function(id){var data;return (self.getBeforePut||!(data=self.row(id).data))?function(){return _17a.get(id);}:function(){return data;};};function _17e(id,_17f){return function(_180){var _181=self._columnsWithSet,_182=self._updating,key,data;if(typeof _180.set==="function"){_180.set(_17f);}else{for(key in _17f){_180[key]=_17f[key];}}for(key in _181){data=_181[key].set(_180);if(data!==undefined){_180[key]=data;}}_182[id]=true;return _155.when(_17a.put(_180),function(){delete _17b[id];delete _182[id];});};};for(var id in _17b){var put=_17e(id,_17b[id]);_17c=_17c.then(_17d(id)).then(put);}dfd.resolve();return _17c;},revert:function(){this.dirty={};this.refresh();},_trackError:function(func){var _183;if(typeof func=="string"){func=lang.hitch(this,func);}try{_183=func();}catch(err){_159.call(this,err);}return _155.when(_183,noop,lang.hitch(this,_159));},newRow:function(){var row=this.inherited(arguments);if(this.noDataNode){put(this.noDataNode,"!");delete this.noDataNode;}return row;},removeRow:function(_184,_185){var row={element:_184};if(!_185&&this.noDataMessage&&(this.up(row).element===_184)&&(this.down(row).element===_184)){this.noDataNode=put(this.contentNode,"div.dgrid-no-data");this.noDataNode.innerHTML=this.noDataMessage;}return this.inherited(arguments);}});});},"control/customer/financiallog":function(){define(["dojo/_base/declare","ttl/BaseWidgetAMD","dojo/text!../customer/templates/financiallog.html","dijit/layout/BorderContainer","dojo/request","ttl/utilities2","dojo/_base/lang","dojo/topic","dojo/dom-class","dojo/dom-attr","dojo/data/ItemFileWriteStore","dojo/data/ItemFileReadStore","ttl/grid/Grid","ttl/store/JsonRest","dojo/store/Observable","dijit/layout/ContentPane","dijit/form/DateTextBox","dijit/form/CheckBox","dijit/form/Button","dijit/layout/StackContainer","control/customer/reallocation","dojox/grid/DataGrid"],function(_186,_187,_188,_189,_18a,_18b,lang,_18c,_18d,_18e,_18f,_190,Grid,_191,_192){return _186("control.customer.financiallog",[_187],{templateString:_188,gutters:false,constructor:function(){this.financial_data=new _192(new _191({target:"/audit/customer_financial",idProperty:"audittrailid",onError:_18b.globalerrorchecker,clearOnClose:true,nocallback:true,urlPreventCache:true}));this.allocation_data=new _192(new _191({target:"/allocation/allocation_details",idProperty:"customerpaymentallocationid",onError:_18b.globalerrorchecker,clearOnClose:true,nocallback:true,urlPreventCache:true}));this._DeleteAlocationCallBack=lang.hitch(this,this._DeleteAlocationCall);this._LoadBalanceCallBack=lang.hitch(this,this._LoadBalanceCall);_18c.subscribe(PRCOMMON.Events.Financial_ReLoad,lang.hitch(this,this._RefreshView));},postCreate:function(){this.inherited(arguments);var _193=[{label:"Logged",className:"dgrid-column-status-small",field:"auditdate"},{label:"Date",className:"dgrid-column-date",field:"invoice_date"},{label:"Text",className:"dgrid-column-status-large",field:"audittext"},{label:"Charge",className:"dgrid-column-money",field:"charge",formatter:_18b.display_money},{label:"Paid",className:"dgrid-column-money",field:"paid",formatter:_18b.display_money},{label:"Un All.",className:"dgrid-column-money",field:"unallocated",formatter:_18b.display_money},{label:"Inv/Cd Nbr",className:"dgrid-column-nbr-right",field:"invoicenbr"},{label:"Month",className:"dgrid-column-status-small",field:"payment_month_display"},{label:" ",className:"dgrid-column-type-boolean",field:"documentpresent",formatter:_18b.document_exists},{label:"Reason",className:"dgrid-column-status-large",field:"reason"}];var _194=[{label:"Type",className:"dgrid-column-status",field:"type"},{label:"Allocated",className:"dgrid-column-money",field:"amount",formatter:_18b.display_money},{label:"Value",className:"dgrid-column-money",field:"amount",formatter:_18b.display_money},{label:"Inv Id",className:"dgrid-column-nbr-right",field:"invoicenbr",},{label:"Date",className:"dgrid-column-date",field:"invoicedate"},{label:" ",className:"dgrid-column-type-boolean",formatter:_18b.delete_row_ctrl}];this.view1=new Grid({columns:_193,selectionMode:"single",store:this.financial_data,sort:[{attribute:"auditdate",descending:true}],query:{}});this.view2=new Grid({columns:_194,selectionMode:"single",store:this.allocation_data,sort:[{attribute:"customerpaymentallocationid",descending:true}],query:{}});var td=new Date();var t=new Date(td.getTime()-370*24*60*60*1000);this.filterdate.set("value",t);this.financialgrid.set("content",this.view1);this.allocations_grid.set("content",this.view2);this.view1.on(".dgrid-cell:click",lang.hitch(this,this._OnSelectFinancial));this.view2.on(".dgrid-cell:click",lang.hitch(this,this._OnSelectAllocation));},load:function(_195){this._customerid=_195;var _196={icustomerid:this._customerid,unallocated:this.unallocated.get("checked"),moneyonly:this.moneyonly.get("checked")};var _197=lang.mixin(_18b.get_prevent_cache(),_196);this.view1.set("query",_197);this._GetBalance();},resize:function(){this.inherited(arguments);this.borderControl.resize(arguments[0]);},_OnSelectFinancial:function(e){var cell=this.view1.cell(e);this._row=cell.row.data;if(cell.column.id==8&&this._row.documentpresent==true){if(this._row.audittypeid==17){_18e.set(this.htmlform_audittrailid,"value",this._row.audittrailid);_18e.set(this.htmlform,"action","/audit/viewhtml/"+this._row.audittrailid);this.htmlform.submit();}else{_18e.set(this.documentform_audittrailid,"value",this._row.audittrailid);_18e.set(this.documentform,"action","/audit/viewpdf/"+this._row.audittrailid);this.documentform.submit();}}else{var _198=lang.mixin(_18b.get_prevent_cache(),{keyid:this._row.keyid});this.view2.set("query",_198);this.zone.selectChild((this._row.keyid==null)?this.blank_view:this.allocations_view);if(this._row.keyid==null){_18d.add(this.reallocate,"prmaxhidden");}else{_18d.remove(this.reallocate,"prmaxhidden");}}},_DeleteAlocationCall:function(_199){if(_199.success=="OK"){this.allocation_data.remove(this._alloc_row.customerpaymentallocationid);var _19a=lang.mixin(_18b.get_prevent_cache(),{icustomerid:this._customerid});this.view1.set("query",_19a);alert("Allocation Deleted");}else{alert("Problem Deleting Allocation");}},_OnSelectAllocation:function(e){var cell=this.view2.cell(e);this._alloc_row=cell.row.data;if(cell.column.id==5){if(confirm("Delete Allocation")){_18a.post("/allocation/allocation_delete",_18b.make_params({data:{customerpaymentallocationid:this._alloc_row.customerpaymentallocationid}})).then(this._DeleteAlocationCallBack);}}},_ReAllocate:function(){this.reallocation.Load(this._customerid,this._row.keyid);},_RefreshView:function(){var _19b={icustomerid:this._customerid,filter_date:_18b.to_json_date(this.filterdate.get("value")),unallocated:this.unallocated.get("value"),moneyonly:this.moneyonly.get("value")};var _19c=lang.mixin(_18b.get_prevent_cache(),_19b);this.view1.set("query",_19c);if(this._row!=null&&this._row.keyid!=null){var _19c=lang.mixin(_18b.get_prevent_cache(),{keyid:this._row.keyid});}this.view2.set("query",_19c);this._GetBalance();},_FilterBy:function(){var _19d={icustomerid:this._customerid,filter_date:_18b.to_json_date(this.filterdate.get("value")),unallocated:this.unallocated.get("value"),moneyonly:this.moneyonly.get("value")};var _19e=lang.mixin(_18b.get_prevent_cache(),_19d);this.view1.set("query",_19e);_18d.add(this.reallocate,"prmaxhidden");this._GetBalance();},_GetBalance:function(){_18a.post("/customer/customer_balance",_18b.make_params({data:{icustomerid:this._customerid}})).then(this._LoadBalanceCallBack);},_LoadBalanceCall:function(_19f){if(_19f.success=="OK"){_18e.set(this.balance_figure,"innerHTML",dojo.number.format(_19f.balances.balance/100,{places:2}));}else{_18e.set(this.balance_figure,"innerHTML","ERROR");}}});});},"control/customer/partner_options":function(){define(["dojo/_base/declare","ttl/BaseWidgetAMD","dojo/text!../customer/templates/partner_options.html","dijit/layout/BorderContainer","dojo/request","ttl/utilities2","dojo/_base/lang","dojo/topic","dojo/dom-class","dijit/form/DateTextBox","dojox/form/BusyButton","dijit/form/Form","dijit/form/NumberTextBox"],function(_1a0,_1a1,_1a2,_1a3,_1a4,_1a5,lang,_1a6,_1a7){return _1a0("control.customer.partner_options",[_1a1,_1a3],{templateString:_1a2,gutters:false,constructor:function(){this._save_call_back=lang.hitch(this,this._save_call);this._extended_licence_call_back=lang.hitch(this,this._extended_licence_call);},load:function(_1a8){this.startdate.set("value",_1a5.from_object_date_no_date(_1a8.cust.licence_start_date_d));this.enddate.set("value",_1a5.from_object_date_no_date(_1a8.cust.licence_expire));this.demo_to_live_customerid.set("value",_1a8.cust.customerid);this.extended_licence_enddate.set("value",_1a5.from_object_date_no_date(_1a8.cust.licence_expire));this.extended_licence_customerid.set("value",_1a8.cust.customerid);this.extended_licence_advancefeatures.set("checked",_1a8.cust.advancefeatures);this.extended_licence_maxnbrofusersaccounts.set("value",_1a8.cust.maxnbrofusersaccounts);this.extended_licence_logins.set("value",_1a8.cust.logins);this._show_hide_options(_1a8.cust.isdemo);},_show_hide_options:function(_1a9){if(_1a9==true){_1a7.remove(this.view_demo_to_live,"prmaxhidden");_1a7.add(this.view_extended_licence,"prmaxhidden");}else{_1a7.add(this.view_demo_to_live,"prmaxhidden");_1a7.remove(this.view_extended_licence,"prmaxhidden");}},_demo_to_live:function(){if(_1a5.form_validator(this.demo_to_live_form)==false){alert("Not all required fields filled in");this.demo_to_live_btn.cancel();return;}if(confirm("Convert Demo to Live Account")){var _1aa=this.demo_to_live_form.get("value");_1aa["enddate"]=_1a5.to_json_date(this.enddate.get("value"));_1aa["startdate"]=_1a5.to_json_date(this.startdate.get("value"));_1a4.post("/customer/partner_demo_to_live",_1a5.make_params({data:_1aa})).then(this._save_call_back);}else{this.demo_to_live_btn.cancel();}},_save_call:function(_1ab){if(_1ab.success=="OK"){_1a6.publish("/customer/p_upd",_1ab.data);this._show_hide_options(false);alert("Updated");}else{alert("Problem");}this.demo_to_live_btn.cancel();},_extended_licence:function(){if(_1a5.form_validator(this.extended_licence_form)==false){alert("Not all required fields filled in");this.extended_licence_btn.cancel();return;}if(confirm("Extend Live Account")){var _1ac=this.extended_licence_form.get("value");_1ac["enddate"]=_1a5.to_json_date(this.extended_licence_enddate.get("value"));_1a4.post("/customer/partner_extend_live",_1a5.make_params({data:_1ac})).then(this._extended_licence_call_back);}else{this.extended_licence_btn.cancel();}},_extended_licence_call:function(_1ad){if(_1ad.success=="OK"){_1a6.publish("/customer/p_upd",_1ad.data);alert("Extended");}else{alert("Problem");}this.extended_licence_btn.cancel();}});});},"control/customer/one_off_invoice":function(){define(["dojo/_base/declare","ttl/BaseWidgetAMD","dojo/text!../customer/templates/one_off_invoice.html","dijit/layout/BorderContainer","dojo/request","ttl/utilities2","dojo/_base/lang","dojo/topic","dojo/dom-class","dojo/dom-attr","dijit/form/Form","dijit/form/TextBox","ttl/DateTextBox2","dijit/form/Textarea","dijit/form/CurrencyTextBox","dojox/form/BusyButton","dijit/form/ValidationTextBox","dojo/io/iframe","dojox/form/FileInput","dojo/number"],function(_1ae,_1af,_1b0,_1b1,_1b2,_1b3,lang,_1b4,_1b5,_1b6){return _1ae("control.customer.one_off_invoice",[_1af],{templateString:_1b0,gutters:false,constructor:function(){this._SendInvoiceCallBack=lang.hitch(this,this._SendInvoiceCall);},_SendInvoiceCall:function(_1b7){if(_1b7.success=="OK"){alert("Invoice Added");_1b4.publish(PRCOMMON.Events.Financial_ReLoad,[]);this._dialog.hide();}else{alert("Problem Adding Invoice");}this.btn.cancel();},_Send:function(){if(_1b3.form_validator(this.form)==false){alert("Please Enter Details");this.btn.cancel();return false;}var _1b8=this.form.get("value");_1b8["invoice_date"]=_1b3.to_json_date(this.invoice_date.get("value"));_1b2.post("/payment/invoice_one_off_send",_1b3.make_params({data:_1b8})).then(this._SendInvoiceCallBack);},setCustomer:function(cust,_1b9){this.icustomerid.set("value",cust.customerid);this.invoice_date.set("value",new Date());this.amount.set("value",0.01);this.vat.set("value",0);_1b6.set(this.customername,"innerHTML",cust.customername);this._dialog=_1b9;this.btn.cancel();},_Amounts:function(){var _1ba=this.amount.get("value");var vat=_1ba-(_1ba/(1+(20/100)));this.vat.set("value",dojo.number.format(vat,{places:2}));}});});},"dijit/_DialogMixin":function(){define(["dojo/_base/declare","./a11y"],function(_1bb,a11y){return _1bb("dijit._DialogMixin",null,{actionBarTemplate:"",execute:function(){},onCancel:function(){},onExecute:function(){},_onSubmit:function(){this.onExecute();this.execute(this.get("value"));},_getFocusItems:function(){var _1bc=a11y._getTabNavigable(this.domNode);this._firstFocusItem=_1bc.lowest||_1bc.first||this.closeButtonNode||this.domNode;this._lastFocusItem=_1bc.last||_1bc.highest||this._firstFocusItem;}});});},"dojox/json/schema":function(){define(["dojo/_base/kernel","dojox","dojo/_base/array"],function(dojo,_1bd){dojo.getObject("json.schema",true,_1bd);_1bd.json.schema.validate=function(_1be,_1bf){return this._validate(_1be,_1bf,false);};_1bd.json.schema.checkPropertyChange=function(_1c0,_1c1,_1c2){return this._validate(_1c0,_1c1,_1c2||"property");};_1bd.json.schema.mustBeValid=function(_1c3){if(!_1c3.valid){throw new TypeError(dojo.map(_1c3.errors,function(_1c4){return "for property "+_1c4.property+": "+_1c4.message;}).join(", "));}};_1bd.json.schema._validate=function(_1c5,_1c6,_1c7){var _1c8=[];function _1c9(_1ca,_1cb,path,i){var l;path+=path?typeof i=="number"?"["+i+"]":typeof i=="undefined"?"":"."+i:i;function _1cc(_1cd){_1c8.push({property:path,message:_1cd});};if((typeof _1cb!="object"||_1cb instanceof Array)&&(path||typeof _1cb!="function")){if(typeof _1cb=="function"){if(!(Object(_1ca) instanceof _1cb)){_1cc("is not an instance of the class/constructor "+_1cb.name);}}else{if(_1cb){_1cc("Invalid schema/property definition "+_1cb);}}return null;}if(_1c7&&_1cb.readonly){_1cc("is a readonly field, it can not be changed");}if(_1cb["extends"]){_1c9(_1ca,_1cb["extends"],path,i);}function _1ce(type,_1cf){if(type){if(typeof type=="string"&&type!="any"&&(type=="null"?_1cf!==null:typeof _1cf!=type)&&!(_1cf instanceof Array&&type=="array")&&!(type=="integer"&&_1cf%1===0)){return [{property:path,message:(typeof _1cf)+" value found, but a "+type+" is required"}];}if(type instanceof Array){var _1d0=[];for(var j=0;j<type.length;j++){if(!(_1d0=_1ce(type[j],_1cf)).length){break;}}if(_1d0.length){return _1d0;}}else{if(typeof type=="object"){var _1d1=_1c8;_1c8=[];_1c9(_1cf,type,path);var _1d2=_1c8;_1c8=_1d1;return _1d2;}}}return [];};if(_1ca===undefined){if(!_1cb.optional){_1cc("is missing and it is not optional");}}else{_1c8=_1c8.concat(_1ce(_1cb.type,_1ca));if(_1cb.disallow&&!_1ce(_1cb.disallow,_1ca).length){_1cc(" disallowed value was matched");}if(_1ca!==null){if(_1ca instanceof Array){if(_1cb.items){if(_1cb.items instanceof Array){for(i=0,l=_1ca.length;i<l;i++){_1c8.concat(_1c9(_1ca[i],_1cb.items[i],path,i));}}else{for(i=0,l=_1ca.length;i<l;i++){_1c8.concat(_1c9(_1ca[i],_1cb.items,path,i));}}}if(_1cb.minItems&&_1ca.length<_1cb.minItems){_1cc("There must be a minimum of "+_1cb.minItems+" in the array");}if(_1cb.maxItems&&_1ca.length>_1cb.maxItems){_1cc("There must be a maximum of "+_1cb.maxItems+" in the array");}}else{if(_1cb.properties){_1c8.concat(_1d3(_1ca,_1cb.properties,path,_1cb.additionalProperties));}}if(_1cb.pattern&&typeof _1ca=="string"&&!_1ca.match(_1cb.pattern)){_1cc("does not match the regex pattern "+_1cb.pattern);}if(_1cb.maxLength&&typeof _1ca=="string"&&_1ca.length>_1cb.maxLength){_1cc("may only be "+_1cb.maxLength+" characters long");}if(_1cb.minLength&&typeof _1ca=="string"&&_1ca.length<_1cb.minLength){_1cc("must be at least "+_1cb.minLength+" characters long");}if(typeof _1cb.minimum!==undefined&&typeof _1ca==typeof _1cb.minimum&&_1cb.minimum>_1ca){_1cc("must have a minimum value of "+_1cb.minimum);}if(typeof _1cb.maximum!==undefined&&typeof _1ca==typeof _1cb.maximum&&_1cb.maximum<_1ca){_1cc("must have a maximum value of "+_1cb.maximum);}if(_1cb["enum"]){var _1d4=_1cb["enum"];l=_1d4.length;var _1d5;for(var j=0;j<l;j++){if(_1d4[j]===_1ca){_1d5=1;break;}}if(!_1d5){_1cc("does not have a value in the enumeration "+_1d4.join(", "));}}if(typeof _1cb.maxDecimal=="number"&&(_1ca.toString().match(new RegExp("\\.[0-9]{"+(_1cb.maxDecimal+1)+",}")))){_1cc("may only have "+_1cb.maxDecimal+" digits of decimal places");}}}return null;};function _1d3(_1d6,_1d7,path,_1d8){if(typeof _1d7=="object"){if(typeof _1d6!="object"||_1d6 instanceof Array){_1c8.push({property:path,message:"an object is required"});}for(var i in _1d7){if(_1d7.hasOwnProperty(i)&&!(i.charAt(0)=="_"&&i.charAt(1)=="_")){var _1d9=_1d6[i];var _1da=_1d7[i];_1c9(_1d9,_1da,path,i);}}}for(i in _1d6){if(_1d6.hasOwnProperty(i)&&!(i.charAt(0)=="_"&&i.charAt(1)=="_")&&_1d7&&!_1d7[i]&&_1d8===false){_1c8.push({property:path,message:(typeof _1d9)+"The property "+i+" is not defined in the schema and the schema does not allow additional properties"});}var _1db=_1d7&&_1d7[i]&&_1d7[i].requires;if(_1db&&!(_1db in _1d6)){_1c8.push({property:path,message:"the presence of the property "+i+" requires that "+_1db+" also be present"});}_1d9=_1d6[i];if(_1d7&&typeof _1d7=="object"&&!(i in _1d7)){_1c9(_1d9,_1d8,path,i);}if(!_1c7&&_1d9&&_1d9.$schema){_1c8=_1c8.concat(_1c9(_1d9,_1d9.$schema,path,i));}}return _1c8;};if(_1c6){_1c9(_1c5,_1c6,"",_1c7||"");}if(!_1c7&&_1c5&&_1c5.$schema){_1c9(_1c5,_1c5.$schema,"","");}return {valid:!_1c8.length,errors:_1c8};};return _1bd.json.schema;});},"dijit/form/_SearchMixin":function(){define(["dojo/_base/declare","dojo/keys","dojo/_base/lang","dojo/query","dojo/string","dojo/when","../registry"],function(_1dc,keys,lang,_1dd,_1de,when,_1df){return _1dc("dijit.form._SearchMixin",null,{pageSize:Infinity,store:null,fetchProperties:{},query:{},list:"",_setListAttr:function(list){this._set("list",list);},searchDelay:200,searchAttr:"name",queryExpr:"${0}*",ignoreCase:true,_patternToRegExp:function(_1e0){return new RegExp("^"+_1e0.replace(/(\\.)|(\*)|(\?)|\W/g,function(str,_1e1,star,_1e2){return star?".*":_1e2?".":_1e1?_1e1:"\\"+str;})+"$",this.ignoreCase?"mi":"m");},_abortQuery:function(){if(this.searchTimer){this.searchTimer=this.searchTimer.remove();}if(this._queryDeferHandle){this._queryDeferHandle=this._queryDeferHandle.remove();}if(this._fetchHandle){if(this._fetchHandle.abort){this._cancelingQuery=true;this._fetchHandle.abort();this._cancelingQuery=false;}if(this._fetchHandle.cancel){this._cancelingQuery=true;this._fetchHandle.cancel();this._cancelingQuery=false;}this._fetchHandle=null;}},_processInput:function(evt){if(this.disabled||this.readOnly){return;}var key=evt.charOrCode;var _1e3=false;this._prev_key_backspace=false;switch(key){case keys.DELETE:case keys.BACKSPACE:this._prev_key_backspace=true;this._maskValidSubsetError=true;_1e3=true;break;default:_1e3=typeof key=="string"||key==229;}if(_1e3){if(!this.store){this.onSearch();}else{this.searchTimer=this.defer("_startSearchFromInput",1);}}},onSearch:function(){},_startSearchFromInput:function(){this._startSearch(this.focusNode.value);},_startSearch:function(text){this._abortQuery();var _1e4=this,_1dd=lang.clone(this.query),_1e5={start:0,count:this.pageSize,queryOptions:{ignoreCase:this.ignoreCase,deep:true}},qs=_1de.substitute(this.queryExpr,[text.replace(/([\\\*\?])/g,"\\$1")]),q,_1e6=function(){var _1e7=_1e4._fetchHandle=_1e4.store.query(_1dd,_1e5);if(_1e4.disabled||_1e4.readOnly||(q!==_1e4._lastQuery)){return;}when(_1e7,function(res){_1e4._fetchHandle=null;if(!_1e4.disabled&&!_1e4.readOnly&&(q===_1e4._lastQuery)){when(_1e7.total,function(_1e8){res.total=_1e8;var _1e9=_1e4.pageSize;if(isNaN(_1e9)||_1e9>res.total){_1e9=res.total;}res.nextPage=function(_1ea){_1e5.direction=_1ea=_1ea!==false;_1e5.count=_1e9;if(_1ea){_1e5.start+=res.length;if(_1e5.start>=res.total){_1e5.count=0;}}else{_1e5.start-=_1e9;if(_1e5.start<0){_1e5.count=Math.max(_1e9+_1e5.start,0);_1e5.start=0;}}if(_1e5.count<=0){res.length=0;_1e4.onSearch(res,_1dd,_1e5);}else{_1e6();}};_1e4.onSearch(res,_1dd,_1e5);});}},function(err){_1e4._fetchHandle=null;if(!_1e4._cancelingQuery){}});};lang.mixin(_1e5,this.fetchProperties);if(this.store._oldAPI){q=qs;}else{q=this._patternToRegExp(qs);q.toString=function(){return qs;};}this._lastQuery=_1dd[this.searchAttr]=q;this._queryDeferHandle=this.defer(_1e6,this.searchDelay);},constructor:function(){this.query={};this.fetchProperties={};},postMixInProperties:function(){if(!this.store){var list=this.list;if(list){this.store=_1df.byId(list);}}this.inherited(arguments);}});});},"control/customer/options":function(){define(["dojo/_base/declare","ttl/BaseWidgetAMD","dojo/text!../customer/templates/options.html","dijit/layout/BorderContainer","dojo/request","ttl/utilities2","dojo/_base/lang","dojo/topic","dojo/dom-class","control/accounts/PriceCodes","control/customer/view_internal","control/customer/view_partner","control/customer/options/emailserver","control/customer/options/extendedsettings","control/customer/options/PrmaxDataSets","control/customer/options/details",],function(_1eb,_1ec,_1ed,_1ee,_1ef,_1f0,lang,_1f1,_1f2){return _1eb("control.customer.options",[_1ec,_1ee],{templateString:_1ed,gutters:false,constructor:function(){},postCreate:function(){},load:function(_1f3,_1f4,_1f5,_1f6){this.emailserver.load(_1f3,_1f4);this.extendedsettings.load(_1f3,_1f5);this.datasets.load(_1f3.customerid,_1f3.has_international_data);this.options_tab_details.load(_1f3,_1f6);this.options_tab.selectChild(this.options_tab_details);},});});},"dgrid/Keyboard":function(){define(["dojo/_base/declare","dojo/aspect","dojo/on","dojo/_base/lang","dojo/has","put-selector/put","./util/misc","dojo/_base/Deferred","dojo/_base/sniff"],function(_1f7,_1f8,on,lang,has,put,_1f9,_1fa){var _1fb={checkbox:1,radio:1,button:1},_1fc=/\bdgrid-cell\b/,_1fd=/\bdgrid-row\b/;var _1fe=_1f7(null,{pageSkip:10,tabIndex:0,keyMap:null,headerKeyMap:null,postMixInProperties:function(){this.inherited(arguments);if(!this.keyMap){this.keyMap=lang.mixin({},_1fe.defaultKeyMap);}if(!this.headerKeyMap){this.headerKeyMap=lang.mixin({},_1fe.defaultHeaderKeyMap);}},postCreate:function(){this.inherited(arguments);var grid=this;function _1ff(_200){var _201=_200.target;return _201.type&&(!_1fb[_201.type]||_200.keyCode==32);};function _202(_203){var _204=grid.cellNavigation,_205=_204?_1fc:_1fd,_206=_203===grid.headerNode,_207=_203;function _208(){if(grid._focusedHeaderNode){grid._focusedHeaderNode.tabIndex=-1;}if(grid.showHeader){if(_204){for(var i=0,_209,_20a=grid.headerNode.getElementsByTagName("th");(_209=_20a[i]);++i){if(_205.test(_209.className)){grid._focusedHeaderNode=_207=_209;break;}}}else{grid._focusedHeaderNode=_207=grid.headerNode;}if(_207){_207.tabIndex=grid.tabIndex;}}};if(_206){_208();_1f8.after(grid,"renderHeader",_208,true);}else{_1f8.after(grid,"renderArray",function(ret){return _1fa.when(ret,function(ret){var _20b=grid._focusedNode||_207;if(_205.test(_20b.className)&&_1f9.contains(_203,_20b)){return ret;}for(var i=0,_20c=_203.getElementsByTagName("*"),_20d;(_20d=_20c[i]);++i){if(_205.test(_20d.className)){_20b=grid._focusedNode=_20d;break;}}_20b.tabIndex=grid.tabIndex;return ret;});});}grid._listeners.push(on(_203,"mousedown",function(_20e){if(!_1ff(_20e)){grid._focusOnNode(_20e.target,_206,_20e);}}));grid._listeners.push(on(_203,"keydown",function(_20f){if(_20f.metaKey||_20f.altKey){return;}var _210=grid[_206?"headerKeyMap":"keyMap"][_20f.keyCode];if(_210&&!_1ff(_20f)){_210.call(grid,_20f);}}));};if(this.tabableHeader){_202(this.headerNode);on(this.headerNode,"dgrid-cellfocusin",function(){grid.scrollTo({x:this.scrollLeft});});}_202(this.contentNode);},removeRow:function(_211){if(!this._focusedNode){return this.inherited(arguments);}var self=this,_212=document.activeElement===this._focusedNode,_213=this[this.cellNavigation?"cell":"row"](this._focusedNode),_214=_213.row||_213,_215;_211=_211.element||_211;if(_211===_214.element){_215=this.down(_214,true);if(!_215||_215.element===_211){_215=this.up(_214,true);}this._removedFocus={active:_212,rowId:_214.id,columnId:_213.column&&_213.column.id,siblingId:!_215||_215.element===_211?undefined:_215.id};setTimeout(function(){if(self._removedFocus){self._restoreFocus(_214.id);}},0);this._focusedNode=null;}this.inherited(arguments);},insertRow:function(_216){var _217=this.inherited(arguments);if(this._removedFocus&&!this._removedFocus.wait){this._restoreFocus(_217);}return _217;},_restoreFocus:function(row){var _218=this._removedFocus,_219,cell;row=row&&this.row(row);_219=row&&row.element&&row.id===_218.rowId?row:typeof _218.siblingId!=="undefined"&&this.row(_218.siblingId);if(_219&&_219.element){if(!_219.element.parentNode.parentNode){_218.wait=true;return;}if(typeof _218.columnId!=="undefined"){cell=this.cell(_219,_218.columnId);if(cell&&cell.element){_219=cell;}}if(_218.active&&_219.element.offsetHeight!==0){this._focusOnNode(_219,false,null);}else{put(_219.element,".dgrid-focus");_219.element.tabIndex=this.tabIndex;this._focusedNode=_219.element;}}delete this._removedFocus;},addKeyHandler:function(key,_21a,_21b){return _1f8.after(this[_21b?"headerKeyMap":"keyMap"],key,_21a,true);},_focusOnNode:function(_21c,_21d,_21e){var _21f="_focused"+(_21d?"Header":"")+"Node",_220=this[_21f],_221=this.cellNavigation?"cell":"row",cell=this[_221](_21c),_222,_223,_224,_225,i;_21c=cell&&cell.element;if(!_21c){return;}if(this.cellNavigation){_222=_21c.getElementsByTagName("input");for(i=0,_224=_222.length;i<_224;i++){_223=_222[i];if((_223.tabIndex!=-1||"_dgridLastValue" in _223)&&!_223.disabled){if(has("ie")<8){_223.style.position="relative";}_223.focus();if(has("ie")<8){_223.style.position="";}_225=true;break;}}}if(_21e!==null){_21e=lang.mixin({grid:this},_21e);if(_21e.type){_21e.parentType=_21e.type;}if(!_21e.bubbles){_21e.bubbles=true;}}if(_220){put(_220,"!dgrid-focus[!tabIndex]");if(has("ie")<8){_220.style.position="";}if(_21e){_21e[_221]=this[_221](_220);on.emit(_220,"dgrid-cellfocusout",_21e);}}_220=this[_21f]=_21c;if(_21e){_21e[_221]=cell;}var _226=this.cellNavigation?_1fc:_1fd;if(!_225&&_226.test(_21c.className)){if(has("ie")<8){_21c.style.position="relative";}_21c.tabIndex=this.tabIndex;_21c.focus();}put(_21c,".dgrid-focus");if(_21e){on.emit(_220,"dgrid-cellfocusin",_21e);}},focusHeader:function(_227){this._focusOnNode(_227||this._focusedHeaderNode,true);},focus:function(_228){var node=_228||this._focusedNode;if(node){this._focusOnNode(node,false);}else{this.contentNode.focus();}}});var _229=_1fe.moveFocusVertical=function(_22a,_22b){var _22c=this.cellNavigation,_22d=this[_22c?"cell":"row"](_22a),_22e=_22c&&_22d.column.id,next=this.down(this._focusedNode,_22b,true);if(_22c){next=this.cell(next,_22e);}this._focusOnNode(next,false,_22a);_22a.preventDefault();};var _22f=_1fe.moveFocusUp=function(_230){_229.call(this,_230,-1);};var _231=_1fe.moveFocusDown=function(_232){_229.call(this,_232,1);};var _233=_1fe.moveFocusPageUp=function(_234){_229.call(this,_234,-this.pageSkip);};var _235=_1fe.moveFocusPageDown=function(_236){_229.call(this,_236,this.pageSkip);};var _237=_1fe.moveFocusHorizontal=function(_238,_239){if(!this.cellNavigation){return;}var _23a=!this.row(_238),_23b=this["_focused"+(_23a?"Header":"")+"Node"];this._focusOnNode(this.right(_23b,_239),_23a,_238);_238.preventDefault();};var _23c=_1fe.moveFocusLeft=function(_23d){_237.call(this,_23d,-1);};var _23e=_1fe.moveFocusRight=function(_23f){_237.call(this,_23f,1);};var _240=_1fe.moveHeaderFocusEnd=function(_241,_242){var _243;if(this.cellNavigation){_243=this.headerNode.getElementsByTagName("th");this._focusOnNode(_243[_242?0:_243.length-1],true,_241);}_241.preventDefault();};var _244=_1fe.moveHeaderFocusHome=function(_245){_240.call(this,_245,true);};var _246=_1fe.moveFocusEnd=function(_247,_248){var self=this,_249=this.cellNavigation,_24a=this.contentNode,_24b=_248?0:_24a.scrollHeight,_24c=_24a.scrollTop+_24b,_24d=_24a[_248?"firstChild":"lastChild"],_24e=_24d.className.indexOf("dgrid-preload")>-1,_24f=_24e?_24d[(_248?"next":"previous")+"Sibling"]:_24d,_250=_24f.offsetTop+(_248?0:_24f.offsetHeight),_251;if(_24e){while(_24f&&_24f.className.indexOf("dgrid-row")<0){_24f=_24f[(_248?"next":"previous")+"Sibling"];}if(!_24f){return;}}if(!_24e||_24d.offsetHeight<1){if(_249){_24f=this.cell(_24f,this.cell(_247).column.id);}this._focusOnNode(_24f,false,_247);}else{if(!has("dom-addeventlistener")){_247=lang.mixin({},_247);}_251=_1f8.after(this,"renderArray",function(rows){_251.remove();return _1fa.when(rows,function(rows){var _252=rows[_248?0:rows.length-1];if(_249){_252=self.cell(_252,self.cell(_247).column.id);}self._focusOnNode(_252,false,_247);});});}if(_24c===_250){_247.preventDefault();}};var _253=_1fe.moveFocusHome=function(_254){_246.call(this,_254,true);};function _255(_256){_256.preventDefault();};_1fe.defaultKeyMap={32:_255,33:_233,34:_235,35:_246,36:_253,37:_23c,38:_22f,39:_23e,40:_231};_1fe.defaultHeaderKeyMap={32:_255,35:_240,36:_244,37:_23c,39:_23e};return _1fe;});},"control/customer/allocation":function(){define(["dojo/_base/declare","ttl/BaseWidgetAMD","dojo/request","ttl/utilities2","dojo/_base/lang","dojo/topic","dojo/dom-class","dojo/dom-attr","ttl/store/JsonRest","dojo/store/Observable","dijit/Menu","dijit/MenuItem","ttl/grid/Grid","dojo/store/util/SimpleQueryEngine","dojo/store/Memory","control/customer/manual_allocate_amount"],function(_257,_258,_259,_25a,lang,_25b,_25c,_25d,_25e,_25f,Menu,_260,Grid,_261,_262){return _257("control.customer.allocation",null,{constructor:function(){this._allocation=null;this._load_allocation_call_back=lang.hitch(this,this._load_allocation_call);},_postCreate:function(){var _263=[{label:"Type",className:"dgrid-column-status-small",field:"typedescription"},{label:"Nbr",className:"dgrid-column-nbr-right",field:"invoicenbr"},{label:"Ref",className:"dgrid-column-status-small",field:"invoiceref"},{label:"Date",className:"dgrid-column-date",field:"invoicedate"},{label:"Value",className:"dgrid-column-money",field:"invoiceamount_display",formatter:_25a.display_money},{label:"Unpaid",className:"dgrid-column-money",field:"unpaidamount_display",formatter:_25a.display_money},{label:"Allocate",className:"dgrid-column-money",field:"allocated",formatter:_25a.display_money},{label:" ",className:"dgrid-column-type-boolean",formatter:_25a.format_row_ctrl}];this.alloc_grid=new Grid({columns:_263,selectionMode:"single",store:this._allocation});this.alloc_grid_view.set("content",this.alloc_grid);this.alloc_grid.on(".dgrid-cell:click",lang.hitch(this,this.onCellClick));},load_allocation:function(_264,_265){this._customerid=_264;this._source=_265;_259.post("/allocation/customer_to_allocate",_25a.make_params({data:{icustomerid:_264,source:this._source}})).then(this._load_allocation_call_back);},_load_allocation_call:function(_266){this._allocation=new _25f(new _262());if(_266.length>0){for(var i=0;i<_266.length;i++){this._allocation.put(_266[i]);}}this.alloc_grid.set("store",this._allocation);},_AllocateInvoice:function(){this._allocted_row.allocated=this._allocted_row.unallocated/100;this._allocation.put(this._allocted_row);},_AllocateAmount:function(){this.alloc_manual.setValues(this,this._allocted_row.unallocated/100);},onCellClick:function(e){var cell=this.alloc_grid.cell(e);if(cell.column.id==7){this._allocted_row=cell.row.data;if(this.private_menu==null){this.private_menu=new Menu();this.private_menu.addChild(new _260({label:"Allocate Invoice",onClick:lang.hitch(this,this._AllocateInvoice)}));this.private_menu.addChild(new _260({label:"Allocate Amount",onClick:lang.hitch(this,this._AllocateAmount)}));}this.private_menu._openMyself(e);}},_doallocation:function(){var _267=Math.abs(this.payment.get("value"));var _268=0;var line=_261(function(_269){return true;})(this._allocation.data);for(var c=0;c<line.length;c++){if(line[c]==null){continue;}_268+=dojo.number.round(parseFloat(line[c].allocated),2);}this.toallocate.set("value",dojo.number.round(_267-_268,2));},getAllocations:function(){var _26a=[];var _26b=0;var line=_261(function(_26c){return true;})(this._allocation.data);for(var c=0;c<line.length;c++){if(line[c]==null){continue;}_26a[_26b]={keyid:line[c].key,amount:line[c].allocated};_26b+=1;}return dojo.toJson(_26a);}});});},"control/customer/user_update":function(){define(["dojo/_base/declare","ttl/BaseWidgetAMD","dojo/text!../customer/templates/user_update.html","dijit/layout/ContentPane","dojo/request","ttl/utilities2","dojo/_base/lang","dojo/topic","dojo/dom-class","dijit/form/Form","dojox/form/BusyButton"],function(_26d,_26e,_26f,_270,_271,_272,lang,_273,_274){return _26d("controls.customer.user_update",[_26e,_270],{templateString:_26f,gutters:false,constructor:function(){this._show_func=null;this._load_details_call_back=lang.hitch(this,this._load_details_call);this._error_call_back=lang.hitch(this,this._error_call);this._save_call_back=lang.hitch(this,this._save_call);},load:function(_275,_276){this._show_func=_276;this.iuserid.set("value",_275);_271.post("/customer/user/get_internal",_272.make_params({data:{iuserid:_275}})).then(this._load_details_call_back,this._error_call_back);},_error_call:function(){},_load_details_call:function(_277){if(_277.success=="OK"){this.user_email_address.set("value",_277.data.email_address);this.user_user_name.set("value",_277.data.user_name);this.user_display_name.set("value",_277.data.display_name);this.isuseradmin.set("checked",_277.data.isuseradmin);this.nodirectmail.set("checked",_277.data.nodirectmail);this.canviewfinancial.set("checked",_277.data.canviewfinancial);this._show_func("update_show");}},_send_login_details:function(){},_update_user_details:function(){if(_272.form_validator(this.form)==false){alert("Not all required fields filled in");this.update_ctrl_btn.cancel();return;}if(confirm("Save User")){_271.post("/customer/user/update",_272.make_params({data:this.form.get("value")})).then(this._save_call_back);}else{this.update_ctrl_btn.cancel();}},_save_call:function(_278){if(_278.success=="OK"){this._show_func("update_finish",_278.data);}else{if(_278.success=="DU"){alert(_278.message);}}this.update_ctrl_btn.cancel();}});});},"dijit/form/SimpleTextarea":function(){define(["dojo/_base/declare","dojo/dom-class","dojo/sniff","./TextBox"],function(_279,_27a,has,_27b){return _279("dijit.form.SimpleTextarea",_27b,{baseClass:"dijitTextBox dijitTextArea",rows:"3",cols:"20",templateString:"<textarea ${!nameAttrSetting} data-dojo-attach-point='focusNode,containerNode,textbox' autocomplete='off'></textarea>",postMixInProperties:function(){if(!this.value&&this.srcNodeRef){this.value=this.srcNodeRef.value;}this.inherited(arguments);},buildRendering:function(){this.inherited(arguments);if(has("ie")&&this.cols){_27a.add(this.textbox,"dijitTextAreaCols");}},filter:function(_27c){if(_27c){_27c=_27c.replace(/\r/g,"");}return this.inherited(arguments);},_onInput:function(e){if(this.maxLength){var _27d=parseInt(this.maxLength);var _27e=this.textbox.value.replace(/\r/g,"");var _27f=_27e.length-_27d;if(_27f>0){var _280=this.textbox;if(_280.selectionStart){var pos=_280.selectionStart;var cr=0;if(has("opera")){cr=(this.textbox.value.substring(0,pos).match(/\r/g)||[]).length;}this.textbox.value=_27e.substring(0,pos-_27f-cr)+_27e.substring(pos-cr);_280.setSelectionRange(pos-_27f,pos-_27f);}else{if(this.ownerDocument.selection){_280.focus();var _281=this.ownerDocument.selection.createRange();_281.moveStart("character",-_27f);_281.text="";_281.select();}}}}this.inherited(arguments);}});});},"ttl/DateTextBox2":function(){define(["dojo/_base/declare","dijit/form/DateTextBox","ttl/utilities2"],function(_282,_283){return _282("ttl.DateTextBox2",[_283],{_getValueISOAttr:function(){var _284=this.textbox.value;if(_284.length>0){var tmp=_284.split("/");if(tmp.length>=3){return tmp[2]+"/"+tmp[1]+"/"+tmp[0];}}return "";}});});},"dojox/grid/_RowSelector":function(){define(["dojo/_base/declare","./_View"],function(_285,_286){return _285("dojox.grid._RowSelector",_286,{defaultWidth:"2em",noscroll:true,padBorderWidth:2,buildRendering:function(){this.inherited("buildRendering",arguments);this.scrollboxNode.style.overflow="hidden";this.headerNode.style.visibility="hidden";},getWidth:function(){return this.viewWidth||this.defaultWidth;},buildRowContent:function(_287,_288){var w=this.contentWidth||0;_288.innerHTML="<table class=\"dojoxGridRowbarTable\" style=\"width:"+w+"px;height:1px;\" border=\"0\" cellspacing=\"0\" cellpadding=\"0\" role=\"presentation\"><tr><td class=\"dojoxGridRowbarInner\">&nbsp;</td></tr></table>";},renderHeader:function(){},updateRow:function(){},resize:function(){this.adaptHeight();},adaptWidth:function(){if(!("contentWidth" in this)&&this.contentNode&&this.contentNode.offsetWidth>0){this.contentWidth=this.contentNode.offsetWidth-this.padBorderWidth;}},doStyleRowNode:function(_289,_28a){var n=["dojoxGridRowbar dojoxGridNonNormalizedCell"];if(this.grid.rows.isOver(_289)){n.push("dojoxGridRowbarOver");}if(this.grid.selection.isSelected(_289)){n.push("dojoxGridRowbarSelected");}_28a.className=n.join(" ");},domouseover:function(e){this.grid.onMouseOverRow(e);},domouseout:function(e){if(!this.isIntraRowEvent(e)){this.grid.onMouseOutRow(e);}}});});},"xstyle/has-class":function(){define(["dojo/has"],function(has){var _28b={};return function(){var test,args=arguments;for(var i=0;i<args.length;i++){var test=args[i];if(!_28b[test]){_28b[test]=true;var _28c=test.match(/^(no-)?(.+?)((-[\d\.]+)(-[\d\.]+)?)?$/),_28d=has(_28c[2]),_28e=-_28c[4];if((_28e>0?_28e<=_28d&&(-_28c[5]||_28e)>=_28d:!!_28d)==!_28c[1]){document.documentElement.className+=" has-"+test;}}}};});},"dgrid/tree":function(){define(["dojo/_base/declare","dojo/_base/array","dojo/_base/Deferred","dojo/query","dojo/on","dojo/aspect","./util/has-css3","./Grid","dojo/has!touch?./util/touch","put-selector/put"],function(_28f,_290,_291,_292,on,_293,has,Grid,_294,put){function _295(_296,_297,_298,_299){var dir=this.grid.isRTL?"right":"left",cls=".dgrid-expando-icon",node;if(_297){cls+=".ui-icon.ui-icon-triangle-1-"+(_298?"se":"e");}node=put("div"+cls+"[style=margin-"+dir+": "+(_296*(this.indentWidth||9))+"px; float: "+dir+"]");node.innerHTML="&nbsp;";return node;};function _29a(_29b){var _29c=this,_29d=this.style.height;if(_29d){this.style.display=_29d=="0px"?"none":"block";}if(_29b){put(this,".dgrid-tree-resetting");setTimeout(function(){put(_29c,"!dgrid-tree-resetting");});}this.style.height="";};function tree(_29e){var _29f=_29e.renderCell||Grid.defaultRenderCell;var _2a0,_2a1;if(!_29e){_29e={};}_29e.shouldExpand=_29e.shouldExpand||function(row,_2a2,_2a3){return _2a3;};_293.after(_29e,"init",function(){var grid=_29e.grid,_2a4=".dgrid-content .dgrid-column-"+_29e.id,_2a5=[];grid.cleanEmptyObservers=false;if(!grid.store){throw new Error("dgrid tree column plugin requires a store to operate.");}if(!_29e.renderExpando){_29e.renderExpando=_295;}_2a5.push(grid.on(_29e.expandOn||".dgrid-expando-icon:click,"+_2a4+":dblclick,"+_2a4+":keydown",function(_2a6){var row=grid.row(_2a6);if((!grid.store.mayHaveChildren||grid.store.mayHaveChildren(row.data))&&(_2a6.type!="keydown"||_2a6.keyCode==32)&&!(_2a6.type=="dblclick"&&_2a1&&_2a1.count>1&&row.id==_2a1.id&&_2a6.target.className.indexOf("dgrid-expando-icon")>-1)){grid.expand(row);}if(_2a6.target.className.indexOf("dgrid-expando-icon")>-1){if(_2a1&&_2a1.id==grid.row(_2a6).id){_2a1.count++;}else{_2a1={id:grid.row(_2a6).id,count:1};}}}));if(has("touch")){_2a5.push(grid.on(_294.selector(_2a4,_294.dbltap),function(){grid.expand(this);}));}if(!grid._expanded){grid._expanded={};}_2a5.push(_293.after(grid,"insertRow",function(_2a7){var row=this.row(_2a7),_2a8=_29e.shouldExpand(row,_2a0,this._expanded[row.id]);if(_2a8){this.expand(_2a7,true,true);}return _2a7;}));_2a5.push(_293.before(grid,"removeRow",function(_2a9,_2aa){var _2ab=_2a9.connected;if(_2ab){_292(">.dgrid-row",_2ab).forEach(function(_2ac){grid.removeRow(_2ac,true);});if(!_2aa){put(_2ab,"!");}}}));if(_29e.collapseOnRefresh){_2a5.push(_293.after(grid,"cleanup",function(){this._expanded={};}));}grid._calcRowHeight=function(_2ad){var _2ae=_2ad.connected;return _2ad.offsetHeight+(_2ae?_2ae.offsetHeight:0);};grid.expand=function(_2af,_2b0,_2b1){var row=_2af.element?_2af:grid.row(_2af),_2b2=has("transitionend"),dfd=new _291(),_2b3=dfd.promise;dfd.resolve();_2af=row.element;_2af=_2af.className.indexOf("dgrid-expando-icon")>-1?_2af:_292(".dgrid-expando-icon",_2af)[0];_2b1=_2b1||_29e.enableTransitions===false;if(_2af&&_2af.mayHaveChildren&&(_2b1||_2b0!==!!this._expanded[row.id])){var _2b4=_2b0===undefined?!this._expanded[row.id]:_2b0;put(_2af,".ui-icon-triangle-1-"+(_2b4?"se":"e")+"!ui-icon-triangle-1-"+(_2b4?"e":"se"));var _2b5=row.element,_2b6=_2b5.connected,_2b7,_2b8,_2b9={originalQuery:this.query};if(!_2b6){_2b6=_2b9.container=_2b5.connected=put(_2b5,"+div.dgrid-tree-container");var _2ba=function(_2bb){return grid.store.getChildren(row.data,_2bb);};if(_29e.allowDuplicates){_2b9.parentId=row.id;}if("level" in _2af){_2ba.level=_2af.level;}_2b3=_2b3.then(function(){if(grid.renderQuery){return grid.renderQuery(_2ba,_2b9);}var _2bc=put(_2b6,"div");var rows=grid.renderArray(_2ba(_2b9),_2bc,"level" in _2ba?{queryLevel:_2ba.level}:{});_291.when(rows,function(){put(_2bc,"!");});return rows;});if(_2b2){on(_2b6,_2b2,_29a);}else{_29a.call(_2b6);}}_2b6.hidden=!_2b4;_2b7=_2b6.style;if(!_2b2||_2b1){_2b7.display=_2b4?"block":"none";_2b7.height="";}else{if(_2b4){_2b7.display="block";_2b8=_2b6.scrollHeight;_2b7.height="0px";}else{put(_2b6,".dgrid-tree-resetting");_2b7.height=_2b6.scrollHeight+"px";}setTimeout(function(){put(_2b6,"!dgrid-tree-resetting");_2b7.height=_2b4?(_2b8?_2b8+"px":"auto"):"0px";});}if(_2b4){this._expanded[row.id]=true;}else{delete this._expanded[row.id];}}return _2b3;};_293.after(_29e,"destroy",function(){_290.forEach(_2a5,function(l){l.remove();});delete grid.expand;delete grid._calcRowHeight;});});_29e.renderCell=function(_2bd,_2be,td,_2bf){var grid=_29e.grid,_2c0=Number(_2bf&&_2bf.queryLevel)+1,_2c1=!grid.store.mayHaveChildren||grid.store.mayHaveChildren(_2bd),_2c2=_2bf.parentId,_2c3,node;_2c0=_2a0=isNaN(_2c0)?0:_2c0;_2c3=_29e.renderExpando(_2c0,_2c1,grid._expanded[(_2c2?_2c2+"-":"")+grid.store.getIdentity(_2bd)],_2bd);_2c3.level=_2c0;_2c3.mayHaveChildren=_2c1;node=_29f.call(_29e,_2bd,_2be,td,_2bf);if(node&&node.nodeType){put(td,_2c3);put(td,node);}else{td.insertBefore(_2c3,td.firstChild);}};return _29e;};tree.defaultRenderExpando=_295;return tree;});},"control/customer/send_dd_conf":function(){define(["dojo/_base/declare","ttl/BaseWidgetAMD","dojo/text!../customer/templates/send_dd_conf.html","dijit/layout/BorderContainer","dojo/request","ttl/utilities2","dojo/_base/lang","dojo/topic","dojo/dom-class","dojo/dom-attr","dijit/form/Form","dijit/form/ValidationTextBox","dojox/form/BusyButton"],function(_2c4,_2c5,_2c6,_2c7,_2c8,_2c9,lang,_2ca,_2cb,_2cc){return _2c4("control.customer.send_dd_conf",[_2c5],{templateString:_2c6,gutters:false,constructor:function(){this._send_dd_conf_call_back=lang.hitch(this,this._send_dd_conf_call);},set_customer:function(_2cd,_2ce){this.btn.cancel();this._customerid=_2cd.customerid;this._customername=_2cd.customername;_2cc.set(this.customername,"innerHTML",_2cd.customername);this.email.set("value",_2cd.email);this._dialog=_2ce;},_send_dd_conf_call:function(_2cf){if(_2cf.success=="OK"){alert("Confirmation DD Sent");this._dialog.hide();}else{alert("Problem Sending");}this.btn.cancel();},_send_dd_conf:function(){if(_2c9.form_validator(this.form)==false){alert("Please Enter Details");this.btn.cancel();return false;}var _2d0=this.form.get("value");_2d0["icustomerid"]=this._customerid;_2c8.post("/orderconfirmation/send_conf_dd",_2c9.make_params({data:_2d0})).then(this._send_dd_conf_call_back);}});});},"prcommon2/query/query":function(){define(["dojo/_base/declare","ttl/BaseWidgetAMD","dojo/text!../query/templates/query.html","dijit/layout/BorderContainer","dojo/_base/lang","dojo/dom-attr","dojo/dom-class","dojo/dom-style","dojo/request","ttl/utilities2","dojox/data/JsonRestStore"],function(_2d1,_2d2,_2d3,_2d4,lang,_2d5,_2d6,_2d7,_2d8,_2d9,_2da){return _2d1("prcommon2.query.query",[_2d2,_2d4],{templateString:_2d3,constructor:function(){this._QueryCallBack=lang.hitch(this,this._QueryCall);this._QueryLoadCallBack=lang.hitch(this,this._QueryLoadCall);this._QuerySaveCallBack=lang.hitch(this,this._QuerySaveCall);this.queries=new _2da({target:"/query/queries_research",idProperty:"queryhistoryid",labelAttribute:"queryhistoryname"});},postCreate:function(){this.select.set("store",this.queries);this.inherited(arguments);},_QueryCall:function(_2db){if(_2db.success=="OK"){this.result_view.setContent(_2db.data);}else{alert("problem");}this.execute_button.cancel();},_Execute:function(){var _2dc=dojo.attr(this.query_text,"value");_2d8.post("/query/execute",_2d9.make_params({data:{query_text:_2dc}})).then(this._QueryCallBack);},_QueryLoadCall:function(_2dd){if(_2dd.success=="OK"){dojo.attr(this.query_text,"value",_2dd.data.query_text);}else{alert("problem");}},_Load:function(){_2d8.post("/query/load",_2d9.make_params({data:{queryhistoryid:this.select.get("value")}})).then(this._QueryLoadCallBack);},_Save:function(){var _2de=dojo.attr(this.query_text,"value");if(_2de.length>0){this.savedlg.show();}},_CancelDialog:function(){this.savedlg.hide();},_QuerySaveCall:function(_2df){if(_2df.success=="OK"){alert("Query Saved");this._CancelDialog();}else{alert("problem");}},_Query_Save:function(){if(_2d9.form_validator(this.formNode)==false){alert("Not all required field filled in");throw "B";}var _2e0=dojo.attr(this.query_text,"value");_2d8.post("/query/save2",_2d9.make_params({data:{query_text:_2e0,subject:this.subject_name.get("value"),typeid:1}})).then(this._QuerySaveCallBack);},_To_Excel:function(){this.query_text_to_excel.set("value",dojo.attr(this.query_text,"value"));this.tmp_to_excel.set("value",new Date());return true;}});});},"dojox/grid/_Layout":function(){define(["dojo/_base/kernel","../main","dojo/_base/declare","dojo/_base/array","dojo/_base/lang","dojo/dom-geometry","./cells","./_RowSelector"],function(dojo,_2e1,_2e2,_2e3,lang,_2e4){return _2e2("dojox.grid._Layout",null,{constructor:function(_2e5){this.grid=_2e5;},cells:[],structure:null,defaultWidth:"6em",moveColumn:function(_2e6,_2e7,_2e8,_2e9,_2ea){var _2eb=this.structure[_2e6].cells[0];var _2ec=this.structure[_2e7].cells[0];var cell=null;var _2ed=0;var _2ee=0;for(var i=0,c;c=_2eb[i];i++){if(c.index==_2e8){_2ed=i;break;}}cell=_2eb.splice(_2ed,1)[0];cell.view=this.grid.views.views[_2e7];for(i=0,c=null;c=_2ec[i];i++){if(c.index==_2e9){_2ee=i;break;}}if(!_2ea){_2ee+=1;}_2ec.splice(_2ee,0,cell);var _2ef=this.grid.getCell(this.grid.getSortIndex());if(_2ef){_2ef._currentlySorted=this.grid.getSortAsc();}this.cells=[];_2e8=0;var v;for(i=0;v=this.structure[i];i++){for(var j=0,cs;cs=v.cells[j];j++){for(var k=0;c=cs[k];k++){c.index=_2e8;this.cells.push(c);if("_currentlySorted" in c){var si=_2e8+1;si*=c._currentlySorted?1:-1;this.grid.sortInfo=si;delete c._currentlySorted;}_2e8++;}}}_2e3.forEach(this.cells,function(c){var _2f0=c.markup[2].split(" ");var _2f1=parseInt(_2f0[1].substring(5));if(_2f1!=c.index){_2f0[1]="idx=\""+c.index+"\"";c.markup[2]=_2f0.join(" ");}});this.grid.setupHeaderMenu();},setColumnVisibility:function(_2f2,_2f3){var cell=this.cells[_2f2];if(cell.hidden==_2f3){cell.hidden=!_2f3;var v=cell.view,w=v.viewWidth;if(w&&w!="auto"){v._togglingColumn=_2e4.getMarginBox(cell.getHeaderNode()).w||0;}v.update();return true;}else{return false;}},addCellDef:function(_2f4,_2f5,_2f6){var self=this;var _2f7=function(_2f8){var w=0;if(_2f8.colSpan>1){w=0;}else{w=_2f8.width||self._defaultCellProps.width||self.defaultWidth;if(!isNaN(w)){w=w+"em";}}return w;};var _2f9={grid:this.grid,subrow:_2f4,layoutIndex:_2f5,index:this.cells.length};if(_2f6&&_2f6 instanceof _2e1.grid.cells._Base){var _2fa=lang.clone(_2f6);_2f9.unitWidth=_2f7(_2fa._props);_2fa=lang.mixin(_2fa,this._defaultCellProps,_2f6._props,_2f9);return _2fa;}var _2fb=_2f6.type||_2f6.cellType||this._defaultCellProps.type||this._defaultCellProps.cellType||_2e1.grid.cells.Cell;if(lang.isString(_2fb)){_2fb=lang.getObject(_2fb);}_2f9.unitWidth=_2f7(_2f6);return new _2fb(lang.mixin({},this._defaultCellProps,_2f6,_2f9));},addRowDef:function(_2fc,_2fd){var _2fe=[];var _2ff=0,_300=0,_301=true;for(var i=0,def,cell;(def=_2fd[i]);i++){cell=this.addCellDef(_2fc,i,def);_2fe.push(cell);this.cells.push(cell);if(_301&&cell.relWidth){_2ff+=cell.relWidth;}else{if(cell.width){var w=cell.width;if(typeof w=="string"&&w.slice(-1)=="%"){_300+=window.parseInt(w,10);}else{if(w=="auto"){_301=false;}}}}}if(_2ff&&_301){_2e3.forEach(_2fe,function(cell){if(cell.relWidth){cell.width=cell.unitWidth=((cell.relWidth/_2ff)*(100-_300))+"%";}});}return _2fe;},addRowsDef:function(_302){var _303=[];if(lang.isArray(_302)){if(lang.isArray(_302[0])){for(var i=0,row;_302&&(row=_302[i]);i++){_303.push(this.addRowDef(i,row));}}else{_303.push(this.addRowDef(0,_302));}}return _303;},addViewDef:function(_304){this._defaultCellProps=_304.defaultCell||{};if(_304.width&&_304.width=="auto"){delete _304.width;}return lang.mixin({},_304,{cells:this.addRowsDef(_304.rows||_304.cells)});},setStructure:function(_305){this.fieldIndex=0;this.cells=[];var s=this.structure=[];if(this.grid.rowSelector){var sel={type:_2e1._scopeName+".grid._RowSelector"};if(lang.isString(this.grid.rowSelector)){var _306=this.grid.rowSelector;if(_306=="false"){sel=null;}else{if(_306!="true"){sel["width"]=_306;}}}else{if(!this.grid.rowSelector){sel=null;}}if(sel){s.push(this.addViewDef(sel));}}var _307=function(def){return ("name" in def||"field" in def||"get" in def);};var _308=function(def){if(lang.isArray(def)){if(lang.isArray(def[0])||_307(def[0])){return true;}}return false;};var _309=function(def){return (def!==null&&lang.isObject(def)&&("cells" in def||"rows" in def||("type" in def&&!_307(def))));};if(lang.isArray(_305)){var _30a=false;for(var i=0,st;(st=_305[i]);i++){if(_309(st)){_30a=true;break;}}if(!_30a){s.push(this.addViewDef({cells:_305}));}else{for(i=0;(st=_305[i]);i++){if(_308(st)){s.push(this.addViewDef({cells:st}));}else{if(_309(st)){s.push(this.addViewDef(st));}}}}}else{if(_309(_305)){s.push(this.addViewDef(_305));}}this.cellCount=this.cells.length;this.grid.setupHeaderMenu();}});});},"dojo/data/util/filter":function(){define(["../../_base/lang"],function(lang){var _30b={};lang.setObject("dojo.data.util.filter",_30b);_30b.patternToRegExp=function(_30c,_30d){var rxp="^";var c=null;for(var i=0;i<_30c.length;i++){c=_30c.charAt(i);switch(c){case "\\":rxp+=c;i++;rxp+=_30c.charAt(i);break;case "*":rxp+=".*";break;case "?":rxp+=".";break;case "$":case "^":case "/":case "+":case ".":case "|":case "(":case ")":case "{":case "}":case "[":case "]":rxp+="\\";default:rxp+=c;}}rxp+="$";if(_30d){return new RegExp(rxp,"mi");}else{return new RegExp(rxp,"m");}};return _30b;});},"dijit/tree/ForestStoreModel":function(){define(["dojo/_base/array","dojo/_base/declare","dojo/_base/kernel","dojo/_base/lang","./TreeStoreModel"],function(_30e,_30f,_310,lang,_311){return _30f("dijit.tree.ForestStoreModel",_311,{rootId:"$root$",rootLabel:"ROOT",query:null,constructor:function(_312){this.root={store:this,root:true,id:_312.rootId,label:_312.rootLabel,children:_312.rootChildren};},mayHaveChildren:function(item){return item===this.root||this.inherited(arguments);},getChildren:function(_313,_314,_315){if(_313===this.root){if(this.root.children){_314(this.root.children);}else{this.store.fetch({query:this.query,onComplete:lang.hitch(this,function(_316){this.root.children=_316;_314(_316);}),onError:_315});}}else{this.inherited(arguments);}},isItem:function(_317){return (_317===this.root)?true:this.inherited(arguments);},fetchItemByIdentity:function(_318){if(_318.identity==this.root.id){var _319=_318.scope||_310.global;if(_318.onItem){_318.onItem.call(_319,this.root);}}else{this.inherited(arguments);}},getIdentity:function(item){return (item===this.root)?this.root.id:this.inherited(arguments);},getLabel:function(item){return (item===this.root)?this.root.label:this.inherited(arguments);},newItem:function(args,_31a,_31b){if(_31a===this.root){this.onNewRootItem(args);return this.store.newItem(args);}else{return this.inherited(arguments);}},onNewRootItem:function(){},pasteItem:function(_31c,_31d,_31e,_31f,_320){if(_31d===this.root){if(!_31f){this.onLeaveRoot(_31c);}}this.inherited(arguments,[_31c,_31d===this.root?null:_31d,_31e===this.root?null:_31e,_31f,_320]);if(_31e===this.root){this.onAddToRoot(_31c);}},onAddToRoot:function(item){},onLeaveRoot:function(item){},_requeryTop:function(){var _321=this.root.children||[];this.store.fetch({query:this.query,onComplete:lang.hitch(this,function(_322){this.root.children=_322;if(_321.length!=_322.length||_30e.some(_321,function(item,idx){return _322[idx]!=item;})){this.onChildrenChange(this.root,_322);}})});},onNewItem:function(item,_323){this._requeryTop();this.inherited(arguments);},onDeleteItem:function(item){if(_30e.indexOf(this.root.children,item)!=-1){this._requeryTop();}this.inherited(arguments);},onSetItem:function(item,_324,_325,_326){this._requeryTop();this.inherited(arguments);}});});},"dojox/form/BusyButton":function(){define(["./_BusyButtonMixin","dijit/form/Button","dojo/_base/declare"],function(_327,_328,_329){var _32a=_329("dojox.form.BusyButton",[_328,_327],{});return _32a;});},"dgrid/editor":function(){define(["dojo/_base/kernel","dojo/_base/lang","dojo/_base/array","dojo/_base/Deferred","dojo/on","dojo/aspect","dojo/has","dojo/query","dojo/when","./Grid","put-selector/put","dojo/_base/sniff"],function(_32b,lang,_32c,_32d,on,_32e,has,_32f,when,Grid,put){function _330(_331,_332){_331.value=_332;if(_331.type=="radio"||_331.type=="checkbox"){_331.checked=_331.defaultChecked=!!_332;}};function _333(_334,_335){if(typeof _335=="number"){_334=isNaN(_334)?_334:parseFloat(_334);}else{if(typeof _335=="boolean"){_334=_334=="true"?true:_334=="false"?false:_334;}else{if(_335 instanceof Date){var _336=new Date(_334);_334=isNaN(_336.getTime())?_334:_336;}}}return _334;};function _337(_338,cmp){if(typeof cmp.get=="function"){return _333(cmp.get("value"));}else{return _333(cmp[cmp.type=="checkbox"||cmp.type=="radio"?"checked":"value"]);}};function _339(grid,cell,_33a,_33b,_33c){var _33d,row,_33e,_33f;if((_33a&&_33a.valueOf())!=(_33b&&_33b.valueOf())){_33d=cell.element;row=cell.row;_33e=cell.column;if(_33e.field&&row){_33f={grid:grid,cell:cell,rowId:row.id,oldValue:_33a,value:_33b,bubbles:true,cancelable:true};if(_33c&&_33c.type){_33f.parentType=_33c.type;}if(on.emit(_33d,"dgrid-datachange",_33f)){if(grid.updateDirty){grid.updateDirty(row.id,_33e.field,_33b);_33e.autoSave&&setTimeout(function(){grid._trackError("save");},0);}else{row.data[_33e.field]=_33b;}}else{var cmp;if((cmp=_33d.widget)){cmp._dgridIgnoreChange=true;cmp.set("value",_33a);setTimeout(function(){cmp._dgridIgnoreChange=false;},0);}else{if((cmp=_33d.input)){_330(cmp,_33a);}}return _33a;}}}return _33b;};function _340(grid,cmp,_341){var cell=grid.cell(cmp.domNode||cmp),_342=cell.column,_343,id,_344,_345=grid._activeCell;if(!cmp.isValid||cmp.isValid()){_343=_339(grid,cell,_345?grid._activeValue:cmp._dgridLastValue,_337(_342,cmp),_341);if(_345){grid._activeValue=_343;}else{cmp._dgridLastValue=_343;}if(cmp.type==="radio"&&cmp.name&&!_342.editOn&&_342.field){_344=grid.row(cmp);_32f("input[type=radio][name="+cmp.name+"]",grid.contentNode).forEach(function(_346){var row=grid.row(_346);if(_346!==cmp&&_346._dgridLastValue){_346._dgridLastValue=false;if(grid.updateDirty){grid.updateDirty(row.id,_342.field,false);}else{row.data[_342.field]=false;}}});for(id in grid.dirty){if(_344.id!==id&&grid.dirty[id][_342.field]){grid.updateDirty(id,_342.field,false);}}}}};function _347(_348){var _349=_348.editor,_34a=_348.editOn,grid=_348.grid,_34b=typeof _349!="string",args,cmp,node,_34c,_34d;args=_348.editorArgs||{};if(typeof args=="function"){args=args.call(grid,_348);}if(_34b){cmp=new _349(args);node=cmp.focusNode||cmp.domNode;node.className+=" dgrid-input";cmp.connect(cmp,_34a?"onBlur":"onChange",function(){if(!cmp._dgridIgnoreChange){_340(grid,this,{type:"widget"});}});}else{_34d=function(evt){var _34e=evt.target;if("_dgridLastValue" in _34e&&_34e.className.indexOf("dgrid-input")>-1){_340(grid,_34e,evt);}};if(!_348.grid._hasInputListener){grid._hasInputListener=true;grid.on("change",function(evt){_34d(evt);});}_34c=_349=="textarea"?"textarea":"input[type="+_349+"]";cmp=node=put(_34c+".dgrid-input",lang.mixin({name:_348.field,tabIndex:isNaN(_348.tabIndex)?-1:_348.tabIndex},args));if(has("ie")<9||(has("ie")&&has("quirks"))){if(_349=="radio"||_349=="checkbox"){on(cmp,"click",function(evt){_34d(evt);});}else{on(cmp,"change",function(evt){_34d(evt);});}}}return cmp;};function _34f(_350,_351){var cmp=_347(_350),grid=_350.grid,_352=cmp.domNode,node=cmp.domNode||cmp,_353=cmp.focusNode||node,_354=_352?function(){cmp.set("value",cmp._dgridLastValue);}:function(){_330(cmp,cmp._dgridLastValue);_340(_350.grid,cmp);},_355;function blur(){var _356=grid._activeCell;_353.blur();if(typeof grid.focus==="function"){setTimeout(function(){grid.focus(_356);},_352&&has("ie")<9?15:0);}};function _357(){var _358=node.parentNode,i=_358.children.length-1,_359={alreadyHooked:true},cell=grid.cell(node);on.emit(cell.element,"dgrid-editor-hide",{grid:grid,cell:cell,column:_350,editor:cmp,bubbles:true,cancelable:false});_350._editorBlurHandle.pause();_358.removeChild(node);if(cell.row){put(cell.element,"!dgrid-cell-editing");while(i--){put(_358.firstChild,"!");}Grid.appendIfNode(_358,_350.renderCell(_350.grid.row(_358).data,grid._activeValue,_358,grid._activeOptions?lang.delegate(_359,grid._activeOptions):_359));}grid._focusedEditorCell=grid._activeCell=grid._activeValue=grid._activeOptions=null;};function _35a(evt){var key=evt.keyCode||evt.which;if(key==27){_354();grid._activeValue=cmp._dgridLastValue;blur();}else{if(key==13&&_350.dismissOnEnter!==false){blur();}}};_355=on(_353,"keydown",_35a);(_350._editorBlurHandle=on.pausable(cmp,"blur",_357)).pause();return cmp;};function _35b(cmp,_35c,_35d,_35e){var _35f=cmp.domNode;if(!_35f){_330(cmp,_35e);}_35d.innerHTML="";put(_35d,".dgrid-cell-editing");put(_35d,cmp.domNode||cmp);if(_35f&&!_35c.editOn){_35c.grid._editorsPendingStartup.push([cmp,_35c,_35d,_35e]);}else{_360(cmp,_35c,_35d,_35e);}};function _360(cmp,_361,_362,_363){var grid=_361.grid;if(cmp.domNode){if(!cmp._started){cmp.startup();}cmp._dgridIgnoreChange=true;cmp.set("value",_363);setTimeout(function(){cmp._dgridIgnoreChange=false;},0);}cmp._dgridLastValue=_363;if(grid._activeCell){grid._activeValue=_363;on.emit(_362,"dgrid-editor-show",{grid:grid,cell:grid.cell(_362),column:_361,editor:cmp,bubbles:true,cancelable:false});}};function _364(grid){var args=grid._editorsPendingStartup;for(var i=args.length;i--;){_360.apply(null,args[i]);}grid._editorsPendingStartup=[];};function edit(cell){var row,_365,_366,_367,_368,_369,cmp,dfd,node,self=this;function show(dfd){_365.grid._activeCell=_366;_35b(_365.editorInstance,_365,_366,_369);_365._editTimer=setTimeout(function(){if(cmp.focus){cmp.focus();}if(_365._editorBlurHandle){_365._editorBlurHandle.resume();}_365._editTimer=null;dfd.resolve(cmp);},0);};if(!cell.column){cell=this.cell(cell);}if(!cell||!cell.element){return null;}_365=cell.column;_368=_365.field;_366=cell.element.contents||cell.element;if((cmp=_365.editorInstance)){if(_365.grid._activeCell!=_366){row=cell.row;_367=this.dirty&&this.dirty[row.id];_369=(_367&&_368 in _367)?_367[_368]:_365.get?_365.get(row.data):row.data[_368];if(!_365.canEdit||_365.canEdit(cell.row.data,_369)){dfd=new _32d();node=cmp.domNode||cmp;if(node.offsetWidth){node.blur();setTimeout(function(){show(dfd);},0);}else{show(dfd);}return dfd.promise;}}}else{if(_365.editor){cmp=_366.widget||_366.input;if(cmp){dfd=new _32d();if(cmp.focus){cmp.focus();}dfd.resolve(cmp);return dfd.promise;}}}return null;};return function(_36a,_36b,_36c){var _36d=_36a.renderCell||Grid.defaultRenderCell,_36e=[],_36f;function _370(_371){var grid=_371.grid,_372,_373;if(!grid.edit){grid.edit=edit;grid._editorsPendingStartup=[];_36e.push(on(grid.domNode,".dgrid-input:focusin",function(){grid._focusedEditorCell=grid.cell(this);}));_372=grid._editorFocusoutHandle=on.pausable(grid.domNode,".dgrid-input:focusout",function(){grid._focusedEditorCell=null;});_36e.push(_372);_36e.push(_32e.before(grid,"removeRow",function(row){var _374=grid._focusedEditorCell;row=grid.row(row);if(_374&&_374.row.id===row.id){_373=_374;_372.pause();setTimeout(function(){_372.resume();_373=null;},0);}}));_36e.push(_32e.after(grid,"insertRow",function(_375){var row=grid.row(_375);if(_373&&_373.row.id===row.id){grid.edit(grid.cell(row,_373.column.id));}return _375;}));_36e.push(_32e.after(grid,"renderArray",function(rows){when(rows,function(_376){if(_376.length){_364(grid);}else{grid._editorsPendingStartup=[];}});return rows;}));_36e.push(_32e.after(grid,"_onNotification",function(){_364(grid);}));}};if(!_36a){_36a={};}_36a.editor=_36b=_36b||_36a.editor||"text";_36a.editOn=_36c=_36c||_36a.editOn;_36f=typeof _36b!="string";if(_36a.widgetArgs){_32b.deprecated("column.widgetArgs","use column.editorArgs instead","dgrid 0.4");_36a.editorArgs=_36a.widgetArgs;}_32e.after(_36a,"init",_36c?function(){_370(_36a);_36a.editorInstance=_34f(_36a,_36d);}:function(){var grid=_36a.grid;_370(_36a);if(_36f){_36e.push(_32e.before(grid,"removeRow",function(_377){var _378=grid.cell(_377,_36a.id).element,_379=_378&&(_378.contents||_378).widget;if(_379){grid._editorFocusoutHandle.pause();_379.destroyRecursive();}}));}});_32e.after(_36a,"destroy",function(){_32c.forEach(_36e,function(l){l.remove();});if(_36a._editorBlurHandle){_36a._editorBlurHandle.remove();}if(_36a._editTimer){clearTimeout(_36a._editTimer);}if(_36c&&_36f){_36a.editorInstance.destroyRecursive();}_36a.grid.edit=null;_36a.grid._editorsPendingStartup=null;});_36a.renderCell=_36c?function(_37a,_37b,cell,_37c){var grid=_36a.grid;if(!_37c||!_37c.alreadyHooked){on(cell.tagName=="TD"?cell:cell.parentNode,_36c,function(){grid._activeOptions=_37c;grid.edit(this);});}return _36d.call(_36a,_37a,_37b,cell,_37c);}:function(_37d,_37e,cell,_37f){if(!_36a.canEdit||_36a.canEdit(_37d,_37e)){var cmp=_347(_36a);_35b(cmp,_36a,cell,_37e);cell[_36f?"widget":"input"]=cmp;}else{return _36d.call(_36a,_37d,_37e,cell,_37f);}};return _36a;};});},"dijit/Menu":function(){define(["require","dojo/_base/array","dojo/_base/declare","dojo/dom","dojo/dom-attr","dojo/dom-geometry","dojo/dom-style","dojo/keys","dojo/_base/lang","dojo/on","dojo/sniff","dojo/_base/window","dojo/window","./popup","./DropDownMenu","dojo/ready"],function(_380,_381,_382,dom,_383,_384,_385,keys,lang,on,has,win,_386,pm,_387,_388){if(has("dijit-legacy-requires")){_388(0,function(){var _389=["dijit/MenuItem","dijit/PopupMenuItem","dijit/CheckedMenuItem","dijit/MenuSeparator"];_380(_389);});}return _382("dijit.Menu",_387,{constructor:function(){this._bindings=[];},targetNodeIds:[],selector:"",contextMenuForWindow:false,leftClickToOpen:false,refocus:true,postCreate:function(){if(this.contextMenuForWindow){this.bindDomNode(this.ownerDocumentBody);}else{_381.forEach(this.targetNodeIds,this.bindDomNode,this);}this.inherited(arguments);},_iframeContentWindow:function(_38a){return _386.get(this._iframeContentDocument(_38a))||this._iframeContentDocument(_38a)["__parent__"]||(_38a.name&&document.frames[_38a.name])||null;},_iframeContentDocument:function(_38b){return _38b.contentDocument||(_38b.contentWindow&&_38b.contentWindow.document)||(_38b.name&&document.frames[_38b.name]&&document.frames[_38b.name].document)||null;},bindDomNode:function(node){node=dom.byId(node,this.ownerDocument);var cn;if(node.tagName.toLowerCase()=="iframe"){var _38c=node,_38d=this._iframeContentWindow(_38c);cn=win.body(_38d.document);}else{cn=(node==win.body(this.ownerDocument)?this.ownerDocument.documentElement:node);}var _38e={node:node,iframe:_38c};_383.set(node,"_dijitMenu"+this.id,this._bindings.push(_38e));var _38f=lang.hitch(this,function(cn){var _390=this.selector,_391=_390?function(_392){return on.selector(_390,_392);}:function(_393){return _393;},self=this;return [on(cn,_391(this.leftClickToOpen?"click":"contextmenu"),function(evt){evt.stopPropagation();evt.preventDefault();if((new Date()).getTime()<self._lastKeyDown+500){return;}self._scheduleOpen(this,_38c,{x:evt.pageX,y:evt.pageY},evt.target);}),on(cn,_391("keydown"),function(evt){if(evt.keyCode==93||(evt.shiftKey&&evt.keyCode==keys.F10)||(self.leftClickToOpen&&evt.keyCode==keys.SPACE)){evt.stopPropagation();evt.preventDefault();self._scheduleOpen(this,_38c,null,evt.target);self._lastKeyDown=(new Date()).getTime();}})];});_38e.connects=cn?_38f(cn):[];if(_38c){_38e.onloadHandler=lang.hitch(this,function(){var _394=this._iframeContentWindow(_38c),cn=win.body(_394.document);_38e.connects=_38f(cn);});if(_38c.addEventListener){_38c.addEventListener("load",_38e.onloadHandler,false);}else{_38c.attachEvent("onload",_38e.onloadHandler);}}},unBindDomNode:function(_395){var node;try{node=dom.byId(_395,this.ownerDocument);}catch(e){return;}var _396="_dijitMenu"+this.id;if(node&&_383.has(node,_396)){var bid=_383.get(node,_396)-1,b=this._bindings[bid],h;while((h=b.connects.pop())){h.remove();}var _397=b.iframe;if(_397){if(_397.removeEventListener){_397.removeEventListener("load",b.onloadHandler,false);}else{_397.detachEvent("onload",b.onloadHandler);}}_383.remove(node,_396);delete this._bindings[bid];}},_scheduleOpen:function(_398,_399,_39a,_39b){if(!this._openTimer){this._openTimer=this.defer(function(){delete this._openTimer;this._openMyself({target:_39b,delegatedTarget:_398,iframe:_399,coords:_39a});},1);}},_openMyself:function(args){var _39c=args.target,_39d=args.iframe,_39e=args.coords,_39f=!_39e;this.currentTarget=args.delegatedTarget;if(_39e){if(_39d){var ifc=_384.position(_39d,true),_3a0=this._iframeContentWindow(_39d),_3a1=_384.docScroll(_3a0.document);var cs=_385.getComputedStyle(_39d),tp=_385.toPixelValue,left=(has("ie")&&has("quirks")?0:tp(_39d,cs.paddingLeft))+(has("ie")&&has("quirks")?tp(_39d,cs.borderLeftWidth):0),top=(has("ie")&&has("quirks")?0:tp(_39d,cs.paddingTop))+(has("ie")&&has("quirks")?tp(_39d,cs.borderTopWidth):0);_39e.x+=ifc.x+left-_3a1.x;_39e.y+=ifc.y+top-_3a1.y;}}else{_39e=_384.position(_39c,true);_39e.x+=10;_39e.y+=10;}var self=this;var _3a2=this._focusManager.get("prevNode");var _3a3=this._focusManager.get("curNode");var _3a4=!_3a3||(dom.isDescendant(_3a3,this.domNode))?_3a2:_3a3;function _3a5(){if(self.refocus&&_3a4){_3a4.focus();}pm.close(self);};pm.open({popup:this,x:_39e.x,y:_39e.y,onExecute:_3a5,onCancel:_3a5,orient:this.isLeftToRight()?"L":"R"});this.focus();if(!_39f){this.defer(function(){this._cleanUp(true);});}this._onBlur=function(){this.inherited("_onBlur",arguments);pm.close(this);};},destroy:function(){_381.forEach(this._bindings,function(b){if(b){this.unBindDomNode(b.node);}},this);this.inherited(arguments);}});});},"dijit/_base/window":function(){define(["dojo/window","../main"],function(_3a6,_3a7){_3a7.getDocumentWindow=function(doc){return _3a6.get(doc);};});},"dojo/store/Observable":function(){define(["../_base/kernel","../_base/lang","../when","../_base/array"],function(_3a8,lang,when,_3a9){var _3aa=function(_3ab){var _3ac,_3ad=[],_3ae=0;_3ab=lang.delegate(_3ab);_3ab.notify=function(_3af,_3b0){_3ae++;var _3b1=_3ad.slice();for(var i=0,l=_3b1.length;i<l;i++){_3b1[i](_3af,_3b0);}};var _3b2=_3ab.query;_3ab.query=function(_3b3,_3b4){_3b4=_3b4||{};var _3b5=_3b2.apply(this,arguments);if(_3b5&&_3b5.forEach){var _3b6=lang.mixin({},_3b4);delete _3b6.start;delete _3b6.count;var _3b7=_3ab.queryEngine&&_3ab.queryEngine(_3b3,_3b6);var _3b8=_3ae;var _3b9=[],_3ba;_3b5.observe=function(_3bb,_3bc){if(_3b9.push(_3bb)==1){_3ad.push(_3ba=function(_3bd,_3be){when(_3b5,function(_3bf){var _3c0=_3bf.length!=_3b4.count;var i,l,_3bb;if(++_3b8!=_3ae){throw new Error("Query is out of date, you must observe() the query prior to any data modifications");}var _3c1,_3c2=-1,_3c3=-1;if(_3be!==_3ac){var _3c4=[].concat(_3bf);if(_3b7&&!_3bd){_3c4=_3b7(_3bf);}for(i=0,l=_3bf.length;i<l;i++){var _3c5=_3bf[i];if(_3ab.getIdentity(_3c5)==_3be){if(_3c4.indexOf(_3c5)<0){continue;}_3c1=_3c5;_3c2=i;if(_3b7||!_3bd){_3bf.splice(i,1);}break;}}}if(_3b7){if(_3bd&&(_3b7.matches?_3b7.matches(_3bd):_3b7([_3bd]).length)){var _3c6=_3c2>-1?_3c2:_3bf.length;_3bf.splice(_3c6,0,_3bd);_3c3=_3a9.indexOf(_3b7(_3bf),_3bd);_3bf.splice(_3c6,1);if((_3b4.start&&_3c3==0)||(!_3c0&&_3c3==_3bf.length)){_3c3=-1;}else{_3bf.splice(_3c3,0,_3bd);}}}else{if(_3bd){if(_3be!==_3ac){_3c3=_3c2;}else{if(!_3b4.start){_3c3=_3ab.defaultIndex||0;_3bf.splice(_3c3,0,_3bd);}}}}if((_3c2>-1||_3c3>-1)&&(_3bc||!_3b7||(_3c2!=_3c3))){var _3c7=_3b9.slice();for(i=0;_3bb=_3c7[i];i++){_3bb(_3bd||_3c1,_3c2,_3c3);}}});});}var _3c8={};_3c8.remove=_3c8.cancel=function(){var _3c9=_3a9.indexOf(_3b9,_3bb);if(_3c9>-1){_3b9.splice(_3c9,1);if(!_3b9.length){_3ad.splice(_3a9.indexOf(_3ad,_3ba),1);}}};return _3c8;};}return _3b5;};var _3ca;function _3cb(_3cc,_3cd){var _3ce=_3ab[_3cc];if(_3ce){_3ab[_3cc]=function(_3cf){var _3d0;if(_3cc==="put"){_3d0=_3ab.getIdentity(_3cf);}if(_3ca){return _3ce.apply(this,arguments);}_3ca=true;try{var _3d1=_3ce.apply(this,arguments);when(_3d1,function(_3d2){_3cd((typeof _3d2=="object"&&_3d2)||_3cf,_3d0);});return _3d1;}finally{_3ca=false;}};}};_3cb("put",function(_3d3,_3d4){_3ab.notify(_3d3,_3d4);});_3cb("add",function(_3d5){_3ab.notify(_3d5);});_3cb("remove",function(id){_3ab.notify(undefined,id);});return _3ab;};lang.setObject("dojo.store.Observable",_3aa);return _3aa;});},"dijit/form/MappedTextBox":function(){define(["dojo/_base/declare","dojo/sniff","dojo/dom-construct","./ValidationTextBox"],function(_3d6,has,_3d7,_3d8){return _3d6("dijit.form.MappedTextBox",_3d8,{postMixInProperties:function(){this.inherited(arguments);this.nameAttrSetting="";},_setNameAttr:"valueNode",serialize:function(val){return val.toString?val.toString():"";},toString:function(){var val=this.filter(this.get("value"));return val!=null?(typeof val=="string"?val:this.serialize(val,this.constraints)):"";},validate:function(){this.valueNode.value=this.toString();return this.inherited(arguments);},buildRendering:function(){this.inherited(arguments);this.valueNode=_3d7.place("<input type='hidden'"+((this.name&&!has("msapp"))?" name=\""+this.name.replace(/"/g,"&quot;")+"\"":"")+"/>",this.textbox,"after");},reset:function(){this.valueNode.value="";this.inherited(arguments);}});});},"dojox/grid/util":function(){define(["../main","dojo/_base/lang","dojo/dom"],function(_3d9,lang,dom){var dgu=lang.getObject("grid.util",true,_3d9);dgu.na="...";dgu.rowIndexTag="gridRowIndex";dgu.gridViewTag="gridView";dgu.fire=function(ob,ev,args){var fn=ob&&ev&&ob[ev];return fn&&(args?fn.apply(ob,args):ob[ev]());};dgu.setStyleHeightPx=function(_3da,_3db){if(_3db>=0){var s=_3da.style;var v=_3db+"px";if(_3da&&s["height"]!=v){s["height"]=v;}}};dgu.mouseEvents=["mouseover","mouseout","mousedown","mouseup","click","dblclick","contextmenu"];dgu.keyEvents=["keyup","keydown","keypress"];dgu.funnelEvents=function(_3dc,_3dd,_3de,_3df){var evts=(_3df?_3df:dgu.mouseEvents.concat(dgu.keyEvents));for(var i=0,l=evts.length;i<l;i++){_3dd.connect(_3dc,"on"+evts[i],_3de);}};dgu.removeNode=function(_3e0){_3e0=dom.byId(_3e0);_3e0&&_3e0.parentNode&&_3e0.parentNode.removeChild(_3e0);return _3e0;};dgu.arrayCompare=function(inA,inB){for(var i=0,l=inA.length;i<l;i++){if(inA[i]!=inB[i]){return false;}}return (inA.length==inB.length);};dgu.arrayInsert=function(_3e1,_3e2,_3e3){if(_3e1.length<=_3e2){_3e1[_3e2]=_3e3;}else{_3e1.splice(_3e2,0,_3e3);}};dgu.arrayRemove=function(_3e4,_3e5){_3e4.splice(_3e5,1);};dgu.arraySwap=function(_3e6,inI,inJ){var _3e7=_3e6[inI];_3e6[inI]=_3e6[inJ];_3e6[inJ]=_3e7;};return dgu;});},"dojox/grid/_RowManager":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/dom-class"],function(_3e8,lang,_3e9){var _3ea=function(_3eb,_3ec){if(_3eb.style.cssText==undefined){_3eb.setAttribute("style",_3ec);}else{_3eb.style.cssText=_3ec;}};return _3e8("dojox.grid._RowManager",null,{constructor:function(_3ed){this.grid=_3ed;},linesToEms:2,overRow:-2,prepareStylingRow:function(_3ee,_3ef){return {index:_3ee,node:_3ef,odd:Boolean(_3ee&1),selected:!!this.grid.selection.isSelected(_3ee),over:this.isOver(_3ee),customStyles:"",customClasses:"dojoxGridRow"};},styleRowNode:function(_3f0,_3f1){var row=this.prepareStylingRow(_3f0,_3f1);this.grid.onStyleRow(row);this.applyStyles(row);},applyStyles:function(_3f2){var i=_3f2;i.node.className=i.customClasses;var h=i.node.style.height;_3ea(i.node,i.customStyles+";"+(i.node._style||""));i.node.style.height=h;},updateStyles:function(_3f3){this.grid.updateRowStyles(_3f3);},setOverRow:function(_3f4){var last=this.overRow;this.overRow=_3f4;if((last!=this.overRow)&&(lang.isString(last)||last>=0)){this.updateStyles(last);}this.updateStyles(this.overRow);},isOver:function(_3f5){return (this.overRow==_3f5&&!_3e9.contains(this.grid.domNode,"dojoxGridColumnResizing"));}});});},"dojo/dnd/Moveable":function(){define(["../_base/array","../_base/declare","../_base/lang","../dom","../dom-class","../Evented","../on","../topic","../touch","./common","./Mover","../_base/window"],function(_3f6,_3f7,lang,dom,_3f8,_3f9,on,_3fa,_3fb,dnd,_3fc,win){var _3fd=_3f7("dojo.dnd.Moveable",[_3f9],{handle:"",delay:0,skip:false,constructor:function(node,_3fe){this.node=dom.byId(node);if(!_3fe){_3fe={};}this.handle=_3fe.handle?dom.byId(_3fe.handle):null;if(!this.handle){this.handle=this.node;}this.delay=_3fe.delay>0?_3fe.delay:0;this.skip=_3fe.skip;this.mover=_3fe.mover?_3fe.mover:_3fc;this.events=[on(this.handle,_3fb.press,lang.hitch(this,"onMouseDown")),on(this.handle,"dragstart",lang.hitch(this,"onSelectStart")),on(this.handle,"selectstart",lang.hitch(this,"onSelectStart"))];},markupFactory:function(_3ff,node,Ctor){return new Ctor(node,_3ff);},destroy:function(){_3f6.forEach(this.events,function(_400){_400.remove();});this.events=this.node=this.handle=null;},onMouseDown:function(e){if(this.skip&&dnd.isFormElement(e)){return;}if(this.delay){this.events.push(on(this.handle,_3fb.move,lang.hitch(this,"onMouseMove")),on(this.handle.ownerDocument,_3fb.release,lang.hitch(this,"onMouseUp")));this._lastX=e.pageX;this._lastY=e.pageY;}else{this.onDragDetected(e);}e.stopPropagation();e.preventDefault();},onMouseMove:function(e){if(Math.abs(e.pageX-this._lastX)>this.delay||Math.abs(e.pageY-this._lastY)>this.delay){this.onMouseUp(e);this.onDragDetected(e);}e.stopPropagation();e.preventDefault();},onMouseUp:function(e){for(var i=0;i<2;++i){this.events.pop().remove();}e.stopPropagation();e.preventDefault();},onSelectStart:function(e){if(!this.skip||!dnd.isFormElement(e)){e.stopPropagation();e.preventDefault();}},onDragDetected:function(e){new this.mover(this.node,e,this);},onMoveStart:function(_401){_3fa.publish("/dnd/move/start",_401);_3f8.add(win.body(),"dojoMove");_3f8.add(this.node,"dojoMoveItem");},onMoveStop:function(_402){_3fa.publish("/dnd/move/stop",_402);_3f8.remove(win.body(),"dojoMove");_3f8.remove(this.node,"dojoMoveItem");},onFirstMove:function(){},onMove:function(_403,_404){this.onMoving(_403,_404);var s=_403.node.style;s.left=_404.l+"px";s.top=_404.t+"px";this.onMoved(_403,_404);},onMoving:function(){},onMoved:function(){}});return _3fd;});},"dojo/store/util/QueryResults":function(){define(["../../_base/array","../../_base/lang","../../when"],function(_405,lang,when){var _406=function(_407){if(!_407){return _407;}var _408=!!_407.then;if(_408){_407=lang.delegate(_407);}function _409(_40a){_407[_40a]=function(){var args=arguments;var _40b=when(_407,function(_40c){Array.prototype.unshift.call(args,_40c);return _406(_405[_40a].apply(_405,args));});if(_40a!=="forEach"||_408){return _40b;}};};_409("forEach");_409("filter");_409("map");if(_407.total==null){_407.total=when(_407,function(_40d){return _40d.length;});}return _407;};lang.setObject("dojo.store.util.QueryResults",_406);return _406;});},"dijit/form/CheckBox":function(){define(["require","dojo/_base/declare","dojo/dom-attr","dojo/has","dojo/query","dojo/ready","./ToggleButton","./_CheckBoxMixin","dojo/text!./templates/CheckBox.html","dojo/NodeList-dom","../a11yclick"],function(_40e,_40f,_410,has,_411,_412,_413,_414,_415){if(has("dijit-legacy-requires")){_412(0,function(){var _416=["dijit/form/RadioButton"];_40e(_416);});}return _40f("dijit.form.CheckBox",[_413,_414],{templateString:_415,baseClass:"dijitCheckBox",_setValueAttr:function(_417,_418){if(typeof _417=="string"){this.inherited(arguments);_417=true;}if(this._created){this.set("checked",_417,_418);}},_getValueAttr:function(){return this.checked&&this._get("value");},_setIconClassAttr:null,_setNameAttr:"focusNode",postMixInProperties:function(){this.inherited(arguments);this.checkedAttrSetting="";},_fillContent:function(){},_onFocus:function(){if(this.id){_411("label[for='"+this.id+"']").addClass("dijitFocusedLabel");}this.inherited(arguments);},_onBlur:function(){if(this.id){_411("label[for='"+this.id+"']").removeClass("dijitFocusedLabel");}this.inherited(arguments);}});});},"dijit/form/Textarea":function(){define(["dojo/_base/declare","dojo/dom-style","./_ExpandingTextAreaMixin","./SimpleTextarea"],function(_419,_41a,_41b,_41c){return _419("dijit.form.Textarea",[_41c,_41b],{baseClass:"dijitTextBox dijitTextArea dijitExpandingTextArea",cols:"",buildRendering:function(){this.inherited(arguments);_41a.set(this.textbox,{overflowY:"hidden",overflowX:"auto",boxSizing:"border-box",MsBoxSizing:"border-box",WebkitBoxSizing:"border-box",MozBoxSizing:"border-box"});}});});},"dijit/form/DropDownButton":function(){define(["dojo/_base/declare","dojo/_base/kernel","dojo/_base/lang","dojo/query","../registry","../popup","./Button","../_Container","../_HasDropDown","dojo/text!./templates/DropDownButton.html","../a11yclick"],function(_41d,_41e,lang,_41f,_420,_421,_422,_423,_424,_425){return _41d("dijit.form.DropDownButton",[_422,_423,_424],{baseClass:"dijitDropDownButton",templateString:_425,_fillContent:function(){var _426=this.srcNodeRef;var dest=this.containerNode;if(_426&&dest){while(_426.hasChildNodes()){var _427=_426.firstChild;if(_427.hasAttribute&&(_427.hasAttribute("data-dojo-type")||_427.hasAttribute("dojoType")||_427.hasAttribute("data-"+_41e._scopeName+"-type")||_427.hasAttribute(_41e._scopeName+"Type"))){this.dropDownContainer=this.ownerDocument.createElement("div");this.dropDownContainer.appendChild(_427);}else{dest.appendChild(_427);}}}},startup:function(){if(this._started){return;}if(!this.dropDown&&this.dropDownContainer){this.dropDown=_420.byNode(this.dropDownContainer.firstChild);delete this.dropDownContainer;}if(this.dropDown){_421.hide(this.dropDown);}this.inherited(arguments);},isLoaded:function(){var _428=this.dropDown;return (!!_428&&(!_428.href||_428.isLoaded));},loadDropDown:function(_429){var _42a=this.dropDown;var _42b=_42a.on("load",lang.hitch(this,function(){_42b.remove();_429();}));_42a.refresh();},isFocusable:function(){return this.inherited(arguments)&&!this._mouseDown;}});});},"dijit/_base/scroll":function(){define(["dojo/window","../main"],function(_42c,_42d){_42d.scrollIntoView=function(node,pos){_42c.scrollIntoView(node,pos);};});},"dojox/grid/_FocusManager":function(){define(["dojo/_base/array","dojo/_base/lang","dojo/_base/declare","dojo/_base/connect","dojo/_base/event","dojo/_base/sniff","dojo/query","./util","dojo/_base/html"],function(_42e,lang,_42f,_430,_431,has,_432,util,html){return _42f("dojox.grid._FocusManager",null,{constructor:function(_433){this.grid=_433;this.cell=null;this.rowIndex=-1;this._connects=[];this._headerConnects=[];this.headerMenu=this.grid.headerMenu;this._connects.push(_430.connect(this.grid.domNode,"onfocus",this,"doFocus"));this._connects.push(_430.connect(this.grid.domNode,"onblur",this,"doBlur"));this._connects.push(_430.connect(this.grid.domNode,"mousedown",this,"_mouseDown"));this._connects.push(_430.connect(this.grid.domNode,"mouseup",this,"_mouseUp"));this._connects.push(_430.connect(this.grid.domNode,"oncontextmenu",this,"doContextMenu"));this._connects.push(_430.connect(this.grid.lastFocusNode,"onfocus",this,"doLastNodeFocus"));this._connects.push(_430.connect(this.grid.lastFocusNode,"onblur",this,"doLastNodeBlur"));this._connects.push(_430.connect(this.grid,"_onFetchComplete",this,"_delayedCellFocus"));this._connects.push(_430.connect(this.grid,"postrender",this,"_delayedHeaderFocus"));},destroy:function(){_42e.forEach(this._connects,_430.disconnect);_42e.forEach(this._headerConnects,_430.disconnect);delete this.grid;delete this.cell;},_colHeadNode:null,_colHeadFocusIdx:null,_contextMenuBindNode:null,tabbingOut:false,focusClass:"dojoxGridCellFocus",focusView:null,initFocusView:function(){this.focusView=this.grid.views.getFirstScrollingView()||this.focusView||this.grid.views.views[0];this._initColumnHeaders();},isFocusCell:function(_434,_435){return (this.cell==_434)&&(this.rowIndex==_435);},isLastFocusCell:function(){if(this.cell){return (this.rowIndex==this.grid.rowCount-1)&&(this.cell.index==this.grid.layout.cellCount-1);}return false;},isFirstFocusCell:function(){if(this.cell){return (this.rowIndex===0)&&(this.cell.index===0);}return false;},isNoFocusCell:function(){return (this.rowIndex<0)||!this.cell;},isNavHeader:function(){return (!!this._colHeadNode);},getHeaderIndex:function(){if(this._colHeadNode){return _42e.indexOf(this._findHeaderCells(),this._colHeadNode);}else{return -1;}},_focusifyCellNode:function(_436){var n=this.cell&&this.cell.getNode(this.rowIndex);if(n){html.toggleClass(n,this.focusClass,_436);if(_436){var sl=this.scrollIntoView();try{if(has("webkit")||!this.grid.edit.isEditing()){util.fire(n,"focus");if(sl){this.cell.view.scrollboxNode.scrollLeft=sl;}}}catch(e){}}}},_delayedCellFocus:function(){if(this.isNavHeader()||!this.grid.focused){return;}var n=this.cell&&this.cell.getNode(this.rowIndex);if(n){try{if(!this.grid.edit.isEditing()){html.toggleClass(n,this.focusClass,true);if(this._colHeadNode){this.blurHeader();}util.fire(n,"focus");}}catch(e){}}},_delayedHeaderFocus:function(){if(this.isNavHeader()){this.focusHeader();}},_initColumnHeaders:function(){_42e.forEach(this._headerConnects,_430.disconnect);this._headerConnects=[];var _437=this._findHeaderCells();for(var i=0;i<_437.length;i++){this._headerConnects.push(_430.connect(_437[i],"onfocus",this,"doColHeaderFocus"));this._headerConnects.push(_430.connect(_437[i],"onblur",this,"doColHeaderBlur"));}},_findHeaderCells:function(){var _438=_432("th",this.grid.viewsHeaderNode);var _439=[];for(var i=0;i<_438.length;i++){var _43a=_438[i];var _43b=html.hasAttr(_43a,"tabIndex");var _43c=html.attr(_43a,"tabIndex");if(_43b&&_43c<0){_439.push(_43a);}}return _439;},_setActiveColHeader:function(_43d,_43e,_43f){this.grid.domNode.setAttribute("aria-activedescendant",_43d.id);if(_43f!=null&&_43f>=0&&_43f!=_43e){html.toggleClass(this._findHeaderCells()[_43f],this.focusClass,false);}html.toggleClass(_43d,this.focusClass,true);this._colHeadNode=_43d;this._colHeadFocusIdx=_43e;this._scrollHeader(this._colHeadFocusIdx);},scrollIntoView:function(){var info=(this.cell?this._scrollInfo(this.cell):null);if(!info||!info.s){return null;}var rt=this.grid.scroller.findScrollTop(this.rowIndex);if(info.n&&info.sr){if(info.n.offsetLeft+info.n.offsetWidth>info.sr.l+info.sr.w){info.s.scrollLeft=info.n.offsetLeft+info.n.offsetWidth-info.sr.w;}else{if(info.n.offsetLeft<info.sr.l){info.s.scrollLeft=info.n.offsetLeft;}}}if(info.r&&info.sr){if(rt+info.r.offsetHeight>info.sr.t+info.sr.h){this.grid.setScrollTop(rt+info.r.offsetHeight-info.sr.h);}else{if(rt<info.sr.t){this.grid.setScrollTop(rt);}}}return info.s.scrollLeft;},_scrollInfo:function(cell,_440){if(cell){var cl=cell,sbn=cl.view.scrollboxNode,sbnr={w:sbn.clientWidth,l:sbn.scrollLeft,t:sbn.scrollTop,h:sbn.clientHeight},rn=cl.view.getRowNode(this.rowIndex);return {c:cl,s:sbn,sr:sbnr,n:(_440?_440:cell.getNode(this.rowIndex)),r:rn};}return null;},_scrollHeader:function(_441){var info=null;if(this._colHeadNode){var cell=this.grid.getCell(_441);if(!cell){return;}info=this._scrollInfo(cell,cell.getNode(0));}if(info&&info.s&&info.sr&&info.n){var _442=info.sr.l+info.sr.w;if(info.n.offsetLeft+info.n.offsetWidth>_442){info.s.scrollLeft=info.n.offsetLeft+info.n.offsetWidth-info.sr.w;}else{if(info.n.offsetLeft<info.sr.l){info.s.scrollLeft=info.n.offsetLeft;}else{if(has("ie")<=7&&cell&&cell.view.headerNode){cell.view.headerNode.scrollLeft=info.s.scrollLeft;}}}}},_isHeaderHidden:function(){var _443=this.focusView;if(!_443){for(var i=0,_444;(_444=this.grid.views.views[i]);i++){if(_444.headerNode){_443=_444;break;}}}return (_443&&html.getComputedStyle(_443.headerNode).display=="none");},colSizeAdjust:function(e,_445,_446){var _447=this._findHeaderCells();var view=this.focusView;if(!view||!view.header.tableMap.map){for(var i=0,_448;(_448=this.grid.views.views[i]);i++){if(_448.header.tableMap.map){view=_448;break;}}}var _449=_447[_445];if(!view||(_445==_447.length-1&&_445===0)){return;}view.content.baseDecorateEvent(e);e.cellNode=_449;e.cellIndex=view.content.getCellNodeIndex(e.cellNode);e.cell=(e.cellIndex>=0?this.grid.getCell(e.cellIndex):null);if(view.header.canResize(e)){var _44a={l:_446};var drag=view.header.colResizeSetup(e,false);view.header.doResizeColumn(drag,null,_44a);view.update();}},styleRow:function(_44b){return;},setFocusIndex:function(_44c,_44d){this.setFocusCell(this.grid.getCell(_44d),_44c);},setFocusCell:function(_44e,_44f){if(_44e&&!this.isFocusCell(_44e,_44f)){this.tabbingOut=false;if(this._colHeadNode){this.blurHeader();}this._colHeadNode=this._colHeadFocusIdx=null;this.focusGridView();this._focusifyCellNode(false);this.cell=_44e;this.rowIndex=_44f;this._focusifyCellNode(true);}if(has("opera")){setTimeout(lang.hitch(this.grid,"onCellFocus",this.cell,this.rowIndex),1);}else{this.grid.onCellFocus(this.cell,this.rowIndex);}},next:function(){if(this.cell){var row=this.rowIndex,col=this.cell.index+1,cc=this.grid.layout.cellCount-1,rc=this.grid.rowCount-1;if(col>cc){col=0;row++;}if(row>rc){col=cc;row=rc;}if(this.grid.edit.isEditing()){var _450=this.grid.getCell(col);if(!this.isLastFocusCell()&&(!_450.editable||this.grid.canEdit&&!this.grid.canEdit(_450,row))){this.cell=_450;this.rowIndex=row;this.next();return;}}this.setFocusIndex(row,col);}},previous:function(){if(this.cell){var row=(this.rowIndex||0),col=(this.cell.index||0)-1;if(col<0){col=this.grid.layout.cellCount-1;row--;}if(row<0){row=0;col=0;}if(this.grid.edit.isEditing()){var _451=this.grid.getCell(col);if(!this.isFirstFocusCell()&&!_451.editable){this.cell=_451;this.rowIndex=row;this.previous();return;}}this.setFocusIndex(row,col);}},move:function(_452,_453){var _454=_453<0?-1:1;if(this.isNavHeader()){var _455=this._findHeaderCells();var _456=currentIdx=_42e.indexOf(_455,this._colHeadNode);currentIdx+=_453;while(currentIdx>=0&&currentIdx<_455.length&&_455[currentIdx].style.display=="none"){currentIdx+=_454;}if((currentIdx>=0)&&(currentIdx<_455.length)){this._setActiveColHeader(_455[currentIdx],currentIdx,_456);}}else{if(this.cell){var sc=this.grid.scroller,r=this.rowIndex,rc=this.grid.rowCount-1,row=Math.min(rc,Math.max(0,r+_452));if(_452){if(_452>0){if(row>sc.getLastPageRow(sc.page)){this.grid.setScrollTop(this.grid.scrollTop+sc.findScrollTop(row)-sc.findScrollTop(r));}}else{if(_452<0){if(row<=sc.getPageRow(sc.page)){this.grid.setScrollTop(this.grid.scrollTop-sc.findScrollTop(r)-sc.findScrollTop(row));}}}}var cc=this.grid.layout.cellCount-1,i=this.cell.index,col=Math.min(cc,Math.max(0,i+_453));var cell=this.grid.getCell(col);while(col>=0&&col<cc&&cell&&cell.hidden===true){col+=_454;cell=this.grid.getCell(col);}if(!cell||cell.hidden===true){col=i;}var n=cell.getNode(row);if(!n&&_452){if((row+_452)>=0&&(row+_452)<=rc){this.move(_452>0?++_452:--_452,_453);}return;}else{if((!n||html.style(n,"display")==="none")&&_453){if((col+_453)>=0&&(col+_453)<=cc){this.move(_452,_453>0?++_453:--_453);}return;}}this.setFocusIndex(row,col);if(_452){this.grid.updateRow(r);}}}},previousKey:function(e){if(this.grid.edit.isEditing()){_431.stop(e);this.previous();}else{if(!this.isNavHeader()&&!this._isHeaderHidden()){this.grid.domNode.focus();_431.stop(e);}else{this.tabOut(this.grid.domNode);if(this._colHeadFocusIdx!=null){html.toggleClass(this._findHeaderCells()[this._colHeadFocusIdx],this.focusClass,false);this._colHeadFocusIdx=null;}this._focusifyCellNode(false);}}},nextKey:function(e){var _457=(this.grid.rowCount===0);if(e.target===this.grid.domNode&&this._colHeadFocusIdx==null){this.focusHeader();_431.stop(e);}else{if(this.isNavHeader()){this.blurHeader();if(!this.findAndFocusGridCell()){this.tabOut(this.grid.lastFocusNode);}this._colHeadNode=this._colHeadFocusIdx=null;}else{if(this.grid.edit.isEditing()){_431.stop(e);this.next();}else{this.tabOut(this.grid.lastFocusNode);}}}},tabOut:function(_458){this.tabbingOut=true;_458.focus();},focusGridView:function(){util.fire(this.focusView,"focus");},focusGrid:function(_459){this.focusGridView();this._focusifyCellNode(true);},findAndFocusGridCell:function(){var _45a=true;var _45b=(this.grid.rowCount===0);if(this.isNoFocusCell()&&!_45b){var _45c=0;var cell=this.grid.getCell(_45c);if(cell.hidden){_45c=this.isNavHeader()?this._colHeadFocusIdx:0;}this.setFocusIndex(0,_45c);}else{if(this.cell&&!_45b){if(this.focusView&&!this.focusView.rowNodes[this.rowIndex]){this.grid.scrollToRow(this.rowIndex);}this.focusGrid();}else{_45a=false;}}this._colHeadNode=this._colHeadFocusIdx=null;return _45a;},focusHeader:function(){var _45d=this._findHeaderCells();var _45e=this._colHeadFocusIdx;if(this._isHeaderHidden()){this.findAndFocusGridCell();}else{if(!this._colHeadFocusIdx){if(this.isNoFocusCell()){this._colHeadFocusIdx=0;}else{this._colHeadFocusIdx=this.cell.index;}}}this._colHeadNode=_45d[this._colHeadFocusIdx];while(this._colHeadNode&&this._colHeadFocusIdx>=0&&this._colHeadFocusIdx<_45d.length&&this._colHeadNode.style.display=="none"){this._colHeadFocusIdx++;this._colHeadNode=_45d[this._colHeadFocusIdx];}if(this._colHeadNode&&this._colHeadNode.style.display!="none"){if(this.headerMenu&&this._contextMenuBindNode!=this.grid.domNode){this.headerMenu.unBindDomNode(this.grid.viewsHeaderNode);this.headerMenu.bindDomNode(this.grid.domNode);this._contextMenuBindNode=this.grid.domNode;}this._setActiveColHeader(this._colHeadNode,this._colHeadFocusIdx,_45e);this._scrollHeader(this._colHeadFocusIdx);this._focusifyCellNode(false);}else{this.findAndFocusGridCell();}},blurHeader:function(){html.removeClass(this._colHeadNode,this.focusClass);html.removeAttr(this.grid.domNode,"aria-activedescendant");if(this.headerMenu&&this._contextMenuBindNode==this.grid.domNode){var _45f=this.grid.viewsHeaderNode;this.headerMenu.unBindDomNode(this.grid.domNode);this.headerMenu.bindDomNode(_45f);this._contextMenuBindNode=_45f;}},doFocus:function(e){if(e&&e.target!=e.currentTarget){_431.stop(e);return;}if(this._clickFocus){return;}if(!this.tabbingOut){this.focusHeader();}this.tabbingOut=false;_431.stop(e);},doBlur:function(e){_431.stop(e);},doContextMenu:function(e){if(!this.headerMenu){_431.stop(e);}},doLastNodeFocus:function(e){if(this.tabbingOut){this._focusifyCellNode(false);}else{if(this.grid.rowCount>0){if(this.isNoFocusCell()){this.setFocusIndex(0,0);}this._focusifyCellNode(true);}else{this.focusHeader();}}this.tabbingOut=false;_431.stop(e);},doLastNodeBlur:function(e){_431.stop(e);},doColHeaderFocus:function(e){this._setActiveColHeader(e.target,html.attr(e.target,"idx"),this._colHeadFocusIdx);this._scrollHeader(this.getHeaderIndex());_431.stop(e);},doColHeaderBlur:function(e){html.toggleClass(e.target,this.focusClass,false);},_mouseDown:function(e){this._clickFocus=dojo.some(this.grid.views.views,function(v){return v.scrollboxNode===e.target;});},_mouseUp:function(e){this._clickFocus=false;}});});},"dijit/_Contained":function(){define(["dojo/_base/declare","./registry"],function(_460,_461){return _460("dijit._Contained",null,{_getSibling:function(_462){var p=this.getParent();return (p&&p._getSiblingOfChild&&p._getSiblingOfChild(this,_462=="previous"?-1:1))||null;},getPreviousSibling:function(){return this._getSibling("previous");},getNextSibling:function(){return this._getSibling("next");},getIndexInParent:function(){var p=this.getParent();if(!p||!p.getIndexOfChild){return -1;}return p.getIndexOfChild(this);}});});},"control/customer/options/extendedsettings":function(){define(["dojo/_base/declare","ttl/BaseWidgetAMD","dojo/text!../options/templates/extendedsettings.html","ttl/utilities2","dojo/request","dojo/_base/lang","dojo/dom-style","dojo/dom-attr","dojo/dom-class","dojo/data/ItemFileReadStore","dijit/ProgressBar"],function(_463,_464,_465,_466,_467,lang,_468,_469,_46a,_46b){return _463("control.customer.options.extendedsettings",[_464],{templateString:_465,constructor:function(){this._update_call_back=lang.hitch(this,this._update_call);},load:function(_46c,_46d){this.search_show_job_roles.set("checked",_46c.search_show_job_roles);this.search_show_coverage.set("checked",_46c.search_show_coverage);this.search_show_profile.set("checked",_46c.search_show_profile);this.search_show_smart.set("checked",_46c.search_show_smart);this.view_outlet_results_colours.set("checked",_46c.view_outlet_results_colours);this.no_distribution.set("checked",_46c.no_distribution);this.no_export.set("checked",_46c.no_export);this.has_clickthrought.set("checked",_46c.has_clickthrought);this.customerid.set("value",_46c.customerid);this.distributionistemplated.set("checked",_46c.distributionistemplated);this.cla.set("checked",false);this.nla.set("checked",false);this.extended_security.set("checked",_46c.extended_security);this.required_client.set("checked",_46c.required_client);this.valid_ips.set("value",_46c.valid_ips);if(_46d!=null&&_46d.length>0){for(var i=0;i<_46d.length;i++){if(_46d[i]==2){this.cla.set("checked",true);}if(_46d[i]==3){this.nla.set("checked",true);}}}},_update:function(){var _46e=this.form.get("value");_467.post("/extendedsettings/update_extendedsettings",_466.make_params({data:_46e})).then(this._update_call_back);},_update_call:function(_46f){if(_46f.success=="OK"){dojo.publish("extended_settings",[_46f.data]);alert("Updated");}else{alert("Problem");}this.updatebtn.cancel();}});});},"dojox/grid/_Builder":function(){define(["../main","dojo/_base/array","dojo/_base/lang","dojo/_base/window","dojo/_base/event","dojo/_base/sniff","dojo/_base/connect","dojo/dnd/Moveable","dojox/html/metrics","./util","dojo/_base/html","dojo/dom-geometry"],function(_470,_471,lang,win,_472,has,_473,_474,_475,util,html,_476){var dg=_470.grid;var _477=function(td){return td.cellIndex>=0?td.cellIndex:_471.indexOf(td.parentNode.cells,td);};var _478=function(tr){return tr.rowIndex>=0?tr.rowIndex:_471.indexOf(tr.parentNode.childNodes,tr);};var _479=function(_47a,_47b){return _47a&&((_47a.rows||0)[_47b]||_47a.childNodes[_47b]);};var _47c=function(node){for(var n=node;n&&n.tagName!="TABLE";n=n.parentNode){}return n;};var _47d=function(_47e,_47f){for(var n=_47e;n&&_47f(n);n=n.parentNode){}return n;};var _480=function(_481){var name=_481.toUpperCase();return function(node){return node.tagName!=name;};};var _482=util.rowIndexTag;var _483=util.gridViewTag;var _484=dg._Builder=lang.extend(function(view){if(view){this.view=view;this.grid=view.grid;}},{view:null,_table:"<table class=\"dojoxGridRowTable\" border=\"0\" cellspacing=\"0\" cellpadding=\"0\" role=\"presentation\"",getTableArray:function(){var html=[this._table];if(this.view.viewWidth){html.push([" style=\"width:",this.view.viewWidth,";\""].join(""));}html.push(">");return html;},generateCellMarkup:function(_485,_486,_487,_488){var _489=[],html;if(_488){var _48a=_485.index!=_485.grid.getSortIndex()?"":_485.grid.sortInfo>0?"aria-sort=\"ascending\"":"aria-sort=\"descending\"";if(!_485.id){_485.id=this.grid.id+"Hdr"+_485.index;}html=["<th tabIndex=\"-1\" aria-readonly=\"true\" role=\"columnheader\"",_48a," id=\"",_485.id,"\""];}else{var _48b=this.grid.editable&&!_485.editable?"aria-readonly=\"true\"":"";html=["<td tabIndex=\"-1\" role=\"gridcell\"",_48b];}if(_485.colSpan){html.push(" colspan=\"",_485.colSpan,"\"");}if(_485.rowSpan){html.push(" rowspan=\"",_485.rowSpan,"\"");}html.push(" class=\"dojoxGridCell ");if(_485.classes){html.push(_485.classes," ");}if(_487){html.push(_487," ");}_489.push(html.join(""));_489.push("");html=["\" idx=\"",_485.index,"\" style=\""];if(_486&&_486[_486.length-1]!=";"){_486+=";";}html.push(_485.styles,_486||"",_485.hidden?"display:none;":"");if(_485.unitWidth){html.push("width:",_485.unitWidth,";");}_489.push(html.join(""));_489.push("");html=["\""];if(_485.attrs){html.push(" ",_485.attrs);}html.push(">");_489.push(html.join(""));_489.push("");_489.push(_488?"</th>":"</td>");return _489;},isCellNode:function(_48c){return Boolean(_48c&&_48c!=win.doc&&html.attr(_48c,"idx"));},getCellNodeIndex:function(_48d){return _48d?Number(html.attr(_48d,"idx")):-1;},getCellNode:function(_48e,_48f){for(var i=0,row;((row=_479(_48e.firstChild,i))&&row.cells);i++){for(var j=0,cell;(cell=row.cells[j]);j++){if(this.getCellNodeIndex(cell)==_48f){return cell;}}}return null;},findCellTarget:function(_490,_491){var n=_490;while(n&&(!this.isCellNode(n)||(n.offsetParent&&_483 in n.offsetParent.parentNode&&n.offsetParent.parentNode[_483]!=this.view.id))&&(n!=_491)){n=n.parentNode;}return n!=_491?n:null;},baseDecorateEvent:function(e){e.dispatch="do"+e.type;e.grid=this.grid;e.sourceView=this.view;e.cellNode=this.findCellTarget(e.target,e.rowNode);e.cellIndex=this.getCellNodeIndex(e.cellNode);e.cell=(e.cellIndex>=0?this.grid.getCell(e.cellIndex):null);},findTarget:function(_492,_493){var n=_492;while(n&&(n!=this.domNode)&&(!(_493 in n)||(_483 in n&&n[_483]!=this.view.id))){n=n.parentNode;}return (n!=this.domNode)?n:null;},findRowTarget:function(_494){return this.findTarget(_494,_482);},isIntraNodeEvent:function(e){try{return (e.cellNode&&e.relatedTarget&&html.isDescendant(e.relatedTarget,e.cellNode));}catch(x){return false;}},isIntraRowEvent:function(e){try{var row=e.relatedTarget&&this.findRowTarget(e.relatedTarget);return !row&&(e.rowIndex==-1)||row&&(e.rowIndex==row.gridRowIndex);}catch(x){return false;}},dispatchEvent:function(e){if(e.dispatch in this){return this[e.dispatch](e);}return false;},domouseover:function(e){if(e.cellNode&&(e.cellNode!=this.lastOverCellNode)){this.lastOverCellNode=e.cellNode;this.grid.onMouseOver(e);}this.grid.onMouseOverRow(e);},domouseout:function(e){if(e.cellNode&&(e.cellNode==this.lastOverCellNode)&&!this.isIntraNodeEvent(e,this.lastOverCellNode)){this.lastOverCellNode=null;this.grid.onMouseOut(e);if(!this.isIntraRowEvent(e)){this.grid.onMouseOutRow(e);}}},domousedown:function(e){if(e.cellNode){this.grid.onMouseDown(e);}this.grid.onMouseDownRow(e);},_getTextDirStyle:function(_495,_496,_497){return "";}});var _498=dg._ContentBuilder=lang.extend(function(view){_484.call(this,view);},_484.prototype,{update:function(){this.prepareHtml();},prepareHtml:function(){var _499=this.grid.get,_49a=this.view.structure.cells;for(var j=0,row;(row=_49a[j]);j++){for(var i=0,cell;(cell=row[i]);i++){cell.get=cell.get||(cell.value==undefined)&&_499;cell.markup=this.generateCellMarkup(cell,cell.cellStyles,cell.cellClasses,false);if(!this.grid.editable&&cell.editable){this.grid.editable=true;}}}},generateHtml:function(_49b,_49c){var html=this.getTableArray(),v=this.view,dir,_49d=v.structure.cells,item=this.grid.getItem(_49c);util.fire(this.view,"onBeforeRow",[_49c,_49d]);for(var j=0,row;(row=_49d[j]);j++){if(row.hidden||row.header){continue;}html.push(!row.invisible?"<tr>":"<tr class=\"dojoxGridInvisible\">");for(var i=0,cell,m,cc,cs;(cell=row[i]);i++){m=cell.markup;cc=cell.customClasses=[];cs=cell.customStyles=[];m[5]=cell.format(_49c,item);m[1]=cc.join(" ");m[3]=cs.join(";");dir=cell.textDir||this.grid.textDir;if(dir){m[3]+=this._getTextDirStyle(dir,cell,_49c);}html.push.apply(html,m);}html.push("</tr>");}html.push("</table>");return html.join("");},decorateEvent:function(e){e.rowNode=this.findRowTarget(e.target);if(!e.rowNode){return false;}e.rowIndex=e.rowNode[_482];this.baseDecorateEvent(e);e.cell=this.grid.getCell(e.cellIndex);return true;}});var _49e=dg._HeaderBuilder=lang.extend(function(view){this.moveable=null;_484.call(this,view);},_484.prototype,{_skipBogusClicks:false,overResizeWidth:4,minColWidth:1,update:function(){if(this.tableMap){this.tableMap.mapRows(this.view.structure.cells);}else{this.tableMap=new dg._TableMap(this.view.structure.cells);}},generateHtml:function(_49f,_4a0){var dir,html=this.getTableArray(),_4a1=this.view.structure.cells;util.fire(this.view,"onBeforeRow",[-1,_4a1]);for(var j=0,row;(row=_4a1[j]);j++){if(row.hidden){continue;}html.push(!row.invisible?"<tr>":"<tr class=\"dojoxGridInvisible\">");for(var i=0,cell,_4a2;(cell=row[i]);i++){cell.customClasses=[];cell.customStyles=[];if(this.view.simpleStructure){if(cell.draggable){if(cell.headerClasses){if(cell.headerClasses.indexOf("dojoDndItem")==-1){cell.headerClasses+=" dojoDndItem";}}else{cell.headerClasses="dojoDndItem";}}if(cell.attrs){if(cell.attrs.indexOf("dndType='gridColumn_")==-1){cell.attrs+=" dndType='gridColumn_"+this.grid.id+"'";}}else{cell.attrs="dndType='gridColumn_"+this.grid.id+"'";}}_4a2=this.generateCellMarkup(cell,cell.headerStyles,cell.headerClasses,true);_4a2[5]=(_4a0!=undefined?_4a0:_49f(cell));_4a2[3]=cell.customStyles.join(";");dir=cell.textDir||this.grid.textDir;if(dir){_4a2[3]+=this._getTextDirStyle(dir,cell,_4a0);}_4a2[1]=cell.customClasses.join(" ");html.push(_4a2.join(""));}html.push("</tr>");}html.push("</table>");return html.join("");},getCellX:function(e){var n,x,pos;n=_47d(e.target,_480("th"));if(n){pos=_476.position(n);x=e.clientX-pos.x;}else{x=e.layerX;}return x;},decorateEvent:function(e){this.baseDecorateEvent(e);e.rowIndex=-1;e.cellX=this.getCellX(e);return true;},prepareResize:function(e,mod){do{var i=e.cellIndex;e.cellNode=(i?e.cellNode.parentNode.cells[i+mod]:null);e.cellIndex=(e.cellNode?this.getCellNodeIndex(e.cellNode):-1);}while(e.cellNode&&e.cellNode.style.display=="none");return Boolean(e.cellNode);},canResize:function(e){if(!e.cellNode||e.cellNode.colSpan>1){return false;}var cell=this.grid.getCell(e.cellIndex);return !cell.noresize&&cell.canResize();},overLeftResizeArea:function(e){if(html.hasClass(win.body(),"dojoDndMove")){return false;}if(has("ie")){var tN=e.target;if(html.hasClass(tN,"dojoxGridArrowButtonNode")||html.hasClass(tN,"dojoxGridArrowButtonChar")||html.hasClass(tN,"dojoxGridColCaption")){return false;}}if(this.grid.isLeftToRight()){return (e.cellIndex>0)&&(e.cellX>0&&e.cellX<this.overResizeWidth)&&this.prepareResize(e,-1);}var t=e.cellNode&&(e.cellX>0&&e.cellX<this.overResizeWidth);return t;},overRightResizeArea:function(e){if(html.hasClass(win.body(),"dojoDndMove")){return false;}if(has("ie")){var tN=e.target;if(html.hasClass(tN,"dojoxGridArrowButtonNode")||html.hasClass(tN,"dojoxGridArrowButtonChar")||html.hasClass(tN,"dojoxGridColCaption")){return false;}}if(this.grid.isLeftToRight()){return e.cellNode&&(e.cellX>=e.cellNode.offsetWidth-this.overResizeWidth);}return (e.cellIndex>0)&&(e.cellX>=e.cellNode.offsetWidth-this.overResizeWidth)&&this.prepareResize(e,-1);},domousemove:function(e){if(!this.moveable){var c=(this.overRightResizeArea(e)?"dojoxGridColResize":(this.overLeftResizeArea(e)?"dojoxGridColResize":""));if(c&&!this.canResize(e)){c="dojoxGridColNoResize";}html.toggleClass(e.sourceView.headerNode,"dojoxGridColNoResize",(c=="dojoxGridColNoResize"));html.toggleClass(e.sourceView.headerNode,"dojoxGridColResize",(c=="dojoxGridColResize"));if(c){_472.stop(e);}}},domousedown:function(e){if(!this.moveable){if((this.overRightResizeArea(e)||this.overLeftResizeArea(e))&&this.canResize(e)){this.beginColumnResize(e);}else{this.grid.onMouseDown(e);this.grid.onMouseOverRow(e);}}},doclick:function(e){if(this._skipBogusClicks){_472.stop(e);return true;}return false;},colResizeSetup:function(e,_4a3){var _4a4=html.contentBox(e.sourceView.headerNode);if(_4a3){this.lineDiv=document.createElement("div");var vw=html.position(e.sourceView.headerNode,true);var _4a5=html.contentBox(e.sourceView.domNode);var l=e.pageX;if(!this.grid.isLeftToRight()&&has("ie")<8){l-=_475.getScrollbar().w;}html.style(this.lineDiv,{top:vw.y+"px",left:l+"px",height:(_4a5.h+_4a4.h)+"px"});html.addClass(this.lineDiv,"dojoxGridResizeColLine");this.lineDiv._origLeft=l;win.body().appendChild(this.lineDiv);}var _4a6=[],_4a7=this.tableMap.findOverlappingNodes(e.cellNode);for(var i=0,cell;(cell=_4a7[i]);i++){_4a6.push({node:cell,index:this.getCellNodeIndex(cell),width:cell.offsetWidth});}var view=e.sourceView;var adj=this.grid.isLeftToRight()?1:-1;var _4a8=e.grid.views.views;var _4a9=[];for(var j=view.idx+adj,_4aa;(_4aa=_4a8[j]);j=j+adj){_4a9.push({node:_4aa.headerNode,left:window.parseInt(_4aa.headerNode.style.left)});}var _4ab=view.headerContentNode.firstChild;var drag={scrollLeft:e.sourceView.headerNode.scrollLeft,view:view,node:e.cellNode,index:e.cellIndex,w:html.contentBox(e.cellNode).w,vw:_4a4.w,table:_4ab,tw:html.contentBox(_4ab).w,spanners:_4a6,followers:_4a9};return drag;},beginColumnResize:function(e){this.moverDiv=document.createElement("div");html.style(this.moverDiv,{position:"absolute",left:0});win.body().appendChild(this.moverDiv);html.addClass(this.grid.domNode,"dojoxGridColumnResizing");var m=(this.moveable=new _474(this.moverDiv));var drag=this.colResizeSetup(e,true);m.onMove=lang.hitch(this,"doResizeColumn",drag);_473.connect(m,"onMoveStop",lang.hitch(this,function(){this.endResizeColumn(drag);if(drag.node.releaseCapture){drag.node.releaseCapture();}this.moveable.destroy();delete this.moveable;this.moveable=null;html.removeClass(this.grid.domNode,"dojoxGridColumnResizing");}));if(e.cellNode.setCapture){e.cellNode.setCapture();}m.onMouseDown(e);},doResizeColumn:function(_4ac,_4ad,_4ae){var _4af=_4ae.l;var data={deltaX:_4af,w:_4ac.w+(this.grid.isLeftToRight()?_4af:-_4af),vw:_4ac.vw+_4af,tw:_4ac.tw+_4af};this.dragRecord={inDrag:_4ac,mover:_4ad,leftTop:_4ae};if(data.w>=this.minColWidth){if(!_4ad){this.doResizeNow(_4ac,data);}else{html.style(this.lineDiv,"left",(this.lineDiv._origLeft+data.deltaX)+"px");}}},endResizeColumn:function(_4b0){if(this.dragRecord){var _4b1=this.dragRecord.leftTop;var _4b2=this.grid.isLeftToRight()?_4b1.l:-_4b1.l;_4b2+=Math.max(_4b0.w+_4b2,this.minColWidth)-(_4b0.w+_4b2);if(has("webkit")&&_4b0.spanners.length){_4b2+=html._getPadBorderExtents(_4b0.spanners[0].node).w;}var data={deltaX:_4b2,w:_4b0.w+_4b2,vw:_4b0.vw+_4b2,tw:_4b0.tw+_4b2};this.doResizeNow(_4b0,data);delete this.dragRecord;}html.destroy(this.lineDiv);html.destroy(this.moverDiv);html.destroy(this.moverDiv);delete this.moverDiv;this._skipBogusClicks=true;_4b0.view.update();this._skipBogusClicks=false;this.grid.onResizeColumn(_4b0.index);},doResizeNow:function(_4b3,data){_4b3.view.convertColPctToFixed();if(_4b3.view.flexCells&&!_4b3.view.testFlexCells()){var t=_47c(_4b3.node);if(t){(t.style.width="");}}var i,s,sw,f,fl;for(i=0;(s=_4b3.spanners[i]);i++){sw=s.width+data.deltaX;if(sw>0){s.node.style.width=sw+"px";_4b3.view.setColWidth(s.index,sw);}}if(this.grid.isLeftToRight()||!has("ie")){for(i=0;(f=_4b3.followers[i]);i++){fl=f.left+data.deltaX;f.node.style.left=fl+"px";}}_4b3.node.style.width=data.w+"px";_4b3.view.setColWidth(_4b3.index,data.w);_4b3.view.headerNode.style.width=data.vw+"px";_4b3.view.setColumnsWidth(data.tw);if(!this.grid.isLeftToRight()){_4b3.view.headerNode.scrollLeft=_4b3.scrollLeft+data.deltaX;}}});dg._TableMap=lang.extend(function(rows){this.mapRows(rows);},{map:null,mapRows:function(_4b4){var _4b5=_4b4.length;if(!_4b5){return;}this.map=[];var row;for(var k=0;(row=_4b4[k]);k++){this.map[k]=[];}for(var j=0;(row=_4b4[j]);j++){for(var i=0,x=0,cell,_4b6,_4b7;(cell=row[i]);i++){while(this.map[j][x]){x++;}this.map[j][x]={c:i,r:j};_4b7=cell.rowSpan||1;_4b6=cell.colSpan||1;for(var y=0;y<_4b7;y++){for(var s=0;s<_4b6;s++){this.map[j+y][x+s]=this.map[j][x];}}x+=_4b6;}}},dumpMap:function(){for(var j=0,row,h="";(row=this.map[j]);j++,h=""){for(var i=0,cell;(cell=row[i]);i++){h+=cell.r+","+cell.c+"   ";}}},getMapCoords:function(_4b8,_4b9){for(var j=0,row;(row=this.map[j]);j++){for(var i=0,cell;(cell=row[i]);i++){if(cell.c==_4b9&&cell.r==_4b8){return {j:j,i:i};}}}return {j:-1,i:-1};},getNode:function(_4ba,_4bb,_4bc){var row=_4ba&&_4ba.rows[_4bb];return row&&row.cells[_4bc];},_findOverlappingNodes:function(_4bd,_4be,_4bf){var _4c0=[];var m=this.getMapCoords(_4be,_4bf);for(var j=0,row;(row=this.map[j]);j++){if(j==m.j){continue;}var rw=row[m.i];var n=(rw?this.getNode(_4bd,rw.r,rw.c):null);if(n){_4c0.push(n);}}return _4c0;},findOverlappingNodes:function(_4c1){return this._findOverlappingNodes(_47c(_4c1),_478(_4c1.parentNode),_477(_4c1));}});return {_Builder:_484,_HeaderBuilder:_49e,_ContentBuilder:_498};});},"dijit/_Container":function(){define(["dojo/_base/array","dojo/_base/declare","dojo/dom-construct","dojo/_base/kernel"],function(_4c2,_4c3,_4c4,_4c5){return _4c3("dijit._Container",null,{buildRendering:function(){this.inherited(arguments);if(!this.containerNode){this.containerNode=this.domNode;}},addChild:function(_4c6,_4c7){var _4c8=this.containerNode;if(_4c7>0){_4c8=_4c8.firstChild;while(_4c7>0){if(_4c8.nodeType==1){_4c7--;}_4c8=_4c8.nextSibling;}if(_4c8){_4c7="before";}else{_4c8=this.containerNode;_4c7="last";}}_4c4.place(_4c6.domNode,_4c8,_4c7);if(this._started&&!_4c6._started){_4c6.startup();}},removeChild:function(_4c9){if(typeof _4c9=="number"){_4c9=this.getChildren()[_4c9];}if(_4c9){var node=_4c9.domNode;if(node&&node.parentNode){node.parentNode.removeChild(node);}}},hasChildren:function(){return this.getChildren().length>0;},_getSiblingOfChild:function(_4ca,dir){var _4cb=this.getChildren(),idx=_4c2.indexOf(_4cb,_4ca);return _4cb[idx+dir];},getIndexOfChild:function(_4cc){return _4c2.indexOf(this.getChildren(),_4cc);}});});},"dijit/layout/BorderContainer":function(){define(["dojo/_base/array","dojo/cookie","dojo/_base/declare","dojo/dom-class","dojo/dom-construct","dojo/dom-geometry","dojo/dom-style","dojo/keys","dojo/_base/lang","dojo/on","dojo/touch","../_WidgetBase","../_Widget","../_TemplatedMixin","./LayoutContainer","./utils"],function(_4cd,_4ce,_4cf,_4d0,_4d1,_4d2,_4d3,keys,lang,on,_4d4,_4d5,_4d6,_4d7,_4d8,_4d9){var _4da=_4cf("dijit.layout._Splitter",[_4d6,_4d7],{live:true,templateString:"<div class=\"dijitSplitter\" data-dojo-attach-event=\"onkeydown:_onKeyDown,press:_startDrag,onmouseenter:_onMouse,onmouseleave:_onMouse\" tabIndex=\"0\" role=\"separator\"><div class=\"dijitSplitterThumb\"></div></div>",constructor:function(){this._handlers=[];},postMixInProperties:function(){this.inherited(arguments);this.horizontal=/top|bottom/.test(this.region);this._factor=/top|left/.test(this.region)?1:-1;this._cookieName=this.container.id+"_"+this.region;},buildRendering:function(){this.inherited(arguments);_4d0.add(this.domNode,"dijitSplitter"+(this.horizontal?"H":"V"));if(this.container.persist){var _4db=_4ce(this._cookieName);if(_4db){this.child.domNode.style[this.horizontal?"height":"width"]=_4db;}}},_computeMaxSize:function(){var dim=this.horizontal?"h":"w",_4dc=_4d2.getMarginBox(this.child.domNode)[dim],_4dd=_4cd.filter(this.container.getChildren(),function(_4de){return _4de.region=="center";})[0];var _4df=_4d2.getContentBox(_4dd.domNode)[dim]-10;return Math.min(this.child.maxSize,_4dc+_4df);},_startDrag:function(e){if(!this.cover){this.cover=_4d1.place("<div class=dijitSplitterCover></div>",this.child.domNode,"after");}_4d0.add(this.cover,"dijitSplitterCoverActive");if(this.fake){_4d1.destroy(this.fake);}if(!(this._resize=this.live)){(this.fake=this.domNode.cloneNode(true)).removeAttribute("id");_4d0.add(this.domNode,"dijitSplitterShadow");_4d1.place(this.fake,this.domNode,"after");}_4d0.add(this.domNode,"dijitSplitterActive dijitSplitter"+(this.horizontal?"H":"V")+"Active");if(this.fake){_4d0.remove(this.fake,"dijitSplitterHover dijitSplitter"+(this.horizontal?"H":"V")+"Hover");}var _4e0=this._factor,_4e1=this.horizontal,axis=_4e1?"pageY":"pageX",_4e2=e[axis],_4e3=this.domNode.style,dim=_4e1?"h":"w",_4e4=_4d3.getComputedStyle(this.child.domNode),_4e5=_4d2.getMarginBox(this.child.domNode,_4e4)[dim],max=this._computeMaxSize(),min=Math.max(this.child.minSize,_4d2.getPadBorderExtents(this.child.domNode,_4e4)[dim]+10),_4e6=this.region,_4e7=_4e6=="top"||_4e6=="bottom"?"top":"left",_4e8=parseInt(_4e3[_4e7],10),_4e9=this._resize,_4ea=lang.hitch(this.container,"_layoutChildren",this.child.id),de=this.ownerDocument;this._handlers=this._handlers.concat([on(de,_4d4.move,this._drag=function(e,_4eb){var _4ec=e[axis]-_4e2,_4ed=_4e0*_4ec+_4e5,_4ee=Math.max(Math.min(_4ed,max),min);if(_4e9||_4eb){_4ea(_4ee);}_4e3[_4e7]=_4ec+_4e8+_4e0*(_4ee-_4ed)+"px";}),on(de,"dragstart",function(e){e.stopPropagation();e.preventDefault();}),on(this.ownerDocumentBody,"selectstart",function(e){e.stopPropagation();e.preventDefault();}),on(de,_4d4.release,lang.hitch(this,"_stopDrag"))]);e.stopPropagation();e.preventDefault();},_onMouse:function(e){var o=(e.type=="mouseover"||e.type=="mouseenter");_4d0.toggle(this.domNode,"dijitSplitterHover",o);_4d0.toggle(this.domNode,"dijitSplitter"+(this.horizontal?"H":"V")+"Hover",o);},_stopDrag:function(e){try{if(this.cover){_4d0.remove(this.cover,"dijitSplitterCoverActive");}if(this.fake){_4d1.destroy(this.fake);}_4d0.remove(this.domNode,"dijitSplitterActive dijitSplitter"+(this.horizontal?"H":"V")+"Active dijitSplitterShadow");this._drag(e);this._drag(e,true);}finally{this._cleanupHandlers();delete this._drag;}if(this.container.persist){_4ce(this._cookieName,this.child.domNode.style[this.horizontal?"height":"width"],{expires:365});}},_cleanupHandlers:function(){var h;while(h=this._handlers.pop()){h.remove();}},_onKeyDown:function(e){this._resize=true;var _4ef=this.horizontal;var tick=1;switch(e.keyCode){case _4ef?keys.UP_ARROW:keys.LEFT_ARROW:tick*=-1;case _4ef?keys.DOWN_ARROW:keys.RIGHT_ARROW:break;default:return;}var _4f0=_4d2.getMarginSize(this.child.domNode)[_4ef?"h":"w"]+this._factor*tick;this.container._layoutChildren(this.child.id,Math.max(Math.min(_4f0,this._computeMaxSize()),this.child.minSize));e.stopPropagation();e.preventDefault();},destroy:function(){this._cleanupHandlers();delete this.child;delete this.container;delete this.cover;delete this.fake;this.inherited(arguments);}});var _4f1=_4cf("dijit.layout._Gutter",[_4d6,_4d7],{templateString:"<div class=\"dijitGutter\" role=\"presentation\"></div>",postMixInProperties:function(){this.inherited(arguments);this.horizontal=/top|bottom/.test(this.region);},buildRendering:function(){this.inherited(arguments);_4d0.add(this.domNode,"dijitGutter"+(this.horizontal?"H":"V"));}});var _4f2=_4cf("dijit.layout.BorderContainer",_4d8,{gutters:true,liveSplitters:true,persist:false,baseClass:"dijitBorderContainer",_splitterClass:_4da,postMixInProperties:function(){if(!this.gutters){this.baseClass+="NoGutter";}this.inherited(arguments);},_setupChild:function(_4f3){this.inherited(arguments);var _4f4=_4f3.region,ltr=_4f3.isLeftToRight();if(_4f4=="leading"){_4f4=ltr?"left":"right";}if(_4f4=="trailing"){_4f4=ltr?"right":"left";}if(_4f4){if(_4f4!="center"&&(_4f3.splitter||this.gutters)&&!_4f3._splitterWidget){var _4f5=_4f3.splitter?this._splitterClass:_4f1;if(lang.isString(_4f5)){_4f5=lang.getObject(_4f5);}var _4f6=new _4f5({id:_4f3.id+"_splitter",container:this,child:_4f3,region:_4f4,live:this.liveSplitters});_4f6.isSplitter=true;_4f3._splitterWidget=_4f6;var _4f7=_4f4=="bottom"||_4f4==(this.isLeftToRight()?"right":"left");_4d1.place(_4f6.domNode,_4f3.domNode,_4f7?"before":"after");_4f6.startup();}}},layout:function(){this._layoutChildren();},removeChild:function(_4f8){var _4f9=_4f8._splitterWidget;if(_4f9){_4f9.destroy();delete _4f8._splitterWidget;}this.inherited(arguments);},getChildren:function(){return _4cd.filter(this.inherited(arguments),function(_4fa){return !_4fa.isSplitter;});},getSplitter:function(_4fb){return _4cd.filter(this.getChildren(),function(_4fc){return _4fc.region==_4fb;})[0]._splitterWidget;},resize:function(_4fd,_4fe){if(!this.cs||!this.pe){var node=this.domNode;this.cs=_4d3.getComputedStyle(node);this.pe=_4d2.getPadExtents(node,this.cs);this.pe.r=_4d3.toPixelValue(node,this.cs.paddingRight);this.pe.b=_4d3.toPixelValue(node,this.cs.paddingBottom);_4d3.set(node,"padding","0px");}this.inherited(arguments);},_layoutChildren:function(_4ff,_500){if(!this._borderBox||!this._borderBox.h){return;}var _501=[];_4cd.forEach(this._getOrderedChildren(),function(pane){_501.push(pane);if(pane._splitterWidget){_501.push(pane._splitterWidget);}});var dim={l:this.pe.l,t:this.pe.t,w:this._borderBox.w-this.pe.w,h:this._borderBox.h-this.pe.h};_4d9.layoutChildren(this.domNode,dim,_501,_4ff,_500);},destroyRecursive:function(){_4cd.forEach(this.getChildren(),function(_502){var _503=_502._splitterWidget;if(_503){_503.destroy();}delete _502._splitterWidget;});this.inherited(arguments);}});_4f2.ChildWidgetProperties={splitter:false,minSize:0,maxSize:Infinity};lang.mixin(_4f2.ChildWidgetProperties,_4d8.ChildWidgetProperties);lang.extend(_4d5,_4f2.ChildWidgetProperties);_4f2._Splitter=_4da;_4f2._Gutter=_4f1;return _4f2;});},"dijit/_base/wai":function(){define(["dojo/dom-attr","dojo/_base/lang","../main","../hccss"],function(_504,lang,_505){var _506={hasWaiRole:function(elem,role){var _507=this.getWaiRole(elem);return role?(_507.indexOf(role)>-1):(_507.length>0);},getWaiRole:function(elem){return lang.trim((_504.get(elem,"role")||"").replace("wairole:",""));},setWaiRole:function(elem,role){_504.set(elem,"role",role);},removeWaiRole:function(elem,role){var _508=_504.get(elem,"role");if(!_508){return;}if(role){var t=lang.trim((" "+_508+" ").replace(" "+role+" "," "));_504.set(elem,"role",t);}else{elem.removeAttribute("role");}},hasWaiState:function(elem,_509){return elem.hasAttribute?elem.hasAttribute("aria-"+_509):!!elem.getAttribute("aria-"+_509);},getWaiState:function(elem,_50a){return elem.getAttribute("aria-"+_50a)||"";},setWaiState:function(elem,_50b,_50c){elem.setAttribute("aria-"+_50b,_50c);},removeWaiState:function(elem,_50d){elem.removeAttribute("aria-"+_50d);}};lang.mixin(_505,_506);return _505;});},"dojo/dnd/Mover":function(){define(["../_base/array","../_base/declare","../_base/lang","../sniff","../_base/window","../dom","../dom-geometry","../dom-style","../Evented","../on","../touch","./common","./autoscroll"],function(_50e,_50f,lang,has,win,dom,_510,_511,_512,on,_513,dnd,_514){return _50f("dojo.dnd.Mover",[_512],{constructor:function(node,e,host){this.node=dom.byId(node);this.marginBox={l:e.pageX,t:e.pageY};this.mouseButton=e.button;var h=(this.host=host),d=node.ownerDocument;function _515(e){e.preventDefault();e.stopPropagation();};this.events=[on(d,_513.move,lang.hitch(this,"onFirstMove")),on(d,_513.move,lang.hitch(this,"onMouseMove")),on(d,_513.release,lang.hitch(this,"onMouseUp")),on(d,"dragstart",_515),on(d.body,"selectstart",_515)];_514.autoScrollStart(d);if(h&&h.onMoveStart){h.onMoveStart(this);}},onMouseMove:function(e){_514.autoScroll(e);var m=this.marginBox;this.host.onMove(this,{l:m.l+e.pageX,t:m.t+e.pageY},e);e.preventDefault();e.stopPropagation();},onMouseUp:function(e){if(has("webkit")&&has("mac")&&this.mouseButton==2?e.button==0:this.mouseButton==e.button){this.destroy();}e.preventDefault();e.stopPropagation();},onFirstMove:function(e){var s=this.node.style,l,t,h=this.host;switch(s.position){case "relative":case "absolute":l=Math.round(parseFloat(s.left))||0;t=Math.round(parseFloat(s.top))||0;break;default:s.position="absolute";var m=_510.getMarginBox(this.node);var b=win.doc.body;var bs=_511.getComputedStyle(b);var bm=_510.getMarginBox(b,bs);var bc=_510.getContentBox(b,bs);l=m.l-(bc.l-bm.l);t=m.t-(bc.t-bm.t);break;}this.marginBox.l=l-this.marginBox.l;this.marginBox.t=t-this.marginBox.t;if(h&&h.onFirstMove){h.onFirstMove(this,e);}this.events.shift().remove();},destroy:function(){_50e.forEach(this.events,function(_516){_516.remove();});var h=this.host;if(h&&h.onMoveStop){h.onMoveStop(this);}this.events=this.node=this.host=null;}});});},"control/customer/payment":function(){define(["dojo/_base/declare","ttl/BaseWidgetAMD","dojo/text!../customer/templates/payment.html","dijit/layout/BorderContainer","dojo/request","ttl/utilities2","dojo/_base/lang","dojo/topic","dojo/dom-class","dojo/dom-attr","dojo/data/ItemFileReadStore","control/customer/allocation","dojo/store/util/SimpleQueryEngine","dojox/validate/regexp","dijit/form/Form","dijit/form/FilteringSelect","dijit/form/CurrencyTextBox","dijit/form/TextBox","dijit/form/CheckBox","dijit/form/DateTextBox","dijit/form/Textarea","dijit/form/ValidationTextBox","dojox/form/BusyButton","control/customer/manual_allocate_amount","dijit/layout/ContentPane"],function(_517,_518,_519,_51a,_51b,_51c,lang,_51d,_51e,_51f,_520,_521,_522){return _517("control/customer/payment",[_518,_521],{templateString:_519,gutters:false,constructor:function(){this._PaymentTakenCallBack=lang.hitch(this,this._PaymentTakenCall);this.paymenttypes=new _520({url:"/common/lookups?searchtype=paymenttypes",onError:_51c.globalerrorchecker,clearOnClose:true,urlPreventCache:true});},setCustomer:function(_523,_524){this.btn.cancel();this._customerid=_523.customerid;this._customername=_523.customername;_51f.set(this.customername,"innerHTML",_523.customername);if(_523.invoiceemail!=null&&_523.invoiceemail!=""){this.email.set("value",_523.invoiceemail);}else{this.email.set("value",_523.email);}this._dialog=_524;if(this._dialog!=null){this._dialog.show();}if(this.manualmode){this.alloc_grid_view.resize({w:590,h:300});this.load_allocation(_523.customerid,"payment");}},_PaymentTakenCall:function(_525){if(_525.success=="OK"){if(this.manualmode){alert("Payment Taked");}else{alert("Payment Taken and invoice sent");}this.Clear();_51d.publish(PRCOMMON.Events.Financial_ReLoad,[]);this._dialog.hide();}else{alert("Problem taking payment");}this.btn.cancel();},_TakePayment:function(){if(_51c.form_validator(this.form)==false){alert("Please Enter Details");this.btn.cancel();return false;}if(this.manualmode){if(this.toallocate.get("value")>this.payment.get("value")){alert("Over Allocation");this.btn.cancel();return;}}var _526=this.form.get("value");_526["icustomerid"]=this._customerid;d=this.payment_date.get("value");if(d!=null){_526["payment_date"]=d.getFullYear()+"-"+(d.getMonth()+1)+"-"+d.getDate();}if(this.manualmode){_526["unpaidamount"]=this.toallocate.get("value");_526["allocations"]=this.getAllocations();}else{var d=this.licence_expire.get("value");if(d!=null){_526["licence_expire"]=d.getFullYear()+"-"+(d.getMonth()+1)+"-"+d.getDate();}}_51b.post("/payment/payment_take",_51c.make_params({data:_526})).then(this._PaymentTakenCallBack);},_on_blur_amount:function(){if(this.manualmode){var _527=this.payment.get("value");var _528=0;var line=_522(function(_529){return true;})(this._allocation.data);for(var c=0;c<line.length;c++){if(line[c]==null){continue;}_528+=dojo.number.round(parseFloat(line[c].allocated),2);}this.toallocate.set("value",dojo.number.format(dojo.number.round(_527-_528,2),{places:2}));}},Clear:function(){this.payment.set("value","");this.email.set("value","");this.emailtocustomer.set("checked",false);},postCreate:function(){this.inherited(arguments);this.paymenttypeid.set("store",this.paymenttypes);this.paymenttypeid.set("value",1);if(this.manualmode){_51e.add(this.alloc_view_1,"prmaxhidden");_51e.remove(this.alloc_view_3,"prmaxhidden");_51e.remove(this.alloc_view_4,"prmaxhidden");this._postCreate();}else{_51e.add(this.alloc_view,"prmaxhidden");}},_Allocate:function(){if(this.toallocate_value.isValid()==false){return;}if(this._allocted_row.i.unpaidamount/100<=this.toallocate_value.get("value")){alert("Over Allocation");return false;}this.alloc_grid.setValue(this._allocted_row,"allocated",this.toallocate_value.get("value"),true);this._on_blur_amount();}});});},"dijit/form/ComboBoxMixin":function(){define(["dojo/_base/declare","dojo/Deferred","dojo/_base/kernel","dojo/_base/lang","dojo/store/util/QueryResults","./_AutoCompleterMixin","./_ComboBoxMenu","../_HasDropDown","dojo/text!./templates/DropDownBox.html"],function(_52a,_52b,_52c,lang,_52d,_52e,_52f,_530,_531){return _52a("dijit.form.ComboBoxMixin",[_530,_52e],{dropDownClass:_52f,hasDownArrow:true,templateString:_531,baseClass:"dijitTextBox dijitComboBox",cssStateNodes:{"_buttonNode":"dijitDownArrowButton"},_setHasDownArrowAttr:function(val){this._set("hasDownArrow",val);this._buttonNode.style.display=val?"":"none";},_showResultList:function(){this.displayMessage("");this.inherited(arguments);},_setStoreAttr:function(_532){if(!_532.get){lang.mixin(_532,{_oldAPI:true,get:function(id){var _533=new _52b();this.fetchItemByIdentity({identity:id,onItem:function(_534){_533.resolve(_534);},onError:function(_535){_533.reject(_535);}});return _533.promise;},query:function(_536,_537){var _538=new _52b(function(){_539.abort&&_539.abort();});_538.total=new _52b();var _539=this.fetch(lang.mixin({query:_536,onBegin:function(_53a){_538.total.resolve(_53a);},onComplete:function(_53b){_538.resolve(_53b);},onError:function(_53c){_538.reject(_53c);}},_537));return _52d(_538);}});}this._set("store",_532);},postMixInProperties:function(){var _53d=this.params.store||this.store;if(_53d){this._setStoreAttr(_53d);}this.inherited(arguments);if(!this.params.store&&this.store&&!this.store._oldAPI){var _53e=this.declaredClass;lang.mixin(this.store,{getValue:function(item,attr){_52c.deprecated(_53e+".store.getValue(item, attr) is deprecated for builtin store.  Use item.attr directly","","2.0");return item[attr];},getLabel:function(item){_52c.deprecated(_53e+".store.getLabel(item) is deprecated for builtin store.  Use item.label directly","","2.0");return item.name;},fetch:function(args){_52c.deprecated(_53e+".store.fetch() is deprecated for builtin store.","Use store.query()","2.0");var shim=["dojo/data/ObjectStore"];require(shim,lang.hitch(this,function(_53f){new _53f({objectStore:this}).fetch(args);}));}});}},buildRendering:function(){this.inherited(arguments);this.focusNode.setAttribute("aria-autocomplete",this.autoComplete?"both":"list");}});});},"dijit/form/Select":function(){define(["dojo/_base/array","dojo/_base/declare","dojo/dom-attr","dojo/dom-class","dojo/dom-geometry","dojo/i18n","dojo/keys","dojo/_base/lang","dojo/on","dojo/sniff","./_FormSelectWidget","../_HasDropDown","../DropDownMenu","../MenuItem","../MenuSeparator","../Tooltip","../_KeyNavMixin","../registry","dojo/text!./templates/Select.html","dojo/i18n!./nls/validate"],function(_540,_541,_542,_543,_544,i18n,keys,lang,on,has,_545,_546,_547,_548,_549,_54a,_54b,_54c,_54d){var _54e=_541("dijit.form._SelectMenu",_547,{autoFocus:true,buildRendering:function(){this.inherited(arguments);this.domNode.setAttribute("role","listbox");},postCreate:function(){this.inherited(arguments);this.own(on(this.domNode,"selectstart",function(evt){evt.preventDefault();evt.stopPropagation();}));},focus:function(){var _54f=false,val=this.parentWidget.value;if(lang.isArray(val)){val=val[val.length-1];}if(val){_540.forEach(this.parentWidget._getChildren(),function(_550){if(_550.option&&(val===_550.option.value)){_54f=true;this.focusChild(_550,false);}},this);}if(!_54f){this.inherited(arguments);}}});var _551=_541("dijit.form.Select"+(has("dojo-bidi")?"_NoBidi":""),[_545,_546,_54b],{baseClass:"dijitSelect dijitValidationTextBox",templateString:_54d,_buttonInputDisabled:has("ie")?"disabled":"",required:false,state:"",message:"",tooltipPosition:[],emptyLabel:"&#160;",_isLoaded:false,_childrenLoaded:false,labelType:"html",_fillContent:function(){this.inherited(arguments);if(this.options.length&&!this.value&&this.srcNodeRef){var si=this.srcNodeRef.selectedIndex||0;this._set("value",this.options[si>=0?si:0].value);}this.dropDown=new _54e({id:this.id+"_menu",parentWidget:this});_543.add(this.dropDown.domNode,this.baseClass.replace(/\s+|$/g,"Menu "));},_getMenuItemForOption:function(_552){if(!_552.value&&!_552.label){return new _549({ownerDocument:this.ownerDocument});}else{var _553=lang.hitch(this,"_setValueAttr",_552);var item=new _548({option:_552,label:(this.labelType==="text"?(_552.label||"").toString().replace(/&/g,"&amp;").replace(/</g,"&lt;"):_552.label)||this.emptyLabel,onClick:_553,ownerDocument:this.ownerDocument,dir:this.dir,textDir:this.textDir,disabled:_552.disabled||false});item.focusNode.setAttribute("role","option");return item;}},_addOptionItem:function(_554){if(this.dropDown){this.dropDown.addChild(this._getMenuItemForOption(_554));}},_getChildren:function(){if(!this.dropDown){return [];}return this.dropDown.getChildren();},focus:function(){if(!this.disabled&&this.focusNode.focus){try{this.focusNode.focus();}catch(e){}}},focusChild:function(_555){if(_555){this.set("value",_555.option);}},_getFirst:function(){var _556=this._getChildren();return _556.length?_556[0]:null;},_getLast:function(){var _557=this._getChildren();return _557.length?_557[_557.length-1]:null;},childSelector:function(node){var node=_54c.byNode(node);return node&&node.getParent()==this.dropDown;},onKeyboardSearch:function(item,evt,_558,_559){if(item){this.focusChild(item);}},_loadChildren:function(_55a){if(_55a===true){if(this.dropDown){delete this.dropDown.focusedChild;this.focusedChild=null;}if(this.options.length){this.inherited(arguments);}else{_540.forEach(this._getChildren(),function(_55b){_55b.destroyRecursive();});var item=new _548({ownerDocument:this.ownerDocument,label:this.emptyLabel});this.dropDown.addChild(item);}}else{this._updateSelection();}this._isLoaded=false;this._childrenLoaded=true;if(!this._loadingStore){this._setValueAttr(this.value,false);}},_refreshState:function(){if(this._started){this.validate(this.focused);}},startup:function(){this.inherited(arguments);this._refreshState();},_setValueAttr:function(_55c){this.inherited(arguments);_542.set(this.valueNode,"value",this.get("value"));this._refreshState();},_setNameAttr:"valueNode",_setDisabledAttr:function(_55d){this.inherited(arguments);this._refreshState();},_setRequiredAttr:function(_55e){this._set("required",_55e);this.focusNode.setAttribute("aria-required",_55e);this._refreshState();},_setOptionsAttr:function(_55f){this._isLoaded=false;this._set("options",_55f);},_setDisplay:function(_560){var lbl=(this.labelType==="text"?(_560||"").replace(/&/g,"&amp;").replace(/</g,"&lt;"):_560)||this.emptyLabel;this.containerNode.innerHTML="<span role=\"option\" aria-selected=\"true\" class=\"dijitReset dijitInline "+this.baseClass.replace(/\s+|$/g,"Label ")+"\">"+lbl+"</span>";},validate:function(_561){var _562=this.disabled||this.isValid(_561);this._set("state",_562?"":(this._hasBeenBlurred?"Error":"Incomplete"));this.focusNode.setAttribute("aria-invalid",_562?"false":"true");var _563=_562?"":this._missingMsg;if(_563&&this.focused&&this._hasBeenBlurred){_54a.show(_563,this.domNode,this.tooltipPosition,!this.isLeftToRight());}else{_54a.hide(this.domNode);}this._set("message",_563);return _562;},isValid:function(){return (!this.required||this.value===0||!(/^\s*$/.test(this.value||"")));},reset:function(){this.inherited(arguments);_54a.hide(this.domNode);this._refreshState();},postMixInProperties:function(){this.inherited(arguments);this._missingMsg=i18n.getLocalization("dijit.form","validate",this.lang).missingMessage;},postCreate:function(){this.inherited(arguments);this.own(on(this.domNode,"selectstart",function(evt){evt.preventDefault();evt.stopPropagation();}));this.domNode.setAttribute("aria-expanded","false");var _564=this._keyNavCodes;delete _564[keys.LEFT_ARROW];delete _564[keys.RIGHT_ARROW];},_setStyleAttr:function(_565){this.inherited(arguments);_543.toggle(this.domNode,this.baseClass.replace(/\s+|$/g,"FixedWidth "),!!this.domNode.style.width);},isLoaded:function(){return this._isLoaded;},loadDropDown:function(_566){this._loadChildren(true);this._isLoaded=true;_566();},destroy:function(_567){if(this.dropDown&&!this.dropDown._destroyed){this.dropDown.destroyRecursive(_567);delete this.dropDown;}_54a.hide(this.domNode);this.inherited(arguments);},_onFocus:function(){this.validate(true);},_onBlur:function(){_54a.hide(this.domNode);this.inherited(arguments);this.validate(false);}});if(has("dojo-bidi")){_551=_541("dijit.form.Select",_551,{_setDisplay:function(_568){this.inherited(arguments);this.applyTextDir(this.containerNode);}});}_551._Menu=_54e;function _569(_56a){return function(evt){if(!this._isLoaded){this.loadDropDown(lang.hitch(this,_56a,evt));}else{this.inherited(_56a,arguments);}};};_551.prototype._onContainerKeydown=_569("_onContainerKeydown");_551.prototype._onContainerKeypress=_569("_onContainerKeypress");return _551;});},"dijit/Calendar":function(){define(["dojo/_base/array","dojo/date","dojo/date/locale","dojo/_base/declare","dojo/dom-attr","dojo/dom-class","dojo/dom-construct","dojo/_base/kernel","dojo/keys","dojo/_base/lang","dojo/on","dojo/sniff","./CalendarLite","./_Widget","./_CssStateMixin","./_TemplatedMixin","./form/DropDownButton"],function(_56b,date,_56c,_56d,_56e,_56f,_570,_571,keys,lang,on,has,_572,_573,_574,_575,_576){var _577=_56d("dijit.Calendar",[_572,_573,_574],{baseClass:"dijitCalendar",cssStateNodes:{"decrementMonth":"dijitCalendarArrow","incrementMonth":"dijitCalendarArrow","previousYearLabelNode":"dijitCalendarPreviousYear","nextYearLabelNode":"dijitCalendarNextYear"},setValue:function(_578){_571.deprecated("dijit.Calendar:setValue() is deprecated.  Use set('value', ...) instead.","","2.0");this.set("value",_578);},_createMonthWidget:function(){return new _577._MonthDropDownButton({id:this.id+"_mddb",tabIndex:-1,onMonthSelect:lang.hitch(this,"_onMonthSelect"),lang:this.lang,dateLocaleModule:this.dateLocaleModule},this.monthNode);},postCreate:function(){this.inherited(arguments);this.own(on(this.domNode,"keydown",lang.hitch(this,"_onKeyDown")),on(this.dateRowsNode,"mouseover",lang.hitch(this,"_onDayMouseOver")),on(this.dateRowsNode,"mouseout",lang.hitch(this,"_onDayMouseOut")),on(this.dateRowsNode,"mousedown",lang.hitch(this,"_onDayMouseDown")),on(this.dateRowsNode,"mouseup",lang.hitch(this,"_onDayMouseUp")));},_onMonthSelect:function(_579){var date=new this.dateClassObj(this.currentFocus);date.setDate(1);date.setMonth(_579);var _57a=this.dateModule.getDaysInMonth(date);var _57b=this.currentFocus.getDate();date.setDate(Math.min(_57b,_57a));this._setCurrentFocusAttr(date);},_onDayMouseOver:function(evt){var node=_56f.contains(evt.target,"dijitCalendarDateLabel")?evt.target.parentNode:evt.target;if(node&&((node.dijitDateValue&&!_56f.contains(node,"dijitCalendarDisabledDate"))||node==this.previousYearLabelNode||node==this.nextYearLabelNode)){_56f.add(node,"dijitCalendarHoveredDate");this._currentNode=node;}},_onDayMouseOut:function(evt){if(!this._currentNode){return;}if(evt.relatedTarget&&evt.relatedTarget.parentNode==this._currentNode){return;}var cls="dijitCalendarHoveredDate";if(_56f.contains(this._currentNode,"dijitCalendarActiveDate")){cls+=" dijitCalendarActiveDate";}_56f.remove(this._currentNode,cls);this._currentNode=null;},_onDayMouseDown:function(evt){var node=evt.target.parentNode;if(node&&node.dijitDateValue&&!_56f.contains(node,"dijitCalendarDisabledDate")){_56f.add(node,"dijitCalendarActiveDate");this._currentNode=node;}},_onDayMouseUp:function(evt){var node=evt.target.parentNode;if(node&&node.dijitDateValue){_56f.remove(node,"dijitCalendarActiveDate");}},handleKey:function(evt){var _57c=-1,_57d,_57e=this.currentFocus;switch(evt.keyCode){case keys.RIGHT_ARROW:_57c=1;case keys.LEFT_ARROW:_57d="day";if(!this.isLeftToRight()){_57c*=-1;}break;case keys.DOWN_ARROW:_57c=1;case keys.UP_ARROW:_57d="week";break;case keys.PAGE_DOWN:_57c=1;case keys.PAGE_UP:_57d=evt.ctrlKey||evt.altKey?"year":"month";break;case keys.END:_57e=this.dateModule.add(_57e,"month",1);_57d="day";case keys.HOME:_57e=new this.dateClassObj(_57e);_57e.setDate(1);break;default:return true;}if(_57d){_57e=this.dateModule.add(_57e,_57d,_57c);}this._setCurrentFocusAttr(_57e);return false;},_onKeyDown:function(evt){if(!this.handleKey(evt)){evt.stopPropagation();evt.preventDefault();}},onValueSelected:function(){},onChange:function(_57f){this.onValueSelected(_57f);},getClassForDate:function(){}});_577._MonthDropDownButton=_56d("dijit.Calendar._MonthDropDownButton",_576,{onMonthSelect:function(){},postCreate:function(){this.inherited(arguments);this.dropDown=new _577._MonthDropDown({id:this.id+"_mdd",onChange:this.onMonthSelect});},_setMonthAttr:function(_580){var _581=this.dateLocaleModule.getNames("months","wide","standAlone",this.lang,_580);this.dropDown.set("months",_581);this.containerNode.innerHTML=(has("ie")==6?"":"<div class='dijitSpacer'>"+this.dropDown.domNode.innerHTML+"</div>")+"<div class='dijitCalendarMonthLabel dijitCalendarCurrentMonthLabel'>"+_581[_580.getMonth()]+"</div>";}});_577._MonthDropDown=_56d("dijit.Calendar._MonthDropDown",[_573,_575,_574],{months:[],baseClass:"dijitCalendarMonthMenu dijitMenu",templateString:"<div data-dojo-attach-event='ondijitclick:_onClick'></div>",_setMonthsAttr:function(_582){this.domNode.innerHTML="";_56b.forEach(_582,function(_583,idx){var div=_570.create("div",{className:"dijitCalendarMonthLabel",month:idx,innerHTML:_583},this.domNode);div._cssState="dijitCalendarMonthLabel";},this);},_onClick:function(evt){this.onChange(_56e.get(evt.target,"month"));},onChange:function(){}});return _577;});},"dojox/validate/regexp":function(){define(["dojo/_base/lang","dojo/regexp","dojox/main"],function(lang,_584,_585){var _586=lang.getObject("validate.regexp",true,_585);_586=_585.validate.regexp={ipAddress:function(_587){_587=(typeof _587=="object")?_587:{};if(typeof _587.allowDottedDecimal!="boolean"){_587.allowDottedDecimal=true;}if(typeof _587.allowDottedHex!="boolean"){_587.allowDottedHex=true;}if(typeof _587.allowDottedOctal!="boolean"){_587.allowDottedOctal=true;}if(typeof _587.allowDecimal!="boolean"){_587.allowDecimal=true;}if(typeof _587.allowHex!="boolean"){_587.allowHex=true;}if(typeof _587.allowIPv6!="boolean"){_587.allowIPv6=true;}if(typeof _587.allowHybrid!="boolean"){_587.allowHybrid=true;}var _588="((\\d|[1-9]\\d|1\\d\\d|2[0-4]\\d|25[0-5])\\.){3}(\\d|[1-9]\\d|1\\d\\d|2[0-4]\\d|25[0-5])";var _589="(0[xX]0*[\\da-fA-F]?[\\da-fA-F]\\.){3}0[xX]0*[\\da-fA-F]?[\\da-fA-F]";var _58a="(0+[0-3][0-7][0-7]\\.){3}0+[0-3][0-7][0-7]";var _58b="(0|[1-9]\\d{0,8}|[1-3]\\d{9}|4[01]\\d{8}|42[0-8]\\d{7}|429[0-3]\\d{6}|"+"4294[0-8]\\d{5}|42949[0-5]\\d{4}|429496[0-6]\\d{3}|4294967[01]\\d{2}|42949672[0-8]\\d|429496729[0-5])";var _58c="0[xX]0*[\\da-fA-F]{1,8}";var _58d="([\\da-fA-F]{1,4}\\:){7}[\\da-fA-F]{1,4}";var _58e="([\\da-fA-F]{1,4}\\:){6}"+"((\\d|[1-9]\\d|1\\d\\d|2[0-4]\\d|25[0-5])\\.){3}(\\d|[1-9]\\d|1\\d\\d|2[0-4]\\d|25[0-5])";var a=[];if(_587.allowDottedDecimal){a.push(_588);}if(_587.allowDottedHex){a.push(_589);}if(_587.allowDottedOctal){a.push(_58a);}if(_587.allowDecimal){a.push(_58b);}if(_587.allowHex){a.push(_58c);}if(_587.allowIPv6){a.push(_58d);}if(_587.allowHybrid){a.push(_58e);}var _58f="";if(a.length>0){_58f="("+a.join("|")+")";}return _58f;},host:function(_590){_590=(typeof _590=="object")?_590:{};if(typeof _590.allowIP!="boolean"){_590.allowIP=true;}if(typeof _590.allowLocal!="boolean"){_590.allowLocal=false;}if(typeof _590.allowPort!="boolean"){_590.allowPort=true;}if(typeof _590.allowNamed!="boolean"){_590.allowNamed=false;}var _591="(?:[\\da-zA-Z](?:[-\\da-zA-Z]{0,61}[\\da-zA-Z])?)";var _592="(?:[a-zA-Z](?:[-\\da-zA-Z]{0,61}[\\da-zA-Z])?)";var _593=_590.allowPort?"(\\:\\d+)?":"";var _594="((?:"+_591+"\\.)+"+_592+"\\.?)";if(_590.allowIP){_594+="|"+_586.ipAddress(_590);}if(_590.allowLocal){_594+="|localhost";}if(_590.allowNamed){_594+="|^[^-][a-zA-Z0-9_-]*";}return "("+_594+")"+_593;},url:function(_595){_595=(typeof _595=="object")?_595:{};if(!("scheme" in _595)){_595.scheme=[true,false];}var _596=_584.buildGroupRE(_595.scheme,function(q){if(q){return "(https?|ftps?)\\://";}return "";});var _597="(/(?:[^?#\\s/]+/)*(?:[^?#\\s/]+(?:\\?[^?#\\s/]*)?(?:#[A-Za-z][\\w.:-]*)?)?)?";return _596+_586.host(_595)+_597;},emailAddress:function(_598){_598=(typeof _598=="object")?_598:{};if(typeof _598.allowCruft!="boolean"){_598.allowCruft=false;}_598.allowPort=false;var _599="([!#-'*+\\-\\/-9=?A-Z^-~]+[.])*[!#-'*+\\-\\/-9=?A-Z^-~]+";var _59a=_599+"@"+_586.host(_598);if(_598.allowCruft){_59a="<?(mailto\\:)?"+_59a+">?";}return _59a;},emailAddressList:function(_59b){_59b=(typeof _59b=="object")?_59b:{};if(typeof _59b.listSeparator!="string"){_59b.listSeparator="\\s;,";}var _59c=_586.emailAddress(_59b);var _59d="("+_59c+"\\s*["+_59b.listSeparator+"]\\s*)*"+_59c+"\\s*["+_59b.listSeparator+"]?\\s*";return _59d;},numberFormat:function(_59e){_59e=(typeof _59e=="object")?_59e:{};if(typeof _59e.format=="undefined"){_59e.format="###-###-####";}var _59f=function(_5a0){return _584.escapeString(_5a0,"?").replace(/\?/g,"\\d?").replace(/#/g,"\\d");};return _584.buildGroupRE(_59e.format,_59f);},ca:{postalCode:function(){return "([A-Z][0-9][A-Z] [0-9][A-Z][0-9])";},province:function(){return "(AB|BC|MB|NB|NL|NS|NT|NU|ON|PE|QC|SK|YT)";}},us:{state:function(_5a1){_5a1=(typeof _5a1=="object")?_5a1:{};if(typeof _5a1.allowTerritories!="boolean"){_5a1.allowTerritories=true;}if(typeof _5a1.allowMilitary!="boolean"){_5a1.allowMilitary=true;}var _5a2="AL|AK|AZ|AR|CA|CO|CT|DE|DC|FL|GA|HI|ID|IL|IN|IA|KS|KY|LA|ME|MD|MA|MI|MN|MS|MO|MT|"+"NE|NV|NH|NJ|NM|NY|NC|ND|OH|OK|OR|PA|RI|SC|SD|TN|TX|UT|VT|VA|WA|WV|WI|WY";var _5a3="AS|FM|GU|MH|MP|PW|PR|VI";var _5a4="AA|AE|AP";if(_5a1.allowTerritories){_5a2+="|"+_5a3;}if(_5a1.allowMilitary){_5a2+="|"+_5a4;}return "("+_5a2+")";}}};return _586;});},"dijit/_base/manager":function(){define(["dojo/_base/array","dojo/_base/config","dojo/_base/lang","../registry","../main"],function(_5a5,_5a6,lang,_5a7,_5a8){var _5a9={};_5a5.forEach(["byId","getUniqueId","findWidgets","_destroyAll","byNode","getEnclosingWidget"],function(name){_5a9[name]=_5a7[name];});lang.mixin(_5a9,{defaultDuration:_5a6["defaultDuration"]||200});lang.mixin(_5a8,_5a9);return _5a8;});},"dojo/data/ItemFileReadStore":function(){define(["../_base/kernel","../_base/lang","../_base/declare","../_base/array","../_base/xhr","../Evented","./util/filter","./util/simpleFetch","../date/stamp"],function(_5aa,lang,_5ab,_5ac,xhr,_5ad,_5ae,_5af,_5b0){var _5b1=_5ab("dojo.data.ItemFileReadStore",[_5ad],{constructor:function(_5b2){this._arrayOfAllItems=[];this._arrayOfTopLevelItems=[];this._loadFinished=false;this._jsonFileUrl=_5b2.url;this._ccUrl=_5b2.url;this.url=_5b2.url;this._jsonData=_5b2.data;this.data=null;this._datatypeMap=_5b2.typeMap||{};if(!this._datatypeMap["Date"]){this._datatypeMap["Date"]={type:Date,deserialize:function(_5b3){return _5b0.fromISOString(_5b3);}};}this._features={"dojo.data.api.Read":true,"dojo.data.api.Identity":true};this._itemsByIdentity=null;this._storeRefPropName="_S";this._itemNumPropName="_0";this._rootItemPropName="_RI";this._reverseRefMap="_RRM";this._loadInProgress=false;this._queuedFetches=[];if(_5b2.urlPreventCache!==undefined){this.urlPreventCache=_5b2.urlPreventCache?true:false;}if(_5b2.hierarchical!==undefined){this.hierarchical=_5b2.hierarchical?true:false;}if(_5b2.clearOnClose){this.clearOnClose=true;}if("failOk" in _5b2){this.failOk=_5b2.failOk?true:false;}},url:"",_ccUrl:"",data:null,typeMap:null,clearOnClose:false,urlPreventCache:false,failOk:false,hierarchical:true,_assertIsItem:function(item){if(!this.isItem(item)){throw new Error(this.declaredClass+": Invalid item argument.");}},_assertIsAttribute:function(_5b4){if(typeof _5b4!=="string"){throw new Error(this.declaredClass+": Invalid attribute argument.");}},getValue:function(item,_5b5,_5b6){var _5b7=this.getValues(item,_5b5);return (_5b7.length>0)?_5b7[0]:_5b6;},getValues:function(item,_5b8){this._assertIsItem(item);this._assertIsAttribute(_5b8);return (item[_5b8]||[]).slice(0);},getAttributes:function(item){this._assertIsItem(item);var _5b9=[];for(var key in item){if((key!==this._storeRefPropName)&&(key!==this._itemNumPropName)&&(key!==this._rootItemPropName)&&(key!==this._reverseRefMap)){_5b9.push(key);}}return _5b9;},hasAttribute:function(item,_5ba){this._assertIsItem(item);this._assertIsAttribute(_5ba);return (_5ba in item);},containsValue:function(item,_5bb,_5bc){var _5bd=undefined;if(typeof _5bc==="string"){_5bd=_5ae.patternToRegExp(_5bc,false);}return this._containsValue(item,_5bb,_5bc,_5bd);},_containsValue:function(item,_5be,_5bf,_5c0){return _5ac.some(this.getValues(item,_5be),function(_5c1){if(_5c1!==null&&!lang.isObject(_5c1)&&_5c0){if(_5c1.toString().match(_5c0)){return true;}}else{if(_5bf===_5c1){return true;}}});},isItem:function(_5c2){if(_5c2&&_5c2[this._storeRefPropName]===this){if(this._arrayOfAllItems[_5c2[this._itemNumPropName]]===_5c2){return true;}}return false;},isItemLoaded:function(_5c3){return this.isItem(_5c3);},loadItem:function(_5c4){this._assertIsItem(_5c4.item);},getFeatures:function(){return this._features;},getLabel:function(item){if(this._labelAttr&&this.isItem(item)){return this.getValue(item,this._labelAttr);}return undefined;},getLabelAttributes:function(item){if(this._labelAttr){return [this._labelAttr];}return null;},filter:function(_5c5,_5c6,_5c7){var _5c8=[],i,key;if(_5c5.query){var _5c9,_5ca=_5c5.queryOptions?_5c5.queryOptions.ignoreCase:false;var _5cb={};for(key in _5c5.query){_5c9=_5c5.query[key];if(typeof _5c9==="string"){_5cb[key]=_5ae.patternToRegExp(_5c9,_5ca);}else{if(_5c9 instanceof RegExp){_5cb[key]=_5c9;}}}for(i=0;i<_5c6.length;++i){var _5cc=true;var _5cd=_5c6[i];if(_5cd===null){_5cc=false;}else{for(key in _5c5.query){_5c9=_5c5.query[key];if(!this._containsValue(_5cd,key,_5c9,_5cb[key])){_5cc=false;}}}if(_5cc){_5c8.push(_5cd);}}_5c7(_5c8,_5c5);}else{for(i=0;i<_5c6.length;++i){var item=_5c6[i];if(item!==null){_5c8.push(item);}}_5c7(_5c8,_5c5);}},_fetchItems:function(_5ce,_5cf,_5d0){var self=this;if(this._loadFinished){this.filter(_5ce,this._getItemsArray(_5ce.queryOptions),_5cf);}else{if(this._jsonFileUrl!==this._ccUrl){_5aa.deprecated(this.declaredClass+": ","To change the url, set the url property of the store,"+" not _jsonFileUrl.  _jsonFileUrl support will be removed in 2.0");this._ccUrl=this._jsonFileUrl;this.url=this._jsonFileUrl;}else{if(this.url!==this._ccUrl){this._jsonFileUrl=this.url;this._ccUrl=this.url;}}if(this.data!=null){this._jsonData=this.data;this.data=null;}if(this._jsonFileUrl){if(this._loadInProgress){this._queuedFetches.push({args:_5ce,filter:lang.hitch(self,"filter"),findCallback:lang.hitch(self,_5cf)});}else{this._loadInProgress=true;var _5d1={url:self._jsonFileUrl,handleAs:"json-comment-optional",preventCache:this.urlPreventCache,failOk:this.failOk};var _5d2=xhr.get(_5d1);_5d2.addCallback(function(data){try{self._getItemsFromLoadedData(data);self._loadFinished=true;self._loadInProgress=false;self.filter(_5ce,self._getItemsArray(_5ce.queryOptions),_5cf);self._handleQueuedFetches();}catch(e){self._loadFinished=true;self._loadInProgress=false;_5d0(e,_5ce);}});_5d2.addErrback(function(_5d3){self._loadInProgress=false;_5d0(_5d3,_5ce);});var _5d4=null;if(_5ce.abort){_5d4=_5ce.abort;}_5ce.abort=function(){var df=_5d2;if(df&&df.fired===-1){df.cancel();df=null;}if(_5d4){_5d4.call(_5ce);}};}}else{if(this._jsonData){try{this._loadFinished=true;this._getItemsFromLoadedData(this._jsonData);this._jsonData=null;self.filter(_5ce,this._getItemsArray(_5ce.queryOptions),_5cf);}catch(e){_5d0(e,_5ce);}}else{_5d0(new Error(this.declaredClass+": No JSON source data was provided as either URL or a nested Javascript object."),_5ce);}}}},_handleQueuedFetches:function(){if(this._queuedFetches.length>0){for(var i=0;i<this._queuedFetches.length;i++){var _5d5=this._queuedFetches[i],_5d6=_5d5.args,_5d7=_5d5.filter,_5d8=_5d5.findCallback;if(_5d7){_5d7(_5d6,this._getItemsArray(_5d6.queryOptions),_5d8);}else{this.fetchItemByIdentity(_5d6);}}this._queuedFetches=[];}},_getItemsArray:function(_5d9){if(_5d9&&_5d9.deep){return this._arrayOfAllItems;}return this._arrayOfTopLevelItems;},close:function(_5da){if(this.clearOnClose&&this._loadFinished&&!this._loadInProgress){if(((this._jsonFileUrl==""||this._jsonFileUrl==null)&&(this.url==""||this.url==null))&&this.data==null){}this._arrayOfAllItems=[];this._arrayOfTopLevelItems=[];this._loadFinished=false;this._itemsByIdentity=null;this._loadInProgress=false;this._queuedFetches=[];}},_getItemsFromLoadedData:function(_5db){var _5dc=false,self=this;function _5dd(_5de){return (_5de!==null)&&(typeof _5de==="object")&&(!lang.isArray(_5de)||_5dc)&&(!lang.isFunction(_5de))&&(_5de.constructor==Object||lang.isArray(_5de))&&(typeof _5de._reference==="undefined")&&(typeof _5de._type==="undefined")&&(typeof _5de._value==="undefined")&&self.hierarchical;};function _5df(_5e0){self._arrayOfAllItems.push(_5e0);for(var _5e1 in _5e0){var _5e2=_5e0[_5e1];if(_5e2){if(lang.isArray(_5e2)){var _5e3=_5e2;for(var k=0;k<_5e3.length;++k){var _5e4=_5e3[k];if(_5dd(_5e4)){_5df(_5e4);}}}else{if(_5dd(_5e2)){_5df(_5e2);}}}}};this._labelAttr=_5db.label;var i,item;this._arrayOfAllItems=[];this._arrayOfTopLevelItems=_5db.items;for(i=0;i<this._arrayOfTopLevelItems.length;++i){item=this._arrayOfTopLevelItems[i];if(lang.isArray(item)){_5dc=true;}_5df(item);item[this._rootItemPropName]=true;}var _5e5={},key;for(i=0;i<this._arrayOfAllItems.length;++i){item=this._arrayOfAllItems[i];for(key in item){if(key!==this._rootItemPropName){var _5e6=item[key];if(_5e6!==null){if(!lang.isArray(_5e6)){item[key]=[_5e6];}}else{item[key]=[null];}}_5e5[key]=key;}}while(_5e5[this._storeRefPropName]){this._storeRefPropName+="_";}while(_5e5[this._itemNumPropName]){this._itemNumPropName+="_";}while(_5e5[this._reverseRefMap]){this._reverseRefMap+="_";}var _5e7;var _5e8=_5db.identifier;if(_5e8){this._itemsByIdentity={};this._features["dojo.data.api.Identity"]=_5e8;for(i=0;i<this._arrayOfAllItems.length;++i){item=this._arrayOfAllItems[i];_5e7=item[_5e8];var _5e9=_5e7[0];if(!Object.hasOwnProperty.call(this._itemsByIdentity,_5e9)){this._itemsByIdentity[_5e9]=item;}else{if(this._jsonFileUrl){throw new Error(this.declaredClass+":  The json data as specified by: ["+this._jsonFileUrl+"] is malformed.  Items within the list have identifier: ["+_5e8+"].  Value collided: ["+_5e9+"]");}else{if(this._jsonData){throw new Error(this.declaredClass+":  The json data provided by the creation arguments is malformed.  Items within the list have identifier: ["+_5e8+"].  Value collided: ["+_5e9+"]");}}}}}else{this._features["dojo.data.api.Identity"]=Number;}for(i=0;i<this._arrayOfAllItems.length;++i){item=this._arrayOfAllItems[i];item[this._storeRefPropName]=this;item[this._itemNumPropName]=i;}for(i=0;i<this._arrayOfAllItems.length;++i){item=this._arrayOfAllItems[i];for(key in item){_5e7=item[key];for(var j=0;j<_5e7.length;++j){_5e6=_5e7[j];if(_5e6!==null&&typeof _5e6=="object"){if(("_type" in _5e6)&&("_value" in _5e6)){var type=_5e6._type;var _5ea=this._datatypeMap[type];if(!_5ea){throw new Error("dojo.data.ItemFileReadStore: in the typeMap constructor arg, no object class was specified for the datatype '"+type+"'");}else{if(lang.isFunction(_5ea)){_5e7[j]=new _5ea(_5e6._value);}else{if(lang.isFunction(_5ea.deserialize)){_5e7[j]=_5ea.deserialize(_5e6._value);}else{throw new Error("dojo.data.ItemFileReadStore: Value provided in typeMap was neither a constructor, nor a an object with a deserialize function");}}}}if(_5e6._reference){var _5eb=_5e6._reference;if(!lang.isObject(_5eb)){_5e7[j]=this._getItemByIdentity(_5eb);}else{for(var k=0;k<this._arrayOfAllItems.length;++k){var _5ec=this._arrayOfAllItems[k],_5ed=true;for(var _5ee in _5eb){if(_5ec[_5ee]!=_5eb[_5ee]){_5ed=false;}}if(_5ed){_5e7[j]=_5ec;}}}if(this.referenceIntegrity){var _5ef=_5e7[j];if(this.isItem(_5ef)){this._addReferenceToMap(_5ef,item,key);}}}else{if(this.isItem(_5e6)){if(this.referenceIntegrity){this._addReferenceToMap(_5e6,item,key);}}}}}}}},_addReferenceToMap:function(_5f0,_5f1,_5f2){},getIdentity:function(item){var _5f3=this._features["dojo.data.api.Identity"];if(_5f3===Number){return item[this._itemNumPropName];}else{var _5f4=item[_5f3];if(_5f4){return _5f4[0];}}return null;},fetchItemByIdentity:function(_5f5){var item,_5f6;if(!this._loadFinished){var self=this;if(this._jsonFileUrl!==this._ccUrl){_5aa.deprecated(this.declaredClass+": ","To change the url, set the url property of the store,"+" not _jsonFileUrl.  _jsonFileUrl support will be removed in 2.0");this._ccUrl=this._jsonFileUrl;this.url=this._jsonFileUrl;}else{if(this.url!==this._ccUrl){this._jsonFileUrl=this.url;this._ccUrl=this.url;}}if(this.data!=null&&this._jsonData==null){this._jsonData=this.data;this.data=null;}if(this._jsonFileUrl){if(this._loadInProgress){this._queuedFetches.push({args:_5f5});}else{this._loadInProgress=true;var _5f7={url:self._jsonFileUrl,handleAs:"json-comment-optional",preventCache:this.urlPreventCache,failOk:this.failOk};var _5f8=xhr.get(_5f7);_5f8.addCallback(function(data){var _5f9=_5f5.scope?_5f5.scope:_5aa.global;try{self._getItemsFromLoadedData(data);self._loadFinished=true;self._loadInProgress=false;item=self._getItemByIdentity(_5f5.identity);if(_5f5.onItem){_5f5.onItem.call(_5f9,item);}self._handleQueuedFetches();}catch(error){self._loadInProgress=false;if(_5f5.onError){_5f5.onError.call(_5f9,error);}}});_5f8.addErrback(function(_5fa){self._loadInProgress=false;if(_5f5.onError){var _5fb=_5f5.scope?_5f5.scope:_5aa.global;_5f5.onError.call(_5fb,_5fa);}});}}else{if(this._jsonData){self._getItemsFromLoadedData(self._jsonData);self._jsonData=null;self._loadFinished=true;item=self._getItemByIdentity(_5f5.identity);if(_5f5.onItem){_5f6=_5f5.scope?_5f5.scope:_5aa.global;_5f5.onItem.call(_5f6,item);}}}}else{item=this._getItemByIdentity(_5f5.identity);if(_5f5.onItem){_5f6=_5f5.scope?_5f5.scope:_5aa.global;_5f5.onItem.call(_5f6,item);}}},_getItemByIdentity:function(_5fc){var item=null;if(this._itemsByIdentity){if(Object.hasOwnProperty.call(this._itemsByIdentity,_5fc)){item=this._itemsByIdentity[_5fc];}}else{if(Object.hasOwnProperty.call(this._arrayOfAllItems,_5fc)){item=this._arrayOfAllItems[_5fc];}}if(item===undefined){item=null;}return item;},getIdentityAttributes:function(item){var _5fd=this._features["dojo.data.api.Identity"];if(_5fd===Number){return null;}else{return [_5fd];}},_forceLoad:function(){var self=this;if(this._jsonFileUrl!==this._ccUrl){_5aa.deprecated(this.declaredClass+": ","To change the url, set the url property of the store,"+" not _jsonFileUrl.  _jsonFileUrl support will be removed in 2.0");this._ccUrl=this._jsonFileUrl;this.url=this._jsonFileUrl;}else{if(this.url!==this._ccUrl){this._jsonFileUrl=this.url;this._ccUrl=this.url;}}if(this.data!=null){this._jsonData=this.data;this.data=null;}if(this._jsonFileUrl){var _5fe={url:this._jsonFileUrl,handleAs:"json-comment-optional",preventCache:this.urlPreventCache,failOk:this.failOk,sync:true};var _5ff=xhr.get(_5fe);_5ff.addCallback(function(data){try{if(self._loadInProgress!==true&&!self._loadFinished){self._getItemsFromLoadedData(data);self._loadFinished=true;}else{if(self._loadInProgress){throw new Error(this.declaredClass+":  Unable to perform a synchronous load, an async load is in progress.");}}}catch(e){throw e;}});_5ff.addErrback(function(_600){throw _600;});}else{if(this._jsonData){self._getItemsFromLoadedData(self._jsonData);self._jsonData=null;self._loadFinished=true;}}}});lang.extend(_5b1,_5af);return _5b1;});},"dijit/form/ComboButton":function(){define(["dojo/_base/declare","dojo/keys","../focus","./DropDownButton","dojo/text!./templates/ComboButton.html","../a11yclick"],function(_601,keys,_602,_603,_604){return _601("dijit.form.ComboButton",_603,{templateString:_604,_setIdAttr:"",_setTabIndexAttr:["focusNode","titleNode"],_setTitleAttr:"titleNode",optionsTitle:"",baseClass:"dijitComboButton",cssStateNodes:{"buttonNode":"dijitButtonNode","titleNode":"dijitButtonContents","_popupStateNode":"dijitDownArrowButton"},_focusedNode:null,_onButtonKeyDown:function(evt){if(evt.keyCode==keys[this.isLeftToRight()?"RIGHT_ARROW":"LEFT_ARROW"]){_602.focus(this._popupStateNode);evt.stopPropagation();evt.preventDefault();}},_onArrowKeyDown:function(evt){if(evt.keyCode==keys[this.isLeftToRight()?"LEFT_ARROW":"RIGHT_ARROW"]){_602.focus(this.titleNode);evt.stopPropagation();evt.preventDefault();}},focus:function(_605){if(!this.disabled){_602.focus(_605=="start"?this.titleNode:this._popupStateNode);}}});});},"dijit/WidgetSet":function(){define(["dojo/_base/array","dojo/_base/declare","dojo/_base/kernel","./registry"],function(_606,_607,_608,_609){var _60a=_607("dijit.WidgetSet",null,{constructor:function(){this._hash={};this.length=0;},add:function(_60b){if(this._hash[_60b.id]){throw new Error("Tried to register widget with id=="+_60b.id+" but that id is already registered");}this._hash[_60b.id]=_60b;this.length++;},remove:function(id){if(this._hash[id]){delete this._hash[id];this.length--;}},forEach:function(func,_60c){_60c=_60c||_608.global;var i=0,id;for(id in this._hash){func.call(_60c,this._hash[id],i++,this._hash);}return this;},filter:function(_60d,_60e){_60e=_60e||_608.global;var res=new _60a(),i=0,id;for(id in this._hash){var w=this._hash[id];if(_60d.call(_60e,w,i++,this._hash)){res.add(w);}}return res;},byId:function(id){return this._hash[id];},byClass:function(cls){var res=new _60a(),id,_60f;for(id in this._hash){_60f=this._hash[id];if(_60f.declaredClass==cls){res.add(_60f);}}return res;},toArray:function(){var ar=[];for(var id in this._hash){ar.push(this._hash[id]);}return ar;},map:function(func,_610){return _606.map(this.toArray(),func,_610);},every:function(func,_611){_611=_611||_608.global;var x=0,i;for(i in this._hash){if(!func.call(_611,this._hash[i],x++,this._hash)){return false;}}return true;},some:function(func,_612){_612=_612||_608.global;var x=0,i;for(i in this._hash){if(func.call(_612,this._hash[i],x++,this._hash)){return true;}}return false;}});_606.forEach(["forEach","filter","byClass","map","every","some"],function(func){_609[func]=_60a.prototype[func];});return _60a;});},"dijit/form/RangeBoundTextBox":function(){define(["dojo/_base/declare","dojo/i18n","./MappedTextBox","dojo/i18n!./nls/validate"],function(_613,i18n,_614){var _615=_613("dijit.form.RangeBoundTextBox",_614,{rangeMessage:"",rangeCheck:function(_616,_617){return ("min" in _617?(this.compare(_616,_617.min)>=0):true)&&("max" in _617?(this.compare(_616,_617.max)<=0):true);},isInRange:function(){return this.rangeCheck(this.get("value"),this.constraints);},_isDefinitelyOutOfRange:function(){var val=this.get("value");if(val==null){return false;}var _618=false;if("min" in this.constraints){var min=this.constraints.min;_618=this.compare(val,((typeof min=="number")&&min>=0&&val!=0)?0:min)<0;}if(!_618&&("max" in this.constraints)){var max=this.constraints.max;_618=this.compare(val,((typeof max!="number")||max>0)?max:0)>0;}return _618;},_isValidSubset:function(){return this.inherited(arguments)&&!this._isDefinitelyOutOfRange();},isValid:function(_619){return this.inherited(arguments)&&((this._isEmpty(this.textbox.value)&&!this.required)||this.isInRange(_619));},getErrorMessage:function(_61a){var v=this.get("value");if(v!=null&&v!==""&&(typeof v!="number"||!isNaN(v))&&!this.isInRange(_61a)){return this.rangeMessage;}return this.inherited(arguments);},postMixInProperties:function(){this.inherited(arguments);if(!this.rangeMessage){this.messages=i18n.getLocalization("dijit.form","validate",this.lang);this.rangeMessage=this.messages.rangeMessage;}}});return _615;});},"ttl/Amduuid":function(){define(["dojo/_base/declare"],function(_61b){return _61b("ttl.Amduuid",null,{createUUID:function(){var dg=new Date(1582,10,15,0,0,0,0);var dc=new Date();var t=dc.getTime()-dg.getTime();var h="-";var tl=this.getIntegerBits(t,0,31);var tm=this.getIntegerBits(t,32,47);var thv=this.getIntegerBits(t,48,59)+"1";var csar=this.getIntegerBits(this.rand(4095),0,7);var csl=this.getIntegerBits(this.rand(4095),0,7);var n=this.getIntegerBits(this.rand(8191),0,7)+this.getIntegerBits(this.rand(8191),8,15)+this.getIntegerBits(this.rand(8191),0,7)+this.getIntegerBits(this.rand(8191),8,15)+this.getIntegerBits(this.rand(8191),0,15);return tl+h+tm+h+thv+h+csar+csl+h+n;},getIntegerBits:function(val,_61c,end){var _61d=this.returnBase(val,16);var _61e=new Array();var _61f="";var i=0;for(i=0;i<_61d.length;i++){_61e.push(_61d.substring(i,i+1));}for(i=Math.floor(_61c/4);i<=Math.floor(end/4);i++){if(!_61e[i]||_61e[i]==""){_61f+="0";}else{_61f+=_61e[i];}}return _61f;},returnBase:function(_620,base){return (_620).toString(base).toUpperCase();},rand:function(max){return Math.floor(Math.random()*(max+1));}});});},"control/customer/proforma":function(){define(["dojo/_base/declare","ttl/BaseWidgetAMD","dojo/text!../customer/templates/proforma.html","dijit/layout/BorderContainer","dojo/request","ttl/utilities2","dojo/_base/lang","dojo/topic","dojo/dom-class","dojo/dom-attr","dijit/form/Form","dijit/form/ValidationTextBox","dijit/form/CurrencyTextBox","dijit/form/Button"],function(_621,_622,_623,_624,_625,_626,lang,_627,_628,_629){return _621("control/customer/proforma",[_622],{templateString:_623,gutters:false,constructor:function(){this._send_proforma_call_back=lang.hitch(this,this._send_proforma_call);},_send_proforma_call:function(_62a){if(_62a.success=="OK"){alert("Proforma Sent ");this._dialog.hide();}else{alert("Problem Sending Proforma");}},_send_proforma:function(){if(_626.form_validator(this.form)==false){alert("Please Enter Details");return false;}var _62b=this.form.get("value");_62b["icustomerid"]=this._customerid;_625.post("/orderconfirmation/proforma_send",_626.make_params({data:_62b})).then(this._send_proforma_call_back);},setCustomer:function(_62c,_62d,_62e,_62f){this._customerid=_62c;this._customername=_62d;_629.set(this.customername,"innerHTML",this._customername);this.email.set("value",_62e);this._dialog=_62f;}});});},"dijit/DialogUnderlay":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/aspect","dojo/dom-attr","dojo/dom-style","dojo/on","dojo/window","./_Widget","./_TemplatedMixin","./BackgroundIframe","./Viewport","./main"],function(_630,lang,_631,_632,_633,on,_634,_635,_636,_637,_638,_639){var _63a=_630("dijit.DialogUnderlay",[_635,_636],{templateString:"<div class='dijitDialogUnderlayWrapper'><div class='dijitDialogUnderlay' tabIndex='-1' data-dojo-attach-point='node'></div></div>",dialogId:"","class":"",_modalConnects:[],_setDialogIdAttr:function(id){_632.set(this.node,"id",id+"_underlay");this._set("dialogId",id);},_setClassAttr:function(_63b){this.node.className="dijitDialogUnderlay "+_63b;this._set("class",_63b);},postCreate:function(){this.ownerDocumentBody.appendChild(this.domNode);this.own(on(this.domNode,"keydown",lang.hitch(this,"_onKeyDown")));this.inherited(arguments);},layout:function(){var is=this.node.style,os=this.domNode.style;os.display="none";var _63c=_634.getBox(this.ownerDocument);os.top=_63c.t+"px";os.left=_63c.l+"px";is.width=_63c.w+"px";is.height=_63c.h+"px";os.display="block";},show:function(){this.domNode.style.display="block";this.open=true;this.layout();this.bgIframe=new _637(this.domNode);var win=_634.get(this.ownerDocument);this._modalConnects=[_638.on("resize",lang.hitch(this,"layout")),on(win,"scroll",lang.hitch(this,"layout"))];},hide:function(){this.bgIframe.destroy();delete this.bgIframe;this.domNode.style.display="none";while(this._modalConnects.length){(this._modalConnects.pop()).remove();}this.open=false;},destroy:function(){while(this._modalConnects.length){(this._modalConnects.pop()).remove();}this.inherited(arguments);},_onKeyDown:function(){}});_63a.show=function(_63d,_63e){var _63f=_63a._singleton;if(!_63f||_63f._destroyed){_63f=_639._underlay=_63a._singleton=new _63a(_63d);}else{if(_63d){_63f.set(_63d);}}_633.set(_63f.domNode,"zIndex",_63e);if(!_63f.open){_63f.show();}};_63a.hide=function(){var _640=_63a._singleton;if(_640&&!_640._destroyed){_640.hide();}};return _63a;});},"control/customer/credit":function(){define(["dojo/_base/declare","ttl/BaseWidgetAMD","dojo/text!../customer/templates/credit.html","dijit/layout/BorderContainer","dojo/request","ttl/utilities2","dojo/_base/lang","dojo/topic","dojo/dom-class","dojo/dom-attr","dojo/data/ItemFileReadStore","dojo/data/ItemFileWriteStore","control/customer/allocation","dojo/store/util/SimpleQueryEngine","dojox/validate/regexp","dijit/form/Form","dijit/form/TextBox","dijit/form/CurrencyTextBox","dijit/form/DateTextBox","dijit/form/Textarea","dijit/form/CheckBox","dojox/form/BusyButton","dijit/form/ValidationTextBox","control/customer/manual_allocate_amount","dijit/layout/ContentPane",],function(_641,_642,_643,_644,_645,_646,lang,_647,_648,_649,_64a,_64b,_64c,_64d){return _641("control.customer.credit",[_642,_64c],{templateString:_643,gutters:false,constructor:function(){this._credit_call_back=lang.hitch(this,this._credit_call);},setCustomer:function(cust,_64e){this._customerid=cust.customerid;this._customername=cust.customername;this.email.set("value",cust.invoiceemail?cust.invoiceemail:cust.email);_649.set(this.customername,"innerHTML",this._customername);this._dialog=_64e;if(this._dialog!=null){this._dialog.show();}this.alloc_grid_view.resize({w:590,h:300});this.load_allocation(cust.customerid,"payment");this.addbtn.cancel();},_credit_call:function(_64f){if(_64f.success=="OK"){alert("Credit Added");this.clear();_647.publish(PRCOMMON.Events.Financial_ReLoad,[]);this._dialog.hide();}else{alert("Problem adding credit");}this.addbtn.cancel();},_create:function(){if(_646.form_validator(this.form)==false){alert("Please Enter Details");this.addbtn.cancel();return false;}if(this.toallocate.get("value")>this.payment.get("value")){alert("Over Allocation");this.addbtn.cancel();return;}var _650=this.form.get("value");_650["icustomerid"]=this._customerid;_650["payment_date"]=_646.to_json_date(this.payment_date.get("value"));_650["unpaidamount"]=this.toallocate.get("value");_650["allocations"]=this.getAllocations();_645.post("/customer/credit_take",_646.make_params({data:_650})).then(this._credit_call_back);},_on_amount:function(){var cost=this.cost.get("value");var vat=cost*0.2;this.vat.set("value",dojo.number.format(vat,{places:2}));this.payment.set("value",dojo.number.format(cost+vat,{places:2}));this._doallocation();},clear:function(){this.payment.set("value","0");this.vat.set("value",0);this.cost.set("value","0");this.message.set("value","");this.addbtn.cancel();},postCreate:function(){this.inherited(arguments);this._postCreate();},_email_required:function(){this.email.set("required",this.emailtocustomer.get("checked"));},_on_vat_amount:function(){var cost=this.cost.get("value");var vat=this.vat.get("value");this.payment.set("value",dojo.number.format(cost+vat,{places:2}));this._doallocation();}});});},"dijit/form/_ToggleButtonMixin":function(){define(["dojo/_base/declare","dojo/dom-attr"],function(_651,_652){return _651("dijit.form._ToggleButtonMixin",null,{checked:false,_aria_attr:"aria-pressed",_onClick:function(evt){var _653=this.checked;this._set("checked",!_653);var ret=this.inherited(arguments);this.set("checked",ret?this.checked:_653);return ret;},_setCheckedAttr:function(_654,_655){this._set("checked",_654);var node=this.focusNode||this.domNode;if(this._created){if(_652.get(node,"checked")!=!!_654){_652.set(node,"checked",!!_654);}}node.setAttribute(this._aria_attr,String(_654));this._handleOnChange(_654,_655);},postCreate:function(){this.inherited(arguments);var node=this.focusNode||this.domNode;if(this.checked){node.setAttribute("checked","checked");}if(this._resetValue===undefined){this._lastValueReported=this._resetValue=this.checked;}},reset:function(){this._hasBeenBlurred=false;this.set("checked",this.params.checked||false);}});});},"xstyle/css":function(){define(["require"],function(_656){"use strict";function _657(tag,id,_658){var _659=document.documentElement;var _65a=_659.insertBefore(document.createElement(tag),_659.firstChild);_65a.id=id;var _65b=(_65a.currentStyle||getComputedStyle(_65a,null)||{})[_658];_659.removeChild(_65a);return _65b;};return {load:function(_65c,_65d,_65e,_65f){var url=_65d.toUrl(_65c);var _660;if(url.match(/!$/)){_660={wait:false};url=url.slice(0,-1);}var _661=_65d.cache&&_65d.cache["url:"+url];if(_661!=null){if(_661.xCss){var _662=_661.parser;var xCss=_661.xCss;_661=_661.cssText;}if(typeof _661=="string"){_656(["./core/load-css"],function(load){_663(load.insertCss(_661));});}else{_663();}if(xCss){}return;}function _663(_664){var _665=_657("x-parse",null,"content");var _666=_664&&(_664.sheet||_664.styleSheet);if(_665&&_665!="none"&&_665!="normal"){_65d([eval(_665)],function(_667){if(_664){_667.process(_664,_65e);}else{_667.processAll();_65e(_666);}});}else{_65e(_666);}};var _668=_657("div",_65c.replace(/\//g,"-").replace(/\..*/,"")+"-loaded","display");if(_668=="none"){return _663();}_656(["./core/load-css"],function(load){load(url,_663,_660);});}};});},"control/customer/dd_invoices":function(){define(["dojo/_base/declare","ttl/BaseWidgetAMD","dojo/text!../customer/templates/dd_invoices.html","dijit/layout/BorderContainer","dojo/request","ttl/utilities2","dojo/_base/lang","dojo/topic","dojo/dom-class","dojo/dom-attr","dijit/form/Form","dijit/form/ValidationTextBox","dijit/form/CurrencyTextBox","dijit/form/Button","dijit/form/Textarea","dijit/form/ComboBox","dijit/form/DateTextBox"],function(_669,_66a,_66b,_66c,_66d,_66e,lang,_66f,_670,_671){return _669("control/customer/dd_invoices",[_66a],{templateString:_66b,gutters:false,constructor:function(){this._invoice_call_back=lang.hitch(this,this._invoice_call);},_create_invoices:function(){if(confirm("Create Payment Run")){var _672={pay_montly_day:this.pay_montly_day.get("value"),take_date:_66e.to_json_date(this.take_date.get("value"))};_66d.post("/payment/payment_dd_invoices",_66e.make_params({data:_672})).then(this._invoice_call_back);}else{this.invbtn.cancel();}},_invoice_call:function(_673){if(_673.success=="OK"){alert("Invoice Run Created");}else{alert("Problem creating Invoice Run");}this.invbtn.cancel();},_draft_invoices:function(){this.tmp_cache.set("value",new Date());this.pay_montly_day2.set("value",this.pay_montly_day.get("value"));if(this.take_date.get("value")){var d=this.take_date.get("value");this.take_date2.set("value",d.getFullYear()+"-"+(d.getMonth()+1)+"-"+d.getDate());}else{this.take_date2.set("value",null);}return true;}});});},"dojo/store/util/SimpleQueryEngine":function(){define(["../../_base/array"],function(_674){return function(_675,_676){switch(typeof _675){default:throw new Error("Can not query with a "+typeof _675);case "object":case "undefined":var _677=_675;_675=function(_678){for(var key in _677){var _679=_677[key];if(_679&&_679.test){if(!_679.test(_678[key],_678)){return false;}}else{if(_679!=_678[key]){return false;}}}return true;};break;case "string":if(!this[_675]){throw new Error("No filter function "+_675+" was found in store");}_675=this[_675];case "function":}function _67a(_67b){var _67c=_674.filter(_67b,_675);var _67d=_676&&_676.sort;if(_67d){_67c.sort(typeof _67d=="function"?_67d:function(a,b){for(var sort,i=0;sort=_67d[i];i++){var _67e=a[sort.attribute];var _67f=b[sort.attribute];_67e=_67e!=null?_67e.valueOf():_67e;_67f=_67f!=null?_67f.valueOf():_67f;if(_67e!=_67f){return !!sort.descending==(_67e==null||_67e>_67f)?-1:1;}}return 0;});}if(_676&&(_676.start||_676.count)){var _680=_67c.length;_67c=_67c.slice(_676.start||0,(_676.start||0)+(_676.count||Infinity));_67c.total=_680;}return _67c;};_67a.matches=_675;return _67a;};});},"dojox/json/ref":function(){define(["dojo/_base/array","dojo/_base/json","dojo/_base/kernel","dojo/_base/lang","dojo/date/stamp","dojox"],function(_681,_682,dojo,lang,_683,_684){lang.getObject("json",true,_684);return _684.json.ref={resolveJson:function(root,args){args=args||{};var _685=args.idAttribute||"id";var _686=this.refAttribute;var _687=args.idAsRef;var _688=args.idPrefix||"";var _689=args.assignAbsoluteIds;var _68a=args.index||{};var _68b=args.timeStamps;var ref,_68c=[];var _68d=/^(.*\/)?(\w+:\/\/)|[^\/\.]+\/\.\.\/|^.*\/(\/)/;var _68e=this._addProp;var F=function(){};function walk(it,stop,_68f,_690,_691,_692,_693){var i,_694,val,id=_685 in it?it[_685]:_68f;if(_685 in it||((id!==undefined)&&_690)){id=(_688+id).replace(_68d,"$2$3");}var _695=_692||it;if(id!==undefined){if(_689){it.__id=id;}if(args.schemas&&(!(it instanceof Array))&&(val=id.match(/^(.+\/)[^\.\[]*$/))){_691=args.schemas[val[1]];}if(_68a[id]&&((it instanceof Array)==(_68a[id] instanceof Array))){_695=_68a[id];delete _695.$ref;delete _695._loadObject;_694=true;}else{var _696=_691&&_691.prototype;if(_696){F.prototype=_696;_695=new F();}}_68a[id]=_695;if(_68b){_68b[id]=args.time;}}while(_691){var _697=_691.properties;if(_697){for(i in it){var _698=_697[i];if(_698&&_698.format=="date-time"&&typeof it[i]=="string"){it[i]=_683.fromISOString(it[i]);}}}_691=_691["extends"];}var _699=it.length;for(i in it){if(i==_699){break;}if(it.hasOwnProperty(i)){val=it[i];if((typeof val=="object")&&val&&!(val instanceof Date)&&i!="__parent"){ref=val[_686]||(_687&&val[_685]);if(it!=_68c&&(!ref||!val.__parent)){val.__parent=_693?_693:_695;}if(ref){delete it[i];var path=ref.toString().replace(/(#)([^\.\[])/,"$1.$2").match(/(^([^\[]*\/)?[^#\.\[]*)#?([\.\[].*)?/);if(_68a[(_688+ref).replace(_68d,"$2$3")]){ref=_68a[(_688+ref).replace(_68d,"$2$3")];}else{if((ref=(path[1]=="$"||path[1]=="this"||path[1]==="")?root:_68a[(_688+path[1]).replace(_68d,"$2$3")])){if(path[3]){path[3].replace(/(\[([^\]]+)\])|(\.?([^\.\[]+))/g,function(t,a,b,c,d){ref=ref&&ref[b?b.replace(/[\"\'\\]/,""):d];});}}}if(ref){val=ref;}else{if(!stop){var _69a;if(!_69a){_68c.push(_695);}_69a=true;val=walk(val,false,val[_686],true,_698);val._loadObject=args.loader;}}}else{if(!stop){val=walk(val,_68c==it,id===undefined?undefined:_68e(id,i),false,_698,_695!=it&&typeof _695[i]=="object"&&_695[i],it);}}}it[i]=val;if(_695!=it&&!_695.__isDirty){var old=_695[i];_695[i]=val;if(_694&&val!==old&&!_695._loadObject&&!(i.charAt(0)=="_"&&i.charAt(1)=="_")&&i!="$ref"&&!(val instanceof Date&&old instanceof Date&&val.getTime()==old.getTime())&&!(typeof val=="function"&&typeof old=="function"&&val.toString()==old.toString())&&_68a.onUpdate){_68a.onUpdate(_695,i,old,val);}}}}if(_694&&(_685 in it||_695 instanceof Array)){for(i in _695){if(!_695.__isDirty&&_695.hasOwnProperty(i)&&!it.hasOwnProperty(i)&&!(i.charAt(0)=="_"&&i.charAt(1)=="_")&&!(_695 instanceof Array&&isNaN(i))){if(_68a.onUpdate&&i!="_loadObject"&&i!="_idAttr"){_68a.onUpdate(_695,i,_695[i],undefined);}delete _695[i];while(_695 instanceof Array&&_695.length&&_695[_695.length-1]===undefined){_695.length--;}}}}else{if(_68a.onLoad){_68a.onLoad(_695);}}return _695;};if(root&&typeof root=="object"){root=walk(root,false,args.defaultId,true);walk(_68c,false);}return root;},fromJson:function(str,args){function ref(_69b){var _69c={};_69c[this.refAttribute]=_69b;return _69c;};var root;try{root=eval("("+str+")");}catch(e){throw new SyntaxError("Invalid JSON string: "+e.message+" parsing: "+str);}if(root){return this.resolveJson(root,args);}return root;},toJson:function(it,_69d,_69e,_69f,_6a0){var _6a1=this._useRefs;var _6a2=this._addProp;var _6a3=this.refAttribute;_69e=_69e||"";var _6a4={};var _6a5={};var _6a6=_6a0?true:false;var _6a7=1;function _6a8(){var str=(_6a7++).toString();if(_6a5.hasOwnProperty(str)){return _6a8();}return str;};function _6a9(it,path,_6aa){if(typeof it=="object"&&it){var _6ab;if(it instanceof Date){return "\""+_683.toISOString(it,{zulu:true})+"\"";}var id=it.__id;if(id){if(path!="#"&&((_6a1&&!id.match(/#/))||_6a4[id])){var ref=id;if(id.charAt(0)!="#"){if(it.__clientId==id){ref="cid:"+id;}else{if(id.substring(0,_69e.length)==_69e){ref=id.substring(_69e.length);}else{ref=id;}}}var _6ac={};_6ac[_6a3]=ref;return _682.toJson(_6ac,_69d);}path=id;}else{if(_6a6){if(!(it instanceof Array)){path=_6a8();it.__id=path;_6a5[path]=it;}}else{it.__id=path;_6a5[path]=it;}}_6a4[path]=it;_6aa=_6aa||"";var _6ad=_69d?_6aa+_682.toJsonIndentStr:"";var _6ae=_69d?"\n":"";var sep=_69d?" ":"";if(it instanceof Array){var res=_681.map(it,function(obj,i){var val=_6a9(obj,_6a6?undefined:_6a2(path,i),_6ad);if(typeof val!="string"){val="undefined";}return _6ae+_6ad+val;});return "["+res.join(","+sep)+_6ae+_6aa+"]";}var _6af=[];if(_6a6&&(typeof it[_6a0]==="undefined")){_6af.push(_6ae+_6ad+_682._escapeString(_6a0)+":"+sep+_682.toJson(it.__id));}for(var i in it){if(it.hasOwnProperty(i)){var _6b0;if(typeof i=="number"){_6b0="\""+i+"\"";}else{if(typeof i=="string"&&(i.charAt(0)!="_"||i.charAt(1)!="_")){_6b0=_682._escapeString(i);}else{continue;}}var val=_6a9(it[i],_6a6?undefined:_6a2(path,i),_6ad);if(typeof val!="string"){continue;}_6af.push(_6ae+_6ad+_6b0+":"+sep+val);}}return "{"+_6af.join(","+sep)+_6ae+_6aa+"}";}else{if(typeof it=="function"&&_684.json.ref.serializeFunctions){return it.toString();}}return _682.toJson(it);};var json=_6a9(it,_6a6?undefined:"#","");if(!_69f){for(var i in _6a5){delete _6a5[i].__id;}}return json;},_addProp:function(id,prop){return id+(id.match(/#/)?id.length==1?"":".":"#")+prop;},refAttribute:"$ref",_useRefs:false,serializeFunctions:false};});},"dojox/form/_BusyButtonMixin":function(){define(["dojo/_base/lang","dojo/dom-attr","dojo/dom-class","dijit/form/Button","dijit/form/DropDownButton","dijit/form/ComboButton","dojo/i18n","dojo/i18n!dijit/nls/loading","dojo/_base/declare"],function(lang,_6b1,_6b2,_6b3,_6b4,_6b5,i18n,_6b6,_6b7){return _6b7("dojox.form._BusyButtonMixin",null,{isBusy:false,isCancelled:false,busyLabel:"",timeout:null,useIcon:true,postMixInProperties:function(){this.inherited(arguments);if(!this.busyLabel){this.busyLabel=i18n.getLocalization("dijit","loading",this.lang).loadingState;}},postCreate:function(){this.inherited(arguments);this._label=this.containerNode.innerHTML;this._initTimeout=this.timeout;if(this.isBusy){this.makeBusy();}},makeBusy:function(){this.isBusy=true;this.isCancelled=false;if(this._disableHandle){this._disableHandle.remove();}this._disableHandle=this.defer(function(){this.set("disabled",true);});this.setLabel(this.busyLabel,this.timeout);},cancel:function(){this.isCancelled=true;if(this._disableHandle){this._disableHandle.remove();}this.set("disabled",false);this.isBusy=false;this.setLabel(this._label);if(this._timeout){clearTimeout(this._timeout);}this.timeout=this._initTimeout;},resetTimeout:function(_6b8){if(this._timeout){clearTimeout(this._timeout);}if(_6b8){this._timeout=setTimeout(lang.hitch(this,function(){this.cancel();}),_6b8);}else{if(_6b8==undefined||_6b8===0){this.cancel();}}},setLabel:function(_6b9,_6ba){this.label=_6b9;while(this.containerNode.firstChild){this.containerNode.removeChild(this.containerNode.firstChild);}this.containerNode.appendChild(document.createTextNode(this.label));if(this.showLabel==false&&!_6b1.get(this.domNode,"title")){this.titleNode.title=lang.trim(this.containerNode.innerText||this.containerNode.textContent||"");}if(_6ba){this.resetTimeout(_6ba);}else{this.timeout=null;}if(this.useIcon&&this.isBusy){var node=new Image();node.src=this._blankGif;_6b1.set(node,"id",this.id+"_icon");_6b2.add(node,"dojoxBusyButtonIcon");this.containerNode.appendChild(node);}},_onClick:function(e){if(!this.isBusy){this.inherited(arguments);if(!this.isCancelled){this.makeBusy();}}}});});},"dijit/_KeyNavMixin":function(){define(["dojo/_base/array","dojo/_base/declare","dojo/dom-attr","dojo/keys","dojo/_base/lang","dojo/on","dijit/registry","dijit/_FocusMixin"],function(_6bb,_6bc,_6bd,keys,lang,on,_6be,_6bf){return _6bc("dijit._KeyNavMixin",_6bf,{tabIndex:"0",childSelector:null,postCreate:function(){this.inherited(arguments);_6bd.set(this.domNode,"tabIndex",this.tabIndex);if(!this._keyNavCodes){var _6c0=this._keyNavCodes={};_6c0[keys.HOME]=lang.hitch(this,"focusFirstChild");_6c0[keys.END]=lang.hitch(this,"focusLastChild");_6c0[this.isLeftToRight()?keys.LEFT_ARROW:keys.RIGHT_ARROW]=lang.hitch(this,"_onLeftArrow");_6c0[this.isLeftToRight()?keys.RIGHT_ARROW:keys.LEFT_ARROW]=lang.hitch(this,"_onRightArrow");_6c0[keys.UP_ARROW]=lang.hitch(this,"_onUpArrow");_6c0[keys.DOWN_ARROW]=lang.hitch(this,"_onDownArrow");}var self=this,_6c1=typeof this.childSelector=="string"?this.childSelector:lang.hitch(this,"childSelector");this.own(on(this.domNode,"keypress",lang.hitch(this,"_onContainerKeypress")),on(this.domNode,"keydown",lang.hitch(this,"_onContainerKeydown")),on(this.domNode,"focus",lang.hitch(this,"_onContainerFocus")),on(this.containerNode,on.selector(_6c1,"focusin"),function(evt){self._onChildFocus(_6be.getEnclosingWidget(this),evt);}));},_onLeftArrow:function(){},_onRightArrow:function(){},_onUpArrow:function(){},_onDownArrow:function(){},focus:function(){this.focusFirstChild();},_getFirstFocusableChild:function(){return this._getNextFocusableChild(null,1);},_getLastFocusableChild:function(){return this._getNextFocusableChild(null,-1);},focusFirstChild:function(){this.focusChild(this._getFirstFocusableChild());},focusLastChild:function(){this.focusChild(this._getLastFocusableChild());},focusChild:function(_6c2,last){if(!_6c2){return;}if(this.focusedChild&&_6c2!==this.focusedChild){this._onChildBlur(this.focusedChild);}_6c2.set("tabIndex",this.tabIndex);_6c2.focus(last?"end":"start");},_onContainerFocus:function(evt){if(evt.target!==this.domNode||this.focusedChild){return;}this.focus();},_onFocus:function(){_6bd.set(this.domNode,"tabIndex","-1");this.inherited(arguments);},_onBlur:function(evt){_6bd.set(this.domNode,"tabIndex",this.tabIndex);if(this.focusedChild){this.focusedChild.set("tabIndex","-1");this.lastFocusedChild=this.focusedChild;this._set("focusedChild",null);}this.inherited(arguments);},_onChildFocus:function(_6c3){if(_6c3&&_6c3!=this.focusedChild){if(this.focusedChild&&!this.focusedChild._destroyed){this.focusedChild.set("tabIndex","-1");}_6c3.set("tabIndex",this.tabIndex);this.lastFocused=_6c3;this._set("focusedChild",_6c3);}},_searchString:"",multiCharSearchDuration:1000,onKeyboardSearch:function(item,evt,_6c4,_6c5){if(item){this.focusChild(item);}},_keyboardSearchCompare:function(item,_6c6){var _6c7=item.domNode,text=item.label||(_6c7.focusNode?_6c7.focusNode.label:"")||_6c7.innerText||_6c7.textContent||"",_6c8=text.replace(/^\s+/,"").substr(0,_6c6.length).toLowerCase();return (!!_6c6.length&&_6c8==_6c6)?-1:0;},_onContainerKeydown:function(evt){var func=this._keyNavCodes[evt.keyCode];if(func){func(evt,this.focusedChild);evt.stopPropagation();evt.preventDefault();this._searchString="";}else{if(evt.keyCode==keys.SPACE&&this._searchTimer&&!(evt.ctrlKey||evt.altKey||evt.metaKey)){evt.stopImmediatePropagation();evt.preventDefault();this._keyboardSearch(evt," ");}}},_onContainerKeypress:function(evt){if(evt.charCode<=keys.SPACE||evt.ctrlKey||evt.altKey||evt.metaKey){return;}evt.preventDefault();evt.stopPropagation();this._keyboardSearch(evt,String.fromCharCode(evt.charCode).toLowerCase());},_keyboardSearch:function(evt,_6c9){var _6ca=null,_6cb,_6cc=0,_6cd=lang.hitch(this,function(){if(this._searchTimer){this._searchTimer.remove();}this._searchString+=_6c9;var _6ce=/^(.)\1*$/.test(this._searchString);var _6cf=_6ce?1:this._searchString.length;_6cb=this._searchString.substr(0,_6cf);this._searchTimer=this.defer(function(){this._searchTimer=null;this._searchString="";},this.multiCharSearchDuration);var _6d0=this.focusedChild||null;if(_6cf==1||!_6d0){_6d0=this._getNextFocusableChild(_6d0,1);if(!_6d0){return;}}var stop=_6d0;do{var rc=this._keyboardSearchCompare(_6d0,_6cb);if(!!rc&&_6cc++==0){_6ca=_6d0;}if(rc==-1){_6cc=-1;break;}_6d0=this._getNextFocusableChild(_6d0,1);}while(_6d0&&_6d0!=stop);});_6cd();this.onKeyboardSearch(_6ca,evt,_6cb,_6cc);},_onChildBlur:function(){},_getNextFocusableChild:function(_6d1,dir){var _6d2=_6d1;do{if(!_6d1){_6d1=this[dir>0?"_getFirst":"_getLast"]();if(!_6d1){break;}}else{_6d1=this._getNext(_6d1,dir);}if(_6d1!=null&&_6d1!=_6d2&&_6d1.isFocusable()){return _6d1;}}while(_6d1!=_6d2);return null;},_getFirst:function(){return null;},_getLast:function(){return null;},_getNext:function(_6d3,dir){if(_6d3){_6d3=_6d3.domNode;while(_6d3){_6d3=_6d3[dir<0?"previousSibling":"nextSibling"];if(_6d3&&"getAttribute" in _6d3){var w=_6be.byNode(_6d3);if(w){return w;}}}}return null;}});});},"dojox/grid/DataSelection":function(){define(["dojo/_base/declare","./_SelectionPreserver","./Selection"],function(_6d4,_6d5,_6d6){return _6d4("dojox.grid.DataSelection",_6d6,{constructor:function(grid){if(grid.keepSelection){this.preserver=new _6d5(this);}},destroy:function(){if(this.preserver){this.preserver.destroy();}},getFirstSelected:function(){var idx=_6d6.prototype.getFirstSelected.call(this);if(idx==-1){return null;}return this.grid.getItem(idx);},getNextSelected:function(_6d7){var _6d8=this.grid.getItemIndex(_6d7);var idx=_6d6.prototype.getNextSelected.call(this,_6d8);if(idx==-1){return null;}return this.grid.getItem(idx);},getSelected:function(){var _6d9=[];for(var i=0,l=this.selected.length;i<l;i++){if(this.selected[i]){_6d9.push(this.grid.getItem(i));}}return _6d9;},addToSelection:function(_6da){if(this.mode=="none"){return;}var idx=null;if(typeof _6da=="number"||typeof _6da=="string"){idx=_6da;}else{idx=this.grid.getItemIndex(_6da);}_6d6.prototype.addToSelection.call(this,idx);},deselect:function(_6db){if(this.mode=="none"){return;}var idx=null;if(typeof _6db=="number"||typeof _6db=="string"){idx=_6db;}else{idx=this.grid.getItemIndex(_6db);}_6d6.prototype.deselect.call(this,idx);},deselectAll:function(_6dc){var idx=null;if(_6dc||typeof _6dc=="number"){if(typeof _6dc=="number"||typeof _6dc=="string"){idx=_6dc;}else{idx=this.grid.getItemIndex(_6dc);}_6d6.prototype.deselectAll.call(this,idx);}else{this.inherited(arguments);}}});});},"dijit/form/_TextBoxMixin":function(){define(["dojo/_base/array","dojo/_base/declare","dojo/dom","dojo/sniff","dojo/keys","dojo/_base/lang","dojo/on","../main"],function(_6dd,_6de,dom,has,keys,lang,on,_6df){var _6e0=_6de("dijit.form._TextBoxMixin"+(has("dojo-bidi")?"_NoBidi":""),null,{trim:false,uppercase:false,lowercase:false,propercase:false,maxLength:"",selectOnClick:false,placeHolder:"",_getValueAttr:function(){return this.parse(this.get("displayedValue"),this.constraints);},_setValueAttr:function(_6e1,_6e2,_6e3){var _6e4;if(_6e1!==undefined){_6e4=this.filter(_6e1);if(typeof _6e3!="string"){if(_6e4!==null&&((typeof _6e4!="number")||!isNaN(_6e4))){_6e3=this.filter(this.format(_6e4,this.constraints));}else{_6e3="";}if(this.compare(_6e4,this.filter(this.parse(_6e3,this.constraints)))!=0){_6e3=null;}}}if(_6e3!=null&&((typeof _6e3)!="number"||!isNaN(_6e3))&&this.textbox.value!=_6e3){this.textbox.value=_6e3;this._set("displayedValue",this.get("displayedValue"));}this.inherited(arguments,[_6e4,_6e2]);},displayedValue:"",_getDisplayedValueAttr:function(){return this.filter(this.textbox.value);},_setDisplayedValueAttr:function(_6e5){if(_6e5==null){_6e5="";}else{if(typeof _6e5!="string"){_6e5=String(_6e5);}}this.textbox.value=_6e5;this._setValueAttr(this.get("value"),undefined);this._set("displayedValue",this.get("displayedValue"));},format:function(_6e6){return _6e6==null?"":(_6e6.toString?_6e6.toString():_6e6);},parse:function(_6e7){return _6e7;},_refreshState:function(){},onInput:function(){},_onInput:function(evt){this._lastInputEventValue=this.textbox.value;this._processInput(this._lastInputProducingEvent||evt);delete this._lastInputProducingEvent;if(this.intermediateChanges){this._handleOnChange(this.get("value"),false);}},_processInput:function(){this._refreshState();this._set("displayedValue",this.get("displayedValue"));},postCreate:function(){this.textbox.setAttribute("value",this.textbox.value);this.inherited(arguments);function _6e8(e){var _6e9;if(e.type=="keydown"&&e.keyCode!=229){_6e9=e.keyCode;switch(_6e9){case keys.SHIFT:case keys.ALT:case keys.CTRL:case keys.META:case keys.CAPS_LOCK:case keys.NUM_LOCK:case keys.SCROLL_LOCK:return;}if(!e.ctrlKey&&!e.metaKey&&!e.altKey){switch(_6e9){case keys.NUMPAD_0:case keys.NUMPAD_1:case keys.NUMPAD_2:case keys.NUMPAD_3:case keys.NUMPAD_4:case keys.NUMPAD_5:case keys.NUMPAD_6:case keys.NUMPAD_7:case keys.NUMPAD_8:case keys.NUMPAD_9:case keys.NUMPAD_MULTIPLY:case keys.NUMPAD_PLUS:case keys.NUMPAD_ENTER:case keys.NUMPAD_MINUS:case keys.NUMPAD_PERIOD:case keys.NUMPAD_DIVIDE:return;}if((_6e9>=65&&_6e9<=90)||(_6e9>=48&&_6e9<=57)||_6e9==keys.SPACE){return;}var _6ea=false;for(var i in keys){if(keys[i]===e.keyCode){_6ea=true;break;}}if(!_6ea){return;}}}_6e9=e.charCode>=32?String.fromCharCode(e.charCode):e.charCode;if(!_6e9){_6e9=(e.keyCode>=65&&e.keyCode<=90)||(e.keyCode>=48&&e.keyCode<=57)||e.keyCode==keys.SPACE?String.fromCharCode(e.keyCode):e.keyCode;}if(!_6e9){_6e9=229;}if(e.type=="keypress"){if(typeof _6e9!="string"){return;}if((_6e9>="a"&&_6e9<="z")||(_6e9>="A"&&_6e9<="Z")||(_6e9>="0"&&_6e9<="9")||(_6e9===" ")){if(e.ctrlKey||e.metaKey||e.altKey){return;}}}var faux={faux:true},attr;for(attr in e){if(!/^(layer[XY]|returnValue|keyLocation)$/.test(attr)){var v=e[attr];if(typeof v!="function"&&typeof v!="undefined"){faux[attr]=v;}}}lang.mixin(faux,{charOrCode:_6e9,_wasConsumed:false,preventDefault:function(){faux._wasConsumed=true;e.preventDefault();},stopPropagation:function(){e.stopPropagation();}});this._lastInputProducingEvent=faux;if(this.onInput(faux)===false){faux.preventDefault();faux.stopPropagation();}if(faux._wasConsumed){return;}if(has("ie")<=9){switch(e.keyCode){case keys.TAB:case keys.ESCAPE:case keys.DOWN_ARROW:case keys.UP_ARROW:case keys.LEFT_ARROW:case keys.RIGHT_ARROW:break;default:if(e.keyCode==keys.ENTER&&this.textbox.tagName.toLowerCase()!="textarea"){break;}this.defer(function(){if(this.textbox.value!==this._lastInputEventValue){on.emit(this.textbox,"input",{bubbles:true});}});}}};this.own(on(this.textbox,"keydown, keypress, paste, cut, compositionend",lang.hitch(this,_6e8)),on(this.textbox,"input",lang.hitch(this,"_onInput")),on(this.domNode,"keypress",function(e){e.stopPropagation();}));},_blankValue:"",filter:function(val){if(val===null){return this._blankValue;}if(typeof val!="string"){return val;}if(this.trim){val=lang.trim(val);}if(this.uppercase){val=val.toUpperCase();}if(this.lowercase){val=val.toLowerCase();}if(this.propercase){val=val.replace(/[^\s]+/g,function(word){return word.substring(0,1).toUpperCase()+word.substring(1);});}return val;},_setBlurValue:function(){this._setValueAttr(this.get("value"),true);},_onBlur:function(e){if(this.disabled){return;}this._setBlurValue();this.inherited(arguments);},_isTextSelected:function(){return this.textbox.selectionStart!=this.textbox.selectionEnd;},_onFocus:function(by){if(this.disabled||this.readOnly){return;}if(this.selectOnClick&&by=="mouse"){this._selectOnClickHandle=on.once(this.domNode,"mouseup, touchend",lang.hitch(this,function(evt){if(!this._isTextSelected()){_6e0.selectInputText(this.textbox);}}));this.own(this._selectOnClickHandle);this.defer(function(){if(this._selectOnClickHandle){this._selectOnClickHandle.remove();this._selectOnClickHandle=null;}},500);}this.inherited(arguments);this._refreshState();},reset:function(){this.textbox.value="";this.inherited(arguments);}});if(has("dojo-bidi")){_6e0=_6de("dijit.form._TextBoxMixin",_6e0,{_setValueAttr:function(){this.inherited(arguments);this.applyTextDir(this.focusNode);},_setDisplayedValueAttr:function(){this.inherited(arguments);this.applyTextDir(this.focusNode);},_onInput:function(){this.applyTextDir(this.focusNode);this.inherited(arguments);}});}_6e0._setSelectionRange=_6df._setSelectionRange=function(_6eb,_6ec,stop){if(_6eb.setSelectionRange){_6eb.setSelectionRange(_6ec,stop);}};_6e0.selectInputText=_6df.selectInputText=function(_6ed,_6ee,stop){_6ed=dom.byId(_6ed);if(isNaN(_6ee)){_6ee=0;}if(isNaN(stop)){stop=_6ed.value?_6ed.value.length:0;}try{_6ed.focus();_6e0._setSelectionRange(_6ed,_6ee,stop);}catch(e){}};return _6e0;});},"dojox/form/PasswordValidator":function(){define(["dojo/_base/array","dojo/_base/lang","dojo/dom-attr","dojo/i18n","dojo/query","dojo/keys","dijit/form/_FormValueWidget","dijit/form/ValidationTextBox","dojo/text!./resources/PasswordValidator.html","dojo/i18n!./nls/PasswordValidator","dojo/_base/declare"],function(_6ef,lang,_6f0,i18n,_6f1,keys,_6f2,_6f3,_6f4,_6f5,_6f6){var _6f7=_6f6("dojox.form._ChildTextBox",_6f3,{containerWidget:null,type:"password",reset:function(){_6f3.prototype._setValueAttr.call(this,"",true);this._hasBeenBlurred=false;},postCreate:function(){this.inherited(arguments);if(!this.name){_6f0.remove(this.focusNode,"name");}this.connect(this.focusNode,"onkeypress","_onChildKeyPress");},_onChildKeyPress:function(e){if(e&&e.keyCode==keys.ENTER){this._setBlurValue();}}});var _6f8=_6f6("dojox.form._OldPWBox",_6f7,{_isPWValid:false,_setValueAttr:function(_6f9,_6fa){if(_6f9===""){_6f9=_6f8.superclass.attr.call(this,"value");}if(_6fa!==null){this._isPWValid=this.containerWidget.pwCheck(_6f9);}this.inherited(arguments);this.containerWidget._childValueAttr(this.containerWidget._inputWidgets[1].get("value"));},isValid:function(_6fb){return this.inherited("isValid",arguments)&&this._isPWValid;},_update:function(e){if(this._hasBeenBlurred){this.validate(true);}this._onMouse(e);},_getValueAttr:function(){if(this.containerWidget._started&&this.containerWidget.isValid()){return this.inherited(arguments);}return "";},_setBlurValue:function(){var _6fc=_6f3.prototype._getValueAttr.call(this);this._setValueAttr(_6fc,(this.isValid?this.isValid():true));}});var _6fd=_6f6("dojox.form._NewPWBox",_6f7,{required:true,onChange:function(){this.containerWidget._inputWidgets[2].validate(false);this.inherited(arguments);}});var _6fe=_6f6("dojox.form._VerifyPWBox",_6f7,{isValid:function(_6ff){return this.inherited("isValid",arguments)&&(this.get("value")==this.containerWidget._inputWidgets[1].get("value"));}});return _6f6("dojox.form.PasswordValidator",_6f2,{required:true,_inputWidgets:null,oldName:"",templateString:_6f4,_hasBeenBlurred:false,isValid:function(_700){return _6ef.every(this._inputWidgets,function(i){if(i&&i._setStateClass){i._setStateClass();}return (!i||i.isValid());});},validate:function(_701){return _6ef.every(_6ef.map(this._inputWidgets,function(i){if(i&&i.validate){i._hasBeenBlurred=(i._hasBeenBlurred||this._hasBeenBlurred);return i.validate();}return true;},this),function(item){return item;});},reset:function(){this._hasBeenBlurred=false;_6ef.forEach(this._inputWidgets,function(i){if(i&&i.reset){i.reset();}},this);},_createSubWidgets:function(){var _702=this._inputWidgets,msg=i18n.getLocalization("dojox.form","PasswordValidator",this.lang);_6ef.forEach(_702,function(i,idx){if(i){var p={containerWidget:this},c;if(idx===0){p.name=this.oldName;p.invalidMessage=msg.badPasswordMessage;c=_6f8;}else{if(idx===1){p.required=this.required;c=_6fd;}else{if(idx===2){p.invalidMessage=msg.nomatchMessage;c=_6fe;}}}_702[idx]=new c(p,i);}},this);},pwCheck:function(_703){return false;},postCreate:function(){this.inherited(arguments);var _704=this._inputWidgets=[];_6ef.forEach(["old","new","verify"],function(i){_704.push(_6f1("input[pwType="+i+"]",this.containerNode)[0]);},this);if(!_704[1]||!_704[2]){throw new Error("Need at least pwType=\"new\" and pwType=\"verify\"");}if(this.oldName&&!_704[0]){throw new Error("Need to specify pwType=\"old\" if using oldName");}this.containerNode=this.domNode;this._createSubWidgets();this.connect(this._inputWidgets[1],"_setValueAttr","_childValueAttr");this.connect(this._inputWidgets[2],"_setValueAttr","_childValueAttr");},_childValueAttr:function(v){this.set("value",this.isValid()?v:"");},_setDisabledAttr:function(_705){this.inherited(arguments);_6ef.forEach(this._inputWidgets,function(i){if(i&&i.set){i.set("disabled",_705);}});},_setRequiredAttr:function(_706){this.required=_706;_6f0.set(this.focusNode,"required",_706);this.focusNode.setAttribute("aria-required",_706);_6ef.forEach(this._inputWidgets,function(i){if(i&&i.set){i.set("required",_706);}});},_setValueAttr:function(v){this.inherited(arguments);_6f0.set(this.focusNode,"value",v);},_getValueAttr:function(){return this.value||"";},focus:function(){var f=false;_6ef.forEach(this._inputWidgets,function(i){if(i&&!i.isValid()&&!f){i.focus();f=true;}});if(!f){this._inputWidgets[1].focus();}}});});},"dgrid/Selection":function(){define(["dojo/_base/kernel","dojo/_base/declare","dojo/_base/Deferred","dojo/on","dojo/has","dojo/aspect","./List","dojo/has!touch?./util/touch","put-selector/put","dojo/query","dojo/_base/sniff"],function(_707,_708,_709,on,has,_70a,List,_70b,put){has.add("dom-comparedocumentposition",function(_70c,doc,_70d){return !!_70d.compareDocumentPosition;});has.add("pointer",function(_70e){return "PointerEvent" in _70e?"pointer":"MSPointerEvent" in _70e?"MSPointer":false;});has.add("css-user-select",function(_70f,doc,_710){var _711=_710.style,_712=["Khtml","O","ms","Moz","Webkit"],i=_712.length,name="userSelect";do{if(typeof _711[name]!=="undefined"){return name;}}while(i--&&(name=_712[i]+"UserSelect"));return false;});has.add("dom-selectstart",typeof document.onselectstart!=="undefined");var _713=has("mac")?"metaKey":"ctrlKey",_714=has("css-user-select"),_715=has("pointer"),_716=_715&&_715.slice(0,2)==="MS",_717=_715?_715+(_716?"Down":"down"):"mousedown",_718=_715?_715+(_716?"Up":"up"):"mouseup";function _719(node,_71a){var _71b=node.unselectable=_71a?"on":"",_71c=node.getElementsByTagName("*"),i=_71c.length;while(--i){if(_71c[i].tagName==="INPUT"||_71c[i].tagName==="TEXTAREA"){continue;}_71c[i].unselectable=_71b;}};function _71d(grid,_71e){var node=grid.bodyNode,_71f=_71e?"text":has("ff")<21?"-moz-none":"none";if(_714&&_714!=="msUserSelect"){node.style[_714]=_71f;}else{if(has("dom-selectstart")){if(!_71e&&!grid._selectstartHandle){grid._selectstartHandle=on(node,"selectstart",function(evt){var tag=evt.target&&evt.target.tagName;if(tag!=="INPUT"&&tag!=="TEXTAREA"){evt.preventDefault();}});}else{if(_71e&&grid._selectstartHandle){grid._selectstartHandle.remove();delete grid._selectstartHandle;}}}else{_719(node,!_71e);if(!_71e&&!grid._unselectableHandle){grid._unselectableHandle=_70a.after(grid,"renderRow",function(row){_719(row,true);return row;});}else{if(_71e&&grid._unselectableHandle){grid._unselectableHandle.remove();delete grid._unselectableHandle;}}}}};return _708(null,{selectionDelegate:".dgrid-row",selectionEvents:_717+","+_718+",dgrid-cellfocusin",selectionTouchEvents:has("touch")?_70b.tap:null,deselectOnRefresh:true,allowSelectAll:false,selection:{},selectionMode:"extended",allowTextSelection:undefined,_selectionTargetType:"rows",create:function(){this.selection={};return this.inherited(arguments);},postCreate:function(){this.inherited(arguments);this._initSelectionEvents();var _720=this.selectionMode;this.selectionMode="";this._setSelectionMode(_720);},destroy:function(){this.inherited(arguments);if(this._selectstartHandle){this._selectstartHandle.remove();}if(this._unselectableHandle){this._unselectableHandle.remove();}if(this._removeDeselectSignals){this._removeDeselectSignals();}},_setSelectionMode:function(mode){if(mode==this.selectionMode){return;}this.clearSelection();this.selectionMode=mode;this._selectionHandlerName="_"+mode+"SelectionHandler";this._setAllowTextSelection(this.allowTextSelection);},setSelectionMode:function(mode){_707.deprecated("setSelectionMode(...)","use set(\"selectionMode\", ...) instead","dgrid 0.4");this.set("selectionMode",mode);},_setAllowTextSelection:function(_721){if(typeof _721!=="undefined"){_71d(this,_721);}else{_71d(this,this.selectionMode==="none");}this.allowTextSelection=_721;},_handleSelect:function(_722,_723){if(!this[this._selectionHandlerName]||!this.allowSelect(this.row(_723))||(_722.type==="dgrid-cellfocusin"&&_722.parentType==="mousedown")||(_722.type===_718&&_723!=this._waitForMouseUp)){return;}this._waitForMouseUp=null;this._selectionTriggerEvent=_722;if(!_722.keyCode||!_722.ctrlKey||_722.keyCode==32){if(!_722.shiftKey&&_722.type===_717&&this.isSelected(_723)){this._waitForMouseUp=_723;}else{this[this._selectionHandlerName](_722,_723);}}this._selectionTriggerEvent=null;},_singleSelectionHandler:function(_724,_725){var _726=_724.keyCode?_724.ctrlKey:_724[_713];if(this._lastSelected===_725){this.select(_725,null,!_726||!this.isSelected(_725));}else{this.clearSelection();this.select(_725);this._lastSelected=_725;}},_multipleSelectionHandler:function(_727,_728){var _729=this._lastSelected,_72a=_727.keyCode?_727.ctrlKey:_727[_713],_72b;if(!_727.shiftKey){_72b=_72a?null:true;_729=null;}this.select(_728,_729,_72b);if(!_729){this._lastSelected=_728;}},_extendedSelectionHandler:function(_72c,_72d){if(_72c.button===2?!this.isSelected(_72d):!(_72c.keyCode?_72c.ctrlKey:_72c[_713])){this.clearSelection(null,true);}this._multipleSelectionHandler(_72c,_72d);},_toggleSelectionHandler:function(_72e,_72f){this.select(_72f,null,null);},_initSelectionEvents:function(){var grid=this,_730=this.contentNode,_731=this.selectionDelegate;this._selectionEventQueues={deselect:[],select:[]};if(has("touch")&&!has("pointer")&&this.selectionTouchEvents){on(_730,_70b.selector(_731,this.selectionTouchEvents),function(evt){grid._handleSelect(evt,this);grid._ignoreMouseSelect=this;});on(_730,on.selector(_731,this.selectionEvents),function(_732){if(grid._ignoreMouseSelect!==this){grid._handleSelect(_732,this);}else{if(_732.type===_718){grid._ignoreMouseSelect=null;}}});}else{on(_730,on.selector(_731,this.selectionEvents),function(_733){grid._handleSelect(_733,this);});}if(this.addKeyHandler){this.addKeyHandler(32,function(_734){grid._handleSelect(_734,_734.target);});}if(this.allowSelectAll){this.on("keydown",function(_735){if(_735[_713]&&_735.keyCode==65&&!/\bdgrid-input\b/.test(_735.target.className)){_735.preventDefault();grid[grid.allSelected?"clearSelection":"selectAll"]();}});}if(this._setStore){_70a.after(this,"_setStore",function(){grid._updateDeselectionAspect();});}this._updateDeselectionAspect();},_updateDeselectionAspect:function(){var self=this,_736=this.store,_737,_738;function _739(_73a,_73b,_73c){var id=_73b||(_73a&&_73a[self.idProperty||"id"]);if(id!=null){var row=self.row(id),_73d=row&&self.selection[row.id];if(_73d){self[_73c](row,null,_73d);}}};if(this._removeDeselectSignals){this._removeDeselectSignals();}if(_736&&_736.notify){_737=_70a.before(_736,"notify",function(_73e,_73f){if(!_73e){_739(_73e,_73f,"deselect");}});_738=_70a.after(_736,"notify",function(_740,_741){_739(_740,_741,"select");},true);this._removeDeselectSignals=function(){_737.remove();_738.remove();};}else{_737=_70a.before(this,"removeRow",function(_742,_743){var row;if(!_743){row=this.row(_742);if(row&&(row.id in this.selection)){this.deselect(row);}}});this._removeDeselectSignals=function(){_737.remove();};}},allowSelect:function(row){return true;},_fireSelectionEvent:function(type){var _744=this._selectionEventQueues[type],_745=this._selectionTriggerEvent,_746;_746={bubbles:true,grid:this};if(_745){_746.parentType=_745.type;}_746[this._selectionTargetType]=_744;on.emit(this.contentNode,"dgrid-"+type,_746);this._selectionEventQueues[type]=[];},_fireSelectionEvents:function(){var _747=this._selectionEventQueues,type;for(type in _747){if(_747[type].length){this._fireSelectionEvent(type);}}},_select:function(row,_748,_749){var _74a,_74b,_74c,_74d,_74e;if(typeof _749==="undefined"){_749=true;}if(!row.element){row=this.row(row);}if(_749===false||this.allowSelect(row)){_74a=this.selection;_74b=!!_74a[row.id];if(_749===null){_749=!_74b;}_74c=row.element;if(!_749&&!this.allSelected){delete this.selection[row.id];}else{_74a[row.id]=_749;}if(_74c){if(_749){put(_74c,".dgrid-selected"+(this.addUiClasses?".ui-state-active":""));}else{put(_74c,"!dgrid-selected!ui-state-active");}}if(_749!==_74b&&_74c){this._selectionEventQueues[(_749?"":"de")+"select"].push(row);}if(_748){if(!_748.element){_748=this.row(_748);}if(!_748){this._lastSelected=_74c;return;}_74d=_748.element;if(_74d){_74e=this._determineSelectionDirection(_74c,_74d);if(!_74e){_74d=document.getElementById(_74d.id);_74e=this._determineSelectionDirection(_74c,_74d);}while(row.element!=_74d&&(row=this[_74e](row))){this._select(row,null,_749);}}}}},_determineSelectionDirection:has("dom-comparedocumentposition")?function(from,to){var _74f=to.compareDocumentPosition(from);if(_74f&1){return false;}return _74f===2?"down":"up";}:function(from,to){if(to.sourceIndex<1){return false;}return to.sourceIndex>from.sourceIndex?"down":"up";},select:function(row,_750,_751){this._select(row,_750,_751);this._fireSelectionEvents();},deselect:function(row,_752){this.select(row,_752,false);},clearSelection:function(_753,_754){this.allSelected=false;for(var id in this.selection){if(_753!==id){this._select(id,null,false);}}if(!_754){this._lastSelected=null;}this._fireSelectionEvents();},selectAll:function(){this.allSelected=true;this.selection={};for(var i in this._rowIdToObject){var row=this.row(this._rowIdToObject[i]);this._select(row.id,null,true);}this._fireSelectionEvents();},isSelected:function(_755){if(typeof _755==="undefined"||_755===null){return false;}if(!_755.element){_755=this.row(_755);}return (_755.id in this.selection)?!!this.selection[_755.id]:this.allSelected&&(!_755.data||this.allowSelect(_755));},refresh:function(){if(this.deselectOnRefresh){this.clearSelection();}this._lastSelected=null;return this.inherited(arguments);},renderArray:function(){var grid=this,rows=this.inherited(arguments);_709.when(rows,function(rows){var _756=grid.selection,i,row,_757;for(i=0;i<rows.length;i++){row=grid.row(rows[i]);_757=row.id in _756?_756[row.id]:grid.allSelected;if(_757){grid._select(row,null,_757);}}grid._fireSelectionEvents();});return rows;}});});},"dijit/form/TextBox":function(){define(["dojo/_base/declare","dojo/dom-construct","dojo/dom-style","dojo/_base/kernel","dojo/_base/lang","dojo/on","dojo/sniff","./_FormValueWidget","./_TextBoxMixin","dojo/text!./templates/TextBox.html","../main"],function(_758,_759,_75a,_75b,lang,on,has,_75c,_75d,_75e,_75f){var _760=_758("dijit.form.TextBox"+(has("dojo-bidi")?"_NoBidi":""),[_75c,_75d],{templateString:_75e,_singleNodeTemplate:"<input class=\"dijit dijitReset dijitLeft dijitInputField\" data-dojo-attach-point=\"textbox,focusNode\" autocomplete=\"off\" type=\"${type}\" ${!nameAttrSetting} />",_buttonInputDisabled:has("ie")?"disabled":"",baseClass:"dijitTextBox",postMixInProperties:function(){var type=this.type.toLowerCase();if(this.templateString&&this.templateString.toLowerCase()=="input"||((type=="hidden"||type=="file")&&this.templateString==this.constructor.prototype.templateString)){this.templateString=this._singleNodeTemplate;}this.inherited(arguments);},postCreate:function(){this.inherited(arguments);if(has("ie")<9){this.defer(function(){try{var s=_75a.getComputedStyle(this.domNode);if(s){var ff=s.fontFamily;if(ff){var _761=this.domNode.getElementsByTagName("INPUT");if(_761){for(var i=0;i<_761.length;i++){_761[i].style.fontFamily=ff;}}}}}catch(e){}});}},_setPlaceHolderAttr:function(v){this._set("placeHolder",v);if(!this._phspan){this._attachPoints.push("_phspan");this._phspan=_759.create("span",{className:"dijitPlaceHolder dijitInputField"},this.textbox,"after");this.own(on(this._phspan,"mousedown",function(evt){evt.preventDefault();}),on(this._phspan,"touchend, pointerup, MSPointerUp",lang.hitch(this,function(){this.focus();})));}this._phspan.innerHTML="";this._phspan.appendChild(this._phspan.ownerDocument.createTextNode(v));this._updatePlaceHolder();},_onInput:function(evt){this.inherited(arguments);this._updatePlaceHolder();},_updatePlaceHolder:function(){if(this._phspan){this._phspan.style.display=(this.placeHolder&&!this.textbox.value)?"":"none";}},_setValueAttr:function(_762,_763,_764){this.inherited(arguments);this._updatePlaceHolder();},getDisplayedValue:function(){_75b.deprecated(this.declaredClass+"::getDisplayedValue() is deprecated. Use get('displayedValue') instead.","","2.0");return this.get("displayedValue");},setDisplayedValue:function(_765){_75b.deprecated(this.declaredClass+"::setDisplayedValue() is deprecated. Use set('displayedValue', ...) instead.","","2.0");this.set("displayedValue",_765);},_onBlur:function(e){if(this.disabled){return;}this.inherited(arguments);this._updatePlaceHolder();if(has("mozilla")){if(this.selectOnClick){this.textbox.selectionStart=this.textbox.selectionEnd=undefined;}}},_onFocus:function(by){if(this.disabled||this.readOnly){return;}this.inherited(arguments);this._updatePlaceHolder();}});if(has("ie")<9){_760.prototype._isTextSelected=function(){var _766=this.ownerDocument.selection.createRange();var _767=_766.parentElement();return _767==this.textbox&&_766.text.length>0;};_75f._setSelectionRange=_75d._setSelectionRange=function(_768,_769,stop){if(_768.createTextRange){var r=_768.createTextRange();r.collapse(true);r.moveStart("character",-99999);r.moveStart("character",_769);r.moveEnd("character",stop-_769);r.select();}};}if(has("dojo-bidi")){_760=_758("dijit.form.TextBox",_760,{_setPlaceHolderAttr:function(v){this.inherited(arguments);this.applyTextDir(this._phspan);}});}return _760;});},"dijit/form/_DateTimeTextBox":function(){define(["dojo/date","dojo/date/locale","dojo/date/stamp","dojo/_base/declare","dojo/_base/lang","./RangeBoundTextBox","../_HasDropDown","dojo/text!./templates/DropDownBox.html"],function(date,_76a,_76b,_76c,lang,_76d,_76e,_76f){new Date("X");var _770=_76c("dijit.form._DateTimeTextBox",[_76d,_76e],{templateString:_76f,hasDownArrow:true,cssStateNodes:{"_buttonNode":"dijitDownArrowButton"},_unboundedConstraints:{},pattern:_76a.regexp,datePackage:"",postMixInProperties:function(){this.inherited(arguments);this._set("type","text");},compare:function(val1,val2){var _771=this._isInvalidDate(val1);var _772=this._isInvalidDate(val2);if(_771||_772){return (_771&&_772)?0:(!_771?1:-1);}var _773=this.format(val1,this._unboundedConstraints),_774=this.format(val2,this._unboundedConstraints),_775=this.parse(_773,this._unboundedConstraints),_776=this.parse(_774,this._unboundedConstraints);return _773==_774?0:date.compare(_775,_776,this._selector);},autoWidth:true,format:function(_777,_778){if(!_777){return "";}return this.dateLocaleModule.format(_777,_778);},"parse":function(_779,_77a){return this.dateLocaleModule.parse(_779,_77a)||(this._isEmpty(_779)?null:undefined);},serialize:function(val,_77b){if(val.toGregorian){val=val.toGregorian();}return _76b.toISOString(val,_77b);},dropDownDefaultValue:new Date(),value:new Date(""),_blankValue:null,popupClass:"",_selector:"",constructor:function(_77c){_77c=_77c||{};this.dateModule=_77c.datePackage?lang.getObject(_77c.datePackage,false):date;this.dateClassObj=this.dateModule.Date||Date;if(!(this.dateClassObj instanceof Date)){this.value=new this.dateClassObj(this.value);}this.dateLocaleModule=_77c.datePackage?lang.getObject(_77c.datePackage+".locale",false):_76a;this._set("pattern",this.dateLocaleModule.regexp);this._invalidDate=this.constructor.prototype.value.toString();},buildRendering:function(){this.inherited(arguments);if(!this.hasDownArrow){this._buttonNode.style.display="none";}if(!this.hasDownArrow){this._buttonNode=this.domNode;this.baseClass+=" dijitComboBoxOpenOnClick";}},_setConstraintsAttr:function(_77d){_77d.selector=this._selector;_77d.fullYear=true;var _77e=_76b.fromISOString;if(typeof _77d.min=="string"){_77d.min=_77e(_77d.min);if(!(this.dateClassObj instanceof Date)){_77d.min=new this.dateClassObj(_77d.min);}}if(typeof _77d.max=="string"){_77d.max=_77e(_77d.max);if(!(this.dateClassObj instanceof Date)){_77d.max=new this.dateClassObj(_77d.max);}}this.inherited(arguments);this._unboundedConstraints=lang.mixin({},this.constraints,{min:null,max:null});},_isInvalidDate:function(_77f){return !_77f||isNaN(_77f)||typeof _77f!="object"||_77f.toString()==this._invalidDate;},_setValueAttr:function(_780,_781,_782){if(_780!==undefined){if(typeof _780=="string"){_780=_76b.fromISOString(_780);}if(this._isInvalidDate(_780)){_780=null;}if(_780 instanceof Date&&!(this.dateClassObj instanceof Date)){_780=new this.dateClassObj(_780);}}this.inherited(arguments,[_780,_781,_782]);if(this.value instanceof Date){this.filterString="";}if(_781!==false&&this.dropDown){this.dropDown.set("value",_780,false);}},_set:function(attr,_783){if(attr=="value"){if(_783 instanceof Date&&!(this.dateClassObj instanceof Date)){_783=new this.dateClassObj(_783);}var _784=this._get("value");if(_784 instanceof this.dateClassObj&&this.compare(_783,_784)==0){return;}}this.inherited(arguments);},_setDropDownDefaultValueAttr:function(val){if(this._isInvalidDate(val)){val=new this.dateClassObj();}this._set("dropDownDefaultValue",val);},openDropDown:function(_785){if(this.dropDown){this.dropDown.destroy();}var _786=lang.isString(this.popupClass)?lang.getObject(this.popupClass,false):this.popupClass,_787=this,_788=this.get("value");this.dropDown=new _786({onChange:function(_789){_787.set("value",_789,true);},id:this.id+"_popup",dir:_787.dir,lang:_787.lang,value:_788,textDir:_787.textDir,currentFocus:!this._isInvalidDate(_788)?_788:this.dropDownDefaultValue,constraints:_787.constraints,filterString:_787.filterString,datePackage:_787.datePackage,isDisabledDate:function(date){return !_787.rangeCheck(date,_787.constraints);}});this.inherited(arguments);},_getDisplayedValueAttr:function(){return this.textbox.value;},_setDisplayedValueAttr:function(_78a,_78b){this._setValueAttr(this.parse(_78a,this.constraints),_78b,_78a);}});return _770;});},"dijit/layout/StackContainer":function(){define(["dojo/_base/array","dojo/cookie","dojo/_base/declare","dojo/dom-class","dojo/dom-construct","dojo/has","dojo/_base/lang","dojo/on","dojo/ready","dojo/topic","dojo/when","../registry","../_WidgetBase","./_LayoutWidget"],function(_78c,_78d,_78e,_78f,_790,has,lang,on,_791,_792,when,_793,_794,_795){if(has("dijit-legacy-requires")){_791(0,function(){var _796=["dijit/layout/StackController"];require(_796);});}var _797=_78e("dijit.layout.StackContainer",_795,{doLayout:true,persist:false,baseClass:"dijitStackContainer",buildRendering:function(){this.inherited(arguments);_78f.add(this.domNode,"dijitLayoutContainer");},postCreate:function(){this.inherited(arguments);this.own(on(this.domNode,"keydown",lang.hitch(this,"_onKeyDown")));},startup:function(){if(this._started){return;}var _798=this.getChildren();_78c.forEach(_798,this._setupChild,this);if(this.persist){this.selectedChildWidget=_793.byId(_78d(this.id+"_selectedChild"));}else{_78c.some(_798,function(_799){if(_799.selected){this.selectedChildWidget=_799;}return _799.selected;},this);}var _79a=this.selectedChildWidget;if(!_79a&&_798[0]){_79a=this.selectedChildWidget=_798[0];_79a.selected=true;}_792.publish(this.id+"-startup",{children:_798,selected:_79a,textDir:this.textDir});this.inherited(arguments);},resize:function(){if(!this._hasBeenShown){this._hasBeenShown=true;var _79b=this.selectedChildWidget;if(_79b){this._showChild(_79b);}}this.inherited(arguments);},_setupChild:function(_79c){var _79d=_79c.domNode,_79e=_790.place("<div role='tabpanel' class='"+this.baseClass+"ChildWrapper dijitHidden'>",_79c.domNode,"replace"),_79f=_79c["aria-label"]||_79c.title||_79c.label;if(_79f){_79e.setAttribute("aria-label",_79f);}_790.place(_79d,_79e);_79c._wrapper=_79e;this.inherited(arguments);if(_79d.style.display=="none"){_79d.style.display="block";}_79c.domNode.removeAttribute("title");},addChild:function(_7a0,_7a1){this.inherited(arguments);if(this._started){_792.publish(this.id+"-addChild",_7a0,_7a1);this.layout();if(!this.selectedChildWidget){this.selectChild(_7a0);}}},removeChild:function(page){var idx=_78c.indexOf(this.getChildren(),page);this.inherited(arguments);_790.destroy(page._wrapper);delete page._wrapper;if(this._started){_792.publish(this.id+"-removeChild",page);}if(this._descendantsBeingDestroyed){return;}if(this.selectedChildWidget===page){this.selectedChildWidget=undefined;if(this._started){var _7a2=this.getChildren();if(_7a2.length){this.selectChild(_7a2[Math.max(idx-1,0)]);}}}if(this._started){this.layout();}},selectChild:function(page,_7a3){var d;page=_793.byId(page);if(this.selectedChildWidget!=page){d=this._transition(page,this.selectedChildWidget,_7a3);this._set("selectedChildWidget",page);_792.publish(this.id+"-selectChild",page,this._focused);if(this.persist){_78d(this.id+"_selectedChild",this.selectedChildWidget.id);}}return when(d||true);},_transition:function(_7a4,_7a5){if(_7a5){this._hideChild(_7a5);}var d=this._showChild(_7a4);if(_7a4.resize){if(this.doLayout){_7a4.resize(this._containerContentBox||this._contentBox);}else{_7a4.resize();}}return d;},_adjacent:function(_7a6){var _7a7=this.getChildren();var _7a8=_78c.indexOf(_7a7,this.selectedChildWidget);_7a8+=_7a6?1:_7a7.length-1;return _7a7[_7a8%_7a7.length];},forward:function(){return this.selectChild(this._adjacent(true),true);},back:function(){return this.selectChild(this._adjacent(false),true);},_onKeyDown:function(e){_792.publish(this.id+"-containerKeyDown",{e:e,page:this});},layout:function(){var _7a9=this.selectedChildWidget;if(_7a9&&_7a9.resize){if(this.doLayout){_7a9.resize(this._containerContentBox||this._contentBox);}else{_7a9.resize();}}},_showChild:function(page){var _7aa=this.getChildren();page.isFirstChild=(page==_7aa[0]);page.isLastChild=(page==_7aa[_7aa.length-1]);page._set("selected",true);if(page._wrapper){_78f.replace(page._wrapper,"dijitVisible","dijitHidden");}return (page._onShow&&page._onShow())||true;},_hideChild:function(page){page._set("selected",false);if(page._wrapper){_78f.replace(page._wrapper,"dijitHidden","dijitVisible");}page.onHide&&page.onHide();},closeChild:function(page){var _7ab=!page.onClose||page.onClose(this,page);if(_7ab){this.removeChild(page);page.destroyRecursive();}},destroyDescendants:function(_7ac){this._descendantsBeingDestroyed=true;this.selectedChildWidget=undefined;_78c.forEach(this.getChildren(),function(_7ad){if(!_7ac){this.removeChild(_7ad);}_7ad.destroyRecursive(_7ac);},this);this._descendantsBeingDestroyed=false;}});_797.ChildWidgetProperties={selected:false,disabled:false,closable:false,iconClass:"dijitNoIcon",showTitle:true};lang.extend(_794,_797.ChildWidgetProperties);return _797;});},"dgrid/extensions/DijitRegistry":function(){define(["dojo/_base/declare","dojo/dom-geometry","dijit/registry"],function(_7ae,_7af,_7b0){return _7ae(null,{minSize:0,maxSize:Infinity,layoutPriority:0,showTitle:true,buildRendering:function(){_7b0.add(this);this.inherited(arguments);this.domNode.setAttribute("widgetId",this.id);},startup:function(){if(this._started){return;}this.inherited(arguments);var _7b1=_7b0.getEnclosingWidget(this.domNode.parentNode);if(_7b1&&_7b1.isLayoutContainer){this._resizeHandle.remove();}},destroyRecursive:function(){this.destroy();},destroy:function(){this.inherited(arguments);_7b0.remove(this.id);},getChildren:function(){return [];},isLeftToRight:function(){return !this.isRTL;},resize:function(_7b2){if(_7b2){_7af.setMarginBox(this.domNode,_7b2);}this.inherited(arguments);},_set:function(prop,_7b3){this[prop]=_7b3;},watch:function(){},getParent:function(){return _7b0.getEnclosingWidget(this.domNode.parentNode);}});});},"dijit/form/Form":function(){define(["dojo/_base/declare","dojo/dom-attr","dojo/_base/kernel","dojo/sniff","../_Widget","../_TemplatedMixin","./_FormMixin","../layout/_ContentPaneResizeMixin"],function(_7b4,_7b5,_7b6,has,_7b7,_7b8,_7b9,_7ba){return _7b4("dijit.form.Form",[_7b7,_7b8,_7b9,_7ba],{name:"",action:"",method:"",encType:"","accept-charset":"",accept:"",target:"",templateString:"<form data-dojo-attach-point='containerNode' data-dojo-attach-event='onreset:_onReset,onsubmit:_onSubmit' ${!nameAttrSetting}></form>",postMixInProperties:function(){this.nameAttrSetting=this.name?("name='"+this.name+"'"):"";this.inherited(arguments);},execute:function(){},onExecute:function(){},_setEncTypeAttr:function(_7bb){_7b5.set(this.domNode,"encType",_7bb);if(has("ie")){this.domNode.encoding=_7bb;}this._set("encType",_7bb);},reset:function(e){var faux={returnValue:true,preventDefault:function(){this.returnValue=false;},stopPropagation:function(){},currentTarget:e?e.target:this.domNode,target:e?e.target:this.domNode};if(!(this.onReset(faux)===false)&&faux.returnValue){this.inherited(arguments,[]);}},onReset:function(){return true;},_onReset:function(e){this.reset(e);e.stopPropagation();e.preventDefault();return false;},_onSubmit:function(e){var fp=this.constructor.prototype;if(this.execute!=fp.execute||this.onExecute!=fp.onExecute){_7b6.deprecated("dijit.form.Form:execute()/onExecute() are deprecated. Use onSubmit() instead.","","2.0");this.onExecute();this.execute(this.getValues());}if(this.onSubmit(e)===false){e.stopPropagation();e.preventDefault();}},onSubmit:function(){return this.isValid();},submit:function(){if(!(this.onSubmit()===false)){this.containerNode.submit();}}});});},"control/customer/view_internal":function(){define(["dojo/_base/declare","ttl/BaseWidgetAMD","dojo/text!../customer/templates/view_internal.html","dijit/layout/BorderContainer","dojo/request","ttl/utilities2","dojo/_base/lang","dojo/topic","dojo/dom-class","dojo/string","control/customer/users","control/customer/details","control/customer/options","control/customer/financial","control/customer/financiallog","control/customer/audit"],function(_7bc,_7bd,_7be,_7bf,_7c0,_7c1,lang,_7c2,_7c3,_7c4){return _7bc("control.customer.view_internal",[_7bd,_7bf],{templateString:_7be,gutters:false,mainViewString:"/customer/summary?icustomerid=${icustomerid}",constructor:function(){this._load_details_call_back=lang.hitch(this,this._load_details_call);this._error_call_back=lang.hitch(this,this._error_call);_7c2.subscribe("/customer/p_upd",lang.hitch(this,this._refresh_event));this._icustomerid=null;},postCreate:function(){},load:function(_7c5,_7c6){this._display_func=_7c6;this._icustomerid=_7c5;_7c0.post("/customer/get_internal",_7c1.make_params({data:{icustomerid:_7c5}})).then(this._load_details_call_back,this._error_call_back);this.view_summary.set("href",_7c4.substitute(this.mainViewString,{icustomerid:_7c5}));},_load_details_call:function(_7c7){if(_7c7.success=="OK"){this.view_users.load(this._icustomerid);this.view_details.load(_7c7.data);this.view_financial_details.load(_7c7.data);this.view_financial_log.load(this._icustomerid);this.view_audit.load(this._icustomerid);this._display_func("view_internal");this.view_options.load(_7c7.data.cust,_7c7.data.emailserver,_7c7.data.mediaaccesstype,_7c7.data.custsource);}else{}},_error_call:function(){alert(arguments[0]);},clear:function(){this.view_summary.set("content","");this._icustomerid=null;},_refresh_event:function(){if(this._icustomerid!=null){this.view_summary.set("href",_7c4.substitute(this.mainViewString,{icustomerid:this._icustomerid}));}}});});},"dijit/form/_FormWidgetMixin":function(){define(["dojo/_base/array","dojo/_base/declare","dojo/dom-attr","dojo/dom-style","dojo/_base/lang","dojo/mouse","dojo/on","dojo/sniff","dojo/window","../a11y"],function(_7c8,_7c9,_7ca,_7cb,lang,_7cc,on,has,_7cd,a11y){return _7c9("dijit.form._FormWidgetMixin",null,{name:"",alt:"",value:"",type:"text","aria-label":"focusNode",tabIndex:"0",_setTabIndexAttr:"focusNode",disabled:false,intermediateChanges:false,scrollOnFocus:true,_setIdAttr:"focusNode",_setDisabledAttr:function(_7ce){this._set("disabled",_7ce);if(/^(button|input|select|textarea|optgroup|option|fieldset)$/i.test(this.focusNode.tagName)){_7ca.set(this.focusNode,"disabled",_7ce);}else{this.focusNode.setAttribute("aria-disabled",_7ce?"true":"false");}if(this.valueNode){_7ca.set(this.valueNode,"disabled",_7ce);}if(_7ce){this._set("hovering",false);this._set("active",false);var _7cf="tabIndex" in this.attributeMap?this.attributeMap.tabIndex:("_setTabIndexAttr" in this)?this._setTabIndexAttr:"focusNode";_7c8.forEach(lang.isArray(_7cf)?_7cf:[_7cf],function(_7d0){var node=this[_7d0];if(has("webkit")||a11y.hasDefaultTabStop(node)){node.setAttribute("tabIndex","-1");}else{node.removeAttribute("tabIndex");}},this);}else{if(this.tabIndex!=""){this.set("tabIndex",this.tabIndex);}}},_onFocus:function(by){if(by=="mouse"&&this.isFocusable()){var _7d1=this.own(on(this.focusNode,"focus",function(){_7d2.remove();_7d1.remove();}))[0];var _7d3=has("pointer-events")?"pointerup":has("MSPointer")?"MSPointerUp":has("touch-events")?"touchend, mouseup":"mouseup";var _7d2=this.own(on(this.ownerDocumentBody,_7d3,lang.hitch(this,function(evt){_7d2.remove();_7d1.remove();if(this.focused){if(evt.type=="touchend"){this.defer("focus");}else{this.focus();}}})))[0];}if(this.scrollOnFocus){this.defer(function(){_7cd.scrollIntoView(this.domNode);});}this.inherited(arguments);},isFocusable:function(){return !this.disabled&&this.focusNode&&(_7cb.get(this.domNode,"display")!="none");},focus:function(){if(!this.disabled&&this.focusNode.focus){try{this.focusNode.focus();}catch(e){}}},compare:function(val1,val2){if(typeof val1=="number"&&typeof val2=="number"){return (isNaN(val1)&&isNaN(val2))?0:val1-val2;}else{if(val1>val2){return 1;}else{if(val1<val2){return -1;}else{return 0;}}}},onChange:function(){},_onChangeActive:false,_handleOnChange:function(_7d4,_7d5){if(this._lastValueReported==undefined&&(_7d5===null||!this._onChangeActive)){this._resetValue=this._lastValueReported=_7d4;}this._pendingOnChange=this._pendingOnChange||(typeof _7d4!=typeof this._lastValueReported)||(this.compare(_7d4,this._lastValueReported)!=0);if((this.intermediateChanges||_7d5||_7d5===undefined)&&this._pendingOnChange){this._lastValueReported=_7d4;this._pendingOnChange=false;if(this._onChangeActive){if(this._onChangeHandle){this._onChangeHandle.remove();}this._onChangeHandle=this.defer(function(){this._onChangeHandle=null;this.onChange(_7d4);});}}},create:function(){this.inherited(arguments);this._onChangeActive=true;},destroy:function(){if(this._onChangeHandle){this._onChangeHandle.remove();this.onChange(this._lastValueReported);}this.inherited(arguments);}});});},"dijit/_base/place":function(){define(["dojo/_base/array","dojo/_base/lang","dojo/window","../place","../main"],function(_7d6,lang,_7d7,_7d8,_7d9){var _7da={};_7da.getViewport=function(){return _7d7.getBox();};_7da.placeOnScreen=_7d8.at;_7da.placeOnScreenAroundElement=function(node,_7db,_7dc,_7dd){var _7de;if(lang.isArray(_7dc)){_7de=_7dc;}else{_7de=[];for(var key in _7dc){_7de.push({aroundCorner:key,corner:_7dc[key]});}}return _7d8.around(node,_7db,_7de,true,_7dd);};_7da.placeOnScreenAroundNode=_7da.placeOnScreenAroundElement;_7da.placeOnScreenAroundRectangle=_7da.placeOnScreenAroundElement;_7da.getPopupAroundAlignment=function(_7df,_7e0){var _7e1={};_7d6.forEach(_7df,function(pos){var ltr=_7e0;switch(pos){case "after":_7e1[_7e0?"BR":"BL"]=_7e0?"BL":"BR";break;case "before":_7e1[_7e0?"BL":"BR"]=_7e0?"BR":"BL";break;case "below-alt":ltr=!ltr;case "below":_7e1[ltr?"BL":"BR"]=ltr?"TL":"TR";_7e1[ltr?"BR":"BL"]=ltr?"TR":"TL";break;case "above-alt":ltr=!ltr;case "above":default:_7e1[ltr?"TL":"TR"]=ltr?"BL":"BR";_7e1[ltr?"TR":"TL"]=ltr?"BR":"BL";break;}});return _7e1;};lang.mixin(_7d9,_7da);return _7d9;});},"dojox/main":function(){define(["dojo/_base/kernel"],function(dojo){return dojo.dojox;});},"dojox/grid/_Scroller":function(){define(["dijit/registry","dojo/_base/declare","dojo/_base/lang","./util","dojo/_base/html"],function(_7e2,_7e3,lang,util,html){var _7e4=function(_7e5){var i=0,n,p=_7e5.parentNode;while((n=p.childNodes[i++])){if(n==_7e5){return i-1;}}return -1;};var _7e6=function(_7e7){if(!_7e7){return;}dojo.forEach(_7e2.toArray(),function(w){if(w.domNode&&html.isDescendant(w.domNode,_7e7,true)){w.destroy();}});};var _7e8=function(_7e9){var node=html.byId(_7e9);return (node&&node.tagName?node.tagName.toLowerCase():"");};var _7ea=function(_7eb,_7ec){var _7ed=[];var i=0,n;while((n=_7eb.childNodes[i])){i++;if(_7e8(n)==_7ec){_7ed.push(n);}}return _7ed;};var _7ee=function(_7ef){return _7ea(_7ef,"div");};return _7e3("dojox.grid._Scroller",null,{constructor:function(_7f0){this.setContentNodes(_7f0);this.pageHeights=[];this.pageNodes=[];this.stack=[];},rowCount:0,defaultRowHeight:32,keepRows:100,contentNode:null,scrollboxNode:null,defaultPageHeight:0,keepPages:10,pageCount:0,windowHeight:0,firstVisibleRow:0,lastVisibleRow:0,averageRowHeight:0,page:0,pageTop:0,init:function(_7f1,_7f2,_7f3){switch(arguments.length){case 3:this.rowsPerPage=_7f3;case 2:this.keepRows=_7f2;case 1:this.rowCount=_7f1;default:break;}this.defaultPageHeight=(this.grid.rowHeight>0?this.grid.rowHeight:this.defaultRowHeight)*this.rowsPerPage;this.pageCount=this._getPageCount(this.rowCount,this.rowsPerPage);this.setKeepInfo(this.keepRows);this.invalidate();if(this.scrollboxNode){this.scrollboxNode.scrollTop=0;this.scroll(0);this.scrollboxNode.onscroll=lang.hitch(this,"onscroll");}},_getPageCount:function(_7f4,_7f5){return _7f4?(Math.ceil(_7f4/_7f5)||1):0;},destroy:function(){this.invalidateNodes();delete this.contentNodes;delete this.contentNode;delete this.scrollboxNode;},setKeepInfo:function(_7f6){this.keepRows=_7f6;this.keepPages=!this.keepRows?this.keepPages:Math.max(Math.ceil(this.keepRows/this.rowsPerPage),2);},setContentNodes:function(_7f7){this.contentNodes=_7f7;this.colCount=(this.contentNodes?this.contentNodes.length:0);this.pageNodes=[];for(var i=0;i<this.colCount;i++){this.pageNodes[i]=[];}},getDefaultNodes:function(){return this.pageNodes[0]||[];},invalidate:function(){this._invalidating=true;this.invalidateNodes();this.pageHeights=[];this.height=(this.pageCount?(this.pageCount-1)*this.defaultPageHeight+this.calcLastPageHeight():0);this.resize();this._invalidating=false;},updateRowCount:function(_7f8){this.invalidateNodes();this.rowCount=_7f8;var _7f9=this.pageCount;if(_7f9===0){this.height=1;}this.pageCount=this._getPageCount(this.rowCount,this.rowsPerPage);if(this.pageCount<_7f9){for(var i=_7f9-1;i>=this.pageCount;i--){this.height-=this.getPageHeight(i);delete this.pageHeights[i];}}else{if(this.pageCount>_7f9){this.height+=this.defaultPageHeight*(this.pageCount-_7f9-1)+this.calcLastPageHeight();}}this.resize();},pageExists:function(_7fa){return Boolean(this.getDefaultPageNode(_7fa));},measurePage:function(_7fb){if(this.grid.rowHeight){return ((_7fb+1)*this.rowsPerPage>this.rowCount?this.rowCount-_7fb*this.rowsPerPage:this.rowsPerPage)*this.grid.rowHeight;}var n=this.getDefaultPageNode(_7fb);return (n&&n.innerHTML)?n.offsetHeight:undefined;},positionPage:function(_7fc,_7fd){for(var i=0;i<this.colCount;i++){this.pageNodes[i][_7fc].style.top=_7fd+"px";}},repositionPages:function(_7fe){var _7ff=this.getDefaultNodes();var last=0;for(var i=0;i<this.stack.length;i++){last=Math.max(this.stack[i],last);}var n=_7ff[_7fe];var y=(n?this.getPageNodePosition(n)+this.getPageHeight(_7fe):0);for(var p=_7fe+1;p<=last;p++){n=_7ff[p];if(n){if(this.getPageNodePosition(n)==y){return;}this.positionPage(p,y);}y+=this.getPageHeight(p);}},installPage:function(_800){for(var i=0;i<this.colCount;i++){this.contentNodes[i].appendChild(this.pageNodes[i][_800]);}},preparePage:function(_801,_802){var p=(_802?this.popPage():null);for(var i=0;i<this.colCount;i++){var _803=this.pageNodes[i];var _804=(p===null?this.createPageNode():this.invalidatePageNode(p,_803));_804.pageIndex=_801;_803[_801]=_804;}},renderPage:function(_805){var _806=[];var i,j;for(i=0;i<this.colCount;i++){_806[i]=this.pageNodes[i][_805];}for(i=0,j=_805*this.rowsPerPage;(i<this.rowsPerPage)&&(j<this.rowCount);i++,j++){this.renderRow(j,_806);}},removePage:function(_807){for(var i=0,j=_807*this.rowsPerPage;i<this.rowsPerPage;i++,j++){this.removeRow(j);}},destroyPage:function(_808){for(var i=0;i<this.colCount;i++){var n=this.invalidatePageNode(_808,this.pageNodes[i]);if(n){html.destroy(n);}}},pacify:function(_809){},pacifying:false,pacifyTicks:200,setPacifying:function(_80a){if(this.pacifying!=_80a){this.pacifying=_80a;this.pacify(this.pacifying);}},startPacify:function(){this.startPacifyTicks=new Date().getTime();},doPacify:function(){var _80b=(new Date().getTime()-this.startPacifyTicks)>this.pacifyTicks;this.setPacifying(true);this.startPacify();return _80b;},endPacify:function(){this.setPacifying(false);},resize:function(){if(this.scrollboxNode){this.windowHeight=this.scrollboxNode.clientHeight;}for(var i=0;i<this.colCount;i++){util.setStyleHeightPx(this.contentNodes[i],Math.max(1,this.height));}var _80c=(!this._invalidating);if(!_80c){var ah=this.grid.get("autoHeight");if(typeof ah=="number"&&ah<=Math.min(this.rowsPerPage,this.rowCount)){_80c=true;}}if(_80c){this.needPage(this.page,this.pageTop);}var _80d=(this.page<this.pageCount-1)?this.rowsPerPage:((this.rowCount%this.rowsPerPage)||this.rowsPerPage);var _80e=this.getPageHeight(this.page);this.averageRowHeight=(_80e>0&&_80d>0)?(_80e/_80d):0;},calcLastPageHeight:function(){if(!this.pageCount){return 0;}var _80f=this.pageCount-1;var _810=((this.rowCount%this.rowsPerPage)||(this.rowsPerPage))*this.defaultRowHeight;this.pageHeights[_80f]=_810;return _810;},updateContentHeight:function(inDh){this.height+=inDh;this.resize();},updatePageHeight:function(_811,_812,_813){if(this.pageExists(_811)){var oh=this.getPageHeight(_811);var h=(this.measurePage(_811));if(h===undefined){h=oh;}this.pageHeights[_811]=h;if(oh!=h){this.updateContentHeight(h-oh);var ah=this.grid.get("autoHeight");if((typeof ah=="number"&&ah>this.rowCount)||(ah===true&&!_812)){if(!_813){this.grid.sizeChange();}else{var ns=this.grid.viewsNode.style;ns.height=parseInt(ns.height)+h-oh+"px";this.repositionPages(_811);}}else{this.repositionPages(_811);}}return h;}return 0;},rowHeightChanged:function(_814,_815){this.updatePageHeight(Math.floor(_814/this.rowsPerPage),false,_815);},invalidateNodes:function(){while(this.stack.length){this.destroyPage(this.popPage());}},createPageNode:function(){var p=document.createElement("div");html.attr(p,"role","presentation");p.style.position="absolute";p.style[this.grid.isLeftToRight()?"left":"right"]="0";return p;},getPageHeight:function(_816){var ph=this.pageHeights[_816];return (ph!==undefined?ph:this.defaultPageHeight);},pushPage:function(_817){return this.stack.push(_817);},popPage:function(){return this.stack.shift();},findPage:function(_818){var i=0,h=0;for(var ph=0;i<this.pageCount;i++,h+=ph){ph=this.getPageHeight(i);if(h+ph>=_818){break;}}this.page=i;this.pageTop=h;},buildPage:function(_819,_81a,_81b){this.preparePage(_819,_81a);this.positionPage(_819,_81b);this.installPage(_819);this.renderPage(_819);this.pushPage(_819);},needPage:function(_81c,_81d){var h=this.getPageHeight(_81c),oh=h;if(!this.pageExists(_81c)){this.buildPage(_81c,(!this.grid._autoHeight&&this.keepPages&&(this.stack.length>=this.keepPages)),_81d);h=this.updatePageHeight(_81c,true);}else{this.positionPage(_81c,_81d);}return h;},onscroll:function(){this.scroll(this.scrollboxNode.scrollTop);},scroll:function(_81e){this.grid.scrollTop=_81e;if(this.colCount){this.startPacify();this.findPage(_81e);var h=this.height;var b=this.getScrollBottom(_81e);for(var p=this.page,y=this.pageTop;(p<this.pageCount)&&((b<0)||(y<b));p++){y+=this.needPage(p,y);}this.firstVisibleRow=this.getFirstVisibleRow(this.page,this.pageTop,_81e);this.lastVisibleRow=this.getLastVisibleRow(p-1,y,b);if(h!=this.height){this.repositionPages(p-1);}this.endPacify();}},getScrollBottom:function(_81f){return (this.windowHeight>=0?_81f+this.windowHeight:-1);},processNodeEvent:function(e,_820){var t=e.target;while(t&&(t!=_820)&&t.parentNode&&(t.parentNode.parentNode!=_820)){t=t.parentNode;}if(!t||!t.parentNode||(t.parentNode.parentNode!=_820)){return false;}var page=t.parentNode;e.topRowIndex=page.pageIndex*this.rowsPerPage;e.rowIndex=e.topRowIndex+_7e4(t);e.rowTarget=t;return true;},processEvent:function(e){return this.processNodeEvent(e,this.contentNode);},renderRow:function(_821,_822){},removeRow:function(_823){},getDefaultPageNode:function(_824){return this.getDefaultNodes()[_824];},positionPageNode:function(_825,_826){},getPageNodePosition:function(_827){return _827.offsetTop;},invalidatePageNode:function(_828,_829){var p=_829[_828];if(p){delete _829[_828];this.removePage(_828,p);_7e6(p);p.innerHTML="";}return p;},getPageRow:function(_82a){return _82a*this.rowsPerPage;},getLastPageRow:function(_82b){return Math.min(this.rowCount,this.getPageRow(_82b+1))-1;},getFirstVisibleRow:function(_82c,_82d,_82e){if(!this.pageExists(_82c)){return 0;}var row=this.getPageRow(_82c);var _82f=this.getDefaultNodes();var rows=_7ee(_82f[_82c]);for(var i=0,l=rows.length;i<l&&_82d<_82e;i++,row++){_82d+=rows[i].offsetHeight;}return (row?row-1:row);},getLastVisibleRow:function(_830,_831,_832){if(!this.pageExists(_830)){return 0;}var _833=this.getDefaultNodes();var row=this.getLastPageRow(_830);var rows=_7ee(_833[_830]);for(var i=rows.length-1;i>=0&&_831>_832;i--,row--){_831-=rows[i].offsetHeight;}return row+1;},findTopRow:function(_834){var _835=this.getDefaultNodes();var rows=_7ee(_835[this.page]);for(var i=0,l=rows.length,t=this.pageTop,h;i<l;i++){h=rows[i].offsetHeight;t+=h;if(t>=_834){this.offset=h-(t-_834);return i+this.page*this.rowsPerPage;}}return -1;},findScrollTop:function(_836){var _837=Math.floor(_836/this.rowsPerPage);var t=0;var i,l;for(i=0;i<_837;i++){t+=this.getPageHeight(i);}this.pageTop=t;this.page=_837;this.needPage(_837,this.pageTop);var _838=this.getDefaultNodes();var rows=_7ee(_838[_837]);var r=_836-this.rowsPerPage*_837;for(i=0,l=rows.length;i<l&&i<r;i++){t+=rows[i].offsetHeight;}return t;},dummy:0});});},"dgrid/OnDemandGrid":function(){define(["dojo/_base/declare","./Grid","./OnDemandList"],function(_839,Grid,_83a){return _839([Grid,_83a],{});});},"dojox/collections/Dictionary":function(){define(["dojo/_base/kernel","dojo/_base/array","./_base"],function(dojo,_83b,dxc){dxc.Dictionary=function(_83c){var _83d={};this.count=0;var _83e={};this.add=function(k,v){var b=(k in _83d);_83d[k]=new dxc.DictionaryEntry(k,v);if(!b){this.count++;}};this.clear=function(){_83d={};this.count=0;};this.clone=function(){return new dxc.Dictionary(this);};this.contains=this.containsKey=function(k){if(_83e[k]){return false;}return (_83d[k]!=null);};this.containsValue=function(v){var e=this.getIterator();while(e.get()){if(e.element.value==v){return true;}}return false;};this.entry=function(k){return _83d[k];};this.forEach=function(fn,_83f){var a=[];for(var p in _83d){if(!_83e[p]){a.push(_83d[p]);}}dojo.forEach(a,fn,_83f);};this.getKeyList=function(){return (this.getIterator()).map(function(_840){return _840.key;});};this.getValueList=function(){return (this.getIterator()).map(function(_841){return _841.value;});};this.item=function(k){if(k in _83d){return _83d[k].valueOf();}return undefined;};this.getIterator=function(){return new dxc.DictionaryIterator(_83d);};this.remove=function(k){if(k in _83d&&!_83e[k]){delete _83d[k];this.count--;return true;}return false;};if(_83c){var e=_83c.getIterator();while(e.get()){this.add(e.element.key,e.element.value);}}};return dxc.Dictionary;});},"dijit/_base/sniff":function(){define(["dojo/uacss"],function(){});},"control/support/PrivateData":function(){define(["dojo/_base/declare","ttl/BaseWidgetAMD","dojo/text!../support/templates/PrivateData.html","dijit/layout/BorderContainer","dojo/_base/lang","dojo/dom-attr","dojo/dom-class","dojo/dom-style","dojo/request","ttl/utilities2","dojo/data/ItemFileReadStore","dojox/data/JsonRestStore","ttl/store/JsonRest","dojo/store/Observable","dijit/form/Button","dijit/ProgressBar","dijit/form/CheckBox","dijit/form/FilteringSelect"],function(_842,_843,_844,_845,lang,_846,_847,_848,_849,_84a,_84b,_84c,_84d,_84e){return _842("control.support.PrivateData",[_843],{templateString:_844,constructor:function(){this.icustomerid_data2=new _84e(new _84d({target:"/customer/customers_combo",idProperty:"customername",onError:ttl.utilities2.globalerrorchecker,clearOnClose:true,urlPreventCache:true}));this.icustomerid_data=new _84b({url:"/customer/customers_combo",onError:_84a.globalerrorchecker,clearOnClose:true,urlPreventCache:true});this._AddedCallback=dojo.hitch(this,this._Added);},postCreate:function(){this.icustomerid.set("store",this.icustomerid_data);},_Added:function(_84f){this.progressNode.style.display="none";if(_84f.success=="OK"){alert("Private Data Added");this._Close();}else{if(_84f.success=="FA"){alert(_84f.message);}else{alert("Problem Adding Private Data");}}},_Add:function(){this.private_cache.value=new Date().valueOf();this.progressNode.style.display="block";dojo.io.iframe.send({url:"/customer/import_customer_outlets",handleAs:"json",load:this._AddedCallback,form:this.private_form});}});});},"dgrid/Grid":function(){define(["dojo/_base/kernel","dojo/_base/declare","dojo/on","dojo/has","put-selector/put","./List","./util/misc","dojo/_base/sniff"],function(_850,_851,_852,has,put,List,_853){var _854=has("ie")<8&&!has("quirks");function _855(_856,_857){if(_857&&_857.nodeType){_856.appendChild(_857);}};function _858(str){return _853.escapeCssIdentifier(str,"-");};var Grid=_851(List,{columns:null,cellNavigation:true,tabableHeader:true,showHeader:true,column:function(_859){if(typeof _859!="object"){return this.columns[_859];}else{return this.cell(_859).column;}},listType:"grid",cell:function(_85a,_85b){if(_85a.column&&_85a.element){return _85a;}if(_85a.target&&_85a.target.nodeType){_85a=_85a.target;}var _85c;if(_85a.nodeType){var _85d;do{if(this._rowIdToObject[_85a.id]){break;}var _85e=_85a.columnId;if(_85e){_85b=_85e;_85c=_85a;break;}_85a=_85a.parentNode;}while(_85a&&_85a!=this.domNode);}if(!_85c&&typeof _85b!="undefined"){var row=this.row(_85a),_85f=row&&row.element;if(_85f){var _860=_85f.getElementsByTagName("td");for(var i=0;i<_860.length;i++){if(_860[i].columnId==_85b){_85c=_860[i];break;}}}}if(_85a!=null){return {row:row||this.row(_85a),column:_85b&&this.column(_85b),element:_85c};}},createRowCells:function(tag,each,_861,_862){var row=put("table.dgrid-row-table[role=presentation]"),_863=this.cellNavigation,_864=(has("ie")<9||has("quirks"))?put(row,"tbody"):row,tr,si,sl,i,l,_865,_866,id,_867,_868,cell,_869,_86a,_86b;_861=_861||this.subRows;for(si=0,sl=_861.length;si<sl;si++){_865=_861[si];tr=put(_864,"tr");if(_865.className){put(tr,"."+_865.className);}for(i=0,l=_865.length;i<l;i++){_866=_865[i];id=_866.id;_867=_866.field?".field-"+_858(_866.field):"";_868=typeof _866.className==="function"?_866.className(_862):_866.className;if(_868){_867+="."+_868;}cell=put(tag+(".dgrid-cell.dgrid-cell-padding"+(id?".dgrid-column-"+_858(id):"")+_867.replace(/ +/g,"."))+"[role="+(tag==="th"?"columnheader":"gridcell")+"]");cell.columnId=id;if(_854){_869=put(cell,"!dgrid-cell-padding div.dgrid-cell-padding");cell.contents=_869;}else{_869=cell;}_86a=_866.colSpan;if(_86a){cell.colSpan=_86a;}_86b=_866.rowSpan;if(_86b){cell.rowSpan=_86b;}each(_869,_866);tr.appendChild(cell);}}return row;},left:function(cell,_86c){if(!cell.element){cell=this.cell(cell);}return this.cell(this._move(cell,-(_86c||1),"dgrid-cell"));},right:function(cell,_86d){if(!cell.element){cell=this.cell(cell);}return this.cell(this._move(cell,_86d||1,"dgrid-cell"));},renderRow:function(_86e,_86f){var self=this;var row=this.createRowCells("td",function(td,_870){var data=_86e;if(_870.get){data=_870.get(_86e);}else{if("field" in _870&&_870.field!="_item"){data=data[_870.field];}}if(_870.renderCell){_855(td,_870.renderCell(_86e,data,td,_86f));}else{_871.call(_870,_86e,data,td,_86f);}},_86f&&_86f.subRows,_86e);return put("div[role=row]>",row);},renderHeader:function(){var grid=this,_872=this.columns,_873=this.headerNode,i=_873.childNodes.length;_873.setAttribute("role","row");while(i--){put(_873.childNodes[i],"!");}var row=this.createRowCells("th",function(th,_874){var _875=_874.headerNode=th;if(_854){th=th.parentNode;}var _876=_874.field;if(_876){th.field=_876;}if(_874.renderHeaderCell){_855(_875,_874.renderHeaderCell(_875));}else{if("label" in _874||_874.field){_875.appendChild(document.createTextNode("label" in _874?_874.label:_874.field));}}if(_874.sortable!==false&&_876&&_876!="_item"){th.sortable=true;th.className+=" dgrid-sortable";}},this.subRows&&this.subRows.headerRows);this._rowIdToObject[row.id=this.id+"-header"]=this.columns;_873.appendChild(row);if(this._sortListener){this._sortListener.remove();}this._sortListener=_852(row,"click,keydown",function(_877){if(_877.type=="click"||_877.keyCode==32||(!has("opera")&&_877.keyCode==13)){var _878=_877.target,_879,sort,_87a,_87b;do{if(_878.sortable){_87a=[{attribute:(_879=_878.field||_878.columnId),descending:(sort=grid._sort[0])&&sort.attribute==_879&&!sort.descending}];_87b={bubbles:true,cancelable:true,grid:grid,parentType:_877.type,sort:_87a};if(_852.emit(_877.target,"dgrid-sort",_87b)){grid._sortNode=_878;grid.set("sort",_87a);}break;}}while((_878=_878.parentNode)&&_878!=_873);}});},resize:function(){var _87c=this.headerNode.firstChild,_87d=this.contentNode,_87e;this.inherited(arguments);if(!has("ie")||(has("ie")>7&&!has("quirks"))){_87d.style.width="";if(_87d&&_87c){if((_87e=_87c.offsetWidth)!=_87d.offsetWidth){_87d.style.width=_87e+"px";}}}},destroy:function(){this._destroyColumns();if(this._sortListener){this._sortListener.remove();}this.inherited(arguments);},_setSort:function(_87f,_880){this.inherited(arguments);this.updateSortArrow(this._sort);},_findSortArrowParent:function(_881){var _882=this.columns;for(var i in _882){var _883=_882[i];if(_883.field==_881){return _883.headerNode;}}},updateSortArrow:function(sort,_884){if(this._lastSortedArrow){put(this._lastSortedArrow,"<!dgrid-sort-up!dgrid-sort-down");put(this._lastSortedArrow,"!");delete this._lastSortedArrow;}if(_884){this._sort=sort;}if(!sort[0]){return;}var prop=sort[0].attribute,desc=sort[0].descending,_885=this._sortNode||this._findSortArrowParent(prop),_886;delete this._sortNode;if(_885){_885=_885.contents||_885;_886=this._lastSortedArrow=put("div.dgrid-sort-arrow.ui-icon[role=presentation]");_886.innerHTML="&nbsp;";_885.insertBefore(_886,_885.firstChild);put(_885,desc?".dgrid-sort-down":".dgrid-sort-up");this.resize();}},styleColumn:function(_887,css){return this.addCssRule("#"+_853.escapeCssIdentifier(this.domNode.id)+" .dgrid-column-"+_858(_887),css);},_configColumns:function(_888,_889){var _88a=[],_88b=_889 instanceof Array;function _88c(_88d,_88e){if(typeof _88d=="string"){_889[_88e]=_88d={label:_88d};}if(!_88b&&!_88d.field){_88d.field=_88e;}_88e=_88d.id=_88d.id||(isNaN(_88e)?_88e:(_888+_88e));if(this._configColumn){this._configColumn(_88d,_88e,_889,_888);_88e=_88d.id;}if(_88b){this.columns[_88e]=_88d;}_88d.grid=this;if(typeof _88d.init==="function"){_88d.init();}_88a.push(_88d);};_853.each(_889,_88c,this);return _88b?_889:_88a;},_destroyColumns:function(){var _88f=this.subRows,_890=_88f&&_88f.length,i,j,_891,len;this.cleanup();for(i=0;i<_890;i++){for(j=0,len=_88f[i].length;j<len;j++){_891=_88f[i][j];if(typeof _891.destroy==="function"){_891.destroy();}}}},configStructure:function(){var _892=this.subRows,_893=this._columns=this.columns;this.columns=!_893||_893 instanceof Array?{}:_893;if(_892){for(var i=0;i<_892.length;i++){_892[i]=this._configColumns(i+"-",_892[i]);}}else{this.subRows=[this._configColumns("",_893)];}},_getColumns:function(){return this._columns||this.columns;},_setColumns:function(_894){this._destroyColumns();this.subRows=null;this.columns=_894;this._updateColumns();},_setSubRows:function(_895){this._destroyColumns();this.subRows=_895;this._updateColumns();},setColumns:function(_896){_850.deprecated("setColumns(...)","use set(\"columns\", ...) instead","dgrid 0.4");this.set("columns",_896);},setSubRows:function(_897){_850.deprecated("setSubRows(...)","use set(\"subRows\", ...) instead","dgrid 0.4");this.set("subRows",_897);},_updateColumns:function(){this.configStructure();this.renderHeader();this.refresh();this._lastCollection&&this.renderArray(this._lastCollection);if(this._started){if(this._sort&&this._sort.length){this.updateSortArrow(this._sort);}else{this.resize();}}}});function _871(_898,data,td,_899){if(this.formatter){var _89a=this.formatter,_89b=this.grid.formatterScope;td.innerHTML=typeof _89a==="string"&&_89b?_89b[_89a](data,_898):this.formatter(data,_898);}else{if(data!=null){td.appendChild(document.createTextNode(data));}}};Grid.appendIfNode=_855;Grid.defaultRenderCell=_871;return Grid;});},"dojo/data/util/sorter":function(){define(["../../_base/lang"],function(lang){var _89c={};lang.setObject("dojo.data.util.sorter",_89c);_89c.basicComparator=function(a,b){var r=-1;if(a===null){a=undefined;}if(b===null){b=undefined;}if(a==b){r=0;}else{if(a>b||a==null){r=1;}}return r;};_89c.createSortFunction=function(_89d,_89e){var _89f=[];function _8a0(attr,dir,comp,s){return function(_8a1,_8a2){var a=s.getValue(_8a1,attr);var b=s.getValue(_8a2,attr);return dir*comp(a,b);};};var _8a3;var map=_89e.comparatorMap;var bc=_89c.basicComparator;for(var i=0;i<_89d.length;i++){_8a3=_89d[i];var attr=_8a3.attribute;if(attr){var dir=(_8a3.descending)?-1:1;var comp=bc;if(map){if(typeof attr!=="string"&&("toString" in attr)){attr=attr.toString();}comp=map[attr]||bc;}_89f.push(_8a0(attr,dir,comp,_89e));}}return function(rowA,rowB){var i=0;while(i<_89f.length){var ret=_89f[i++](rowA,rowB);if(ret!==0){return ret;}}return 0;};};return _89c;});},"dgrid/util/misc":function(){define(["dojo/has","put-selector/put"],function(has,put){has.add("dom-contains",function(_8a4,doc,_8a5){return !!_8a5.contains;});var _8a6=[],_8a7,_8a8,_8a9,_8aa=/([^A-Za-z0-9_\u00A0-\uFFFF-])/g;function _8ab(_8ac){var _8ad=_8a6[_8ac],i,l;if(_8ad===undefined){return;}_8a7[_8a8](_8ad);_8a6[_8ac]=undefined;for(i=_8ac+1,l=_8a6.length;i<l;i++){if(_8a6[i]>_8ad){_8a6[i]--;}}};var util={defaultDelay:15,throttle:function(cb,_8ae,_8af){var ran=false;_8af=_8af||util.defaultDelay;return function(){if(ran){return;}ran=true;cb.apply(_8ae,arguments);setTimeout(function(){ran=false;},_8af);};},throttleDelayed:function(cb,_8b0,_8b1){var ran=false;_8b1=_8b1||util.defaultDelay;return function(){if(ran){return;}ran=true;var a=arguments;setTimeout(function(){ran=false;cb.apply(_8b0,a);},_8b1);};},debounce:function(cb,_8b2,_8b3){var _8b4;_8b3=_8b3||util.defaultDelay;return function(){if(_8b4){clearTimeout(_8b4);_8b4=null;}var a=arguments;_8b4=setTimeout(function(){cb.apply(_8b2,a);},_8b3);};},each:function(_8b5,_8b6,_8b7){var i,len;if(!_8b5){return;}if(typeof _8b5.length==="number"){for(i=0,len=_8b5.length;i<len;i++){_8b6.call(_8b7,_8b5[i],i,_8b5);}}else{for(i in _8b5){_8b6.call(_8b7,_8b5[i],i,_8b5);}}},contains:function(_8b8,node){if(has("dom-contains")){return _8b8.contains(node);}else{return _8b8.compareDocumentPosition(node)&8;}},addCssRule:function(_8b9,css){if(!_8a7){_8a7=put(document.getElementsByTagName("head")[0],"style");_8a7=_8a7.sheet||_8a7.styleSheet;_8a8=_8a7.deleteRule?"deleteRule":"removeRule";_8a9=_8a7.cssRules?"cssRules":"rules";}var _8ba=_8a6.length;_8a6[_8ba]=(_8a7.cssRules||_8a7.rules).length;_8a7.addRule?_8a7.addRule(_8b9,css):_8a7.insertRule(_8b9+"{"+css+"}",_8a6[_8ba]);return {get:function(prop){return _8a7[_8a9][_8a6[_8ba]].style[prop];},set:function(prop,_8bb){if(typeof _8a6[_8ba]!=="undefined"){_8a7[_8a9][_8a6[_8ba]].style[prop]=_8bb;}},remove:function(){_8ab(_8ba);}};},escapeCssIdentifier:function(id,_8bc){return typeof id==="string"?id.replace(_8aa,_8bc||"\\$1"):id;}};return util;});},"control/support/spfcontrol":function(){define(["dojo/_base/declare","ttl/BaseWidgetAMD","dojo/text!../support/templates/spfcontrol.html","dijit/layout/BorderContainer","dijit/layout/ContentPane","dojo/_base/lang","dojo/dom-attr","dojo/dom-class","dojo/dom-style","dojo/request","ttl/utilities2","dojo/topic","dojox/data/JsonRestStore","dojo/data/ItemFileReadStore","ttl/grid/Grid","ttl/store/JsonRest","dojo/store/Observable","dijit/form/ValidationTextBox","dojox/form/BusyButton","dijit/form/Button","dijit/Dialog","dijit/form/Form","dijit/form/FilteringSelect","dijit/form/CheckBox","dijit/form/SimpleTextarea"],function(_8bd,_8be,_8bf,_8c0,_8c1,lang,_8c2,_8c3,_8c4,_8c5,_8c6,_8c7,_8c8,_8c9,Grid,_8ca,_8cb){return _8bd("control.support.spfcontrol",[_8be,_8c0],{templateString:_8bf,constructor:function(){this._AddHostCallBack=lang.hitch(this,this._AddHostCall);this._DeleteHostCallBack=lang.hitch(this,this._DeleteHostCall);this._UpdateHostCallBack=lang.hitch(this,this._UpdateHostCall);this._hosts=new _8cb(new _8ca({target:"/hostspf/hostspf_list",idProperty:"host",onError:_8c6.globalerrorchecker,clearOnClose:true,urlPreventCache:true,nocallback:true}));},postCreate:function(){this.inherited(arguments);var _8cc=[{label:"Host",className:"dgrid-column-status-large",field:"host"},{label:" ",name:"delete",className:"dgrid-column-type-boolean",field:" host",formatter:_8c6.delete_row_ctrl},{label:" ",name:"update",className:"dgrid-column-type-boolean",field:"host",formatter:_8c6.format_row_ctrl}];this.view=new Grid({columns:_8cc,selectionMode:"single",store:this._hosts,sort:[{attribute:"host",descending:false}],query:{}});this.hosts_grid_view.set("content",this.view);this.view.on(".dgrid-cell:click",lang.hitch(this,this._OnSelectRow));},_OnSelectRow:function(e){var cell=this.view.cell(e);this._row=cell.row.data;if(cell.column.id==1){if(confirm("Delete Host "+this._row.host+"?")){_8c5.post("/hostspf/hostspf_delete",_8c6.make_params({data:{host:this._row.host}})).then(this._DeleteHostCallBack);}}else{this.options.selectChild(this.host_update);this.host2.set("value",this._row.host);this.is_valid_source2.set("checked",this._row.is_valid_source);this.privatekey2.set("value","");this.selector2.set("value",this._row.selector);}},_Close:function(){this.hostdialog.hide();},_New:function(){this.host.set("value","");this.is_valid_source.set("checked",true);this.privatekey.set("value","");this.selector.set("value","");this.hostdialog.show();this.host.focus();},_Add:function(){if((this.privatekey.value==""&&this.selector.value!="")||(this.privatekey.value!=""&&this.selector.value=="")){alert("Not all required field filled in");this.addbtn.cancel();return false;}if(_8c6.form_validator(this.form)==false){this.addbtn.cancel();alert("Not all required field filled in");return false;}_8c5.post("/hostspf/hostspf_add",_8c6.make_params({data:this.form.get("value")})).then(this._AddHostCallBack);},_AddHostCall:function(_8cd){if(_8cd.success=="OK"){this._hosts.add(_8cd.data);this._Close();this.host.set("value","");this.options.selectChild(this.host_update);this.host2.set("value",_8cd.data.host);}else{if(_8cd.success=="DU"){alert("Already exists");}else{alert("Problem Adding");}}this.addbtn.cancel();},_UpdateHostCall:function(_8ce){if(_8ce.success=="OK"){alert("Host Updated");this.view.set("query",{});}else{if(_8ce.success=="DU"){alert("Already Exists");this.host2.focus();}else{alert("Problem Adding");}}this.updbtn.cancel();},_Update:function(){if((this.privatekey2.value==""&&this.selector2.value!="")||(this.privatekey2.value!=""&&this.selector2.value=="")){alert("Please update both Private Key and Selector");this.updbtn.cancel();return false;}if(_8c6.form_validator(this.formupd)==false){this.updbtn.cancel();return false;}_8c5.post("/hostspf/hostspf_update",_8c6.make_params({data:this.formupd.get("value")})).then(this._UpdateHostCallBack);},_DeleteHostCall:function(_8cf){if(_8cf.success=="OK"){this._hosts.remove(this._row.host);this._row=null;this.options.selectChild(this.blank);}else{alert("Problem Deleting");}}});});},"control/support/Distribution":function(){define(["dojo/_base/declare","ttl/BaseWidgetAMD","dojo/text!../support/templates/distribution.html","dijit/layout/BorderContainer","dojo/_base/lang","dojo/dom-attr","dojo/dom-class","dojo/dom-style","dojo/request","ttl/utilities2","dojox/data/JsonRestStore"],function(_8d0,_8d1,_8d2,_8d3,lang,_8d4,_8d5,_8d6,_8d7,_8d8,_8d9){return _8d0("control.support.Distribution",[_8d1,_8d3],{templateString:_8d2,constructor:function(){},postCreate:function(){this.inherited(arguments);},_refresh:function(){},_force_out:function(){}});});},"dijit/_base/popup":function(){define(["dojo/dom-class","dojo/_base/window","../popup","../BackgroundIframe"],function(_8da,win,_8db){var _8dc=_8db._createWrapper;_8db._createWrapper=function(_8dd){if(!_8dd.declaredClass){_8dd={_popupWrapper:(_8dd.parentNode&&_8da.contains(_8dd.parentNode,"dijitPopup"))?_8dd.parentNode:null,domNode:_8dd,destroy:function(){},ownerDocument:_8dd.ownerDocument,ownerDocumentBody:win.body(_8dd.ownerDocument)};}return _8dc.call(this,_8dd);};var _8de=_8db.open;_8db.open=function(args){if(args.orient&&typeof args.orient!="string"&&!("length" in args.orient)){var ary=[];for(var key in args.orient){ary.push({aroundCorner:key,corner:args.orient[key]});}args.orient=ary;}return _8de.call(this,args);};return _8db;});},"control/accounts/DataPartner":function(){define(["dojo/_base/declare","ttl/BaseWidgetAMD","dojo/text!../accounts/templates/DataPartner.html","dijit/layout/BorderContainer","dijit/layout/ContentPane","dojo/request","ttl/utilities2","dojo/_base/lang","dojo/topic","dojo/dom-class","dojo/data/ItemFileReadStore","ttl/grid/Grid","ttl/store/JsonRest","dojo/store/Observable","dijit/form/Select","dijit/form/ValidationTextBox","dojox/form/BusyButton","dijit/form/Button","dijit/form/CurrencyTextBox","dijit/form/NumberTextBox","dijit/Toolbar","dijit/Dialog","dijit/form/Form","dijit/form/FilteringSelect"],function(_8df,_8e0,_8e1,_8e2,_8e3,_8e4,_8e5,lang,_8e6,_8e7,_8e8,Grid,_8e9,_8ea){return _8df("control.accounts.DataPartner",[_8e0],{templateString:_8e1,constructor:function(){},postCreate:function(){}});});},"control/customer/monthly_payment":function(){define(["dojo/_base/declare","ttl/BaseWidgetAMD","dojo/text!../customer/templates/monthly_payment.html","dijit/layout/BorderContainer","dojo/request","ttl/utilities2","dojo/_base/lang","dojo/topic","dojo/dom-class","dojo/dom-attr","dojo/data/ItemFileReadStore","dijit/form/Form","dijit/form/CurrencyTextBox","dijit/form/FilteringSelect","dijit/form/Textarea","dijit/form/ValidationTextBox","dijit/form/DateTextBox","dijit/form/Button"],function(_8eb,_8ec,_8ed,_8ee,_8ef,_8f0,lang,_8f1,_8f2,_8f3,_8f4){return _8eb("control/customer/monthly_payment",[_8ec],{templateString:_8ed,gutters:false,constructor:function(){this._payment_taken_call_back=lang.hitch(this,this._payment_taken_call);this._months=new _8f4({url:"/common/lookups?searchtype=months"});this._years=new _8f4({url:"/common/lookups?searchtype=years"});},setCustomer:function(_8f5,_8f6,_8f7,_8f8,_8f9){this._customerid=_8f5;this._customername=_8f6;_8f3.set(this.customername,"innerHTML",this._customername);this.email.set("value",_8f7);this._dialog=_8f8;this.payment.set("value",_8f9);},_payment_taken_call:function(_8fa){if(_8fa.success=="OK"){alert("Payment Taken and invoice sent");this.clear();_8f1.publish(PRCOMMON.Events.Monthly_Payments,[_8fa.data]);this._dialog.hide();}else{alert("Problem taking payment");}},_take_payment:function(){if(_8f0.form_validator(this.form)==false){alert("Please Enter Details");return false;}var _8fb=this.form.get("value");var d=this.payment_date.get("value");if(d!=null){_8fb["payment_date"]=d.getFullYear()+"-"+(d.getMonth()+1)+"-"+d.getDate();}_8fb["icustomerid"]=this._customerid;_8ef.post("/payment/payment_monthly_take",_8f0.make_params({data:_8fb})).then(this._payment_taken_call_back);},clear:function(){this.payment.set("value","");this.email.set("value","");},postCreate:function(){this.monthid.set("store",this._months);this.yearid.set("store",this._years);var date=new Date();var year=date.getFullYear();var _8fc=date.getMonth()+1;this.monthid.set("value",_8fc);this.yearid.set("value",year);this.inherited(arguments);}});});},"control/customer/user_add":function(){define(["dojo/_base/declare","ttl/BaseWidgetAMD","dojo/text!../customer/templates/user_add.html","dijit/layout/ContentPane","dojo/request","ttl/utilities2","dojo/_base/lang","dojo/topic","dojo/dom-class","dijit/form/ValidationTextBox","dojox/form/BusyButton","dojox/validate/regexp"],function(_8fd,_8fe,_8ff,_900,_901,_902,lang,_903,_904){return _8fd("controls.customer.user_add",[_8fe,_900],{templateString:_8ff,gutters:false,constructor:function(){this._show_func=null;this._save_call_back=lang.hitch(this,this._save_call);},load:function(_905,_906){this._show_func=_906;this.clear();this.icustomerid.set("value",_905);},_add_user:function(){if(_902.form_validator(this.form)==false){alert("Not all required fields filled in");throw "N";}if(confirm("Add User")){_901.post("/customer/user/add",_902.make_params({data:this.form.get("value")})).then(this._save_call_back);}},_save_call:function(_907){if(_907.success=="OK"){this._show_func("add",_907.data);}else{if(_907.success=="DU"){alert(_907.message);}else{alert("Problem");}}this.save_user_btn.cancel();},clear:function(){this.icustomerid.set("value","");this.email.set("value","");this.displayname.set("value","");this.password.set("value","");this.save_user_btn.cancel();}});});},"control/customer/options/details":function(){define(["dojo/_base/declare","ttl/BaseWidgetAMD","dojo/text!../options/templates/details.html","dijit/layout/BorderContainer","dijit/layout/ContentPane","ttl/utilities2","dojo/request","dojo/_base/lang","dojo/dom-style","dojo/dom-attr","dojo/dom-class","dojo/data/ItemFileReadStore","dijit/ProgressBar","dijit/form/FilteringSelect","dijit/form/Button","dijit/form/Form","dijit/form/NumberTextBox","dojox/form/BusyButton","dijit/form/CheckBox","control/customer/options/SetExpireDate","control/customer/options/ReActivateDemo","control/customer/options/SetFreeSEOCount"],function(_908,_909,_90a,_90b,_90c,_90d,_90e,lang,_90f,_910,_911,_912){return _908("control.customer.options.details",[_909],{templateString:_90a,constructor:function(){this._customersourceid=new _912({url:"/common/lookups?searchtype=customersources"});this._clippingsourceid=new _912({url:"/common/lookups?searchtype=clippingsource&nofilter=1"});this._statusid=new _912({url:"/common/lookups?searchtype=customerstatus"});this._ChangeStatusResponseCall=lang.hitch(this,this._ChangeStatusResponse);this._SetUserCountResponseCall=lang.hitch(this,this._SetUserCountResponse);this._ChangeDemoStatusResponseCall=lang.hitch(this,this._ChangeDemoStatusResponse);this._ChangeEmailStatusResponseCall=lang.hitch(this,this._ChangeEmailStatusResponse);this._DeleteAccountResponseCall=lang.hitch(this,this._DeleteAccountResponse);this._SetUserNameCountResponseCall=lang.hitch(this,this._SetUserNameCountResponse);this._UpdatedInternalStatusCallBack=lang.hitch(this,this._UpdatedInternalStatusCall);this._SetCustomerCallBack=lang.hitch(this,this._SetCustomerCall);this._change_extended_subject_call_back=lang.hitch(this,this._change_extended_subject_call);this.user_model=new _912({url:"/customer/users_support"});},postCreate:function(){this.customertypeid.set("store",PRCOMMON.utils.stores.Customer_Types());this.statusid.set("store",this._statusid);this.support_userid.set("store",this.user_model);dojo.connect(this.setusercountform,"onSubmit",dojo.hitch(this,this._SetUserCount));dojo.connect(this.setupernamecount,"onSubmit",dojo.hitch(this,this._SetUserNameCount));dojo.connect(this.demoaccountform,"onSubmit",dojo.hitch(this,this._ChangeDemoStatus));dojo.connect(this.emailenabledform,"onSubmit",dojo.hitch(this,this._ChangeEmailStatus));dojo.connect(this.collaterallimitform,"onSubmit",dojo.hitch(this,this._Set_Collateral_Limit));dojo.connect(this.emaillimitform,"onSubmit",dojo.hitch(this,this._set_email_day_limit));this.inherited(arguments);},_SetExpireDate:function(_913){this.expirectrl.Load(this._customerid);},_CustomerType:function(){if(confirm("Change Customer Type")){_90e.post("/customer/update_customertypeid",_90d.make_params({data:{customerid:this._customer.customerid,customertypeid:this.customertypeid.get("value")}})).then(this._UpdatedCustomerTypeCallBack);}},_ChangeStatus:function(){_90e.post("/customer/changestatus",_90d.make_params({data:{customerid:this._customer.customerid,customerstatusid:this.statusid.get("value")}})).then(this._ChangeStatusResponseCall);},_ChangeStatusResponse:function(_914){if(_914.success=="OK"){alert("Status Changed was Successful");}else{alert("Status Changed Failed ");}this.statusidbutton.cancel();},_SetUserCountResponse:function(_915){if(_915.success=="OK"){alert("Concurrent User Count Re-Set");}else{alert("Problem Resetting Concurrent User Count");}},_SetUserCount:function(){if(_90d.form_validator(this.setusercountform)==false){alert("form invalid");return false;}var _916=this.setusercountform.get("value");_916["icustomerid"]=this._customerid;_90e.post("/customer/set_login_count",_90d.make_params({data:_916})).then(this._SetUserCountResponseCall);},_SetUserNameCountResponse:function(_917){if(_917.success=="OK"){alert("Nbr of User Names Re-Set");}else{alert("Problem Resetting Nbr of User Names");}},_SetUserNameCount:function(){if(_90d.form_validator(this.setupernamecount)==false){alert("form invalid");return false;}var _918=this.setupernamecount.get("value");_918["icustomerid"]=this._customerid;_90e.post("/customer/set_users_count",_90d.make_params({data:_918})).then(this._SetUserNameCountResponseCall);},_Set_Collateral_Limit:function(){if(_90d.form_validator(this.collateral_size)==false){alert("form invalid");return false;}var _919=this.collaterallimitform.get("value");_919["icustomerid"]=this._customerid;_90e.post("/customer/set_collateral_limit",_90d.make_params({data:_919})).then(this._Set_Collateral_Limit_Response);},_Set_Collateral_Limit_Response:function(_91a){if(_91a.success=="OK"){alert("Collateral Limit Updated");}else{alert("Collateral Limit Update Failed");}},_set_email_day_limit:function(){if(_90d.form_validator(this.emaillimitform)==false){alert("form invalid");return false;}var _91b=this.emaillimitform.get("value");_91b["icustomerid"]=this._customerid;_90e.post("/customer/set_max_emails_for_day",_90d.make_params({data:_91b})).then(this._set_email_day_limit_call);},_set_email_day_limit_call:function(_91c){if(_91c.success=="OK"){alert("Email Limit Updated");}else{alert("Email Limit Update Failed");}},_ChangeDemoStatusResponse:function(_91d){if(_91d.success=="OK"){alert("Demo Status Changed");}else{alert("Problem Changing Demo Status ");}},_ChangeDemoStatus:function(){var _91e=dojo.mixin({"icustomerid":this._customerid},this.demoaccountform.get("value"));_90e.post("/customer/set_demo_status",_90d.make_params({data:_91e})).then(this._ChangeDemoStatusResponseCall);},_ReActiveDemo:function(){this.reactiveatectrl.Load(this._customerid,this.reactiveatedialog);},_ChangeEmailStatusResponse:function(_91f){if(_91f.success=="OK"){alert("Email Status Changed");}else{alert("Problem Changing Email Status ");}},_ChangeEmailStatus:function(){var _920=lang.mixin({"icustomerid":this._customerid},this.emailenabledform.get("value"));_90e.post("/customer/set_email_status",_90d.make_params({data:_920})).then(this._ChangeEmailStatusResponseCall);},_UpdatedInternalStatusCall:function(_921){if(_921.success=="OK"){alert("Status Changed");}else{alert("Problem Changing Status");}},_ChangeInternalStatus:function(){if(confirm("Change Status")){_90e.post("/customer/update_internal_status",_90d.make_params({data:{icustomerid:this._customerid,isinternal:this.isinternal.get("value")}})).then(this._UpdatedInternalStatusCallBack);}},_DeleteAccountResponse:function(_922){if(_922.success=="OK"){this.customergrid.setQuery(_90d.get_prevent_cache({}));this.customergrid.selection.clear();_910.set(this.detailsview.domNode,"display","none");_911.add(this.userdetails,"prmaxhidden");alert("Account Deleted");}else{if(_922.success=="FD"){alert("Record has been marked as Deleted but has not been delete because it has Financial Information attached");}else{alert("Problem Deleteing Account");}}},_DeleteAccount:function(){if(confirm("Do You Wish to Delete Account ?")){if(confirm("Are you REALLY Sure?")){_90e.post("/customer/delete_customer",_90d.make_params({data:{"icustomerid":this._customerid}})).then(this._DeleteAccountResponseCall);}}},_bundle_settings:function(){},_UpdateModulesCall:function(_923){if(_923.success=="OK"){alert("Module Updated");this._CheckLayout(_923.data.cust,_923.data.mediaaccesstype);}else{alert("Module Update Failed");}},_UpdateModules:function(){_90e.post("/customer/update_customer_modules",_90d.make_params({data:{"icustomerid":this._customerid,crm:this.crm.get("value"),advancefeatures:this.advancefeatures.get("value"),updatum:this.updatum.get("value"),seo:this.seo.get("value"),maxmonitoringusers:this.maxmonitoringusers.get("value"),is_bundle:this.is_bundle.get("value"),has_news_rooms:this.has_news_rooms.get("value"),has_international_data:this.has_international_data.get("value"),has_clippings:this.has_clippings.get("value"),has_journorequests:this.has_journorequests.get("value")}})).then(this._UpdateModulesCall);},_CheckLayout:function(_924,_925,_926){if(this.updatum.get("checked")){_911.remove(this.max_users_monitoring,"prmaxhidden");}else{_911.add(this.max_users_monitoring,"prmaxhidden");}this.financialcontrol.Show_Hide_Fields(_924);this.datasets.load(null,_924.has_international_data);var _927=(_924.has_clippings)?"":"none";this.clippings.controlButton.domNode.style.display=_927;_927=(_924.has_international_data)?"":"none";this.datasets.controlButton.domNode.style.display=_927;this.extendedsettings.load(_924,_925);this.emailserver.load(_924,_926);},_SetCustomerCall:function(_928){if(_928.success=="OK"){alert("Support Customer updated");}else{alert("pRoblem Updating Support Customer");}},_SetCustomer:function(){var _929=this.support_userid.get("value");if(_929==null||_929===""){alert("No User Specified");return;}if(confirm("Set Support Customer")){_90e.post("/customer/support_customer_set",_90d.make_params({data:{iuserid:_929,icustomerid:this._customerid}})).then(this._SetCustomerCallBack);}},_SetSeoCount:function(){this.seofree.Load(this._customerid);},_change_extended_subject:function(){_90e.post("/customer/update_extended_subject",_90d.make_params({data:{"icustomerid":this._customerid,has_extended_email_subject:this.has_extended_email_subject.get("value")}})).then(this._change_extended_subject_call_back);},_change_extended_subject_call:function(_92a){if(_92a.success=="OK"){alert("Updated");}else{alert("Problem Updating");}},load:function(_92b,_92c){this._customer=_92b;this._customerid=_92b.customerid;this._customertypeid=_92b.customertypeid;this.statusid.set("value",_92b.customerstatusid);dojo.attr(this.displayname,"innerHTML",_92b.customername);dojo.attr(this.customersourcedescription,"innerHTML",_92c.customersourcedescription);this.customertypeid.set("value",_92b.customertypeid);dojo.attr(this.expire_display,"innerHTML",_92b.licence_expire_display);this.logins.set("value",_92b.logins);this.nbrofusersaccounts.set("value",_92b.maxnbrofusersaccounts);this.collateral_size.set("value",_92b.collateral_size);this.max_emails_for_day.set("value",_92b.max_emails_for_day);this.demoaccount_check.set("value",_92b.isdemo);this.isadvancedemo.set("value",_92b.isadvancedemo);this.ismonitoringdemo.set("value",_92b.ismonitoringdemo);if(_92b.isdemo){_911.remove(this.reactive_demo.domNode,"prmaxhidden");}else{_911.add(this.reactive_demo.domNode,"prmaxhidden");}this.useemail_check.set("value",_92b.useemail);this.emailistestmode_check.set("value",_92b.emailistestmode);this.isinternal.set("value",_92b.isinternal);this.crm.set("value",_92b.crm);this.seo.set("value",_92b.seo);this.updatum.set("value",_92b.updatum);this.maxmonitoringusers.set("value",_92b.maxmonitoringusers);this.is_bundle.set("value",_92b.is_bundle);this.has_news_rooms.set("value",_92b.has_news_rooms);this.has_journorequests.set("value",_92b.has_journorequests);this.has_international_data.set("value",_92b.has_international_data);this.has_clippings.set("value",_92b.has_clippings);this.advancefeatures.set("value",_92b.advancefeatures);this.has_extended_email_subject.set("value",_92b.has_extended_email_subject);},});});},"dijit/_base/focus":function(){define(["dojo/_base/array","dojo/dom","dojo/_base/lang","dojo/topic","dojo/_base/window","../focus","../selection","../main"],function(_92d,dom,lang,_92e,win,_92f,_930,_931){var _932={_curFocus:null,_prevFocus:null,isCollapsed:function(){return _931.getBookmark().isCollapsed;},getBookmark:function(){var sel=win.global==window?_930:new _930.SelectionManager(win.global);return sel.getBookmark();},moveToBookmark:function(_933){var sel=win.global==window?_930:new _930.SelectionManager(win.global);return sel.moveToBookmark(_933);},getFocus:function(menu,_934){var node=!_92f.curNode||(menu&&dom.isDescendant(_92f.curNode,menu.domNode))?_931._prevFocus:_92f.curNode;return {node:node,bookmark:node&&(node==_92f.curNode)&&win.withGlobal(_934||win.global,_931.getBookmark),openedForWindow:_934};},_activeStack:[],registerIframe:function(_935){return _92f.registerIframe(_935);},unregisterIframe:function(_936){_936&&_936.remove();},registerWin:function(_937,_938){return _92f.registerWin(_937,_938);},unregisterWin:function(_939){_939&&_939.remove();}};_92f.focus=function(_93a){if(!_93a){return;}var node="node" in _93a?_93a.node:_93a,_93b=_93a.bookmark,_93c=_93a.openedForWindow,_93d=_93b?_93b.isCollapsed:false;if(node){var _93e=(node.tagName.toLowerCase()=="iframe")?node.contentWindow:node;if(_93e&&_93e.focus){try{_93e.focus();}catch(e){}}_92f._onFocusNode(node);}if(_93b&&win.withGlobal(_93c||win.global,_931.isCollapsed)&&!_93d){if(_93c){_93c.focus();}try{win.withGlobal(_93c||win.global,_931.moveToBookmark,null,[_93b]);}catch(e2){}}};_92f.watch("curNode",function(name,_93f,_940){_931._curFocus=_940;_931._prevFocus=_93f;if(_940){_92e.publish("focusNode",_940);}});_92f.watch("activeStack",function(name,_941,_942){_931._activeStack=_942;});_92f.on("widget-blur",function(_943,by){_92e.publish("widgetBlur",_943,by);});_92f.on("widget-focus",function(_944,by){_92e.publish("widgetFocus",_944,by);});lang.mixin(_931,_932);return _931;});},"control/loaded":function(){define(["dojo/_base/declare","ttl/BaseWidgetAMD","dijit/layout/BorderContainer","dijit/layout/ContentPane","dojo/data/ItemFileReadStore","dijit/layout/StackContainer","dijit/Dialog","control/frame","ttl/Amduuid","prcommon2/prevents","prcommon2/store/DataStores","prcommon2/query/query","control/customer/partner_add","control/accounts/DataPartner","control/accounts/PriceCodes","control/accounts/SalesPartner","control/support/PrivateData","control/support/query","control/support/Distribution","control/support/spfcontrol","control/customer/dd_csv"],function(){});},"dijit/form/_FormMixin":function(){define(["dojo/_base/array","dojo/_base/declare","dojo/_base/kernel","dojo/_base/lang","dojo/on","dojo/window"],function(_945,_946,_947,lang,on,_948){return _946("dijit.form._FormMixin",null,{state:"",_getDescendantFormWidgets:function(_949){var res=[];_945.forEach(_949||this.getChildren(),function(_94a){if("value" in _94a){res.push(_94a);}else{res=res.concat(this._getDescendantFormWidgets(_94a.getChildren()));}},this);return res;},reset:function(){_945.forEach(this._getDescendantFormWidgets(),function(_94b){if(_94b.reset){_94b.reset();}});},validate:function(){var _94c=false;return _945.every(_945.map(this._getDescendantFormWidgets(),function(_94d){_94d._hasBeenBlurred=true;var _94e=_94d.disabled||!_94d.validate||_94d.validate();if(!_94e&&!_94c){_948.scrollIntoView(_94d.containerNode||_94d.domNode);_94d.focus();_94c=true;}return _94e;}),function(item){return item;});},setValues:function(val){_947.deprecated(this.declaredClass+"::setValues() is deprecated. Use set('value', val) instead.","","2.0");return this.set("value",val);},_setValueAttr:function(obj){var map={};_945.forEach(this._getDescendantFormWidgets(),function(_94f){if(!_94f.name){return;}var _950=map[_94f.name]||(map[_94f.name]=[]);_950.push(_94f);});for(var name in map){if(!map.hasOwnProperty(name)){continue;}var _951=map[name],_952=lang.getObject(name,false,obj);if(_952===undefined){continue;}_952=[].concat(_952);if(typeof _951[0].checked=="boolean"){_945.forEach(_951,function(w){w.set("value",_945.indexOf(_952,w._get("value"))!=-1);});}else{if(_951[0].multiple){_951[0].set("value",_952);}else{_945.forEach(_951,function(w,i){w.set("value",_952[i]);});}}}},getValues:function(){_947.deprecated(this.declaredClass+"::getValues() is deprecated. Use get('value') instead.","","2.0");return this.get("value");},_getValueAttr:function(){var obj={};_945.forEach(this._getDescendantFormWidgets(),function(_953){var name=_953.name;if(!name||_953.disabled){return;}var _954=_953.get("value");if(typeof _953.checked=="boolean"){if(/Radio/.test(_953.declaredClass)){if(_954!==false){lang.setObject(name,_954,obj);}else{_954=lang.getObject(name,false,obj);if(_954===undefined){lang.setObject(name,null,obj);}}}else{var ary=lang.getObject(name,false,obj);if(!ary){ary=[];lang.setObject(name,ary,obj);}if(_954!==false){ary.push(_954);}}}else{var prev=lang.getObject(name,false,obj);if(typeof prev!="undefined"){if(lang.isArray(prev)){prev.push(_954);}else{lang.setObject(name,[prev,_954],obj);}}else{lang.setObject(name,_954,obj);}}});return obj;},isValid:function(){return this.state=="";},onValidStateChange:function(){},_getState:function(){var _955=_945.map(this._descendants,function(w){return w.get("state")||"";});return _945.indexOf(_955,"Error")>=0?"Error":_945.indexOf(_955,"Incomplete")>=0?"Incomplete":"";},disconnectChildren:function(){},connectChildren:function(_956){this._descendants=this._getDescendantFormWidgets();_945.forEach(this._descendants,function(_957){if(!_957._started){_957.startup();}});if(!_956){this._onChildChange();}},_onChildChange:function(attr){if(!attr||attr=="state"||attr=="disabled"){this._set("state",this._getState());}if(!attr||attr=="value"||attr=="disabled"||attr=="checked"){if(this._onChangeDelayTimer){this._onChangeDelayTimer.remove();}this._onChangeDelayTimer=this.defer(function(){delete this._onChangeDelayTimer;this._set("value",this.get("value"));},10);}},startup:function(){this.inherited(arguments);this._descendants=this._getDescendantFormWidgets();this.value=this.get("value");this.state=this._getState();var self=this;this.own(on(this.containerNode,"attrmodified-state, attrmodified-disabled, attrmodified-value, attrmodified-checked",function(evt){if(evt.target==self.domNode){return;}self._onChildChange(evt.type.replace("attrmodified-",""));}));this.watch("state",function(attr,_958,_959){this.onValidStateChange(_959=="");});},destroy:function(){this.inherited(arguments);}});});},"dijit/BackgroundIframe":function(){define(["require","./main","dojo/_base/config","dojo/dom-construct","dojo/dom-style","dojo/_base/lang","dojo/on","dojo/sniff"],function(_95a,_95b,_95c,_95d,_95e,lang,on,has){has.add("config-bgIframe",(has("ie")&&!/IEMobile\/10\.0/.test(navigator.userAgent))||(has("trident")&&/Windows NT 6.[01]/.test(navigator.userAgent)));var _95f=new function(){var _960=[];this.pop=function(){var _961;if(_960.length){_961=_960.pop();_961.style.display="";}else{if(has("ie")<9){var burl=_95c["dojoBlankHtmlUrl"]||_95a.toUrl("dojo/resources/blank.html")||"javascript:\"\"";var html="<iframe src='"+burl+"' role='presentation'"+" style='position: absolute; left: 0px; top: 0px;"+"z-index: -1; filter:Alpha(Opacity=\"0\");'>";_961=document.createElement(html);}else{_961=_95d.create("iframe");_961.src="javascript:\"\"";_961.className="dijitBackgroundIframe";_961.setAttribute("role","presentation");_95e.set(_961,"opacity",0.1);}_961.tabIndex=-1;}return _961;};this.push=function(_962){_962.style.display="none";_960.push(_962);};}();_95b.BackgroundIframe=function(node){if(!node.id){throw new Error("no id");}if(has("config-bgIframe")){var _963=(this.iframe=_95f.pop());node.appendChild(_963);if(has("ie")<7||has("quirks")){this.resize(node);this._conn=on(node,"resize",lang.hitch(this,"resize",node));}else{_95e.set(_963,{width:"100%",height:"100%"});}}};lang.extend(_95b.BackgroundIframe,{resize:function(node){if(this.iframe){_95e.set(this.iframe,{width:node.offsetWidth+"px",height:node.offsetHeight+"px"});}},destroy:function(){if(this._conn){this._conn.remove();this._conn=null;}if(this.iframe){this.iframe.parentNode.removeChild(this.iframe);_95f.push(this.iframe);delete this.iframe;}}});return _95b.BackgroundIframe;});},"dijit/layout/TabController":function(){define(["dojo/_base/declare","dojo/dom","dojo/dom-attr","dojo/dom-class","dojo/has","dojo/i18n","dojo/_base/lang","./StackController","../registry","../Menu","../MenuItem","dojo/text!./templates/_TabButton.html","dojo/i18n!../nls/common"],function(_964,dom,_965,_966,has,i18n,lang,_967,_968,Menu,_969,_96a){var _96b=_964("dijit.layout._TabButton"+(has("dojo-bidi")?"_NoBidi":""),_967.StackButton,{baseClass:"dijitTab",cssStateNodes:{closeNode:"dijitTabCloseButton"},templateString:_96a,_setNameAttr:"focusNode",scrollOnFocus:false,buildRendering:function(){this.inherited(arguments);dom.setSelectable(this.containerNode,false);},startup:function(){this.inherited(arguments);var n=this.domNode;this.defer(function(){n.className=n.className;},1);},_setCloseButtonAttr:function(disp){this._set("closeButton",disp);_966.toggle(this.domNode,"dijitClosable",disp);this.closeNode.style.display=disp?"":"none";if(disp){var _96c=i18n.getLocalization("dijit","common");if(this.closeNode){_965.set(this.closeNode,"title",_96c.itemClose);}}},_setDisabledAttr:function(_96d){this.inherited(arguments);if(this.closeNode){if(_96d){_965.remove(this.closeNode,"title");}else{var _96e=i18n.getLocalization("dijit","common");_965.set(this.closeNode,"title",_96e.itemClose);}}},_setLabelAttr:function(_96f){this.inherited(arguments);if(!this.showLabel&&!this.params.title){this.iconNode.alt=lang.trim(this.containerNode.innerText||this.containerNode.textContent||"");}}});if(has("dojo-bidi")){_96b=_964("dijit.layout._TabButton",_96b,{_setLabelAttr:function(_970){this.inherited(arguments);this.applyTextDir(this.iconNode,this.iconNode.alt);}});}var _971=_964("dijit.layout.TabController",_967,{baseClass:"dijitTabController",templateString:"<div role='tablist' data-dojo-attach-event='onkeydown:onkeydown'></div>",tabPosition:"top",buttonWidget:_96b,buttonWidgetCloseClass:"dijitTabCloseButton",postCreate:function(){this.inherited(arguments);var _972=new Menu({id:this.id+"_Menu",ownerDocument:this.ownerDocument,dir:this.dir,lang:this.lang,textDir:this.textDir,targetNodeIds:[this.domNode],selector:function(node){return _966.contains(node,"dijitClosable")&&!_966.contains(node,"dijitTabDisabled");}});this.own(_972);var _973=i18n.getLocalization("dijit","common"),_974=this;_972.addChild(new _969({label:_973.itemClose,ownerDocument:this.ownerDocument,dir:this.dir,lang:this.lang,textDir:this.textDir,onClick:function(evt){var _975=_968.byNode(this.getParent().currentTarget);_974.onCloseButtonClick(_975.page);}}));}});_971.TabButton=_96b;return _971;});},"dijit/_MenuBase":function(){define(["dojo/_base/array","dojo/_base/declare","dojo/dom","dojo/dom-attr","dojo/dom-class","dojo/_base/lang","dojo/mouse","dojo/on","dojo/window","./a11yclick","./registry","./_Widget","./_CssStateMixin","./_KeyNavContainer","./_TemplatedMixin"],function(_976,_977,dom,_978,_979,lang,_97a,on,_97b,_97c,_97d,_97e,_97f,_980,_981){return _977("dijit._MenuBase",[_97e,_981,_980,_97f],{selected:null,_setSelectedAttr:function(item){if(this.selected!=item){if(this.selected){this.selected._setSelected(false);this._onChildDeselect(this.selected);}if(item){item._setSelected(true);}this._set("selected",item);}},activated:false,_setActivatedAttr:function(val){_979.toggle(this.domNode,"dijitMenuActive",val);_979.toggle(this.domNode,"dijitMenuPassive",!val);this._set("activated",val);},parentMenu:null,popupDelay:500,passivePopupDelay:Infinity,autoFocus:false,childSelector:function(node){var _982=_97d.byNode(node);return node.parentNode==this.containerNode&&_982&&_982.focus;},postCreate:function(){var self=this,_983=typeof this.childSelector=="string"?this.childSelector:lang.hitch(this,"childSelector");this.own(on(this.containerNode,on.selector(_983,_97a.enter),function(){self.onItemHover(_97d.byNode(this));}),on(this.containerNode,on.selector(_983,_97a.leave),function(){self.onItemUnhover(_97d.byNode(this));}),on(this.containerNode,on.selector(_983,_97c),function(evt){self.onItemClick(_97d.byNode(this),evt);evt.stopPropagation();}),on(this.containerNode,on.selector(_983,"focusin"),function(){self._onItemFocus(_97d.byNode(this));}));this.inherited(arguments);},onKeyboardSearch:function(item,evt,_984,_985){this.inherited(arguments);if(!!item&&(_985==-1||(!!item.popup&&_985==1))){this.onItemClick(item,evt);}},_keyboardSearchCompare:function(item,_986){if(!!item.shortcutKey){return _986==item.shortcutKey.toLowerCase()?-1:0;}return this.inherited(arguments)?1:0;},onExecute:function(){},onCancel:function(){},_moveToPopup:function(evt){if(this.focusedChild&&this.focusedChild.popup&&!this.focusedChild.disabled){this.onItemClick(this.focusedChild,evt);}else{var _987=this._getTopMenu();if(_987&&_987._isMenuBar){_987.focusNext();}}},_onPopupHover:function(){this.set("selected",this.currentPopupItem);this._stopPendingCloseTimer();},onItemHover:function(item){if(this.activated){this.set("selected",item);if(item.popup&&!item.disabled&&!this.hover_timer){this.hover_timer=this.defer(function(){this._openItemPopup(item);},this.popupDelay);}}else{if(this.passivePopupDelay<Infinity){if(this.passive_hover_timer){this.passive_hover_timer.remove();}this.passive_hover_timer=this.defer(function(){this.onItemClick(item,{type:"click"});},this.passivePopupDelay);}}this._hoveredChild=item;item._set("hovering",true);},_onChildDeselect:function(item){this._stopPopupTimer();if(this.currentPopupItem==item){this._stopPendingCloseTimer();this._pendingClose_timer=this.defer(function(){this._pendingClose_timer=null;this.currentPopupItem=null;item._closePopup();},this.popupDelay);}},onItemUnhover:function(item){if(this._hoveredChild==item){this._hoveredChild=null;}if(this.passive_hover_timer){this.passive_hover_timer.remove();this.passive_hover_timer=null;}item._set("hovering",false);},_stopPopupTimer:function(){if(this.hover_timer){this.hover_timer=this.hover_timer.remove();}},_stopPendingCloseTimer:function(){if(this._pendingClose_timer){this._pendingClose_timer=this._pendingClose_timer.remove();}},_getTopMenu:function(){for(var top=this;top.parentMenu;top=top.parentMenu){}return top;},onItemClick:function(item,evt){if(this.passive_hover_timer){this.passive_hover_timer.remove();}this.focusChild(item);if(item.disabled){return false;}if(item.popup){this.set("selected",item);this.set("activated",true);var _988=/^key/.test(evt._origType||evt.type)||(evt.clientX==0&&evt.clientY==0);this._openItemPopup(item,_988);}else{this.onExecute();item._onClick?item._onClick(evt):item.onClick(evt);}},_openItemPopup:function(_989,_98a){if(_989==this.currentPopupItem){return;}if(this.currentPopupItem){this._stopPendingCloseTimer();this.currentPopupItem._closePopup();}this._stopPopupTimer();var _98b=_989.popup;_98b.parentMenu=this;this.own(this._mouseoverHandle=on.once(_98b.domNode,"mouseover",lang.hitch(this,"_onPopupHover")));var self=this;_989._openPopup({parent:this,orient:this._orient||["after","before"],onCancel:function(){if(_98a){self.focusChild(_989);}self._cleanUp();},onExecute:lang.hitch(this,"_cleanUp",true),onClose:function(){if(self._mouseoverHandle){self._mouseoverHandle.remove();delete self._mouseoverHandle;}}},_98a);this.currentPopupItem=_989;},onOpen:function(){this.isShowingNow=true;this.set("activated",true);},onClose:function(){this.set("activated",false);this.set("selected",null);this.isShowingNow=false;this.parentMenu=null;},_closeChild:function(){this._stopPopupTimer();if(this.currentPopupItem){if(this.focused){_978.set(this.selected.focusNode,"tabIndex",this.tabIndex);this.selected.focusNode.focus();}this.currentPopupItem._closePopup();this.currentPopupItem=null;}},_onItemFocus:function(item){if(this._hoveredChild&&this._hoveredChild!=item){this.onItemUnhover(this._hoveredChild);}this.set("selected",item);},_onBlur:function(){this._cleanUp(true);this.inherited(arguments);},_cleanUp:function(_98c){this._closeChild();if(typeof this.isShowingNow=="undefined"){this.set("activated",false);}if(_98c){this.set("selected",null);}}});});},"ttl/grid/Grid":function(){define(["dojo/_base/declare","dojo/dom-style","dgrid/List","dgrid/OnDemandGrid","dgrid/Selection","dgrid/editor","dgrid/Keyboard","dgrid/tree","dgrid/extensions/DijitRegistry","dgrid/TouchScroll"],function(_98d,_98e,_98f,_990,_991,_992,tree,_993,_994){return _98d("ttl.grid.Grid",[_98f,_990,_991,_992,tree,_993,_994],{pagingDelay:100,postCreate:function(){this.inherited(arguments);_98e.set(this.domNode,"height","100%");}});});},"dijit/layout/ScrollingTabController":function(){define(["dojo/_base/array","dojo/_base/declare","dojo/dom-class","dojo/dom-geometry","dojo/dom-style","dojo/_base/fx","dojo/_base/lang","dojo/on","dojo/query","dojo/sniff","../registry","dojo/text!./templates/ScrollingTabController.html","dojo/text!./templates/_ScrollingTabControllerButton.html","./TabController","./utils","../_WidgetsInTemplateMixin","../Menu","../MenuItem","../form/Button","../_HasDropDown","dojo/NodeList-dom","../a11yclick"],function(_995,_996,_997,_998,_999,fx,lang,on,_99a,has,_99b,_99c,_99d,_99e,_99f,_9a0,Menu,_9a1,_9a2,_9a3){var _9a4=_996("dijit.layout.ScrollingTabController",[_99e,_9a0],{baseClass:"dijitTabController dijitScrollingTabController",templateString:_99c,useMenu:true,useSlider:true,tabStripClass:"",_minScroll:5,_setClassAttr:{node:"containerNode",type:"class"},buildRendering:function(){this.inherited(arguments);var n=this.domNode;this.scrollNode=this.tablistWrapper;this._initButtons();if(!this.tabStripClass){this.tabStripClass="dijitTabContainer"+this.tabPosition.charAt(0).toUpperCase()+this.tabPosition.substr(1).replace(/-.*/,"")+"None";_997.add(n,"tabStrip-disabled");}_997.add(this.tablistWrapper,this.tabStripClass);},onStartup:function(){this.inherited(arguments);_999.set(this.domNode,"visibility","");this._postStartup=true;this.own(on(this.containerNode,"attrmodified-label, attrmodified-iconclass",lang.hitch(this,function(evt){if(this._dim){this.resize(this._dim);}})));},onAddChild:function(page,_9a5){this.inherited(arguments);_999.set(this.containerNode,"width",(_999.get(this.containerNode,"width")+200)+"px");},onRemoveChild:function(page,_9a6){var _9a7=this.pane2button(page.id);if(this._selectedTab===_9a7.domNode){this._selectedTab=null;}this.inherited(arguments);},_initButtons:function(){this._btnWidth=0;this._buttons=_99a("> .tabStripButton",this.domNode).filter(function(btn){if((this.useMenu&&btn==this._menuBtn.domNode)||(this.useSlider&&(btn==this._rightBtn.domNode||btn==this._leftBtn.domNode))){this._btnWidth+=_998.getMarginSize(btn).w;return true;}else{_999.set(btn,"display","none");return false;}},this);},_getTabsWidth:function(){var _9a8=this.getChildren();if(_9a8.length){var _9a9=_9a8[this.isLeftToRight()?0:_9a8.length-1].domNode,_9aa=_9a8[this.isLeftToRight()?_9a8.length-1:0].domNode;return _9aa.offsetLeft+_9aa.offsetWidth-_9a9.offsetLeft;}else{return 0;}},_enableBtn:function(_9ab){var _9ac=this._getTabsWidth();_9ab=_9ab||_999.get(this.scrollNode,"width");return _9ac>0&&_9ab<_9ac;},resize:function(dim){this._dim=dim;this.scrollNode.style.height="auto";var cb=this._contentBox=_99f.marginBox2contentBox(this.domNode,{h:0,w:dim.w});cb.h=this.scrollNode.offsetHeight;_998.setContentSize(this.domNode,cb);var _9ad=this._enableBtn(this._contentBox.w);this._buttons.style("display",_9ad?"":"none");this._leftBtn.region="left";this._rightBtn.region="right";this._menuBtn.region=this.isLeftToRight()?"right":"left";_99f.layoutChildren(this.domNode,this._contentBox,[this._menuBtn,this._leftBtn,this._rightBtn,{domNode:this.scrollNode,region:"center"}]);if(this._selectedTab){if(this._anim&&this._anim.status()=="playing"){this._anim.stop();}this.scrollNode.scrollLeft=this._convertToScrollLeft(this._getScrollForSelectedTab());}this._setButtonClass(this._getScroll());this._postResize=true;return {h:this._contentBox.h,w:dim.w};},_getScroll:function(){return (this.isLeftToRight()||has("ie")<8||(has("trident")&&has("quirks"))||has("webkit"))?this.scrollNode.scrollLeft:_999.get(this.containerNode,"width")-_999.get(this.scrollNode,"width")+(has("trident")||has("edge")?-1:1)*this.scrollNode.scrollLeft;},_convertToScrollLeft:function(val){if(this.isLeftToRight()||has("ie")<8||(has("trident")&&has("quirks"))||has("webkit")){return val;}else{var _9ae=_999.get(this.containerNode,"width")-_999.get(this.scrollNode,"width");return (has("trident")||has("edge")?-1:1)*(val-_9ae);}},onSelectChild:function(page,_9af){var tab=this.pane2button(page.id);if(!tab){return;}var node=tab.domNode;if(node!=this._selectedTab){this._selectedTab=node;if(this._postResize){var sl=this._getScroll();if(sl>node.offsetLeft||sl+_999.get(this.scrollNode,"width")<node.offsetLeft+_999.get(node,"width")){var anim=this.createSmoothScroll();if(_9af){anim.onEnd=function(){tab.focus();};}anim.play();}else{if(_9af){tab.focus();}}}}this.inherited(arguments);},_getScrollBounds:function(){var _9b0=this.getChildren(),_9b1=_999.get(this.scrollNode,"width"),_9b2=_999.get(this.containerNode,"width"),_9b3=_9b2-_9b1,_9b4=this._getTabsWidth();if(_9b0.length&&_9b4>_9b1){return {min:this.isLeftToRight()?0:_9b0[_9b0.length-1].domNode.offsetLeft,max:this.isLeftToRight()?(_9b0[_9b0.length-1].domNode.offsetLeft+_9b0[_9b0.length-1].domNode.offsetWidth)-_9b1:_9b3};}else{var _9b5=this.isLeftToRight()?0:_9b3;return {min:_9b5,max:_9b5};}},_getScrollForSelectedTab:function(){var w=this.scrollNode,n=this._selectedTab,_9b6=_999.get(this.scrollNode,"width"),_9b7=this._getScrollBounds();var pos=(n.offsetLeft+_999.get(n,"width")/2)-_9b6/2;pos=Math.min(Math.max(pos,_9b7.min),_9b7.max);return pos;},createSmoothScroll:function(x){if(arguments.length>0){var _9b8=this._getScrollBounds();x=Math.min(Math.max(x,_9b8.min),_9b8.max);}else{x=this._getScrollForSelectedTab();}if(this._anim&&this._anim.status()=="playing"){this._anim.stop();}var self=this,w=this.scrollNode,anim=new fx.Animation({beforeBegin:function(){if(this.curve){delete this.curve;}var oldS=w.scrollLeft,newS=self._convertToScrollLeft(x);anim.curve=new fx._Line(oldS,newS);},onAnimate:function(val){w.scrollLeft=val;}});this._anim=anim;this._setButtonClass(x);return anim;},_getBtnNode:function(e){var n=e.target;while(n&&!_997.contains(n,"tabStripButton")){n=n.parentNode;}return n;},doSlideRight:function(e){this.doSlide(1,this._getBtnNode(e));},doSlideLeft:function(e){this.doSlide(-1,this._getBtnNode(e));},doSlide:function(_9b9,node){if(node&&_997.contains(node,"dijitTabDisabled")){return;}var _9ba=_999.get(this.scrollNode,"width");var d=(_9ba*0.75)*_9b9;var to=this._getScroll()+d;this._setButtonClass(to);this.createSmoothScroll(to).play();},_setButtonClass:function(_9bb){var _9bc=this._getScrollBounds();this._leftBtn.set("disabled",_9bb<=_9bc.min);this._rightBtn.set("disabled",_9bb>=_9bc.max);}});var _9bd=_996("dijit.layout._ScrollingTabControllerButtonMixin",null,{baseClass:"dijitTab tabStripButton",templateString:_99d,tabIndex:"",isFocusable:function(){return false;}});_996("dijit.layout._ScrollingTabControllerButton",[_9a2,_9bd]);_996("dijit.layout._ScrollingTabControllerMenuButton",[_9a2,_9a3,_9bd],{containerId:"",tabIndex:"-1",isLoaded:function(){return false;},loadDropDown:function(_9be){this.dropDown=new Menu({id:this.containerId+"_menu",ownerDocument:this.ownerDocument,dir:this.dir,lang:this.lang,textDir:this.textDir});var _9bf=_99b.byId(this.containerId);_995.forEach(_9bf.getChildren(),function(page){var _9c0=new _9a1({id:page.id+"_stcMi",label:page.title,iconClass:page.iconClass,disabled:page.disabled,ownerDocument:this.ownerDocument,dir:page.dir,lang:page.lang,textDir:page.textDir||_9bf.textDir,onClick:function(){_9bf.selectChild(page);}});this.dropDown.addChild(_9c0);},this);_9be();},closeDropDown:function(_9c1){this.inherited(arguments);if(this.dropDown){this._popupStateNode.removeAttribute("aria-owns");this.dropDown.destroyRecursive();delete this.dropDown;}}});return _9a4;});},"dijit/form/_ListMouseMixin":function(){define(["dojo/_base/declare","dojo/on","dojo/touch","./_ListBase"],function(_9c2,on,_9c3,_9c4){return _9c2("dijit.form._ListMouseMixin",_9c4,{postCreate:function(){this.inherited(arguments);this.domNode.dojoClick=true;this._listConnect("click","_onClick");this._listConnect("mousedown","_onMouseDown");this._listConnect("mouseup","_onMouseUp");this._listConnect("mouseover","_onMouseOver");this._listConnect("mouseout","_onMouseOut");},_onClick:function(evt,_9c5){this._setSelectedAttr(_9c5,false);if(this._deferredClick){this._deferredClick.remove();}this._deferredClick=this.defer(function(){this._deferredClick=null;this.onClick(_9c5);});},_onMouseDown:function(evt,_9c6){if(this._hoveredNode){this.onUnhover(this._hoveredNode);this._hoveredNode=null;}this._isDragging=true;this._setSelectedAttr(_9c6,false);},_onMouseUp:function(evt,_9c7){this._isDragging=false;var _9c8=this.selected;var _9c9=this._hoveredNode;if(_9c8&&_9c7==_9c8){this.defer(function(){this._onClick(evt,_9c8);});}else{if(_9c9){this.defer(function(){this._onClick(evt,_9c9);});}}},_onMouseOut:function(evt,_9ca){if(this._hoveredNode){this.onUnhover(this._hoveredNode);this._hoveredNode=null;}if(this._isDragging){this._cancelDrag=(new Date()).getTime()+1000;}},_onMouseOver:function(evt,_9cb){if(this._cancelDrag){var time=(new Date()).getTime();if(time>this._cancelDrag){this._isDragging=false;}this._cancelDrag=null;}this._hoveredNode=_9cb;this.onHover(_9cb);if(this._isDragging){this._setSelectedAttr(_9cb,false);}}});});},"dijit/tree/_dndSelector":function(){define(["dojo/_base/array","dojo/_base/declare","dojo/_base/kernel","dojo/_base/lang","dojo/dnd/common","dojo/dom","dojo/mouse","dojo/on","dojo/touch","../a11yclick","./_dndContainer"],function(_9cc,_9cd,_9ce,lang,_9cf,dom,_9d0,on,_9d1,_9d2,_9d3){return _9cd("dijit.tree._dndSelector",_9d3,{constructor:function(){this.selection={};this.anchor=null;this.events.push(on(this.tree.domNode,_9d1.press,lang.hitch(this,"onMouseDown")),on(this.tree.domNode,_9d1.release,lang.hitch(this,"onMouseUp")),on(this.tree.domNode,_9d1.move,lang.hitch(this,"onMouseMove")),on(this.tree.domNode,_9d2.press,lang.hitch(this,"onClickPress")),on(this.tree.domNode,_9d2.release,lang.hitch(this,"onClickRelease")));},singular:false,getSelectedTreeNodes:function(){var _9d4=[],sel=this.selection;for(var i in sel){_9d4.push(sel[i]);}return _9d4;},selectNone:function(){this.setSelection([]);return this;},destroy:function(){this.inherited(arguments);this.selection=this.anchor=null;},addTreeNode:function(node,_9d5){this.setSelection(this.getSelectedTreeNodes().concat([node]));if(_9d5){this.anchor=node;}return node;},removeTreeNode:function(node){var _9d6=_9cc.filter(this.getSelectedTreeNodes(),function(_9d7){return !dom.isDescendant(_9d7.domNode,node.domNode);});this.setSelection(_9d6);return node;},isTreeNodeSelected:function(node){return node.id&&!!this.selection[node.id];},setSelection:function(_9d8){var _9d9=this.getSelectedTreeNodes();_9cc.forEach(this._setDifference(_9d9,_9d8),lang.hitch(this,function(node){node.setSelected(false);if(this.anchor==node){delete this.anchor;}delete this.selection[node.id];}));_9cc.forEach(this._setDifference(_9d8,_9d9),lang.hitch(this,function(node){node.setSelected(true);this.selection[node.id]=node;}));this._updateSelectionProperties();},_setDifference:function(xs,ys){_9cc.forEach(ys,function(y){y.__exclude__=true;});var ret=_9cc.filter(xs,function(x){return !x.__exclude__;});_9cc.forEach(ys,function(y){delete y["__exclude__"];});return ret;},_updateSelectionProperties:function(){var _9da=this.getSelectedTreeNodes();var _9db=[],_9dc=[];_9cc.forEach(_9da,function(node){var ary=node.getTreePath();_9dc.push(node);_9db.push(ary);},this);var _9dd=_9cc.map(_9dc,function(node){return node.item;});this.tree._set("paths",_9db);this.tree._set("path",_9db[0]||[]);this.tree._set("selectedNodes",_9dc);this.tree._set("selectedNode",_9dc[0]||null);this.tree._set("selectedItems",_9dd);this.tree._set("selectedItem",_9dd[0]||null);},onClickPress:function(e){if(this.current&&this.current.isExpandable&&this.tree.isExpandoNode(e.target,this.current)){return;}if(e.type=="mousedown"&&_9d0.isLeft(e)){e.preventDefault();}var _9de=e.type=="keydown"?this.tree.focusedChild:this.current;if(!_9de){return;}var copy=_9cf.getCopyKeyState(e),id=_9de.id;if(!this.singular&&!e.shiftKey&&this.selection[id]){this._doDeselect=true;return;}else{this._doDeselect=false;}this.userSelect(_9de,copy,e.shiftKey);},onClickRelease:function(e){if(!this._doDeselect){return;}this._doDeselect=false;this.userSelect(e.type=="keyup"?this.tree.focusedChild:this.current,_9cf.getCopyKeyState(e),e.shiftKey);},onMouseMove:function(){this._doDeselect=false;},onMouseDown:function(){},onMouseUp:function(){},_compareNodes:function(n1,n2){if(n1===n2){return 0;}if("sourceIndex" in document.documentElement){return n1.sourceIndex-n2.sourceIndex;}else{if("compareDocumentPosition" in document.documentElement){return n1.compareDocumentPosition(n2)&2?1:-1;}else{if(document.createRange){var r1=doc.createRange();r1.setStartBefore(n1);var r2=doc.createRange();r2.setStartBefore(n2);return r1.compareBoundaryPoints(r1.END_TO_END,r2);}else{throw Error("dijit.tree._compareNodes don't know how to compare two different nodes in this browser");}}}},userSelect:function(node,_9df,_9e0){if(this.singular){if(this.anchor==node&&_9df){this.selectNone();}else{this.setSelection([node]);this.anchor=node;}}else{if(_9e0&&this.anchor){var cr=this._compareNodes(this.anchor.rowNode,node.rowNode),_9e1,end,_9e2=this.anchor;if(cr<0){_9e1=_9e2;end=node;}else{_9e1=node;end=_9e2;}var _9e3=[];while(_9e1!=end){_9e3.push(_9e1);_9e1=this.tree._getNext(_9e1);}_9e3.push(end);this.setSelection(_9e3);}else{if(this.selection[node.id]&&_9df){this.removeTreeNode(node);}else{if(_9df){this.addTreeNode(node,true);}else{this.setSelection([node]);this.anchor=node;}}}}},getItem:function(key){var _9e4=this.selection[key];return {data:_9e4,type:["treeNode"]};},forInSelectedItems:function(f,o){o=o||_9ce.global;for(var id in this.selection){f.call(o,this.getItem(id),id,this);}}});});},"dojo/cldr/monetary":function(){define(["../_base/kernel","../_base/lang"],function(dojo,lang){var _9e5={};lang.setObject("dojo.cldr.monetary",_9e5);_9e5.getData=function(code){var _9e6={ADP:0,AFN:0,ALL:0,AMD:0,BHD:3,BIF:0,BYR:0,CLF:0,CLP:0,COP:0,CRC:0,DJF:0,ESP:0,GNF:0,GYD:0,HUF:0,IDR:0,IQD:0,IRR:3,ISK:0,ITL:0,JOD:3,JPY:0,KMF:0,KPW:0,KRW:0,KWD:3,LAK:0,LBP:0,LUF:0,LYD:3,MGA:0,MGF:0,MMK:0,MNT:0,MRO:0,MUR:0,OMR:3,PKR:2,PYG:0,RSD:0,RWF:0,SLL:0,SOS:0,STD:0,SYP:0,TMM:0,TND:3,TRL:0,TZS:0,UGX:0,UZS:0,VND:0,VUV:0,XAF:0,XOF:0,XPF:0,YER:0,ZMK:0,ZWD:0};var _9e7={};var _9e8=_9e6[code],_9e9=_9e7[code];if(typeof _9e8=="undefined"){_9e8=2;}if(typeof _9e9=="undefined"){_9e9=0;}return {places:_9e8,round:_9e9};};return _9e5;});},"dijit/layout/StackController":function(){define(["dojo/_base/array","dojo/_base/declare","dojo/dom-class","dojo/dom-construct","dojo/keys","dojo/_base/lang","dojo/on","dojo/topic","../focus","../registry","../_Widget","../_TemplatedMixin","../_Container","../form/ToggleButton","dojo/touch"],function(_9ea,_9eb,_9ec,_9ed,keys,lang,on,_9ee,_9ef,_9f0,_9f1,_9f2,_9f3,_9f4){var _9f5=_9eb("dijit.layout._StackButton",_9f4,{tabIndex:"-1",closeButton:false,_aria_attr:"aria-selected",buildRendering:function(evt){this.inherited(arguments);(this.focusNode||this.domNode).setAttribute("role","tab");}});var _9f6=_9eb("dijit.layout.StackController",[_9f1,_9f2,_9f3],{baseClass:"dijitStackController",templateString:"<span role='tablist' data-dojo-attach-event='onkeydown'></span>",containerId:"",buttonWidget:_9f5,buttonWidgetCloseClass:"dijitStackCloseButton",pane2button:function(id){return _9f0.byId(this.id+"_"+id);},postCreate:function(){this.inherited(arguments);this.own(_9ee.subscribe(this.containerId+"-startup",lang.hitch(this,"onStartup")),_9ee.subscribe(this.containerId+"-addChild",lang.hitch(this,"onAddChild")),_9ee.subscribe(this.containerId+"-removeChild",lang.hitch(this,"onRemoveChild")),_9ee.subscribe(this.containerId+"-selectChild",lang.hitch(this,"onSelectChild")),_9ee.subscribe(this.containerId+"-containerKeyDown",lang.hitch(this,"onContainerKeyDown")));this.containerNode.dojoClick=true;this.own(on(this.containerNode,"click",lang.hitch(this,function(evt){var _9f7=_9f0.getEnclosingWidget(evt.target);if(_9f7!=this.containerNode&&!_9f7.disabled&&_9f7.page){for(var _9f8=evt.target;_9f8!==this.containerNode;_9f8=_9f8.parentNode){if(_9ec.contains(_9f8,this.buttonWidgetCloseClass)){this.onCloseButtonClick(_9f7.page);break;}else{if(_9f8==_9f7.domNode){this.onButtonClick(_9f7.page);break;}}}}})));},onStartup:function(info){this.textDir=info.textDir;_9ea.forEach(info.children,this.onAddChild,this);if(info.selected){this.onSelectChild(info.selected);}var _9f9=_9f0.byId(this.containerId).containerNode,_9fa=lang.hitch(this,"pane2button"),_9fb={"title":"label","showtitle":"showLabel","iconclass":"iconClass","closable":"closeButton","tooltip":"title","disabled":"disabled","textdir":"textdir"},_9fc=function(attr,_9fd){return on(_9f9,"attrmodified-"+attr,function(evt){var _9fe=_9fa(evt.detail&&evt.detail.widget&&evt.detail.widget.id);if(_9fe){_9fe.set(_9fd,evt.detail.newValue);}});};for(var attr in _9fb){this.own(_9fc(attr,_9fb[attr]));}},destroy:function(_9ff){this.destroyDescendants(_9ff);this.inherited(arguments);},onAddChild:function(page,_a00){var Cls=lang.isString(this.buttonWidget)?lang.getObject(this.buttonWidget):this.buttonWidget;var _a01=new Cls({id:this.id+"_"+page.id,name:this.id+"_"+page.id,label:page.title,disabled:page.disabled,ownerDocument:this.ownerDocument,dir:page.dir,lang:page.lang,textDir:page.textDir||this.textDir,showLabel:page.showTitle,iconClass:page.iconClass,closeButton:page.closable,title:page.tooltip,page:page});this.addChild(_a01,_a00);page.controlButton=_a01;if(!this._currentChild){this.onSelectChild(page);}var _a02=page._wrapper.getAttribute("aria-labelledby")?page._wrapper.getAttribute("aria-labelledby")+" "+_a01.id:_a01.id;page._wrapper.removeAttribute("aria-label");page._wrapper.setAttribute("aria-labelledby",_a02);},onRemoveChild:function(page){if(this._currentChild===page){this._currentChild=null;}var _a03=this.pane2button(page.id);if(_a03){this.removeChild(_a03);_a03.destroy();}delete page.controlButton;},onSelectChild:function(page){if(!page){return;}if(this._currentChild){var _a04=this.pane2button(this._currentChild.id);_a04.set("checked",false);_a04.focusNode.setAttribute("tabIndex","-1");}var _a05=this.pane2button(page.id);_a05.set("checked",true);this._currentChild=page;_a05.focusNode.setAttribute("tabIndex","0");var _a06=_9f0.byId(this.containerId);},onButtonClick:function(page){var _a07=this.pane2button(page.id);_9ef.focus(_a07.focusNode);if(this._currentChild&&this._currentChild.id===page.id){_a07.set("checked",true);}var _a08=_9f0.byId(this.containerId);_a08.selectChild(page);},onCloseButtonClick:function(page){var _a09=_9f0.byId(this.containerId);_a09.closeChild(page);if(this._currentChild){var b=this.pane2button(this._currentChild.id);if(b){_9ef.focus(b.focusNode||b.domNode);}}},adjacent:function(_a0a){if(!this.isLeftToRight()&&(!this.tabPosition||/top|bottom/.test(this.tabPosition))){_a0a=!_a0a;}var _a0b=this.getChildren();var idx=_9ea.indexOf(_a0b,this.pane2button(this._currentChild.id)),_a0c=_a0b[idx];var _a0d;do{idx=(idx+(_a0a?1:_a0b.length-1))%_a0b.length;_a0d=_a0b[idx];}while(_a0d.disabled&&_a0d!=_a0c);return _a0d;},onkeydown:function(e,_a0e){if(this.disabled||e.altKey){return;}var _a0f=null;if(e.ctrlKey||!e._djpage){switch(e.keyCode){case keys.LEFT_ARROW:case keys.UP_ARROW:if(!e._djpage){_a0f=false;}break;case keys.PAGE_UP:if(e.ctrlKey){_a0f=false;}break;case keys.RIGHT_ARROW:case keys.DOWN_ARROW:if(!e._djpage){_a0f=true;}break;case keys.PAGE_DOWN:if(e.ctrlKey){_a0f=true;}break;case keys.HOME:var _a10=this.getChildren();for(var idx=0;idx<_a10.length;idx++){var _a11=_a10[idx];if(!_a11.disabled){this.onButtonClick(_a11.page);break;}}e.stopPropagation();e.preventDefault();break;case keys.END:var _a10=this.getChildren();for(var idx=_a10.length-1;idx>=0;idx--){var _a11=_a10[idx];if(!_a11.disabled){this.onButtonClick(_a11.page);break;}}e.stopPropagation();e.preventDefault();break;case keys.DELETE:case "W".charCodeAt(0):if(this._currentChild.closable&&(e.keyCode==keys.DELETE||e.ctrlKey)){this.onCloseButtonClick(this._currentChild);e.stopPropagation();e.preventDefault();}break;case keys.TAB:if(e.ctrlKey){this.onButtonClick(this.adjacent(!e.shiftKey).page);e.stopPropagation();e.preventDefault();}break;}if(_a0f!==null){this.onButtonClick(this.adjacent(_a0f).page);e.stopPropagation();e.preventDefault();}}},onContainerKeyDown:function(info){info.e._djpage=info.page;this.onkeydown(info.e);}});_9f6.StackButton=_9f5;return _9f6;});},"dijit/form/DateTextBox":function(){define(["dojo/_base/declare","../Calendar","./_DateTimeTextBox"],function(_a12,_a13,_a14){return _a12("dijit.form.DateTextBox",_a14,{baseClass:"dijitTextBox dijitComboBox dijitDateTextBox",popupClass:_a13,_selector:"date",maxHeight:Infinity,value:new Date("")});});},"dijit/form/_FormValueMixin":function(){define(["dojo/_base/declare","dojo/dom-attr","dojo/keys","dojo/_base/lang","dojo/on","./_FormWidgetMixin"],function(_a15,_a16,keys,lang,on,_a17){return _a15("dijit.form._FormValueMixin",_a17,{readOnly:false,_setReadOnlyAttr:function(_a18){_a16.set(this.focusNode,"readOnly",_a18);this._set("readOnly",_a18);},postCreate:function(){this.inherited(arguments);if(this._resetValue===undefined){this._lastValueReported=this._resetValue=this.value;}},_setValueAttr:function(_a19,_a1a){this._handleOnChange(_a19,_a1a);},_handleOnChange:function(_a1b,_a1c){this._set("value",_a1b);this.inherited(arguments);},undo:function(){this._setValueAttr(this._lastValueReported,false);},reset:function(){this._hasBeenBlurred=false;this._setValueAttr(this._resetValue,true);}});});},"control/customer/audit":function(){define(["dojo/_base/declare","ttl/BaseWidgetAMD","dojo/text!../customer/templates/audit.html","dijit/layout/BorderContainer","dijit/layout/ContentPane","dojo/request","ttl/utilities2","dojo/_base/lang","dojo/topic","dojo/dom-class","dojo/dom-attr","ttl/store/JsonRest","dojo/store/Observable","ttl/grid/Grid"],function(_a1d,_a1e,_a1f,_a20,_a21,_a22,_a23,lang,_a24,_a25,_a26,_a27,_a28,Grid){return _a1d("control.customer.audit",[_a1e,_a20],{templateString:_a1f,gutters:false,constructor:function(){this.auditlist=new _a28(new _a27({target:"/audit/audit",idProperty:"audittrailid",onError:_a23.globalerrorchecker,clearOnClose:true,urlPreventCache:true}));this._icustomerid=null;},postCreate:function(){var _a29=[{label:"Type",className:"dgrid-column-nbr-right",field:"audittypeid"},{label:"Date",className:"dgrid-column-date",field:"auditdate"},{label:"Text",className:"dgrid-column-status-large",field:"audittext"},{label:" ",className:"dgrid-column-type-boolean",field:"documentpresent",formatter:_a23.document_exists},{label:"Who",className:"dgrid-column-status",field:"user_name"}];this.auditgrid_view=new Grid({columns:_a29,selectionMode:"single",store:this.auditlist,sort:[{attribute:"auditdate",descending:true}],query:{}});this.auditgrid.set("content",this.auditgrid_view);this.auditgrid_view.on(".dgrid-cell:click",lang.hitch(this,this._OnSelectAudit));this.inherited(arguments);},load:function(_a2a){this._customerid=_a2a;this.auditgrid_view.set("query",{icustomerid:this._customerid});},_OnSelectAudit:function(e){var cell=this.auditgrid_view.cell(e);if(cell==null||cell.row==null){return;}var row=cell.row.data;if(cell.column.id==3&&row.documentpresent==true){if(row.audittypeid==17||row.audittypeid==24){_a26.set(this.htmlform_audittrailid,"value",row.audittrailid);_a26.set(this.htmlform,"action","/audit/viewhtml/"+row.audittrailid);this.htmlform.submit();}else{_a26.set(this.documentform_audittrailid,"value",row.audittrailid);_a26.set(this.documentform,"action","/audit/viewpdf/"+row.audittrailid);this.documentform.submit();}}},});});},"dijit/form/_AutoCompleterMixin":function(){define(["dojo/aspect","dojo/_base/declare","dojo/dom-attr","dojo/keys","dojo/_base/lang","dojo/query","dojo/regexp","dojo/sniff","./DataList","./_TextBoxMixin","./_SearchMixin"],function(_a2b,_a2c,_a2d,keys,lang,_a2e,_a2f,has,_a30,_a31,_a32){var _a33=_a2c("dijit.form._AutoCompleterMixin",_a32,{item:null,autoComplete:true,highlightMatch:"first",labelAttr:"",labelType:"text",maxHeight:-1,_stopClickEvents:false,_getCaretPos:function(_a34){var pos=0;if(typeof (_a34.selectionStart)=="number"){pos=_a34.selectionStart;}else{if(has("ie")){var tr=_a34.ownerDocument.selection.createRange().duplicate();var ntr=_a34.createTextRange();tr.move("character",0);ntr.move("character",0);try{ntr.setEndPoint("EndToEnd",tr);pos=String(ntr.text).replace(/\r/g,"").length;}catch(e){}}}return pos;},_setCaretPos:function(_a35,_a36){_a36=parseInt(_a36);_a31.selectInputText(_a35,_a36,_a36);},_setDisabledAttr:function(_a37){this.inherited(arguments);this.domNode.setAttribute("aria-disabled",_a37?"true":"false");},_onKey:function(evt){if(evt.charCode>=32){return;}var key=evt.charCode||evt.keyCode;if(key==keys.ALT||key==keys.CTRL||key==keys.META||key==keys.SHIFT){return;}var pw=this.dropDown;var _a38=null;this._abortQuery();this.inherited(arguments);if(evt.altKey||evt.ctrlKey||evt.metaKey){return;}if(this._opened){_a38=pw.getHighlightedOption();}switch(key){case keys.PAGE_DOWN:case keys.DOWN_ARROW:case keys.PAGE_UP:case keys.UP_ARROW:if(this._opened){this._announceOption(_a38);}evt.stopPropagation();evt.preventDefault();break;case keys.ENTER:if(_a38){if(_a38==pw.nextButton){this._nextSearch(1);evt.stopPropagation();evt.preventDefault();break;}else{if(_a38==pw.previousButton){this._nextSearch(-1);evt.stopPropagation();evt.preventDefault();break;}}evt.stopPropagation();evt.preventDefault();}else{this._setBlurValue();this._setCaretPos(this.focusNode,this.focusNode.value.length);}case keys.TAB:var _a39=this.get("displayedValue");if(pw&&(_a39==pw._messages["previousMessage"]||_a39==pw._messages["nextMessage"])){break;}if(_a38){this._selectOption(_a38);}case keys.ESCAPE:if(this._opened){this._lastQuery=null;this.closeDropDown();}break;}},_autoCompleteText:function(text){var fn=this.focusNode;_a31.selectInputText(fn,fn.value.length);var _a3a=this.ignoreCase?"toLowerCase":"substr";if(text[_a3a](0).indexOf(this.focusNode.value[_a3a](0))==0){var cpos=this.autoComplete?this._getCaretPos(fn):fn.value.length;if((cpos+1)>fn.value.length){fn.value=text;_a31.selectInputText(fn,cpos);}}else{fn.value=text;_a31.selectInputText(fn);}},_openResultList:function(_a3b,_a3c,_a3d){var _a3e=this.dropDown.getHighlightedOption();this.dropDown.clearResultList();if(!_a3b.length&&_a3d.start==0){this.closeDropDown();return;}this._nextSearch=this.dropDown.onPage=lang.hitch(this,function(_a3f){_a3b.nextPage(_a3f!==-1);this.focus();});this.dropDown.createOptions(_a3b,_a3d,lang.hitch(this,"_getMenuLabelFromItem"));this._showResultList();if("direction" in _a3d){if(_a3d.direction){this.dropDown.highlightFirstOption();}else{if(!_a3d.direction){this.dropDown.highlightLastOption();}}if(_a3e){this._announceOption(this.dropDown.getHighlightedOption());}}else{if(this.autoComplete&&!this._prev_key_backspace&&!/^[*]+$/.test(_a3c[this.searchAttr].toString())){this._announceOption(this.dropDown.containerNode.firstChild.nextSibling);}}},_showResultList:function(){this.closeDropDown(true);this.openDropDown();this.domNode.setAttribute("aria-expanded","true");},loadDropDown:function(){this._startSearchAll();},isLoaded:function(){return false;},closeDropDown:function(){this._abortQuery();if(this._opened){this.inherited(arguments);this.domNode.setAttribute("aria-expanded","false");}},_setBlurValue:function(){var _a40=this.get("displayedValue");var pw=this.dropDown;if(pw&&(_a40==pw._messages["previousMessage"]||_a40==pw._messages["nextMessage"])){this._setValueAttr(this._lastValueReported,true);}else{if(typeof this.item=="undefined"){this.item=null;this.set("displayedValue",_a40);}else{if(this.value!=this._lastValueReported){this._handleOnChange(this.value,true);}this._refreshState();}}this.focusNode.removeAttribute("aria-activedescendant");},_setItemAttr:function(item,_a41,_a42){var _a43="";if(item){if(!_a42){_a42=this.store._oldAPI?this.store.getValue(item,this.searchAttr):item[this.searchAttr];}_a43=this._getValueField()!=this.searchAttr?this.store.getIdentity(item):_a42;}this.set("value",_a43,_a41,_a42,item);},_announceOption:function(node){if(!node){return;}var _a44;if(node==this.dropDown.nextButton||node==this.dropDown.previousButton){_a44=node.innerHTML;this.item=undefined;this.value="";}else{var item=this.dropDown.items[node.getAttribute("item")];_a44=(this.store._oldAPI?this.store.getValue(item,this.searchAttr):item[this.searchAttr]).toString();this.set("item",item,false,_a44);}this.focusNode.value=this.focusNode.value.substring(0,this._lastInput.length);this.focusNode.setAttribute("aria-activedescendant",_a2d.get(node,"id"));this._autoCompleteText(_a44);},_selectOption:function(_a45){this.closeDropDown();if(_a45){this._announceOption(_a45);}this._setCaretPos(this.focusNode,this.focusNode.value.length);this._handleOnChange(this.value,true);this.focusNode.removeAttribute("aria-activedescendant");},_startSearchAll:function(){this._startSearch("");},_startSearchFromInput:function(){this.item=undefined;this.inherited(arguments);},_startSearch:function(key){if(!this.dropDown){var _a46=this.id+"_popup",_a47=lang.isString(this.dropDownClass)?lang.getObject(this.dropDownClass,false):this.dropDownClass;this.dropDown=new _a47({onChange:lang.hitch(this,this._selectOption),id:_a46,dir:this.dir,textDir:this.textDir});}this._lastInput=key;this.inherited(arguments);},_getValueField:function(){return this.searchAttr;},postMixInProperties:function(){this.inherited(arguments);if(!this.store&&this.srcNodeRef){var _a48=this.srcNodeRef;this.store=new _a30({},_a48);if(!("value" in this.params)){var item=(this.item=this.store.fetchSelectedItem());if(item){var _a49=this._getValueField();this.value=this.store._oldAPI?this.store.getValue(item,_a49):item[_a49];}}}},postCreate:function(){var _a4a=_a2e("label[for=\""+this.id+"\"]");if(_a4a.length){if(!_a4a[0].id){_a4a[0].id=this.id+"_label";}this.domNode.setAttribute("aria-labelledby",_a4a[0].id);}this.inherited(arguments);_a2b.after(this,"onSearch",lang.hitch(this,"_openResultList"),true);},_getMenuLabelFromItem:function(item){var _a4b=this.labelFunc(item,this.store),_a4c=this.labelType;if(this.highlightMatch!="none"&&this.labelType=="text"&&this._lastInput){_a4b=this.doHighlight(_a4b,this._lastInput);_a4c="html";}return {html:_a4c=="html",label:_a4b};},doHighlight:function(_a4d,find){var _a4e=(this.ignoreCase?"i":"")+(this.highlightMatch=="all"?"g":""),i=this.queryExpr.indexOf("${0}");find=_a2f.escapeString(find);return this._escapeHtml(_a4d.replace(new RegExp((i==0?"^":"")+"("+find+")"+(i==(this.queryExpr.length-4)?"$":""),_a4e),"\uffff$1\uffff")).replace(/\uFFFF([^\uFFFF]+)\uFFFF/g,"<span class=\"dijitComboBoxHighlightMatch\">$1</span>");},_escapeHtml:function(str){str=String(str).replace(/&/gm,"&amp;").replace(/</gm,"&lt;").replace(/>/gm,"&gt;").replace(/"/gm,"&quot;");return str;},reset:function(){this.item=null;this.inherited(arguments);},labelFunc:function(item,_a4f){return (_a4f._oldAPI?_a4f.getValue(item,this.labelAttr||this.searchAttr):item[this.labelAttr||this.searchAttr]).toString();},_setValueAttr:function(_a50,_a51,_a52,item){this._set("item",item||null);if(_a50==null){_a50="";}this.inherited(arguments);}});if(has("dojo-bidi")){_a33.extend({_setTextDirAttr:function(_a53){this.inherited(arguments);if(this.dropDown){this.dropDown._set("textDir",_a53);}}});}return _a33;});},"dijit/form/CurrencyTextBox":function(){define(["dojo/currency","dojo/_base/declare","dojo/_base/lang","./NumberTextBox"],function(_a54,_a55,lang,_a56){var _a57=_a55("dijit.form.CurrencyTextBox",_a56,{currency:"",baseClass:"dijitTextBox dijitCurrencyTextBox",_formatter:_a54.format,_parser:_a54.parse,_regExpGenerator:_a54.regexp,parse:function(_a58,_a59){var v=this.inherited(arguments);if(isNaN(v)&&/\d+/.test(_a58)){v=lang.hitch(lang.delegate(this,{_parser:_a56.prototype._parser}),"inherited")(arguments);}return v;},_setConstraintsAttr:function(_a5a){if(!_a5a.currency&&this.currency){_a5a.currency=this.currency;}this.inherited(arguments,[_a54._mixInDefaults(lang.mixin(_a5a,{exponent:false}))]);}});return _a57;});},"dijit/place":function(){define(["dojo/_base/array","dojo/dom-geometry","dojo/dom-style","dojo/_base/kernel","dojo/_base/window","./Viewport","./main"],function(_a5b,_a5c,_a5d,_a5e,win,_a5f,_a60){function _a61(node,_a62,_a63,_a64){var view=_a5f.getEffectiveBox(node.ownerDocument);if(!node.parentNode||String(node.parentNode.tagName).toLowerCase()!="body"){win.body(node.ownerDocument).appendChild(node);}var best=null;_a5b.some(_a62,function(_a65){var _a66=_a65.corner;var pos=_a65.pos;var _a67=0;var _a68={w:{"L":view.l+view.w-pos.x,"R":pos.x-view.l,"M":view.w}[_a66.charAt(1)],h:{"T":view.t+view.h-pos.y,"B":pos.y-view.t,"M":view.h}[_a66.charAt(0)]};var s=node.style;s.left=s.right="auto";if(_a63){var res=_a63(node,_a65.aroundCorner,_a66,_a68,_a64);_a67=typeof res=="undefined"?0:res;}var _a69=node.style;var _a6a=_a69.display;var _a6b=_a69.visibility;if(_a69.display=="none"){_a69.visibility="hidden";_a69.display="";}var bb=_a5c.position(node);_a69.display=_a6a;_a69.visibility=_a6b;var _a6c={"L":pos.x,"R":pos.x-bb.w,"M":Math.max(view.l,Math.min(view.l+view.w,pos.x+(bb.w>>1))-bb.w)}[_a66.charAt(1)],_a6d={"T":pos.y,"B":pos.y-bb.h,"M":Math.max(view.t,Math.min(view.t+view.h,pos.y+(bb.h>>1))-bb.h)}[_a66.charAt(0)],_a6e=Math.max(view.l,_a6c),_a6f=Math.max(view.t,_a6d),endX=Math.min(view.l+view.w,_a6c+bb.w),endY=Math.min(view.t+view.h,_a6d+bb.h),_a70=endX-_a6e,_a71=endY-_a6f;_a67+=(bb.w-_a70)+(bb.h-_a71);if(best==null||_a67<best.overflow){best={corner:_a66,aroundCorner:_a65.aroundCorner,x:_a6e,y:_a6f,w:_a70,h:_a71,overflow:_a67,spaceAvailable:_a68};}return !_a67;});if(best.overflow&&_a63){_a63(node,best.aroundCorner,best.corner,best.spaceAvailable,_a64);}var top=best.y,side=best.x,body=win.body(node.ownerDocument);if(/relative|absolute/.test(_a5d.get(body,"position"))){top-=_a5d.get(body,"marginTop");side-=_a5d.get(body,"marginLeft");}var s=node.style;s.top=top+"px";s.left=side+"px";s.right="auto";return best;};var _a72={"TL":"BR","TR":"BL","BL":"TR","BR":"TL"};var _a73={at:function(node,pos,_a74,_a75,_a76){var _a77=_a5b.map(_a74,function(_a78){var c={corner:_a78,aroundCorner:_a72[_a78],pos:{x:pos.x,y:pos.y}};if(_a75){c.pos.x+=_a78.charAt(1)=="L"?_a75.x:-_a75.x;c.pos.y+=_a78.charAt(0)=="T"?_a75.y:-_a75.y;}return c;});return _a61(node,_a77,_a76);},around:function(node,_a79,_a7a,_a7b,_a7c){var _a7d;if(typeof _a79=="string"||"offsetWidth" in _a79||"ownerSVGElement" in _a79){_a7d=_a5c.position(_a79,true);if(/^(above|below)/.test(_a7a[0])){var _a7e=_a5c.getBorderExtents(_a79),_a7f=_a79.firstChild?_a5c.getBorderExtents(_a79.firstChild):{t:0,l:0,b:0,r:0},_a80=_a5c.getBorderExtents(node),_a81=node.firstChild?_a5c.getBorderExtents(node.firstChild):{t:0,l:0,b:0,r:0};_a7d.y+=Math.min(_a7e.t+_a7f.t,_a80.t+_a81.t);_a7d.h-=Math.min(_a7e.t+_a7f.t,_a80.t+_a81.t)+Math.min(_a7e.b+_a7f.b,_a80.b+_a81.b);}}else{_a7d=_a79;}if(_a79.parentNode){var _a82=_a5d.getComputedStyle(_a79).position=="absolute";var _a83=_a79.parentNode;while(_a83&&_a83.nodeType==1&&_a83.nodeName!="BODY"){var _a84=_a5c.position(_a83,true),pcs=_a5d.getComputedStyle(_a83);if(/relative|absolute/.test(pcs.position)){_a82=false;}if(!_a82&&/hidden|auto|scroll/.test(pcs.overflow)){var _a85=Math.min(_a7d.y+_a7d.h,_a84.y+_a84.h);var _a86=Math.min(_a7d.x+_a7d.w,_a84.x+_a84.w);_a7d.x=Math.max(_a7d.x,_a84.x);_a7d.y=Math.max(_a7d.y,_a84.y);_a7d.h=_a85-_a7d.y;_a7d.w=_a86-_a7d.x;}if(pcs.position=="absolute"){_a82=true;}_a83=_a83.parentNode;}}var x=_a7d.x,y=_a7d.y,_a87="w" in _a7d?_a7d.w:(_a7d.w=_a7d.width),_a88="h" in _a7d?_a7d.h:(_a5e.deprecated("place.around: dijit/place.__Rectangle: { x:"+x+", y:"+y+", height:"+_a7d.height+", width:"+_a87+" } has been deprecated.  Please use { x:"+x+", y:"+y+", h:"+_a7d.height+", w:"+_a87+" }","","2.0"),_a7d.h=_a7d.height);var _a89=[];function push(_a8a,_a8b){_a89.push({aroundCorner:_a8a,corner:_a8b,pos:{x:{"L":x,"R":x+_a87,"M":x+(_a87>>1)}[_a8a.charAt(1)],y:{"T":y,"B":y+_a88,"M":y+(_a88>>1)}[_a8a.charAt(0)]}});};_a5b.forEach(_a7a,function(pos){var ltr=_a7b;switch(pos){case "above-centered":push("TM","BM");break;case "below-centered":push("BM","TM");break;case "after-centered":ltr=!ltr;case "before-centered":push(ltr?"ML":"MR",ltr?"MR":"ML");break;case "after":ltr=!ltr;case "before":push(ltr?"TL":"TR",ltr?"TR":"TL");push(ltr?"BL":"BR",ltr?"BR":"BL");break;case "below-alt":ltr=!ltr;case "below":push(ltr?"BL":"BR",ltr?"TL":"TR");push(ltr?"BR":"BL",ltr?"TR":"TL");break;case "above-alt":ltr=!ltr;case "above":push(ltr?"TL":"TR",ltr?"BL":"BR");push(ltr?"TR":"TL",ltr?"BR":"BL");break;default:push(pos.aroundCorner,pos.corner);}});var _a8c=_a61(node,_a89,_a7c,{w:_a87,h:_a88});_a8c.aroundNodePos=_a7d;return _a8c;}};return _a60.place=_a73;});},"dijit/form/ComboBox":function(){define(["dojo/_base/declare","./ValidationTextBox","./ComboBoxMixin"],function(_a8d,_a8e,_a8f){return _a8d("dijit.form.ComboBox",[_a8e,_a8f],{});});},"dijit/layout/_LayoutWidget":function(){define(["dojo/_base/lang","../_Widget","../_Container","../_Contained","../Viewport","dojo/_base/declare","dojo/dom-class","dojo/dom-geometry","dojo/dom-style"],function(lang,_a90,_a91,_a92,_a93,_a94,_a95,_a96,_a97){return _a94("dijit.layout._LayoutWidget",[_a90,_a91,_a92],{baseClass:"dijitLayoutContainer",isLayoutContainer:true,_setTitleAttr:null,buildRendering:function(){this.inherited(arguments);_a95.add(this.domNode,"dijitContainer");},startup:function(){if(this._started){return;}this.inherited(arguments);var _a98=this.getParent&&this.getParent();if(!(_a98&&_a98.isLayoutContainer)){this.resize();this.own(_a93.on("resize",lang.hitch(this,"resize")));}},resize:function(_a99,_a9a){var node=this.domNode;if(_a99){_a96.setMarginBox(node,_a99);}var mb=_a9a||{};lang.mixin(mb,_a99||{});if(!("h" in mb)||!("w" in mb)){mb=lang.mixin(_a96.getMarginBox(node),mb);}var cs=_a97.getComputedStyle(node);var me=_a96.getMarginExtents(node,cs);var be=_a96.getBorderExtents(node,cs);var bb=(this._borderBox={w:mb.w-(me.w+be.w),h:mb.h-(me.h+be.h)});var pe=_a96.getPadExtents(node,cs);this._contentBox={l:_a97.toPixelValue(node,cs.paddingLeft),t:_a97.toPixelValue(node,cs.paddingTop),w:bb.w-pe.w,h:bb.h-pe.h};this.layout();},layout:function(){},_setupChild:function(_a9b){var cls=this.baseClass+"-child "+(_a9b.baseClass?this.baseClass+"-"+_a9b.baseClass:"");_a95.add(_a9b.domNode,cls);},addChild:function(_a9c,_a9d){this.inherited(arguments);if(this._started){this._setupChild(_a9c);}},removeChild:function(_a9e){var cls=this.baseClass+"-child"+(_a9e.baseClass?" "+this.baseClass+"-"+_a9e.baseClass:"");_a95.remove(_a9e.domNode,cls);this.inherited(arguments);}});});},"dgrid/util/touch":function(){define(["dojo/on","dojo/query"],function(on,_a9f){var util={tapRadius:10,dbltapTime:250,selector:function(_aa0,_aa1,_aa2){return function(_aa3,_aa4){var _aa5=_aa1.bubble;if(_aa5){_aa1=_aa5;}else{if(_aa2!==false){_aa2=true;}}return on(_aa3,_aa1,function(_aa6){var _aa7=_aa6.target;if(_aa7.nodeType==3){_aa7=_aa7.parentNode;}while(!_a9f.matches(_aa7,_aa0,_aa3)){if(_aa7==_aa3||!_aa2||!(_aa7=_aa7.parentNode)){return;}}return _aa4.call(_aa7,_aa6);});};},countCurrentTouches:function(evt,node){if(!("touches" in evt)){return -1;}var i,_aa8,_aa9;for(i=0,_aa8=0;(_aa9=evt.touches[i]);++i){if(node.contains(_aa9.target)){++_aa8;}}return _aa8;}};function _aaa(_aab,_aac,evt,_aad){if(evt.targetTouches.length>1){return;}var _aae=evt.changedTouches[0],_aaf=_aae.screenX,_ab0=_aae.screenY;_aad&&evt.preventDefault();var _ab1=on(_aab,"touchend",function(evt){var end=evt.changedTouches[0];if(!evt.targetTouches.length){if(Math.abs(end.screenX-_aaf)<util.tapRadius&&Math.abs(end.screenY-_ab0)<util.tapRadius){_aad&&evt.preventDefault();_aac.call(this,evt);}_ab1.remove();}});};function tap(_ab2,_ab3){return on(_ab2,"touchstart",function(evt){_aaa(_ab2,_ab3,evt);});};function _ab4(_ab5,_ab6){var _ab7,_ab8;return on(_ab5,"touchstart",function(evt){if(!_ab7){_aaa(_ab5,function(evt){_ab7=evt.changedTouches[0];_ab8=setTimeout(function(){_ab7=_ab8=null;},util.dbltapTime);},evt);}else{_aaa(_ab5,function(evt){if(!_ab7){return;}var _ab9=evt.changedTouches[0];if(Math.abs(_ab9.screenX-_ab7.screenX)<util.tapRadius&&Math.abs(_ab9.screenY-_ab7.screenY)<util.tapRadius){_ab8&&clearTimeout(_ab8);_ab7=_ab8=null;_ab6.call(this,evt);}},evt,true);}});};util.tap=tap;util.dbltap=_ab4;return util;});},"dojox/grid/cells/_base":function(){define(["dojo/_base/kernel","dojo/_base/declare","dojo/_base/lang","dojo/_base/event","dojo/_base/connect","dojo/_base/array","dojo/_base/sniff","dojo/dom","dojo/dom-attr","dojo/dom-construct","dijit/_Widget","../util"],function(dojo,_aba,lang,_abb,_abc,_abd,has,dom,_abe,_abf,_ac0,util){var _ac1=_aba("dojox.grid._DeferredTextWidget",_ac0,{deferred:null,_destroyOnRemove:true,postCreate:function(){if(this.deferred){this.deferred.addBoth(lang.hitch(this,function(text){if(this.domNode){this.domNode.innerHTML=text;}}));}}});var _ac2=function(_ac3){try{util.fire(_ac3,"focus");util.fire(_ac3,"select");}catch(e){}};var _ac4=function(){setTimeout(lang.hitch.apply(dojo,arguments),0);};var _ac5=_aba("dojox.grid.cells._Base",null,{styles:"",classes:"",editable:false,alwaysEditing:false,formatter:null,defaultValue:"...",value:null,hidden:false,noresize:false,draggable:true,_valueProp:"value",_formatPending:false,constructor:function(_ac6){this._props=_ac6||{};lang.mixin(this,_ac6);if(this.draggable===undefined){this.draggable=true;}},_defaultFormat:function(_ac7,_ac8){var s=this.grid.formatterScope||this;var f=this.formatter;if(f&&s&&typeof f=="string"){f=this.formatter=s[f];}var v=(_ac7!=this.defaultValue&&f)?f.apply(s,_ac8):_ac7;if(typeof v=="undefined"){return this.defaultValue;}if(v&&v.addBoth){v=new _ac1({deferred:v},_abf.create("span",{innerHTML:this.defaultValue}));}if(v&&v.declaredClass&&v.startup){return "<div class='dojoxGridStubNode' linkWidget='"+v.id+"' cellIdx='"+this.index+"'>"+this.defaultValue+"</div>";}return v;},format:function(_ac9,_aca){var f,i=this.grid.edit.info,d=this.get?this.get(_ac9,_aca):(this.value||this.defaultValue);d=(d&&d.replace&&this.grid.escapeHTMLInData)?d.replace(/&/g,"&amp;").replace(/</g,"&lt;"):d;if(this.editable&&(this.alwaysEditing||(i.rowIndex==_ac9&&i.cell==this))){return this.formatEditing(i.value?i.value:d,_ac9);}else{return this._defaultFormat(d,[d,_ac9,this]);}},formatEditing:function(_acb,_acc){},getNode:function(_acd){return this.view.getCellNode(_acd,this.index);},getHeaderNode:function(){return this.view.getHeaderCellNode(this.index);},getEditNode:function(_ace){return (this.getNode(_ace)||0).firstChild||0;},canResize:function(){var uw=this.unitWidth;return uw&&(uw!=="auto");},isFlex:function(){var uw=this.unitWidth;return uw&&lang.isString(uw)&&(uw=="auto"||uw.slice(-1)=="%");},applyEdit:function(_acf,_ad0){if(this.getNode(_ad0)){this.grid.edit.applyCellEdit(_acf,this,_ad0);}},cancelEdit:function(_ad1){this.grid.doCancelEdit(_ad1);},_onEditBlur:function(_ad2){if(this.grid.edit.isEditCell(_ad2,this.index)){this.grid.edit.apply();}},registerOnBlur:function(_ad3,_ad4){if(this.commitOnBlur){_abc.connect(_ad3,"onblur",function(e){setTimeout(lang.hitch(this,"_onEditBlur",_ad4),250);});}},needFormatNode:function(_ad5,_ad6){this._formatPending=true;_ac4(this,"_formatNode",_ad5,_ad6);},cancelFormatNode:function(){this._formatPending=false;},_formatNode:function(_ad7,_ad8){if(this._formatPending){this._formatPending=false;if(!has("ie")){dom.setSelectable(this.grid.domNode,true);}this.formatNode(this.getEditNode(_ad8),_ad7,_ad8);}},formatNode:function(_ad9,_ada,_adb){if(has("ie")){_ac4(this,"focus",_adb,_ad9);}else{this.focus(_adb,_ad9);}},dispatchEvent:function(m,e){if(m in this){return this[m](e);}},getValue:function(_adc){return this.getEditNode(_adc)[this._valueProp];},setValue:function(_add,_ade){var n=this.getEditNode(_add);if(n){n[this._valueProp]=_ade;}},focus:function(_adf,_ae0){_ac2(_ae0||this.getEditNode(_adf));},save:function(_ae1){this.value=this.value||this.getValue(_ae1);},restore:function(_ae2){this.setValue(_ae2,this.value);},_finish:function(_ae3){dom.setSelectable(this.grid.domNode,false);this.cancelFormatNode();},apply:function(_ae4){this.applyEdit(this.getValue(_ae4),_ae4);this._finish(_ae4);},cancel:function(_ae5){this.cancelEdit(_ae5);this._finish(_ae5);}});_ac5.markupFactory=function(node,_ae6){var _ae7=lang.trim(_abe.get(node,"formatter")||"");if(_ae7){_ae6.formatter=lang.getObject(_ae7)||_ae7;}var get=lang.trim(_abe.get(node,"get")||"");if(get){_ae6.get=lang.getObject(get);}var _ae8=function(attr,cell,_ae9){var _aea=lang.trim(_abe.get(node,attr)||"");if(_aea){cell[_ae9||attr]=!(_aea.toLowerCase()=="false");}};_ae8("sortDesc",_ae6);_ae8("editable",_ae6);_ae8("alwaysEditing",_ae6);_ae8("noresize",_ae6);_ae8("draggable",_ae6);var _aeb=lang.trim(_abe.get(node,"loadingText")||_abe.get(node,"defaultValue")||"");if(_aeb){_ae6.defaultValue=_aeb;}var _aec=function(attr,cell,_aed){var _aee=lang.trim(_abe.get(node,attr)||"")||undefined;if(_aee){cell[_aed||attr]=_aee;}};_aec("styles",_ae6);_aec("headerStyles",_ae6);_aec("cellStyles",_ae6);_aec("classes",_ae6);_aec("headerClasses",_ae6);_aec("cellClasses",_ae6);};var Cell=_ac5.Cell=_aba("dojox.grid.cells.Cell",_ac5,{constructor:function(){this.keyFilter=this.keyFilter;},keyFilter:null,formatEditing:function(_aef,_af0){this.needFormatNode(_aef,_af0);return "<input class=\"dojoxGridInput\" type=\"text\" value=\""+_aef+"\">";},formatNode:function(_af1,_af2,_af3){this.inherited(arguments);this.registerOnBlur(_af1,_af3);},doKey:function(e){if(this.keyFilter){var key=String.fromCharCode(e.charCode);if(key.search(this.keyFilter)==-1){_abb.stop(e);}}},_finish:function(_af4){this.inherited(arguments);var n=this.getEditNode(_af4);try{util.fire(n,"blur");}catch(e){}}});Cell.markupFactory=function(node,_af5){_ac5.markupFactory(node,_af5);var _af6=lang.trim(_abe.get(node,"keyFilter")||"");if(_af6){_af5.keyFilter=new RegExp(_af6);}};var _af7=_ac5.RowIndex=_aba("dojox.grid.cells.RowIndex",Cell,{name:"Row",postscript:function(){this.editable=false;},get:function(_af8){return _af8+1;}});_af7.markupFactory=function(node,_af9){Cell.markupFactory(node,_af9);};var _afa=_ac5.Select=_aba("dojox.grid.cells.Select",Cell,{options:null,values:null,returnIndex:-1,constructor:function(_afb){this.values=this.values||this.options;},formatEditing:function(_afc,_afd){this.needFormatNode(_afc,_afd);var h=["<select class=\"dojoxGridSelect\">"];for(var i=0,o,v;((o=this.options[i])!==undefined)&&((v=this.values[i])!==undefined);i++){v=v.replace?v.replace(/&/g,"&amp;").replace(/</g,"&lt;"):v;o=o.replace?o.replace(/&/g,"&amp;").replace(/</g,"&lt;"):o;h.push("<option",(_afc==v?" selected":"")," value=\""+v+"\"",">",o,"</option>");}h.push("</select>");return h.join("");},_defaultFormat:function(_afe,_aff){var v=this.inherited(arguments);if(!this.formatter&&this.values&&this.options){var i=_abd.indexOf(this.values,v);if(i>=0){v=this.options[i];}}return v;},getValue:function(_b00){var n=this.getEditNode(_b00);if(n){var i=n.selectedIndex,o=n.options[i];return this.returnIndex>-1?i:o.value||o.innerHTML;}}});_afa.markupFactory=function(node,cell){Cell.markupFactory(node,cell);var _b01=lang.trim(_abe.get(node,"options")||"");if(_b01){var o=_b01.split(",");if(o[0]!=_b01){cell.options=o;}}var _b02=lang.trim(_abe.get(node,"values")||"");if(_b02){var v=_b02.split(",");if(v[0]!=_b02){cell.values=v;}}};var _b03=_ac5.AlwaysEdit=_aba("dojox.grid.cells.AlwaysEdit",Cell,{alwaysEditing:true,_formatNode:function(_b04,_b05){this.formatNode(this.getEditNode(_b05),_b04,_b05);},applyStaticValue:function(_b06){var e=this.grid.edit;e.applyCellEdit(this.getValue(_b06),this,_b06);e.start(this,_b06,true);}});_b03.markupFactory=function(node,cell){Cell.markupFactory(node,cell);};var Bool=_ac5.Bool=_aba("dojox.grid.cells.Bool",_b03,{_valueProp:"checked",formatEditing:function(_b07,_b08){return "<input class=\"dojoxGridInput\" type=\"checkbox\""+(_b07?" checked=\"checked\"":"")+" style=\"width: auto\" />";},doclick:function(e){if(e.target.tagName=="INPUT"){this.applyStaticValue(e.rowIndex);}}});Bool.markupFactory=function(node,cell){_b03.markupFactory(node,cell);};return _ac5;});},"dojo/number":function(){define(["./_base/lang","./i18n","./i18n!./cldr/nls/number","./string","./regexp"],function(lang,i18n,_b09,_b0a,_b0b){var _b0c={};lang.setObject("dojo.number",_b0c);_b0c.format=function(_b0d,_b0e){_b0e=lang.mixin({},_b0e||{});var _b0f=i18n.normalizeLocale(_b0e.locale),_b10=i18n.getLocalization("dojo.cldr","number",_b0f);_b0e.customs=_b10;var _b11=_b0e.pattern||_b10[(_b0e.type||"decimal")+"Format"];if(isNaN(_b0d)||Math.abs(_b0d)==Infinity){return null;}return _b0c._applyPattern(_b0d,_b11,_b0e);};_b0c._numberPatternRE=/[#0,]*[#0](?:\.0*#*)?/;_b0c._applyPattern=function(_b12,_b13,_b14){_b14=_b14||{};var _b15=_b14.customs.group,_b16=_b14.customs.decimal,_b17=_b13.split(";"),_b18=_b17[0];_b13=_b17[(_b12<0)?1:0]||("-"+_b18);if(_b13.indexOf("%")!=-1){_b12*=100;}else{if(_b13.indexOf("‰")!=-1){_b12*=1000;}else{if(_b13.indexOf("¤")!=-1){_b15=_b14.customs.currencyGroup||_b15;_b16=_b14.customs.currencyDecimal||_b16;_b13=_b13.replace(/([\s\xa0]*)(\u00a4{1,3})([\s\xa0]*)/,function(_b19,_b1a,_b1b,_b1c){var prop=["symbol","currency","displayName"][_b1b.length-1],_b1d=_b14[prop]||_b14.currency||"";if(!_b1d){return "";}return _b1a+_b1d+_b1c;});}else{if(_b13.indexOf("E")!=-1){throw new Error("exponential notation not supported");}}}}var _b1e=_b0c._numberPatternRE;var _b1f=_b18.match(_b1e);if(!_b1f){throw new Error("unable to find a number expression in pattern: "+_b13);}if(_b14.fractional===false){_b14.places=0;}return _b13.replace(_b1e,_b0c._formatAbsolute(_b12,_b1f[0],{decimal:_b16,group:_b15,places:_b14.places,round:_b14.round}));};_b0c.round=function(_b20,_b21,_b22){var _b23=10/(_b22||10);return (_b23*+_b20).toFixed(_b21)/_b23;};if((0.9).toFixed()==0){var _b24=_b0c.round;_b0c.round=function(v,p,m){var d=Math.pow(10,-p||0),a=Math.abs(v);if(!v||a>=d){d=0;}else{a/=d;if(a<0.5||a>=0.95){d=0;}}return _b24(v,p,m)+(v>0?d:-d);};}_b0c._formatAbsolute=function(_b25,_b26,_b27){_b27=_b27||{};if(_b27.places===true){_b27.places=0;}if(_b27.places===Infinity){_b27.places=6;}var _b28=_b26.split("."),_b29=typeof _b27.places=="string"&&_b27.places.indexOf(","),_b2a=_b27.places;if(_b29){_b2a=_b27.places.substring(_b29+1);}else{if(!(_b2a>=0)){_b2a=(_b28[1]||[]).length;}}if(!(_b27.round<0)){_b25=_b0c.round(_b25,_b2a,_b27.round);}var _b2b=String(Math.abs(_b25)).split("."),_b2c=_b2b[1]||"";if(_b28[1]||_b27.places){if(_b29){_b27.places=_b27.places.substring(0,_b29);}var pad=_b27.places!==undefined?_b27.places:(_b28[1]&&_b28[1].lastIndexOf("0")+1);if(pad>_b2c.length){_b2b[1]=_b0a.pad(_b2c,pad,"0",true);}if(_b2a<_b2c.length){_b2b[1]=_b2c.substr(0,_b2a);}}else{if(_b2b[1]){_b2b.pop();}}var _b2d=_b28[0].replace(",","");pad=_b2d.indexOf("0");if(pad!=-1){pad=_b2d.length-pad;if(pad>_b2b[0].length){_b2b[0]=_b0a.pad(_b2b[0],pad);}if(_b2d.indexOf("#")==-1){_b2b[0]=_b2b[0].substr(_b2b[0].length-pad);}}var _b2e=_b28[0].lastIndexOf(","),_b2f,_b30;if(_b2e!=-1){_b2f=_b28[0].length-_b2e-1;var _b31=_b28[0].substr(0,_b2e);_b2e=_b31.lastIndexOf(",");if(_b2e!=-1){_b30=_b31.length-_b2e-1;}}var _b32=[];for(var _b33=_b2b[0];_b33;){var off=_b33.length-_b2f;_b32.push((off>0)?_b33.substr(off):_b33);_b33=(off>0)?_b33.slice(0,off):"";if(_b30){_b2f=_b30;delete _b30;}}_b2b[0]=_b32.reverse().join(_b27.group||",");return _b2b.join(_b27.decimal||".");};_b0c.regexp=function(_b34){return _b0c._parseInfo(_b34).regexp;};_b0c._parseInfo=function(_b35){_b35=_b35||{};var _b36=i18n.normalizeLocale(_b35.locale),_b37=i18n.getLocalization("dojo.cldr","number",_b36),_b38=_b35.pattern||_b37[(_b35.type||"decimal")+"Format"],_b39=_b37.group,_b3a=_b37.decimal,_b3b=1;if(_b38.indexOf("%")!=-1){_b3b/=100;}else{if(_b38.indexOf("‰")!=-1){_b3b/=1000;}else{var _b3c=_b38.indexOf("¤")!=-1;if(_b3c){_b39=_b37.currencyGroup||_b39;_b3a=_b37.currencyDecimal||_b3a;}}}var _b3d=_b38.split(";");if(_b3d.length==1){_b3d.push("-"+_b3d[0]);}var re=_b0b.buildGroupRE(_b3d,function(_b3e){_b3e="(?:"+_b0b.escapeString(_b3e,".")+")";return _b3e.replace(_b0c._numberPatternRE,function(_b3f){var _b40={signed:false,separator:_b35.strict?_b39:[_b39,""],fractional:_b35.fractional,decimal:_b3a,exponent:false},_b41=_b3f.split("."),_b42=_b35.places;if(_b41.length==1&&_b3b!=1){_b41[1]="###";}if(_b41.length==1||_b42===0){_b40.fractional=false;}else{if(_b42===undefined){_b42=_b35.pattern?_b41[1].lastIndexOf("0")+1:Infinity;}if(_b42&&_b35.fractional==undefined){_b40.fractional=true;}if(!_b35.places&&(_b42<_b41[1].length)){_b42+=","+_b41[1].length;}_b40.places=_b42;}var _b43=_b41[0].split(",");if(_b43.length>1){_b40.groupSize=_b43.pop().length;if(_b43.length>1){_b40.groupSize2=_b43.pop().length;}}return "("+_b0c._realNumberRegexp(_b40)+")";});},true);if(_b3c){re=re.replace(/([\s\xa0]*)(\u00a4{1,3})([\s\xa0]*)/g,function(_b44,_b45,_b46,_b47){var prop=["symbol","currency","displayName"][_b46.length-1],_b48=_b0b.escapeString(_b35[prop]||_b35.currency||"");if(!_b48){return "";}_b45=_b45?"[\\s\\xa0]":"";_b47=_b47?"[\\s\\xa0]":"";if(!_b35.strict){if(_b45){_b45+="*";}if(_b47){_b47+="*";}return "(?:"+_b45+_b48+_b47+")?";}return _b45+_b48+_b47;});}return {regexp:re.replace(/[\xa0 ]/g,"[\\s\\xa0]"),group:_b39,decimal:_b3a,factor:_b3b};};_b0c.parse=function(_b49,_b4a){var info=_b0c._parseInfo(_b4a),_b4b=(new RegExp("^"+info.regexp+"$")).exec(_b49);if(!_b4b){return NaN;}var _b4c=_b4b[1];if(!_b4b[1]){if(!_b4b[2]){return NaN;}_b4c=_b4b[2];info.factor*=-1;}_b4c=_b4c.replace(new RegExp("["+info.group+"\\s\\xa0"+"]","g"),"").replace(info.decimal,".");return _b4c*info.factor;};_b0c._realNumberRegexp=function(_b4d){_b4d=_b4d||{};if(!("places" in _b4d)){_b4d.places=Infinity;}if(typeof _b4d.decimal!="string"){_b4d.decimal=".";}if(!("fractional" in _b4d)||/^0/.test(_b4d.places)){_b4d.fractional=[true,false];}if(!("exponent" in _b4d)){_b4d.exponent=[true,false];}if(!("eSigned" in _b4d)){_b4d.eSigned=[true,false];}var _b4e=_b0c._integerRegexp(_b4d),_b4f=_b0b.buildGroupRE(_b4d.fractional,function(q){var re="";if(q&&(_b4d.places!==0)){re="\\"+_b4d.decimal;if(_b4d.places==Infinity){re="(?:"+re+"\\d+)?";}else{re+="\\d{"+_b4d.places+"}";}}return re;},true);var _b50=_b0b.buildGroupRE(_b4d.exponent,function(q){if(q){return "([eE]"+_b0c._integerRegexp({signed:_b4d.eSigned})+")";}return "";});var _b51=_b4e+_b4f;if(_b4f){_b51="(?:(?:"+_b51+")|(?:"+_b4f+"))";}return _b51+_b50;};_b0c._integerRegexp=function(_b52){_b52=_b52||{};if(!("signed" in _b52)){_b52.signed=[true,false];}if(!("separator" in _b52)){_b52.separator="";}else{if(!("groupSize" in _b52)){_b52.groupSize=3;}}var _b53=_b0b.buildGroupRE(_b52.signed,function(q){return q?"[-+]":"";},true);var _b54=_b0b.buildGroupRE(_b52.separator,function(sep){if(!sep){return "(?:\\d+)";}sep=_b0b.escapeString(sep);if(sep==" "){sep="\\s";}else{if(sep==" "){sep="\\s\\xa0";}}var grp=_b52.groupSize,grp2=_b52.groupSize2;if(grp2){var _b55="(?:0|[1-9]\\d{0,"+(grp2-1)+"}(?:["+sep+"]\\d{"+grp2+"})*["+sep+"]\\d{"+grp+"})";return ((grp-grp2)>0)?"(?:"+_b55+"|(?:0|[1-9]\\d{0,"+(grp-1)+"}))":_b55;}return "(?:0|[1-9]\\d{0,"+(grp-1)+"}(?:["+sep+"]\\d{"+grp+"})*)";},true);return _b53+_b54;};return _b0c;});},"dijit/layout/_ContentPaneResizeMixin":function(){define(["dojo/_base/array","dojo/_base/declare","dojo/dom-class","dojo/dom-geometry","dojo/dom-style","dojo/_base/lang","dojo/query","../registry","../Viewport","./utils"],function(_b56,_b57,_b58,_b59,_b5a,lang,_b5b,_b5c,_b5d,_b5e){return _b57("dijit.layout._ContentPaneResizeMixin",null,{doLayout:true,isLayoutContainer:true,startup:function(){if(this._started){return;}var _b5f=this.getParent();this._childOfLayoutWidget=_b5f&&_b5f.isLayoutContainer;this._needLayout=!this._childOfLayoutWidget;this.inherited(arguments);if(this._isShown()){this._onShow();}if(!this._childOfLayoutWidget){this.own(_b5d.on("resize",lang.hitch(this,"resize")));}},_checkIfSingleChild:function(){if(!this.doLayout){return;}var _b60=[],_b61=false;_b5b("> *",this.containerNode).some(function(node){var _b62=_b5c.byNode(node);if(_b62&&_b62.resize){_b60.push(_b62);}else{if(!/script|link|style/i.test(node.nodeName)&&node.offsetHeight){_b61=true;}}});this._singleChild=_b60.length==1&&!_b61?_b60[0]:null;_b58.toggle(this.containerNode,this.baseClass+"SingleChild",!!this._singleChild);},resize:function(_b63,_b64){this._resizeCalled=true;this._scheduleLayout(_b63,_b64);},_scheduleLayout:function(_b65,_b66){if(this._isShown()){this._layout(_b65,_b66);}else{this._needLayout=true;this._changeSize=_b65;this._resultSize=_b66;}},_layout:function(_b67,_b68){delete this._needLayout;if(!this._wasShown&&this.open!==false){this._onShow();}if(_b67){_b59.setMarginBox(this.domNode,_b67);}var cn=this.containerNode;if(cn===this.domNode){var mb=_b68||{};lang.mixin(mb,_b67||{});if(!("h" in mb)||!("w" in mb)){mb=lang.mixin(_b59.getMarginBox(cn),mb);}this._contentBox=_b5e.marginBox2contentBox(cn,mb);}else{this._contentBox=_b59.getContentBox(cn);}this._layoutChildren();},_layoutChildren:function(){this._checkIfSingleChild();if(this._singleChild&&this._singleChild.resize){var cb=this._contentBox||_b59.getContentBox(this.containerNode);this._singleChild.resize({w:cb.w,h:cb.h});}else{var _b69=this.getChildren(),_b6a,i=0;while(_b6a=_b69[i++]){if(_b6a.resize){_b6a.resize();}}}},_isShown:function(){if(this._childOfLayoutWidget){if(this._resizeCalled&&"open" in this){return this.open;}return this._resizeCalled;}else{if("open" in this){return this.open;}else{var node=this.domNode,_b6b=this.domNode.parentNode;return (node.style.display!="none")&&(node.style.visibility!="hidden")&&!_b58.contains(node,"dijitHidden")&&_b6b&&_b6b.style&&(_b6b.style.display!="none");}}},_onShow:function(){this._wasShown=true;if(this._needLayout){this._layout(this._changeSize,this._resultSize);}this.inherited(arguments);}});});},"dijit/form/_ButtonMixin":function(){define(["dojo/_base/declare","dojo/dom","dojo/has","../registry"],function(_b6c,dom,has,_b6d){var _b6e=_b6c("dijit.form._ButtonMixin"+(has("dojo-bidi")?"_NoBidi":""),null,{label:"",type:"button",__onClick:function(e){e.stopPropagation();e.preventDefault();if(!this.disabled){this.valueNode.click(e);}return false;},_onClick:function(e){if(this.disabled){e.stopPropagation();e.preventDefault();return false;}if(this.onClick(e)===false){e.preventDefault();}var _b6f=e.defaultPrevented;if(!_b6f&&this.type=="submit"&&!(this.valueNode||this.focusNode).form){for(var node=this.domNode;node.parentNode;node=node.parentNode){var _b70=_b6d.byNode(node);if(_b70&&typeof _b70._onSubmit=="function"){_b70._onSubmit(e);e.preventDefault();_b6f=true;break;}}}return !_b6f;},postCreate:function(){this.inherited(arguments);dom.setSelectable(this.focusNode,false);},onClick:function(){return true;},_setLabelAttr:function(_b71){this._set("label",_b71);var _b72=this.containerNode||this.focusNode;_b72.innerHTML=_b71;this.onLabelSet();},onLabelSet:function(){}});if(has("dojo-bidi")){_b6e=_b6c("dijit.form._ButtonMixin",_b6e,{onLabelSet:function(){this.inherited(arguments);var _b73=this.containerNode||this.focusNode;this.applyTextDir(_b73);}});}return _b6e;});},"dijit/tree/TreeStoreModel":function(){define(["dojo/_base/array","dojo/aspect","dojo/_base/declare","dojo/_base/lang"],function(_b74,_b75,_b76,lang){return _b76("dijit.tree.TreeStoreModel",null,{store:null,childrenAttrs:["children"],newItemIdAttr:"id",labelAttr:"",root:null,query:null,deferItemLoadingUntilExpand:false,constructor:function(args){lang.mixin(this,args);this.connects=[];var _b77=this.store;if(!_b77.getFeatures()["dojo.data.api.Identity"]){throw new Error("dijit.tree.TreeStoreModel: store must support dojo.data.Identity");}if(_b77.getFeatures()["dojo.data.api.Notification"]){this.connects=this.connects.concat([_b75.after(_b77,"onNew",lang.hitch(this,"onNewItem"),true),_b75.after(_b77,"onDelete",lang.hitch(this,"onDeleteItem"),true),_b75.after(_b77,"onSet",lang.hitch(this,"onSetItem"),true)]);}},destroy:function(){var h;while(h=this.connects.pop()){h.remove();}},getRoot:function(_b78,_b79){if(this.root){_b78(this.root);}else{this.store.fetch({query:this.query,onComplete:lang.hitch(this,function(_b7a){if(_b7a.length!=1){throw new Error("dijit.tree.TreeStoreModel: root query returned "+_b7a.length+" items, but must return exactly one");}this.root=_b7a[0];_b78(this.root);}),onError:_b79});}},mayHaveChildren:function(item){return _b74.some(this.childrenAttrs,function(attr){return this.store.hasAttribute(item,attr);},this);},getChildren:function(_b7b,_b7c,_b7d){var _b7e=this.store;if(!_b7e.isItemLoaded(_b7b)){var _b7f=lang.hitch(this,arguments.callee);_b7e.loadItem({item:_b7b,onItem:function(_b80){_b7f(_b80,_b7c,_b7d);},onError:_b7d});return;}var _b81=[];for(var i=0;i<this.childrenAttrs.length;i++){var vals=_b7e.getValues(_b7b,this.childrenAttrs[i]);_b81=_b81.concat(vals);}var _b82=0;if(!this.deferItemLoadingUntilExpand){_b74.forEach(_b81,function(item){if(!_b7e.isItemLoaded(item)){_b82++;}});}if(_b82==0){_b7c(_b81);}else{_b74.forEach(_b81,function(item,idx){if(!_b7e.isItemLoaded(item)){_b7e.loadItem({item:item,onItem:function(item){_b81[idx]=item;if(--_b82==0){_b7c(_b81);}},onError:_b7d});}});}},isItem:function(_b83){return this.store.isItem(_b83);},fetchItemByIdentity:function(_b84){this.store.fetchItemByIdentity(_b84);},getIdentity:function(item){return this.store.getIdentity(item);},getLabel:function(item){if(this.labelAttr){return this.store.getValue(item,this.labelAttr);}else{return this.store.getLabel(item);}},newItem:function(args,_b85,_b86){var _b87={parent:_b85,attribute:this.childrenAttrs[0]},_b88;if(this.newItemIdAttr&&args[this.newItemIdAttr]){this.fetchItemByIdentity({identity:args[this.newItemIdAttr],scope:this,onItem:function(item){if(item){this.pasteItem(item,null,_b85,true,_b86);}else{_b88=this.store.newItem(args,_b87);if(_b88&&(_b86!=undefined)){this.pasteItem(_b88,_b85,_b85,false,_b86);}}}});}else{_b88=this.store.newItem(args,_b87);if(_b88&&(_b86!=undefined)){this.pasteItem(_b88,_b85,_b85,false,_b86);}}},pasteItem:function(_b89,_b8a,_b8b,_b8c,_b8d){var _b8e=this.store,_b8f=this.childrenAttrs[0];if(_b8a){_b74.forEach(this.childrenAttrs,function(attr){if(_b8e.containsValue(_b8a,attr,_b89)){if(!_b8c){var _b90=_b74.filter(_b8e.getValues(_b8a,attr),function(x){return x!=_b89;});_b8e.setValues(_b8a,attr,_b90);}_b8f=attr;}});}if(_b8b){if(typeof _b8d=="number"){var _b91=_b8e.getValues(_b8b,_b8f).slice();_b91.splice(_b8d,0,_b89);_b8e.setValues(_b8b,_b8f,_b91);}else{_b8e.setValues(_b8b,_b8f,_b8e.getValues(_b8b,_b8f).concat(_b89));}}},onChange:function(){},onChildrenChange:function(){},onDelete:function(){},onNewItem:function(item,_b92){if(!_b92){return;}this.getChildren(_b92.item,lang.hitch(this,function(_b93){this.onChildrenChange(_b92.item,_b93);}));},onDeleteItem:function(item){this.onDelete(item);},onSetItem:function(item,_b94){if(_b74.indexOf(this.childrenAttrs,_b94)!=-1){this.getChildren(item,lang.hitch(this,function(_b95){this.onChildrenChange(item,_b95);}));}else{this.onChange(item);}}});});},"dojo/dnd/TimedMoveable":function(){define(["../_base/declare","./Moveable"],function(_b96,_b97){var _b98=_b97.prototype.onMove;return _b96("dojo.dnd.TimedMoveable",_b97,{timeout:40,constructor:function(node,_b99){if(!_b99){_b99={};}if(_b99.timeout&&typeof _b99.timeout=="number"&&_b99.timeout>=0){this.timeout=_b99.timeout;}},onMoveStop:function(_b9a){if(_b9a._timer){clearTimeout(_b9a._timer);_b98.call(this,_b9a,_b9a._leftTop);}_b97.prototype.onMoveStop.apply(this,arguments);},onMove:function(_b9b,_b9c){_b9b._leftTop=_b9c;if(!_b9b._timer){var _b9d=this;_b9b._timer=setTimeout(function(){_b9b._timer=null;_b98.call(_b9d,_b9b,_b9b._leftTop);},this.timeout);}}});});},"control/customer/manual_credit":function(){define(["dojo/_base/declare","ttl/BaseWidgetAMD","dojo/text!../customer/templates/manual_credit.html","dijit/layout/BorderContainer","dojo/request","ttl/utilities2","dojo/_base/lang","dojo/topic","dojo/dom-class","dojo/dom-attr","dojo/data/ItemFileReadStore","dojo/number","dojo/io/iframe","dojox/form/FileInput","dijit/form/TextBox","dijit/form/ValidationTextBox","dijit/form/CurrencyTextBox","dijit/form/Button","dijit/form/DateTextBox","ttl/DateTextBox2"],function(_b9e,_b9f,_ba0,_ba1,_ba2,_ba3,lang,_ba4,_ba5,_ba6,_ba7){return _b9e("control/customer/manual_credit",[_b9f],{templateString:_ba0,gutters:false,constructor:function(){this._add_call_back=lang.hitch(this,this._add_call);},_add_call:function(_ba8){if(_ba8.success=="OK"){alert("Credit Added");_ba4.publish(PRCOMMON.Events.Financial_ReLoad,[]);this._dialog.hide();}else{alert("Problem Adding Credit");}},_send:function(){if(this.ref.isValid()==false||this.credit_date.isValid()==false||this.amount.isValid()==false||this.unpaidamount.isValid()==false){return false;}var _ba9=_ba6.get(this.credit_file,"value").toLowerCase();if(_ba9.indexOf(".pdf")==-1){alert("This must be a pdf file");return false;}this.invoice_date2.set("value",this.credit_date.get("ValueISO"));dojo.io.iframe.send({url:"/payment/add_manual_credit",handleAs:"json",load:this._add_call_back,form:this.form});},setCustomer:function(cust,_baa){this.icustomerid.set("value",cust.customerid);this.credit_date.set("value",new Date());this.ref.set("value","");this.amount.set("value",0);this.vat.set("value",0);this.unpaidamount.set("value",0);_ba6.set(this.credit_file,"value","");_ba6.set(this.customername,"innerHTML",cust.customername);this._dialog=_baa;},_amounts:function(){var _bab=this.amount.get("value");var vat=_bab-(_bab/(1+(20/100)));this.unpaidamount.set("value",_bab);this.vat.set("value",dojo.number.format(vat,{places:2}));}});});},"control/customer/upgrade_order_confirmation":function(){define(["dojo/_base/declare","ttl/BaseWidgetAMD","dojo/text!../customer/templates/upgrade_order_confirmation.html","dijit/layout/BorderContainer","dojo/request","ttl/utilities2","dojo/_base/lang","dojo/topic","dojo/dom-class","dojo/dom-attr","dojo/data/ItemFileWriteStore","dojo/data/ItemFileReadStore","dijit/layout/ContentPane","dijit/form/CheckBox","dijit/form/Form","dijit/form/TextBox","dijit/form/FilteringSelect","dijit/form/ValidationTextBox","dijit/form/Textarea","dijit/form/NumberTextBox","dijit/form/CurrencyTextBox","dijit/form/DateTextBox","dijit/form/Button","dojox/form/BusyButton"],function(_bac,_bad,_bae,_baf,_bb0,_bb1,lang,_bb2,_bb3,_bb4,_bb5,_bb6){return _bac("control.customer.upgrade_order_confirmation",[_bad],{templateString:_bae,gutters:false,constructor:function(){this._SendConfirmationCallBack=lang.hitch(this,this._SendConfirmationCall);this._pricecodes_core=new _bb6({url:"/common/lookups?searchtype=pricecodes&type=core"});this._pricecodes_adv=new _bb6({url:"/common/lookups?searchtype=pricecodes&type=adv"});this._pricecodes_updatum=new _bb6({url:"/common/lookups?searchtype=pricecodes&type=updatum"});this._paymentmethods=new _bb6({url:"/common/lookups?searchtype=paymentmethods"});this._send_conifirmation_call_back=lang.hitch(this,this._send_conifirmation_call);this._preview_call_back=lang.hitch(this,this._preview_call);this._get_prices_call_back=lang.hitch(this,this._get_prices_call);},postCreate:function(){this.paymentmethodid.set("store",this._paymentmethods);this.pricecodeid.set("store",this._pricecodes_core);this.pricecoderenewalid.set("store",this._pricecodes_core);this.advpricecodeid.set("store",this._pricecodes_adv);this.advpricecoderenewalid.set("store",this._pricecodes_adv);this.updatumpricecoderenewalid.set("store",this._pricecodes_updatum);this.updatumpricecodeid.set("store",this._pricecodes_updatum);this.pricecodeid.set("value",1);this.pricecoderenewalid.set("value",1);this.advpricecodeid.set("value",2);this.advpricecoderenewalid.set("value",2);this.updatumpricecoderenewalid.set("value",3);this.updatumpricecodeid.set("value",3);this.inherited(arguments);},resize:function(){this.frame.resize(arguments[0]);},_change_media_view:function(){if(this.media_upgrade.get("checked")){_bb3.remove(this.media_core_view,"prmaxhidden");}else{_bb3.add(this.media_core_view,"prmaxhidden");}},_change_advance_view:function(){if(this.advance_upgrade.get("checked")){_bb3.remove(this.advance_view,"prmaxhidden");}else{_bb3.add(this.advance_view,"prmaxhidden");}},_change_monitoring_view:function(){if(this.monitoring_upgrade.get("checked")){_bb3.remove(this.monitoring_view,"prmaxhidden");}else{_bb3.add(this.monitoring_view,"prmaxhidden");}},_send_conifirmation_call:function(_bb7){if(_bb7.success=="OK"){alert("Upgrade Confirmation Sent");this.sendbtn.cancel();this._dialog.hide();_bb2.publish(PRCOMMON.Events.Financial_ReLoad,[]);}else{alert("Problem Sending Upgrade Confirmation");}},_Validate:function(){if(_bb1.form_validator(this.form)==false){alert("Please Enter Details");this.sendbtn.cancel();return null;}if(this.media_upgrade.get("value")==false&&this.advance_upgrade.get("value")==false&&this.monitoring_upgrade.get("value")==false&&this.international_upgrade.get("value")==false){alert("No Upgrades Selected ");return null;}var _bb8=this.form.get("value");_bb8["updatum_start_date"]=_bb1.to_json_date(this.updatum_start_date.get("value"));_bb8["icustomerid"]=this._customerid;_bb8["media_upgrade"]=this.media_upgrade.get("value");_bb8["advance_upgrade"]=this.advance_upgrade.get("value");_bb8["monitoring_upgrade"]=this.monitoring_upgrade.get("value");return _bb8;},_Send:function(){var _bb9=this._Validate();if(_bb9==null){return;}_bb0.post("/orderconfirmation/upgrade_confirmation",_bb1.make_params({data:_bb9})).then(this._send_conifirmation_call_back);},set_customer:function(_bba,_bbb,cust){this._clear();this._customerid=_bba;this._dialog=_bbb;this.paymentmethodid.set("value",cust.paymentmethodid);this.orderpaymentfreqid.set("value",cust.orderpaymentfreqid);this.email.set("value",cust.email);this._show_hide_dd(cust.paymentmethodid);var _bbc=new Date();this.updatum_start_date.set("value",(cust.updatum_start_date_d)?_bb1.from_object_date(cust.updatum_start_date_d):_bbc);this.cost.set("value",_bb1.display_int_money(cust.order_confirmation_media_cost));this.advcost.set("value",_bb1.display_int_money(cust.order_confirmation_adv_cost));this.updatumcost.set("value",_bb1.display_int_money(cust.order_confirmation_updatum_cost));this.internationalcost.set("value",_bb1.display_int_money(cust.order_confirmation_international_cost));},_clear:function(){this.media_upgrade.set("checked",false);this.advance_upgrade.set("checked",false);this.monitoring_upgrade.set("checked",false);this.purchase_order.set("value","");this.emailtocustomer.set("checked",true);this.email.set("value","");this.upgrade_confirmation_accepted.set("checked",false);this.order_confirmation_message.set("value","");_bb3.add(this.media_core_view,"prmaxhidden");_bb3.add(this.advance_view,"prmaxhidden");_bb3.add(this.monitoring_view,"prmaxhidden");_bb3.add(this.international_view,"prmaxhidden");this.sendbtn.cancel();},_Preview:function(){var _bbd=this._Validate();if(_bbd==null){return;}_bb0.post("/orderconfirmation/upgrade_confirmation_preview",_bb1.make_params({data:_bbd})).then(this._preview_call_back);},_preview_call:function(_bbe){if(_bbe.success=="OK"){var head="\t\t<meta http-equiv='Content-Type' content='text/html; charset='UTF-8'>\n";var _bbf="<html>\n\t<head>\n"+head+"\t</head>\n\t<body><div style='width:640px;height:100%;overflow:auto;overflow-x:hidden;padding-right:15px'>\n"+_bbe.html_preview+"\n\t</div></body>\n</html>";var win=window.open("javascript: ''","_blank","status=0,menubar=0,location=0,toolbar=0,",true);win.document.open();win.document.write(_bbf);win.document.close();}else{alert("problem doing preview");}},_show_hide_dd:function(_bc0){switch(_bc0){case 2:case 3:for(x=1;x<3;x++){_bb3.add(this["view_dd_"+x],"prmaxhidden");}_bb3.add(this.updatum_view_2,"prmaxhidden");_bb3.add(this.updatum_view_3,"prmaxhidden");this.sendinvoice.set("checked",false);_bb3.add(this.sendinvoice_view,"prmaxhidden");break;default:for(x=1;x<3;x++){_bb3.remove(this["view_dd_"+x],"prmaxhidden");}_bb3.remove(this.updatum_view_2,"prmaxhidden");_bb3.remove(this.updatum_view_3,"prmaxhidden");this.sendinvoice.set("checked",true);_bb3.remove(this.sendinvoice_view,"prmaxhidden");break;}},_Close:function(){this._dialog.hide();this._clear();},_PriceChange:function(){_bb0.post("/payment/prices_get",_bb1.make_params({data:this.form.get("value")})).then(this._get_prices_call_back);},_get_prices_call:function(_bc1){if(_bc1.success=="OK"){if(this.media_upgrade.get("checked")){this.cost.set("value",dojo.number.format(_bc1.cost.media/100,{places:2}));}if(this.advance_upgrade.get("checked")){this.advcost.set("value",dojo.number.format(_bc1.cost.advance/100,{places:2}));}if(this.monitoring_upgrade.get("checked")){this.updatumcost.set("value",dojo.number.format(_bc1.cost.updatum/100,{places:2}));}}},_change_international_view:function(){if(this.international_upgrade.get("checked")){_bb3.remove(this.international_view,"prmaxhidden");}else{_bb3.add(this.international_view,"prmaxhidden");}}});});},"control/customer/dd_csv":function(){define(["dojo/_base/declare","ttl/BaseWidgetAMD","dojo/text!../customer/templates/dd_csv.html","dijit/layout/BorderContainer","dojo/request","ttl/utilities2","dojo/_base/lang","dojo/topic","dojo/dom-class","dojo/dom-attr","dijit/form/FilteringSelect","dijit/form/Button","dijit/form/TextBox"],function(_bc2,_bc3,_bc4,_bc5,_bc6,_bc7,lang,_bc8,_bc9,_bca){return _bc2("control/customer/dd_csv",[_bc3],{templateString:_bc4,gutters:false,_create_csv:function(){if(confirm("Create DD Csv")){return true;}return false;},_draft_invoices:function(){this.tmp_cache.set("value",new Date());this.pay_montly_day2.set("value",this.pay_montly_day.get("value"));return true;},_clear_down:function(){if(confirm("Reset the Montly Payment Values to the Default Values")){_bc6.post("/payment/payment_dd_reset",_bc7.make_params({data:{"pay_montly_day":this.pay_montly_day.get("value")}})).then(this._LoadCustomerCall);}}});});},"prcommon2/reports/ReportBuilder":function(){define(["dojo/_base/declare","ttl/BaseWidgetAMD","dojo/text!../reports/templates/ReportBuilder.html","ttl/utilities2","dojo/request","dojo/_base/lang","dojo/dom-style","dojo/dom-attr","dojo/dom-class","dijit/ProgressBar"],function(_bcb,_bcc,_bcd,_bce,_bcf,lang,_bd0,_bd1,_bd2){return _bcb("prcommon2.reports.ReportBuilder",[_bcc],{templateString:_bcd,constructor:function(){this._reportid=-1;this._current=0;this._complete=null;this._on_start_call_back=lang.hitch(this,this._on_start_call);this._on_status_call_back=lang.hitch(this,this._on_status_call);this._get_report_build_status_back=lang.hitch(this,this._get_report_build_status);},postCreate:function(){this.inherited(arguments);},SetCompleted:function(_bd3){this._complete=_bd3;},start:function(_bd4){this._start(_bd4);},_start:function(_bd5){this.clear();if(_bd5.searchtypeid==null){_bd5.searchtypeid=-1;}_bcf.post("/reports/start",_bce.make_params({data:_bd5})).then(this._on_start_call_back);},_on_start_call:function(_bd6){this._reportid=_bd6.reportid;this._wait();},_wait:function(){if(this._reportid==-1){this._complete(false);}else{++this._current;if(this._current>300){this._complete(false);}else{setTimeout(this._get_report_build_status_back,2000);}}},_on_status_call:function(_bd7){if(_bd7.success=="OK"){if(_bd7.reportstatusid==0||_bd7.reportstatusid==1){this._wait();}else{_bd1.set(this.reportid,"value",this._reportid);_bd1.set(this.reportForm,"action","/reports/view/"+this._reportid);_bd1.set(this.cache_buster,"value",new Date());this.reportForm.submit();this._complete(true);}}else{this.stop();}},stop:function(){this.clear();this._complete(false);},clear:function(){this._reportid=-1;this._current=0;},_get_report_build_status:function(){if(this._reportid!=-1){_bcf.post("/reports/status",_bce.make_params({data:{reportid:this._reportid}})).then(this._on_status_call_back);}}});});},"dojox/grid/Selection":function(){define(["dojo/_base/declare","dojo/_base/array","dojo/_base/lang","dojo/dom-attr"],function(_bd8,_bd9,lang,_bda){return _bd8("dojox.grid.Selection",null,{constructor:function(_bdb){this.grid=_bdb;this.selected=[];this.setMode(_bdb.selectionMode);},mode:"extended",selected:null,updating:0,selectedIndex:-1,rangeStartIndex:-1,setMode:function(mode){if(this.selected.length){this.deselectAll();}if(mode!="extended"&&mode!="multiple"&&mode!="single"&&mode!="none"){this.mode="extended";}else{this.mode=mode;}},onCanSelect:function(_bdc){return this.grid.onCanSelect(_bdc);},onCanDeselect:function(_bdd){return this.grid.onCanDeselect(_bdd);},onSelected:function(_bde){},onDeselected:function(_bdf){},onChanging:function(){},onChanged:function(){},isSelected:function(_be0){if(this.mode=="none"){return false;}return this.selected[_be0];},getFirstSelected:function(){if(!this.selected.length||this.mode=="none"){return -1;}for(var i=0,l=this.selected.length;i<l;i++){if(this.selected[i]){return i;}}return -1;},getNextSelected:function(_be1){if(this.mode=="none"){return -1;}for(var i=_be1+1,l=this.selected.length;i<l;i++){if(this.selected[i]){return i;}}return -1;},getSelected:function(){var _be2=[];for(var i=0,l=this.selected.length;i<l;i++){if(this.selected[i]){_be2.push(i);}}return _be2;},getSelectedCount:function(){var c=0;for(var i=0;i<this.selected.length;i++){if(this.selected[i]){c++;}}return c;},_beginUpdate:function(){if(this.updating===0){this.onChanging();}this.updating++;},_endUpdate:function(){this.updating--;if(this.updating===0){this.onChanged();}},select:function(_be3){if(this.mode=="none"){return;}if(this.mode!="multiple"){this.deselectAll(_be3);this.addToSelection(_be3);}else{this.toggleSelect(_be3);}},addToSelection:function(_be4){if(this.mode=="none"){return;}if(lang.isArray(_be4)){_bd9.forEach(_be4,this.addToSelection,this);return;}_be4=Number(_be4);if(this.selected[_be4]){this.selectedIndex=_be4;}else{if(this.onCanSelect(_be4)!==false){this.selectedIndex=_be4;var _be5=this.grid.getRowNode(_be4);if(_be5){_bda.set(_be5,"aria-selected","true");}this._beginUpdate();this.selected[_be4]=true;this.onSelected(_be4);this._endUpdate();}}},deselect:function(_be6){if(this.mode=="none"){return;}if(lang.isArray(_be6)){_bd9.forEach(_be6,this.deselect,this);return;}_be6=Number(_be6);if(this.selectedIndex==_be6){this.selectedIndex=-1;}if(this.selected[_be6]){if(this.onCanDeselect(_be6)===false){return;}var _be7=this.grid.getRowNode(_be6);if(_be7){_bda.set(_be7,"aria-selected","false");}this._beginUpdate();delete this.selected[_be6];this.onDeselected(_be6);this._endUpdate();}},setSelected:function(_be8,_be9){this[(_be9?"addToSelection":"deselect")](_be8);},toggleSelect:function(_bea){if(lang.isArray(_bea)){_bd9.forEach(_bea,this.toggleSelect,this);return;}this.setSelected(_bea,!this.selected[_bea]);},_range:function(_beb,inTo,func){var s=(_beb>=0?_beb:inTo),e=inTo;if(s>e){e=s;s=inTo;}for(var i=s;i<=e;i++){func(i);}},selectRange:function(_bec,inTo){this._range(_bec,inTo,lang.hitch(this,"addToSelection"));},deselectRange:function(_bed,inTo){this._range(_bed,inTo,lang.hitch(this,"deselect"));},insert:function(_bee){this.selected.splice(_bee,0,false);if(this.selectedIndex>=_bee){this.selectedIndex++;}},remove:function(_bef){this.selected.splice(_bef,1);if(this.selectedIndex>=_bef){this.selectedIndex--;}},deselectAll:function(_bf0){for(var i in this.selected){if((i!=_bf0)&&(this.selected[i]===true)){this.deselect(i);}}},clickSelect:function(_bf1,_bf2,_bf3){if(this.mode=="none"){return;}this._beginUpdate();if(this.mode!="extended"){this.select(_bf1);}else{if(!_bf3||this.rangeStartIndex<0){this.rangeStartIndex=_bf1;}if(!_bf2){this.deselectAll(_bf1);}if(_bf3){this.selectRange(this.rangeStartIndex,_bf1);}else{if(_bf2){this.toggleSelect(_bf1);}else{this.addToSelection(_bf1);}}}this._endUpdate();},clickSelectEvent:function(e){this.clickSelect(e.rowIndex,dojo.isCopyKey(e),e.shiftKey);},clear:function(){this._beginUpdate();this.deselectAll();this._endUpdate();}});});},"dijit/popup":function(){define(["dojo/_base/array","dojo/aspect","dojo/_base/declare","dojo/dom","dojo/dom-attr","dojo/dom-construct","dojo/dom-geometry","dojo/dom-style","dojo/has","dojo/keys","dojo/_base/lang","dojo/on","./place","./BackgroundIframe","./Viewport","./main","dojo/touch"],function(_bf4,_bf5,_bf6,dom,_bf7,_bf8,_bf9,_bfa,has,keys,lang,on,_bfb,_bfc,_bfd,_bfe){function _bff(){if(this._popupWrapper){_bf8.destroy(this._popupWrapper);delete this._popupWrapper;}};var _c00=_bf6(null,{_stack:[],_beginZIndex:1000,_idGen:1,_repositionAll:function(){if(this._firstAroundNode){var _c01=this._firstAroundPosition,_c02=_bf9.position(this._firstAroundNode,true),dx=_c02.x-_c01.x,dy=_c02.y-_c01.y;if(dx||dy){this._firstAroundPosition=_c02;for(var i=0;i<this._stack.length;i++){var _c03=this._stack[i].wrapper.style;_c03.top=(parseFloat(_c03.top)+dy)+"px";if(_c03.right=="auto"){_c03.left=(parseFloat(_c03.left)+dx)+"px";}else{_c03.right=(parseFloat(_c03.right)-dx)+"px";}}}this._aroundMoveListener=setTimeout(lang.hitch(this,"_repositionAll"),dx||dy?10:50);}},_createWrapper:function(_c04){var _c05=_c04._popupWrapper,node=_c04.domNode;if(!_c05){_c05=_bf8.create("div",{"class":"dijitPopup",style:{display:"none"},role:"region","aria-label":_c04["aria-label"]||_c04.label||_c04.name||_c04.id},_c04.ownerDocumentBody);_c05.appendChild(node);var s=node.style;s.display="";s.visibility="";s.position="";s.top="0px";_c04._popupWrapper=_c05;_bf5.after(_c04,"destroy",_bff,true);if("ontouchend" in document){on(_c05,"touchend",function(evt){if(!/^(input|button|textarea)$/i.test(evt.target.tagName)){evt.preventDefault();}});}_c05.dojoClick=true;}return _c05;},moveOffScreen:function(_c06){var _c07=this._createWrapper(_c06);var ltr=_bf9.isBodyLtr(_c06.ownerDocument),_c08={visibility:"hidden",top:"-9999px",display:""};_c08[ltr?"left":"right"]="-9999px";_c08[ltr?"right":"left"]="auto";_bfa.set(_c07,_c08);return _c07;},hide:function(_c09){var _c0a=this._createWrapper(_c09);_bfa.set(_c0a,{display:"none",height:"auto",overflowY:"visible",border:""});var node=_c09.domNode;if("_originalStyle" in node){node.style.cssText=node._originalStyle;}},getTopPopup:function(){var _c0b=this._stack;for(var pi=_c0b.length-1;pi>0&&_c0b[pi].parent===_c0b[pi-1].widget;pi--){}return _c0b[pi];},open:function(args){var _c0c=this._stack,_c0d=args.popup,node=_c0d.domNode,_c0e=args.orient||["below","below-alt","above","above-alt"],ltr=args.parent?args.parent.isLeftToRight():_bf9.isBodyLtr(_c0d.ownerDocument),_c0f=args.around,id=(args.around&&args.around.id)?(args.around.id+"_dropdown"):("popup_"+this._idGen++);while(_c0c.length&&(!args.parent||!dom.isDescendant(args.parent.domNode,_c0c[_c0c.length-1].widget.domNode))){this.close(_c0c[_c0c.length-1].widget);}var _c10=this.moveOffScreen(_c0d);if(_c0d.startup&&!_c0d._started){_c0d.startup();}var _c11,_c12=_bf9.position(node);if("maxHeight" in args&&args.maxHeight!=-1){_c11=args.maxHeight||Infinity;}else{var _c13=_bfd.getEffectiveBox(this.ownerDocument),_c14=_c0f?_bf9.position(_c0f,false):{y:args.y-(args.padding||0),h:(args.padding||0)*2};_c11=Math.floor(Math.max(_c14.y,_c13.h-(_c14.y+_c14.h)));}if(_c12.h>_c11){var cs=_bfa.getComputedStyle(node),_c15=cs.borderLeftWidth+" "+cs.borderLeftStyle+" "+cs.borderLeftColor;_bfa.set(_c10,{overflowY:"scroll",height:_c11+"px",border:_c15});node._originalStyle=node.style.cssText;node.style.border="none";}_bf7.set(_c10,{id:id,style:{zIndex:this._beginZIndex+_c0c.length},"class":"dijitPopup "+(_c0d.baseClass||_c0d["class"]||"").split(" ")[0]+"Popup",dijitPopupParent:args.parent?args.parent.id:""});if(_c0c.length==0&&_c0f){this._firstAroundNode=_c0f;this._firstAroundPosition=_bf9.position(_c0f,true);this._aroundMoveListener=setTimeout(lang.hitch(this,"_repositionAll"),50);}if(has("config-bgIframe")&&!_c0d.bgIframe){_c0d.bgIframe=new _bfc(_c10);}var _c16=_c0d.orient?lang.hitch(_c0d,"orient"):null,best=_c0f?_bfb.around(_c10,_c0f,_c0e,ltr,_c16):_bfb.at(_c10,args,_c0e=="R"?["TR","BR","TL","BL"]:["TL","BL","TR","BR"],args.padding,_c16);_c10.style.visibility="visible";node.style.visibility="visible";var _c17=[];_c17.push(on(_c10,"keydown",lang.hitch(this,function(evt){if(evt.keyCode==keys.ESCAPE&&args.onCancel){evt.stopPropagation();evt.preventDefault();args.onCancel();}else{if(evt.keyCode==keys.TAB){evt.stopPropagation();evt.preventDefault();var _c18=this.getTopPopup();if(_c18&&_c18.onCancel){_c18.onCancel();}}}})));if(_c0d.onCancel&&args.onCancel){_c17.push(_c0d.on("cancel",args.onCancel));}_c17.push(_c0d.on(_c0d.onExecute?"execute":"change",lang.hitch(this,function(){var _c19=this.getTopPopup();if(_c19&&_c19.onExecute){_c19.onExecute();}})));_c0c.push({widget:_c0d,wrapper:_c10,parent:args.parent,onExecute:args.onExecute,onCancel:args.onCancel,onClose:args.onClose,handlers:_c17});if(_c0d.onOpen){_c0d.onOpen(best);}return best;},close:function(_c1a){var _c1b=this._stack;while((_c1a&&_bf4.some(_c1b,function(elem){return elem.widget==_c1a;}))||(!_c1a&&_c1b.length)){var top=_c1b.pop(),_c1c=top.widget,_c1d=top.onClose;if(_c1c.bgIframe){_c1c.bgIframe.destroy();delete _c1c.bgIframe;}if(_c1c.onClose){_c1c.onClose();}var h;while(h=top.handlers.pop()){h.remove();}if(_c1c&&_c1c.domNode){this.hide(_c1c);}if(_c1d){_c1d();}}if(_c1b.length==0&&this._aroundMoveListener){clearTimeout(this._aroundMoveListener);this._firstAroundNode=this._firstAroundPosition=this._aroundMoveListener=null;}}});return (_bfe.popup=new _c00());});},"dojo/data/ItemFileWriteStore":function(){define(["../_base/lang","../_base/declare","../_base/array","../_base/json","../_base/kernel","./ItemFileReadStore","../date/stamp"],function(lang,_c1e,_c1f,_c20,_c21,_c22,_c23){return _c1e("dojo.data.ItemFileWriteStore",_c22,{constructor:function(_c24){this._features["dojo.data.api.Write"]=true;this._features["dojo.data.api.Notification"]=true;this._pending={_newItems:{},_modifiedItems:{},_deletedItems:{}};if(!this._datatypeMap["Date"].serialize){this._datatypeMap["Date"].serialize=function(obj){return _c23.toISOString(obj,{zulu:true});};}if(_c24&&(_c24.referenceIntegrity===false)){this.referenceIntegrity=false;}this._saveInProgress=false;},referenceIntegrity:true,_assert:function(_c25){if(!_c25){throw new Error("assertion failed in ItemFileWriteStore");}},_getIdentifierAttribute:function(){return this.getFeatures()["dojo.data.api.Identity"];},newItem:function(_c26,_c27){this._assert(!this._saveInProgress);if(!this._loadFinished){this._forceLoad();}if(typeof _c26!="object"&&typeof _c26!="undefined"){throw new Error("newItem() was passed something other than an object");}var _c28=null;var _c29=this._getIdentifierAttribute();if(_c29===Number){_c28=this._arrayOfAllItems.length;}else{_c28=_c26[_c29];if(typeof _c28==="undefined"){throw new Error("newItem() was not passed an identity for the new item");}if(lang.isArray(_c28)){throw new Error("newItem() was not passed an single-valued identity");}}if(this._itemsByIdentity){this._assert(typeof this._itemsByIdentity[_c28]==="undefined");}this._assert(typeof this._pending._newItems[_c28]==="undefined");this._assert(typeof this._pending._deletedItems[_c28]==="undefined");var _c2a={};_c2a[this._storeRefPropName]=this;_c2a[this._itemNumPropName]=this._arrayOfAllItems.length;if(this._itemsByIdentity){this._itemsByIdentity[_c28]=_c2a;_c2a[_c29]=[_c28];}this._arrayOfAllItems.push(_c2a);var _c2b=null;if(_c27&&_c27.parent&&_c27.attribute){_c2b={item:_c27.parent,attribute:_c27.attribute,oldValue:undefined};var _c2c=this.getValues(_c27.parent,_c27.attribute);if(_c2c&&_c2c.length>0){var _c2d=_c2c.slice(0,_c2c.length);if(_c2c.length===1){_c2b.oldValue=_c2c[0];}else{_c2b.oldValue=_c2c.slice(0,_c2c.length);}_c2d.push(_c2a);this._setValueOrValues(_c27.parent,_c27.attribute,_c2d,false);_c2b.newValue=this.getValues(_c27.parent,_c27.attribute);}else{this._setValueOrValues(_c27.parent,_c27.attribute,_c2a,false);_c2b.newValue=_c2a;}}else{_c2a[this._rootItemPropName]=true;this._arrayOfTopLevelItems.push(_c2a);}this._pending._newItems[_c28]=_c2a;for(var key in _c26){if(key===this._storeRefPropName||key===this._itemNumPropName){throw new Error("encountered bug in ItemFileWriteStore.newItem");}var _c2e=_c26[key];if(!lang.isArray(_c2e)){_c2e=[_c2e];}_c2a[key]=_c2e;if(this.referenceIntegrity){for(var i=0;i<_c2e.length;i++){var val=_c2e[i];if(this.isItem(val)){this._addReferenceToMap(val,_c2a,key);}}}}this.onNew(_c2a,_c2b);return _c2a;},_removeArrayElement:function(_c2f,_c30){var _c31=_c1f.indexOf(_c2f,_c30);if(_c31!=-1){_c2f.splice(_c31,1);return true;}return false;},deleteItem:function(item){this._assert(!this._saveInProgress);this._assertIsItem(item);var _c32=item[this._itemNumPropName];var _c33=this.getIdentity(item);if(this.referenceIntegrity){var _c34=this.getAttributes(item);if(item[this._reverseRefMap]){item["backup_"+this._reverseRefMap]=lang.clone(item[this._reverseRefMap]);}_c1f.forEach(_c34,function(_c35){_c1f.forEach(this.getValues(item,_c35),function(_c36){if(this.isItem(_c36)){if(!item["backupRefs_"+this._reverseRefMap]){item["backupRefs_"+this._reverseRefMap]=[];}item["backupRefs_"+this._reverseRefMap].push({id:this.getIdentity(_c36),attr:_c35});this._removeReferenceFromMap(_c36,item,_c35);}},this);},this);var _c37=item[this._reverseRefMap];if(_c37){for(var _c38 in _c37){var _c39=null;if(this._itemsByIdentity){_c39=this._itemsByIdentity[_c38];}else{_c39=this._arrayOfAllItems[_c38];}if(_c39){for(var _c3a in _c37[_c38]){var _c3b=this.getValues(_c39,_c3a)||[];var _c3c=_c1f.filter(_c3b,function(_c3d){return !(this.isItem(_c3d)&&this.getIdentity(_c3d)==_c33);},this);this._removeReferenceFromMap(item,_c39,_c3a);if(_c3c.length<_c3b.length){this._setValueOrValues(_c39,_c3a,_c3c,true);}}}}}}this._arrayOfAllItems[_c32]=null;item[this._storeRefPropName]=null;if(this._itemsByIdentity){delete this._itemsByIdentity[_c33];}this._pending._deletedItems[_c33]=item;if(item[this._rootItemPropName]){this._removeArrayElement(this._arrayOfTopLevelItems,item);}this.onDelete(item);return true;},setValue:function(item,_c3e,_c3f){return this._setValueOrValues(item,_c3e,_c3f,true);},setValues:function(item,_c40,_c41){return this._setValueOrValues(item,_c40,_c41,true);},unsetAttribute:function(item,_c42){return this._setValueOrValues(item,_c42,[],true);},_setValueOrValues:function(item,_c43,_c44,_c45){this._assert(!this._saveInProgress);this._assertIsItem(item);this._assert(lang.isString(_c43));this._assert(typeof _c44!=="undefined");var _c46=this._getIdentifierAttribute();if(_c43==_c46){throw new Error("ItemFileWriteStore does not have support for changing the value of an item's identifier.");}var _c47=this._getValueOrValues(item,_c43);var _c48=this.getIdentity(item);if(!this._pending._modifiedItems[_c48]){var _c49={};for(var key in item){if((key===this._storeRefPropName)||(key===this._itemNumPropName)||(key===this._rootItemPropName)){_c49[key]=item[key];}else{if(key===this._reverseRefMap){_c49[key]=lang.clone(item[key]);}else{_c49[key]=item[key].slice(0,item[key].length);}}}this._pending._modifiedItems[_c48]=_c49;}var _c4a=false;if(lang.isArray(_c44)&&_c44.length===0){_c4a=delete item[_c43];_c44=undefined;if(this.referenceIntegrity&&_c47){var _c4b=_c47;if(!lang.isArray(_c4b)){_c4b=[_c4b];}for(var i=0;i<_c4b.length;i++){var _c4c=_c4b[i];if(this.isItem(_c4c)){this._removeReferenceFromMap(_c4c,item,_c43);}}}}else{var _c4d;if(lang.isArray(_c44)){_c4d=_c44.slice(0,_c44.length);}else{_c4d=[_c44];}if(this.referenceIntegrity){if(_c47){var _c4b=_c47;if(!lang.isArray(_c4b)){_c4b=[_c4b];}var map={};_c1f.forEach(_c4b,function(_c4e){if(this.isItem(_c4e)){var id=this.getIdentity(_c4e);map[id.toString()]=true;}},this);_c1f.forEach(_c4d,function(_c4f){if(this.isItem(_c4f)){var id=this.getIdentity(_c4f);if(map[id.toString()]){delete map[id.toString()];}else{this._addReferenceToMap(_c4f,item,_c43);}}},this);for(var rId in map){var _c50;if(this._itemsByIdentity){_c50=this._itemsByIdentity[rId];}else{_c50=this._arrayOfAllItems[rId];}this._removeReferenceFromMap(_c50,item,_c43);}}else{for(var i=0;i<_c4d.length;i++){var _c4c=_c4d[i];if(this.isItem(_c4c)){this._addReferenceToMap(_c4c,item,_c43);}}}}item[_c43]=_c4d;_c4a=true;}if(_c45){this.onSet(item,_c43,_c47,_c44);}return _c4a;},_addReferenceToMap:function(_c51,_c52,_c53){var _c54=this.getIdentity(_c52);var _c55=_c51[this._reverseRefMap];if(!_c55){_c55=_c51[this._reverseRefMap]={};}var _c56=_c55[_c54];if(!_c56){_c56=_c55[_c54]={};}_c56[_c53]=true;},_removeReferenceFromMap:function(_c57,_c58,_c59){var _c5a=this.getIdentity(_c58);var _c5b=_c57[this._reverseRefMap];var _c5c;if(_c5b){for(_c5c in _c5b){if(_c5c==_c5a){delete _c5b[_c5c][_c59];if(this._isEmpty(_c5b[_c5c])){delete _c5b[_c5c];}}}if(this._isEmpty(_c5b)){delete _c57[this._reverseRefMap];}}},_dumpReferenceMap:function(){var i;for(i=0;i<this._arrayOfAllItems.length;i++){var item=this._arrayOfAllItems[i];if(item&&item[this._reverseRefMap]){}}},_getValueOrValues:function(item,_c5d){var _c5e=undefined;if(this.hasAttribute(item,_c5d)){var _c5f=this.getValues(item,_c5d);if(_c5f.length==1){_c5e=_c5f[0];}else{_c5e=_c5f;}}return _c5e;},_flatten:function(_c60){if(this.isItem(_c60)){return {_reference:this.getIdentity(_c60)};}else{if(typeof _c60==="object"){for(var type in this._datatypeMap){var _c61=this._datatypeMap[type];if(lang.isObject(_c61)&&!lang.isFunction(_c61)){if(_c60 instanceof _c61.type){if(!_c61.serialize){throw new Error("ItemFileWriteStore:  No serializer defined for type mapping: ["+type+"]");}return {_type:type,_value:_c61.serialize(_c60)};}}else{if(_c60 instanceof _c61){return {_type:type,_value:_c60.toString()};}}}}return _c60;}},_getNewFileContentString:function(){var _c62={};var _c63=this._getIdentifierAttribute();if(_c63!==Number){_c62.identifier=_c63;}if(this._labelAttr){_c62.label=this._labelAttr;}_c62.items=[];for(var i=0;i<this._arrayOfAllItems.length;++i){var item=this._arrayOfAllItems[i];if(item!==null){var _c64={};for(var key in item){if(key!==this._storeRefPropName&&key!==this._itemNumPropName&&key!==this._reverseRefMap&&key!==this._rootItemPropName){var _c65=this.getValues(item,key);if(_c65.length==1){_c64[key]=this._flatten(_c65[0]);}else{var _c66=[];for(var j=0;j<_c65.length;++j){_c66.push(this._flatten(_c65[j]));_c64[key]=_c66;}}}}_c62.items.push(_c64);}}var _c67=true;return _c20.toJson(_c62,_c67);},_isEmpty:function(_c68){var _c69=true;if(lang.isObject(_c68)){var i;for(i in _c68){_c69=false;break;}}else{if(lang.isArray(_c68)){if(_c68.length>0){_c69=false;}}}return _c69;},save:function(_c6a){this._assert(!this._saveInProgress);this._saveInProgress=true;var self=this;var _c6b=function(){self._pending={_newItems:{},_modifiedItems:{},_deletedItems:{}};self._saveInProgress=false;if(_c6a&&_c6a.onComplete){var _c6c=_c6a.scope||_c21.global;_c6a.onComplete.call(_c6c);}};var _c6d=function(err){self._saveInProgress=false;if(_c6a&&_c6a.onError){var _c6e=_c6a.scope||_c21.global;_c6a.onError.call(_c6e,err);}};if(this._saveEverything){var _c6f=this._getNewFileContentString();this._saveEverything(_c6b,_c6d,_c6f);}if(this._saveCustom){this._saveCustom(_c6b,_c6d);}if(!this._saveEverything&&!this._saveCustom){_c6b();}},revert:function(){this._assert(!this._saveInProgress);var _c70;for(_c70 in this._pending._modifiedItems){var _c71=this._pending._modifiedItems[_c70];var _c72=null;if(this._itemsByIdentity){_c72=this._itemsByIdentity[_c70];}else{_c72=this._arrayOfAllItems[_c70];}_c71[this._storeRefPropName]=this;for(var key in _c72){delete _c72[key];}lang.mixin(_c72,_c71);}var _c73;for(_c70 in this._pending._deletedItems){_c73=this._pending._deletedItems[_c70];_c73[this._storeRefPropName]=this;var _c74=_c73[this._itemNumPropName];if(_c73["backup_"+this._reverseRefMap]){_c73[this._reverseRefMap]=_c73["backup_"+this._reverseRefMap];delete _c73["backup_"+this._reverseRefMap];}this._arrayOfAllItems[_c74]=_c73;if(this._itemsByIdentity){this._itemsByIdentity[_c70]=_c73;}if(_c73[this._rootItemPropName]){this._arrayOfTopLevelItems.push(_c73);}}for(_c70 in this._pending._deletedItems){_c73=this._pending._deletedItems[_c70];if(_c73["backupRefs_"+this._reverseRefMap]){_c1f.forEach(_c73["backupRefs_"+this._reverseRefMap],function(_c75){var _c76;if(this._itemsByIdentity){_c76=this._itemsByIdentity[_c75.id];}else{_c76=this._arrayOfAllItems[_c75.id];}this._addReferenceToMap(_c76,_c73,_c75.attr);},this);delete _c73["backupRefs_"+this._reverseRefMap];}}for(_c70 in this._pending._newItems){var _c77=this._pending._newItems[_c70];_c77[this._storeRefPropName]=null;this._arrayOfAllItems[_c77[this._itemNumPropName]]=null;if(_c77[this._rootItemPropName]){this._removeArrayElement(this._arrayOfTopLevelItems,_c77);}if(this._itemsByIdentity){delete this._itemsByIdentity[_c70];}}this._pending={_newItems:{},_modifiedItems:{},_deletedItems:{}};return true;},isDirty:function(item){if(item){var _c78=this.getIdentity(item);return new Boolean(this._pending._newItems[_c78]||this._pending._modifiedItems[_c78]||this._pending._deletedItems[_c78]).valueOf();}else{return !this._isEmpty(this._pending._newItems)||!this._isEmpty(this._pending._modifiedItems)||!this._isEmpty(this._pending._deletedItems);}},onSet:function(item,_c79,_c7a,_c7b){},onNew:function(_c7c,_c7d){},onDelete:function(_c7e){},close:function(_c7f){if(this.clearOnClose){if(!this.isDirty()){this.inherited(arguments);}else{throw new Error("dojo.data.ItemFileWriteStore: There are unsaved changes present in the store.  Please save or revert the changes before invoking close.");}}}});});},"dijit/layout/TabContainer":function(){define(["dojo/_base/lang","dojo/_base/declare","./_TabContainerBase","./TabController","./ScrollingTabController"],function(lang,_c80,_c81,_c82,_c83){return _c80("dijit.layout.TabContainer",_c81,{useMenu:true,useSlider:true,controllerWidget:"",_makeController:function(_c84){var cls=this.baseClass+"-tabs"+(this.doLayout?"":" dijitTabNoLayout"),_c82=typeof this.controllerWidget=="string"?lang.getObject(this.controllerWidget):this.controllerWidget;return new _c82({id:this.id+"_tablist",ownerDocument:this.ownerDocument,dir:this.dir,lang:this.lang,textDir:this.textDir,tabPosition:this.tabPosition,doLayout:this.doLayout,containerId:this.id,"class":cls,nested:this.nested,useMenu:this.useMenu,useSlider:this.useSlider,tabStripClass:this.tabStrip?this.baseClass+(this.tabStrip?"":"No")+"Strip":null},_c84);},postMixInProperties:function(){this.inherited(arguments);if(!this.controllerWidget){this.controllerWidget=(this.tabPosition=="top"||this.tabPosition=="bottom")&&!this.nested?_c83:_c82;}}});});},"dijit/_base":function(){define(["./main","./a11y","./WidgetSet","./_base/focus","./_base/manager","./_base/place","./_base/popup","./_base/scroll","./_base/sniff","./_base/typematic","./_base/wai","./_base/window"],function(_c85){return _c85._base;});},"dijit/form/_FormValueWidget":function(){define(["dojo/_base/declare","dojo/sniff","./_FormWidget","./_FormValueMixin"],function(_c86,has,_c87,_c88){return _c86("dijit.form._FormValueWidget",[_c87,_c88],{_layoutHackIE7:function(){if(has("ie")==7){var _c89=this.domNode;var _c8a=_c89.parentNode;var _c8b=_c89.firstChild||_c89;var _c8c=_c8b.style.filter;var _c8d=this;while(_c8a&&_c8a.clientHeight==0){(function ping(){var _c8e=_c8d.connect(_c8a,"onscroll",function(){_c8d.disconnect(_c8e);_c8b.style.filter=(new Date()).getMilliseconds();_c8d.defer(function(){_c8b.style.filter=_c8c;});});})();_c8a=_c8a.parentNode;}}}});});},"ttl/BaseWidgetAMD":function(){define(["dojo/_base/declare","dijit/_Widget","dijit/_TemplatedMixin","dijit/_WidgetsInTemplateMixin","dijit/_Container"],function(_c8f,_c90,_c91,_c92,_c93){return _c8f("ttl.BaseWidgetAMD",[_c90,_c91,_c92,_c93],{widgetsInTemplate:true,_lock:false,Lock_Code:function(){this._lock=true;},isLocked:function(){return this._lock;},UnLock_Code:function(){this._lock=false;},Lock_Code_Wait:function(){while(this._lock==true){ttl.utilities.sleepStupidly(1);}this._lock=true;},_ReturnFalse:function(){return false;}});});},"dijit/tree/_dndContainer":function(){define(["dojo/aspect","dojo/_base/declare","dojo/dom-class","dojo/_base/lang","dojo/on","dojo/touch"],function(_c94,_c95,_c96,lang,on,_c97){return _c95("dijit.tree._dndContainer",null,{constructor:function(tree,_c98){this.tree=tree;this.node=tree.domNode;lang.mixin(this,_c98);this.containerState="";_c96.add(this.node,"dojoDndContainer");this.events=[on(this.node,_c97.enter,lang.hitch(this,"onOverEvent")),on(this.node,_c97.leave,lang.hitch(this,"onOutEvent")),_c94.after(this.tree,"_onNodeMouseEnter",lang.hitch(this,"onMouseOver"),true),_c94.after(this.tree,"_onNodeMouseLeave",lang.hitch(this,"onMouseOut"),true),on(this.node,"dragstart, selectstart",function(evt){evt.preventDefault();})];},destroy:function(){var h;while(h=this.events.pop()){h.remove();}this.node=this.parent=null;},onMouseOver:function(_c99){this.current=_c99;},onMouseOut:function(){this.current=null;},_changeState:function(type,_c9a){var _c9b="dojoDnd"+type;var _c9c=type.toLowerCase()+"State";_c96.replace(this.node,_c9b+_c9a,_c9b+this[_c9c]);this[_c9c]=_c9a;},_addItemClass:function(node,type){_c96.add(node,"dojoDndItem"+type);},_removeItemClass:function(node,type){_c96.remove(node,"dojoDndItem"+type);},onOverEvent:function(){this._changeState("Container","Over");},onOutEvent:function(){this._changeState("Container","");}});});},"control/customer/user_reset_password":function(){define(["dojo/_base/declare","ttl/BaseWidgetAMD","dojo/text!../customer/templates/user_reset_password.html","dijit/layout/ContentPane","dojo/request","ttl/utilities2","dojo/_base/lang","dojo/topic","dojo/dom-class","dojo/dom-attr","dijit/form/ValidationTextBox","dojox/form/BusyButton","dojox/validate/regexp"],function(_c9d,_c9e,_c9f,_ca0,_ca1,_ca2,lang,_ca3,_ca4,_ca5){return _c9d("control.customer.user_reset_password",[_c9e,_ca0],{templateString:_c9f,gutters:false,constructor:function(){this._show_func=null;this._save_call_back=lang.hitch(this,this._save_call);},load:function(_ca6,name,_ca7){this._show_func=_ca7;this.clear();this.iuserid.set("value",_ca6);_ca5.set(this.display_details,"innerHTML",name);},_update_user_password:function(){if(_ca2.form_validator(this.form)==false){alert("Not all required fields filled in");throw "N";}if(confirm("Re-set password")){_ca1.post("/customer/user/update_password",_ca2.make_params({data:this.form.get("value")})).then(this._save_call_back);}},_save_call:function(_ca8){if(_ca8.success=="OK"){this._show_func("upd_password_close");}else{alert("Problem");}this.update_ctrl_btn.cancel();},clear:function(){this.iuserid.set("value","");this.password.set("value","");_ca5.set(this.display_details,"innerHTML","");this.update_ctrl_btn.cancel();}});});},"control/customer/order_confirmation":function(){define(["dojo/_base/declare","ttl/BaseWidgetAMD","dojo/text!../customer/templates/order_confirmation.html","dijit/layout/BorderContainer","dojo/request","ttl/utilities2","dojo/_base/lang","dojo/topic","dojo/dom-class","dojo/dom-attr","dojo/data/ItemFileWriteStore","dojo/data/ItemFileReadStore","ttl/grid/Grid","ttl/store/JsonRest","dojo/store/Observable","dijit/layout/ContentPane","dijit/form/TextBox","dijit/form/Form","dijit/form/NumberTextBox","dijit/form/FilteringSelect","dijit/form/ValidationTextBox","dijit/form/Textarea","dijit/form/CurrencyTextBox","dijit/form/DateTextBox","dijit/form/Button","dijit/form/CheckBox","control/customer/upgrade_order_confirmation"],function(_ca9,_caa,_cab,_cac,_cad,_cae,lang,_caf,_cb0,_cb1,_cb2,_cb3,Grid,_cb4,_cb5){return _ca9("control.customer.order_confirmation",[_caa],{templateString:_cab,gutters:false,constructor:function(){this._SendConfirmationCallBack=lang.hitch(this,this._SendConfirmationCall);this._pricecodes_core=new _cb3({url:"/common/lookups?searchtype=pricecodes&type=core"});this._pricecodes_adv=new _cb3({url:"/common/lookups?searchtype=pricecodes&type=adv"});this._pricecodes_updatum=new _cb3({url:"/common/lookups?searchtype=pricecodes&type=updatum"});this._pricecodes_int=new _cb3({url:"/common/lookups?searchtype=pricecodes&type=int"});this._userfilter=new _cb3({url:"/common/lookups?searchtype=users&group=accounts,sales"});this._TaskCallBack=lang.hitch(this,this._TaskCall);this._SendConifirmationCallBack=lang.hitch(this,this._SendConifirmationCall);this._SaveCallBack=lang.hitch(this,this._SaveCall);this._pmnodd=new _cb3({url:"/common/lookups?searchtype=orderpaymentmethods"});},postCreate:function(){this._get_prices_call_back_1=lang.hitch(this,this._get_prices_call,this.months_paid);this._get_prices_call_back_2=lang.hitch(this,this._get_prices_call,this.adv_months_paid);this._get_prices_call_back_3=lang.hitch(this,this._get_prices_call,this.updatum_months_paid);this.pricecodeid.set("store",this._pricecodes_core);this.pricecoderenewalid.set("store",this._pricecodes_core);this.advpricecodeid.set("store",this._pricecodes_adv);this.advpricecoderenewalid.set("store",this._pricecodes_adv);this.updatumpricecoderenewalid.set("store",this._pricecodes_updatum);this.updatumpricecodeid.set("store",this._pricecodes_updatum);this.intpricecodeid.set("store",this._pricecodes_int);this.intpricecoderenewalid.set("store",this._pricecodes_int);this.assigntoid.set("store",this._userfilter);this.orderpaymentmethodid.set("store",this._pmnodd);this.orderpaymentmethodid.set("value",1);this.pricecodeid.set("value",1);this.pricecoderenewalid.set("value",1);this.advpricecodeid.set("value",2);this.advpricecoderenewalid.set("value",2);this.updatumpricecoderenewalid.set("value",3);this.updatumpricecodeid.set("value",3);this.intpricecoderenewalid.set("value",19);this.intpricecodeid.set("value",19);this.inherited(arguments);},_SendConifirmationCall:function(_cb6){if(_cb6.success=="OK"){alert("Order Confirmation");this._dialog.hide();_caf.publish(PRCOMMON.Events.Task_Refresh,null);}else{alert("Problem Sending Order Confirmation");}},_Validate:function(){if(_cae.form_validator(this.form)==false){alert("Please Enter Details");return null;}if(this.updatum.get("checked")){if(this.updatum_start_date.get("value")==null){alert("Monitoring Need Start Date");}}var _cb7=this.form.get("value");_cb7["licence_start_date"]=_cae.to_json_date(this.licence_start_date.get("value"));_cb7["advance_licence_start"]=_cae.to_json_date(this.advance_licence_start.get("value"));_cb7["updatum_start_date"]=_cae.to_json_date(this.updatum_start_date.get("value"));_cb7["icustomerid"]=this._customerid;return _cb7;},_Send:function(){var _cb8=this._Validate();if(_cb8==null){return;}_cad.post("/orderconfirmation/order_confirmation_send",_cae.make_params({data:_cb8})).then(this._SendConifirmationCallBack);},_SaveCall:function(_cb9){if(_cb9.success=="OK"){alert("Order Confirmation");}else{alert("Problem Sending Order Confirmation");}},_Save:function(){var _cba=this._Validate();if(_cba==null){return;}_cba["saveonly"]="on";_cad.post("/orderconfirmation/order_confirmation_send_save",_cae.make_params({data:_cba})).then(this._SaveCallBack);},_TaskCall:function(_cbb){if(_cbb.success=="OK"){this.assigntoid.set("disabled",false);this.assigntoid.set("value",_cbb.task.userid);dojo.removeClass(this.owner_view,"prmaxhidden");}else{alert("Problem");}},setCustomer:function(_cbc,_cbd,cust,_cbe){this._customerid=_cbc;_cb1.set(this.customername,"innerHTML",cust.customername);this.taskid.set("value",_cbe);if(_cbe!=null){this.assigntoid.set("disabled",false);_cad.post("/customer/task_get",_cae.make_params({data:{taskid:_cbe}})).then(this._TaskCallBack);}else{this.assigntoid.set("disabled",true);_cb0.add(this.owner_view,"prmaxhidden");this.taskid.set("value",-1);}this.email.set("value",cust.email);this._dialog=_cbd;this._Clear();this._PriceChange();this.advancefeatures.set("checked",cust.advancefeatures);this._ShowHideAdvance(cust.advancefeatures);this.updatum.set("checked",cust.updatum);this.has_international_data.set("value",cust.has_international_data);this._ShowHideUpdatum(cust.updatum);this._Show_Hide_DD(cust.advancefeatures,cust.updatum,cust.has_international_data,cust.orderpaymentmethodid);var _cbf=new Date();this.licence_start_date.set("value",_cbf);this.advance_licence_start.set("value",_cbf);this.updatum_start_date.set("value",_cbf);this.orderedby.set("value",cust.orderedby);this.order_confirmation_message.set("value",cust.order_confirmation_message);this.orderpaymentmethodid.set("value",cust.orderpaymentmethodid);this.orderpaymentfreqid.set("value",cust.orderpaymentfreqid);this._ProductTypeSetting(cust.customertypeid);this.months_free.set("value",cust.months_free);this.months_paid.set("value",cust.months_paid);this.adv_months_free.set("value",cust.adv_months_free);this.adv_months_paid.set("value",cust.adv_months_paid);this.updatum_months_free.set("value",cust.updatum_months_free);this.updatum_months_paid.set("value",cust.updatum_months_paid);this.has_bundled_invoice.set("checked",cust.has_bundled_invoice);},_Clear:function(){this.order_confirmation_message.set("value","");this.months_free.set("value",0);this.months_paid.set("value",12);this.adv_months_free.set("value",0);this.adv_months_paid.set("value",12);this.updatum_months_free.set("value",0);this.updatum_months_paid.set("value",12);this.orderpaymentfreqid.set("value",1);this.logins.set("value",1);},_Preview:function(){_cb1.set(this.icustomerid,"value",this._customerid);this.previewform.submit();},_Advance:function(){this._ShowHideAdvance(this.advancefeatures.get("checked"));},_international:function(){this._show_hide_international(this.has_international_data.get("checked"));},_show_hide_international:function(_cc0){if(_cc0){var _cc1=this.orderpaymentmethodid.get("value");_cb0.remove(this.int_view_1,"prmaxhidden");_cb0.remove(this.int_view_2,"prmaxhidden");_cb0.remove(this.int_view_3,"prmaxhidden");_cb0.remove(this.int_view_4,"prmaxhidden");_cb0.remove(this.int_view_5,"prmaxhidden");_cb0.remove(this.int_view_6,"prmaxhidden");}else{_cb0.add(this.int_view_1,"prmaxhidden");_cb0.add(this.int_view_2,"prmaxhidden");_cb0.add(this.int_view_3,"prmaxhidden");_cb0.add(this.int_view_4,"prmaxhidden");_cb0.add(this.int_view_5,"prmaxhidden");_cb0.add(this.int_view_6,"prmaxhidden");}},_ShowHideAdvance:function(_cc2){if(_cc2){var _cc3=this.orderpaymentmethodid.get("value");_cb0.remove(this.features_view_1,"prmaxhidden");_cb0.remove(this.features_view_2,"prmaxhidden");_cb0.remove(this.features_view_3,"prmaxhidden");_cb0.remove(this.features_view_4,"prmaxhidden");_cb0.remove(this.features_view_5,"prmaxhidden");_cb0.remove(this.features_view_6,"prmaxhidden");this.advpricecoderenewalid.set("required",true);this.advpricecodeid.set("required",true);}else{_cb0.add(this.features_view_1,"prmaxhidden");_cb0.add(this.features_view_2,"prmaxhidden");_cb0.add(this.features_view_3,"prmaxhidden");_cb0.add(this.features_view_4,"prmaxhidden");_cb0.add(this.features_view_5,"prmaxhidden");_cb0.add(this.features_view_6,"prmaxhidden");this.advpricecoderenewalid.set("required",false);this.advpricecodeid.set("required",false);}},_Updatum:function(){this._ShowHideUpdatum(this.updatum.get("checked"));},_ShowHideUpdatum:function(_cc4){if(_cc4){var _cc5=this.orderpaymentmethodid.get("value");_cb0.remove(this.updatum_view_1,"prmaxhidden");_cb0.remove(this.updatum_view_2,"prmaxhidden");_cb0.remove(this.view_monitoring,"prmaxhidden");_cb0.remove(this.updatum_view_4,"prmaxhidden");_cb0.remove(this.updatum_view_5,"prmaxhidden");_cb0.remove(this.updatum_view_6,"prmaxhidden");this.updatumpricecoderenewalid.set("required",true);this.updatumpricecodeid.set("required",true);}else{_cb0.add(this.updatum_view_1,"prmaxhidden");_cb0.add(this.updatum_view_2,"prmaxhidden");_cb0.add(this.updatum_view_3,"prmaxhidden");_cb0.add(this.updatum_view_4,"prmaxhidden");_cb0.add(this.updatum_view_5,"prmaxhidden");_cb0.add(this.updatum_view_6,"prmaxhidden");_cb0.add(this.view_monitoring,"prmaxhidden");this.updatumpricecoderenewalid.set("required",false);this.updatumpricecodeid.set("required",false);}},_ChangePayment:function(){this._Show_Hide_DD(this.advancefeatures.get("checked"),this.updatum.get("checked"),this.orderpaymentmethodid.get("value"),this.has_international_data.get("value"));},_Show_Hide_DD:function(_cc6,_cc7,_cc8,_cc9){switch(parseInt(_cc9)){case 4:case 5:case 6:_cb0.add(this.view_dd_1,"prmaxhidden");_cb0.add(this.view_dd_4,"prmaxhidden");if(!_cc6){_cb0.add(this.features_view_2,"prmaxhidden");}_cb0.add(this.features_view_3,"prmaxhidden");if(!_cc7){_cb0.add(this.updatum_view_2,"prmaxhidden");}if(!_cc8){_cb0.add(this.int_view_2,"prmaxhidden");}_cb0.add(this.updatum_view_3,"prmaxhidden");break;default:_cb0.remove(this.view_dd_1,"prmaxhidden");_cb0.remove(this.view_dd_2,"prmaxhidden");_cb0.remove(this.view_dd_3,"prmaxhidden");_cb0.remove(this.view_dd_4,"prmaxhidden");if(_cc6){_cb0.remove(this.features_view_2,"prmaxhidden");_cb0.remove(this.features_view_3,"prmaxhidden");}else{_cb0.add(this.features_view_2,"prmaxhidden");_cb0.add(this.features_view_3,"prmaxhidden");}if(_cc7){_cb0.remove(this.updatum_view_2,"prmaxhidden");_cb0.remove(this.updatum_view_3,"prmaxhidden");}else{_cb0.add(this.updatum_view_2,"prmaxhidden");_cb0.add(this.updatum_view_3,"prmaxhidden");}if(_cc8){_cb0.remove(this.int_view_2,"prmaxhidden");_cb0.remove(this.int_view_3,"prmaxhidden");}else{_cb0.add(this.int_view_2,"prmaxhidden");_cb0.add(this.int_view_3,"prmaxhidden");}break;}},_get_prices_call:function(_cca,_ccb){if(_ccb.success=="OK"){this.cost.set("value",dojo.number.format(_ccb.cost.media/100,{places:2}));this.advcost.set("value",dojo.number.format(_ccb.cost.advance/100,{places:2}));this.updatumcost.set("value",dojo.number.format(_ccb.cost.updatum/100,{places:2}));this.internationalcost.set("value","0.00");}},_PriceChange1:function(){this._PriceChange(this._get_prices_call_back_1);},_PriceChange2:function(){this._PriceChange(this._get_prices_call_back_2);},_PriceChange3:function(){this._PriceChange(this._get_prices_call_back_3);},_PriceChange:function(_ccc){_cad.post("/payment/prices_get",_cae.make_params({data:this.form.get("value")})).then(this.call_back);},_ProductTypeSetting:function(_ccd){if(_ccd==1||_ccd==20){this.emailtocustomer.set("checked",true);this.emailtocustomer.set("disabled",false);this.confirmation_accepted.set("checked",true);this.confirmation_accepted.set("disabled",false);}else{this.emailtocustomer.set("checked",false);this.emailtocustomer.set("disabled",true);this.confirmation_accepted.set("checked",false);this.confirmation_accepted.set("disabled",true);}}});});},"dojo/data/util/simpleFetch":function(){define(["../../_base/lang","../../_base/kernel","./sorter"],function(lang,_cce,_ccf){var _cd0={};lang.setObject("dojo.data.util.simpleFetch",_cd0);_cd0.errorHandler=function(_cd1,_cd2){if(_cd2.onError){var _cd3=_cd2.scope||_cce.global;_cd2.onError.call(_cd3,_cd1,_cd2);}};_cd0.fetchHandler=function(_cd4,_cd5){var _cd6=_cd5.abort||null,_cd7=false,_cd8=_cd5.start?_cd5.start:0,_cd9=(_cd5.count&&(_cd5.count!==Infinity))?(_cd8+_cd5.count):_cd4.length;_cd5.abort=function(){_cd7=true;if(_cd6){_cd6.call(_cd5);}};var _cda=_cd5.scope||_cce.global;if(!_cd5.store){_cd5.store=this;}if(_cd5.onBegin){_cd5.onBegin.call(_cda,_cd4.length,_cd5);}if(_cd5.sort){_cd4.sort(_ccf.createSortFunction(_cd5.sort,this));}if(_cd5.onItem){for(var i=_cd8;(i<_cd4.length)&&(i<_cd9);++i){var item=_cd4[i];if(!_cd7){_cd5.onItem.call(_cda,item,_cd5);}}}if(_cd5.onComplete&&!_cd7){var _cdb=null;if(!_cd5.onItem){_cdb=_cd4.slice(_cd8,_cd9);}_cd5.onComplete.call(_cda,_cdb,_cd5);}};_cd0.fetch=function(_cdc){_cdc=_cdc||{};if(!_cdc.store){_cdc.store=this;}this._fetchItems(_cdc,lang.hitch(this,"fetchHandler"),lang.hitch(this,"errorHandler"));return _cdc;};return _cd0;});},"ttl/store/TtlQueryResults":function(){define([],function(){var _cdd=function(_cde){return _cde;};return _cdd;});},"dijit/_CssStateMixin":function(){define(["dojo/_base/array","dojo/_base/declare","dojo/dom","dojo/dom-class","dojo/has","dojo/_base/lang","dojo/on","dojo/domReady","dojo/touch","dojo/_base/window","./a11yclick","./registry"],function(_cdf,_ce0,dom,_ce1,has,lang,on,_ce2,_ce3,win,_ce4,_ce5){var _ce6=_ce0("dijit._CssStateMixin",[],{hovering:false,active:false,_applyAttributes:function(){this.inherited(arguments);_cdf.forEach(["disabled","readOnly","checked","selected","focused","state","hovering","active","_opened"],function(attr){this.watch(attr,lang.hitch(this,"_setStateClass"));},this);for(var ap in this.cssStateNodes||{}){this._trackMouseState(this[ap],this.cssStateNodes[ap]);}this._trackMouseState(this.domNode,this.baseClass);this._setStateClass();},_cssMouseEvent:function(_ce7){if(!this.disabled){switch(_ce7.type){case "mouseover":case "MSPointerOver":case "pointerover":this._set("hovering",true);this._set("active",this._mouseDown);break;case "mouseout":case "MSPointerOut":case "pointerout":this._set("hovering",false);this._set("active",false);break;case "mousedown":case "touchstart":case "MSPointerDown":case "pointerdown":case "keydown":this._set("active",true);break;case "mouseup":case "dojotouchend":case "MSPointerUp":case "pointerup":case "keyup":this._set("active",false);break;}}},_setStateClass:function(){var _ce8=this.baseClass.split(" ");function _ce9(_cea){_ce8=_ce8.concat(_cdf.map(_ce8,function(c){return c+_cea;}),"dijit"+_cea);};if(!this.isLeftToRight()){_ce9("Rtl");}var _ceb=this.checked=="mixed"?"Mixed":(this.checked?"Checked":"");if(this.checked){_ce9(_ceb);}if(this.state){_ce9(this.state);}if(this.selected){_ce9("Selected");}if(this._opened){_ce9("Opened");}if(this.disabled){_ce9("Disabled");}else{if(this.readOnly){_ce9("ReadOnly");}else{if(this.active){_ce9("Active");}else{if(this.hovering){_ce9("Hover");}}}}if(this.focused){_ce9("Focused");}var tn=this.stateNode||this.domNode,_cec={};_cdf.forEach(tn.className.split(" "),function(c){_cec[c]=true;});if("_stateClasses" in this){_cdf.forEach(this._stateClasses,function(c){delete _cec[c];});}_cdf.forEach(_ce8,function(c){_cec[c]=true;});var _ced=[];for(var c in _cec){_ced.push(c);}tn.className=_ced.join(" ");this._stateClasses=_ce8;},_subnodeCssMouseEvent:function(node,_cee,evt){if(this.disabled||this.readOnly){return;}function _cef(_cf0){_ce1.toggle(node,_cee+"Hover",_cf0);};function _cf1(_cf2){_ce1.toggle(node,_cee+"Active",_cf2);};function _cf3(_cf4){_ce1.toggle(node,_cee+"Focused",_cf4);};switch(evt.type){case "mouseover":case "MSPointerOver":case "pointerover":_cef(true);break;case "mouseout":case "MSPointerOut":case "pointerout":_cef(false);_cf1(false);break;case "mousedown":case "touchstart":case "MSPointerDown":case "pointerdown":case "keydown":_cf1(true);break;case "mouseup":case "MSPointerUp":case "pointerup":case "dojotouchend":case "keyup":_cf1(false);break;case "focus":case "focusin":_cf3(true);break;case "blur":case "focusout":_cf3(false);break;}},_trackMouseState:function(node,_cf5){node._cssState=_cf5;}});_ce2(function(){function _cf6(evt,_cf7,_cf8){if(_cf8&&dom.isDescendant(_cf8,_cf7)){return;}for(var node=_cf7;node&&node!=_cf8;node=node.parentNode){if(node._cssState){var _cf9=_ce5.getEnclosingWidget(node);if(_cf9){if(node==_cf9.domNode){_cf9._cssMouseEvent(evt);}else{_cf9._subnodeCssMouseEvent(node,node._cssState,evt);}}}}};var body=win.body(),_cfa;on(body,_ce3.over,function(evt){_cf6(evt,evt.target,evt.relatedTarget);});on(body,_ce3.out,function(evt){_cf6(evt,evt.target,evt.relatedTarget);});on(body,_ce4.press,function(evt){_cfa=evt.target;_cf6(evt,_cfa);});on(body,_ce4.release,function(evt){_cf6(evt,_cfa);_cfa=null;});on(body,"focusin, focusout",function(evt){var node=evt.target;if(node._cssState&&!node.getAttribute("widgetId")){var _cfb=_ce5.getEnclosingWidget(node);if(_cfb){_cfb._subnodeCssMouseEvent(node,node._cssState,evt);}}});});return _ce6;});},"dgrid/TouchScroll":function(){define(["dojo/_base/declare","dojo/on","./util/touch","./util/has-css3","put-selector/put","xstyle/css!./css/TouchScroll.css"],function(_cfc,on,_cfd,has,put){var _cfe=50,_cff=30,_d00={},_d01={},_d02=1,_d03=8,_d04=/^translate(?:3d)?\((-?\d+)(?:\.\d*)?(?:px)?, (-?\d+)/,_d05=/^matrix\(1, 0, 0, 1, (-?\d+)(?:\.\d*)?(?:px)?, (-?\d+)/,_d06=has("css-transitions"),_d07=has("transitionend"),_d08=has("css-transforms"),_d09=has("css-transforms3d"),_d0a,_d0b,_d0c,_d0d,_d0e;if(_d09){_d0d="translate3d(";_d0e=",0)";}else{if(_d08){_d0d="translate(";_d0e=")";}}if(!_d06||!_d0d){return function(){};}_d0c=_d09||_d08;_d0c=_d0c===true?"transform":_d0c+"Transform";_d0b=_d06===true?"transition":_d06+"Transition";_d0a=_d08===true?"":"-"+_d08.toLowerCase()+"-";function _d0f(_d10,curr){var node=_d10.touchNode,_d11=node.parentNode,_d12=_d11.offsetWidth-_d03,_d13=_d11.offsetHeight-_d03,_d14=curr.scrollWidth=node.scrollWidth,_d15=curr.scrollHeight=node.scrollHeight,_d16=curr.parentWidth=_d11.offsetWidth,_d17=curr.parentHeight=_d11.offsetHeight,_d18;if(_d14>_d16){if(!_d10._scrollbarXNode){_d18=put(_d11,"div.touchscroll-x");}_d18=_d10._scrollbarXNode=_d10._scrollbarXNode||put(_d18,"div.touchscroll-bar");_d18.style.width=_d12*_d12/_d14+"px";_d18.style.left=node.offsetLeft+"px";put(_d11,".touchscroll-scrollable-x");curr.scrollableX=true;}else{put(_d11,"!touchscroll-scrollable-x");}if(_d15>_d17){if(!_d10._scrollbarYNode){_d18=put(_d11,"div.touchscroll-y");}_d18=_d10._scrollbarYNode=_d10._scrollbarYNode||put(_d18,"div.touchscroll-bar");_d18.style.height=_d13*_d13/_d15+"px";_d18.style.top=node.offsetTop+"px";put(_d11,".touchscroll-scrollable-y");curr.scrollableY=true;}else{put(_d11,"!touchscroll-scrollable-y");}put(_d11,"!touchscroll-fadeout");};function _d19(_d1a,_d1b){var node=_d1a.touchNode,curr=_d00[_d1a.id],pos,hasX,hasY,x,y;if(typeof _d1b!=="object"){x=_d1b;y=arguments[2];_d1b=arguments[3];hasX=hasY=true;}else{hasX="x" in _d1b;hasY="y" in _d1b;if(!hasX||!hasY){pos=_d1a.getScrollPosition();}x=hasX?_d1b.x:pos.x;y=hasY?_d1b.y:pos.y;}node.style[_d0c]=_d0d+-x+"px,"+-y+"px"+_d0e;if(curr&&hasX&&_d1a._scrollbarXNode){_d1a._scrollbarXNode.style[_d0c]=_d0d+(x*curr.parentWidth/curr.scrollWidth)+"px,0"+_d0e;}if(curr&&hasY&&_d1a._scrollbarYNode){_d1a._scrollbarYNode.style[_d0c]=_d0d+"0,"+(y*curr.parentHeight/curr.scrollHeight)+"px"+_d0e;}on.emit(_d1a.touchNode.parentNode,"scroll",{scrollLeft:x,scrollTop:y});};function _d1c(_d1d){if(_d00[_d1d.id]){return _d05.exec(window.getComputedStyle(_d1d.touchNode)[_d0c]);}return _d04.exec(_d1d.touchNode.style[_d0c]);};function _d1e(_d1f){var _d20=this.widget,_d21=[this.node,_d20._scrollbarXNode,_d20._scrollbarYNode],i=_d21.length;if(this.timer){clearTimeout(this.timer);this.timer=null;}if(this.transitionHandler){this.transitionHandler.remove();}while(i--){if(_d21[i]){_d21[i].style[_d0b+"Duration"]="0";}}if(!_d1f||!_d1f.preserveScrollbars){put(this.node.parentNode,".touchscroll-fadeout");}delete this.resetEffects;};function _d22(evt){var _d23=evt.widget,node=_d23.touchNode,id=_d23.id,posX=0,posY=0,_d24,_d25,curr;if(_cfd.countCurrentTouches(evt,node)!==_d23.touchesToScroll){return;}_d25=_d1c(_d23);if(_d25){posX=+_d25[1];posY=+_d25[2];}if((curr=_d00[id])){if(curr.resetEffects){curr.resetEffects({preserveScrollbars:true});}node.style[_d0c]=_d0d+posX+"px,"+posY+"px"+_d0e;_d01[id]=curr;}_d24=evt.targetTouches[0];curr=_d00[id]={widget:_d23,node:node,startX:posX-_d24.pageX,startY:posY-_d24.pageY,lastX:posX,lastY:posY,pageX:_d24.pageX,pageY:_d24.pageY,tickFunc:function(){_d26(id);}};curr.timer=setTimeout(curr.tickFunc,_cfe);};function _d27(evt){var _d28=evt.widget,id=_d28.id,_d29=_d28.touchesToScroll,curr=_d00[id],_d2a,_d2b,_d2c,nx,ny,minX,minY,i;if(!curr||(_d2a=_cfd.countCurrentTouches(evt,_d28.touchNode))!==_d29){if(_d2a>_d29){_d28.cancelTouchScroll();}return;}_d2b=evt.targetTouches;_d2c=_d2b[0];if(!curr.scrollbarsShown){if(_d01[id]||(Math.abs(_d2c.pageX-curr.pageX)>_d28.scrollThreshold||Math.abs(_d2c.pageY-curr.pageY)>_d28.scrollThreshold)){_d0f(_d28,curr);curr.scrollbarsShown=true;for(i=_d2b.length;i--;){_d2b[i].touchScrolled=true;}}}if(curr.scrollbarsShown&&(curr.scrollableX||curr.scrollableY)){evt.preventDefault();nx=curr.scrollableX?curr.startX+_d2c.pageX:0;ny=curr.scrollableY?curr.startY+_d2c.pageY:0;minX=curr.scrollableX?-(curr.scrollWidth-curr.parentWidth):0;minY=curr.scrollableY?-(curr.scrollHeight-curr.parentHeight):0;if(nx>0){nx=nx/2;}else{if(nx<minX){nx=minX-(minX-nx)/2;}}if(ny>0){ny=ny/2;}else{if(ny<minY){ny=minY-(minY-ny)/2;}}_d19(_d28,-nx,-ny);}};function _d2d(evt){var _d2e=evt.widget,id=_d2e.id,curr=_d00[id];if(!curr||_cfd.countCurrentTouches(evt,_d2e.touchNode)!=_d2e.touchesToScroll-1){return;}_d2f(id);};function _d26(id){var curr=_d00[id],node,_d30,x,y;if(!curr){return;}node=curr.node;_d30=_d04.exec(node.style[_d0c]);if(_d30){x=+_d30[1];y=+_d30[2];curr.velX=x-curr.lastX;curr.velY=y-curr.lastY;curr.lastX=x;curr.lastY=y;}else{curr.lastX=curr.lastY=0;}curr.timer=setTimeout(curr.tickFunc,_cfe);};function _d31(id,_d32,_d33){var curr=_d00[id],_d34=curr.widget,node=curr.node,_d35,x=curr.scrollableX?Math.max(Math.min(0,_d32),-(curr.scrollWidth-curr.parentWidth)):_d32,y=curr.scrollableY?Math.max(Math.min(0,_d33),-(curr.scrollHeight-curr.parentHeight)):_d33;function end(){delete curr.transitionHandler;curr.resetEffects();delete _d00[id];};delete curr.timer;if(x!=_d32||y!=_d33){curr.transitionHandler=on.once(node,_d07,end);node.style[_d0b+"Duration"]=_d34.bounceDuration+"ms";node.style[_d0c]=_d0d+x+"px,"+y+"px"+_d0e;if(x!=_d32&&curr.scrollableX){_d35=curr.widget._scrollbarXNode;_d35.style[_d0b+"Duration"]=_d34.bounceDuration+"ms";if(_d32>x){_d35.style[_d0c]=_d0d+"0,0"+_d0e;}else{_d35.style[_d0c]=_d0d+(_d35.parentNode.offsetWidth-_d35.offsetWidth)+"px,0"+_d0e;}}if(y!=_d33&&curr.scrollableY){_d35=curr.widget._scrollbarYNode;_d35.style[_d0b+"Duration"]=_d34.bounceDuration+"ms";if(_d33>y){_d35.style[_d0c]=_d0d+"0,0"+_d0e;}else{_d35.style[_d0c]=_d0d+"0,"+(_d35.parentNode.offsetHeight-_d35.offsetHeight)+"px"+_d0e;}}}else{end();}};function _d2f(id){var curr=_d00[id],prev=_d01[id],_d36,posX,posY,_d37=1.15;delete _d01[id];if(curr.timer){clearTimeout(curr.timer);}curr.resetEffects=_d1e;_d36=_d04.exec(curr.node.style[_d0c]);if(_d36){posX=+_d36[1];posY=+_d36[2];}else{posX=posY=0;}if((!curr.velX&&!curr.velY)||((posX>=0||posX<=-(curr.scrollWidth-curr.parentWidth))&&(posY>=0||posY<=-(curr.scrollHeight-curr.parentHeight)))){_d31(id,posX,posY);return;}function _d38(a,b){return ((a.velX<=0&&b.velX<=0)||(a.velX>=0&&b.velX>=0))&&((a.velY<=0&&b.velY<=0)||(a.velY>=0&&b.velY>=0));};if(prev&&(prev.velX||prev.velY)&&_d38(curr,prev)){curr.velX=(curr.velX+prev.velX)*_d37;curr.velY=(curr.velY+prev.velY)*_d37;}curr.lastX=posX;curr.lastY=posY;curr.calcFunc=function(){_d39(id);};curr.timer=setTimeout(curr.calcFunc,_cff);};function _d39(id){var curr=_d00[id],node,_d3a,_d3b,i,nx,ny,nvx,nvy,_d3c=6;if(!curr){return;}node=curr.node;_d3a=node.parentNode;_d3b=curr.widget;nvx=_d3b.glideDecel(curr.velX);nvy=_d3b.glideDecel(curr.velY);if(Math.abs(nvx)>=_d02||Math.abs(nvy)>=_d02){nx=curr.lastX+nvx;ny=curr.lastY+nvy;if(nx>0||nx<-(curr.scrollWidth-curr.parentWidth)){for(i=_d3c;i--;){nvx=_d3b.glideDecel(nvx);}}if(ny>0||ny<-(curr.scrollHeight-curr.parentHeight)){for(i=_d3c;i--;){nvy=_d3b.glideDecel(nvy);}}_d19(_d3b,-nx,-ny);curr.lastX=nx;curr.lastY=ny;curr.velX=nvx;curr.velY=nvy;curr.timer=setTimeout(curr.calcFunc,_cff);}else{_d31(id,curr.lastX,curr.lastY);}};return _cfc(null,{touchesToScroll:1,touchNode:null,scrollThreshold:10,bounceDuration:300,postCreate:function(){this._initTouch();this.inherited(arguments);},_initTouch:function(){var node=this.touchNode=this.touchNode||this.containerNode,_d3d=this,_d3e;if(!node||!node.parentNode){return;}_d3e=node.parentNode;_d3e.style.overflow="hidden";node.style[_d0b+"Property"]=_d0a+"transform";node.style[_d0b+"TimingFunction"]="cubic-bezier(0.33, 0.66, 0.66, 1)";function _d3f(){_d3d.cancelTouchScroll();};function _d40(func){return function(evt){evt.widget=_d3d;evt.cancelTouchScroll=_d3f;func.call(this,evt);};};this._touchScrollListeners=[on(_d3e,"touchstart",_d40(_d22)),on(_d3e,"touchmove",_d40(_d27)),on(_d3e,"touchend,touchcancel",_d40(_d2d))];},destroy:function(){var i=this._touchScrollListeners.length;while(i--){this._touchScrollListeners[i].remove();}delete _d00[this.id];this.inherited(arguments);},scrollTo:function(_d41){var curr=_d00[this.id],_d42=this.touchNode,_d43=_d42.parentNode;if(!_d41.preserveMomentum&&curr&&curr.resetEffects){curr.resetEffects();}if(_d41.x){_d41.x=Math.max(0,Math.min(_d41.x,_d42.scrollWidth-_d43.offsetWidth));}if(_d41.y){_d41.y=Math.max(0,Math.min(_d41.y,_d42.scrollHeight-_d43.offsetHeight));}_d19(this,_d41);},getScrollPosition:function(){var _d44=_d1c(this);return _d44?{x:-_d44[1],y:-_d44[2]}:{x:0,y:0};},cancelTouchScroll:function(){var curr=_d00[this.id];if(!curr){return;}if(curr.resetEffects){curr.resetEffects();}else{if(curr.timer){clearTimeout(curr.timer);}put(curr.node.parentNode,".touchscroll-fadeout");}delete _d00[this.id];},glideDecel:function(n){return n*0.9;}});});},"dijit/form/FilteringSelect":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/when","./MappedTextBox","./ComboBoxMixin"],function(_d45,lang,when,_d46,_d47){return _d45("dijit.form.FilteringSelect",[_d46,_d47],{required:true,_lastDisplayedValue:"",_isValidSubset:function(){return this._opened;},isValid:function(){return !!this.item||(!this.required&&this.get("displayedValue")=="");},_refreshState:function(){if(!this.searchTimer){this.inherited(arguments);}},_callbackSetLabel:function(_d48,_d49,_d4a,_d4b){if((_d49&&_d49[this.searchAttr]!==this._lastQuery)||(!_d49&&_d48.length&&this.store.getIdentity(_d48[0])!=this._lastQuery)){return;}if(!_d48.length){this.set("value","",_d4b||(_d4b===undefined&&!this.focused),this.textbox.value,null);}else{this.set("item",_d48[0],_d4b);}},_openResultList:function(_d4c,_d4d,_d4e){if(_d4d[this.searchAttr]!==this._lastQuery){return;}this.inherited(arguments);if(this.item===undefined){this.validate(true);}},_getValueAttr:function(){return this.valueNode.value;},_getValueField:function(){return "value";},_setValueAttr:function(_d4f,_d50,_d51,item){if(!this._onChangeActive){_d50=null;}if(item===undefined){if(_d4f===null||_d4f===""){_d4f="";if(!lang.isString(_d51)){this._setDisplayedValueAttr(_d51||"",_d50);return;}}var self=this;this._lastQuery=_d4f;when(this.store.get(_d4f),function(item){self._callbackSetLabel(item?[item]:[],undefined,undefined,_d50);});}else{this.valueNode.value=_d4f;this.inherited(arguments,[_d4f,_d50,_d51,item]);}},_setItemAttr:function(item,_d52,_d53){this.inherited(arguments);this._lastDisplayedValue=this.textbox.value;},_getDisplayQueryString:function(text){return text.replace(/([\\\*\?])/g,"\\$1");},_setDisplayedValueAttr:function(_d54,_d55){if(_d54==null){_d54="";}if(!this._created){if(!("displayedValue" in this.params)){return;}_d55=false;}if(this.store){this.closeDropDown();var _d56=lang.clone(this.query);var qs=this._getDisplayQueryString(_d54),q;if(this.store._oldAPI){q=qs;}else{q=this._patternToRegExp(qs);q.toString=function(){return qs;};}this._lastQuery=_d56[this.searchAttr]=q;this.textbox.value=_d54;this._lastDisplayedValue=_d54;this._set("displayedValue",_d54);var _d57=this;var _d58={queryOptions:{ignoreCase:this.ignoreCase,deep:true}};lang.mixin(_d58,this.fetchProperties);this._fetchHandle=this.store.query(_d56,_d58);when(this._fetchHandle,function(_d59){_d57._fetchHandle=null;_d57._callbackSetLabel(_d59||[],_d56,_d58,_d55);},function(err){_d57._fetchHandle=null;if(!_d57._cancelingQuery){}});}},undo:function(){this.set("displayedValue",this._lastDisplayedValue);}});});},"dojo/cookie":function(){define(["./_base/kernel","./regexp"],function(dojo,_d5a){dojo.cookie=function(name,_d5b,_d5c){var c=document.cookie,ret;if(arguments.length==1){var _d5d=c.match(new RegExp("(?:^|; )"+_d5a.escapeString(name)+"=([^;]*)"));ret=_d5d?decodeURIComponent(_d5d[1]):undefined;}else{_d5c=_d5c||{};var exp=_d5c.expires;if(typeof exp=="number"){var d=new Date();d.setTime(d.getTime()+exp*24*60*60*1000);exp=_d5c.expires=d;}if(exp&&exp.toUTCString){_d5c.expires=exp.toUTCString();}_d5b=encodeURIComponent(_d5b);var _d5e=name+"="+_d5b,_d5f;for(_d5f in _d5c){_d5e+="; "+_d5f;var _d60=_d5c[_d5f];if(_d60!==true){_d5e+="="+_d60;}}document.cookie=_d5e;}return ret;};dojo.cookie.isSupported=function(){if(!("cookieEnabled" in navigator)){this("__djCookieTest__","CookiesAllowed");navigator.cookieEnabled=this("__djCookieTest__")=="CookiesAllowed";if(navigator.cookieEnabled){this("__djCookieTest__","",{expires:-1});}}return navigator.cookieEnabled;};return dojo.cookie;});},"control/customer/options/SetFreeSEOCount":function(){define(["dojo/_base/declare","ttl/BaseWidgetAMD","dojo/text!../options/templates/SetFreeSEOCount.html","dijit/layout/BorderContainer","dijit/layout/ContentPane","ttl/utilities2","dojo/request","dojo/_base/lang","dojo/dom-style","dojo/dom-attr","dojo/dom-class","dojo/data/ItemFileReadStore","dijit/ProgressBar","dijit/form/FilteringSelect","dijit/form/Button","dijit/form/Form","dijit/form/NumberTextBox","dojox/form/BusyButton","dijit/form/CheckBox","dijit/form/SimpleTextarea"],function(_d61,_d62,_d63,_d64,_d65,_d66,_d67,lang,_d68,_d69,_d6a,_d6b){return _d61("control.customer.options.SetFreeSEOCount",[_d62],{templateString:_d63,constructor:function(){this._UpdatedCallBack=dojo.hitch(this,this._UpdatedCall);this._LoadedCallBack=dojo.hitch(this,this._LoadedCall);},Load:function(_d6c){this.icustomerid.set("value",_d6c);_d67.post("/customer/get_internal",_d66.make_params({data:{icustomerid:_d6c}})).then(this._LoadedCallBack);},_LoadedCall:function(_d6d){if(_d6d.success=="OK"){this.Clear();this.reason.set("value","");this.seonbrincredit.set("value",_d6d.data.cust.seonbrincredit);this.dlg.show();}else{alert("Problem Loading SEO Value");}},Clear:function(){this.updBtn.cancel();this.reason.set("value, ");this.seonbrincredit.set("value",0);},_UpdatedCall:function(_d6e){if(_d6e.success=="OK"){alert("SEO Free Count Updated");this.dlg.hide();this.Clear();}else{if(_d6e.message){alert(_d6e.message);}else{alert("Problem Upating");}}this.updBtn.cancel();},_Update:function(){if(_d66.form_validator(this.form)==false){alert("Missing Data");this.updBtn.cancel();return false;}_d67.post("/customer/customer_seo_qty_update",_d66.make_params({data:this.form.get("value")})).then(this._UpdatedCallBack);},_Close:function(){this.dlg.hide();this.Clear();}});});},"control/customer/adjustments":function(){define(["dojo/_base/declare","ttl/BaseWidgetAMD","dojo/text!../customer/templates/adjustments.html","dijit/layout/BorderContainer","dojo/request","ttl/utilities2","dojo/_base/lang","dojo/topic","dojo/dom-class","dojo/dom-attr","dojo/data/ItemFileReadStore","control/customer/allocation","dijit/form/Form","dijit/form/FilteringSelect","dijit/form/TextBox","dijit/form/CurrencyTextBox","dijit/form/DateTextBox","dojox/form/BusyButton","dijit/form/Textarea","dojox/grid/DataGrid","control/customer/manual_allocate_amount","dijit/layout/ContentPane"],function(_d6f,_d70,_d71,_d72,_d73,_d74,lang,_d75,_d76,_d77,_d78,_d79){return _d6f("control/customer/adjustments",[_d70,_d79],{templateString:_d71,gutters:false,constructor:function(){this._adjustment_call_back=lang.hitch(this,this._adjustment_call);this.adjustmenttypes=new _d78({url:"/common/lookups?searchtype=adjustmenttypes",onError:_d74.globalerrorchecker,clearOnClose:true,urlPreventCache:true});},setCustomer:function(_d7a,_d7b,_d7c){this._customerid=_d7a;this._customername=_d7b;_d77.set(this.customername,"innerHTML",this._customername);this._dialog=_d7c;if(this._dialog!=null){this._dialog.show();}this.alloc_grid_view.resize({w:590,h:300});this.load_allocation(_d7a,"adjustments");this.addbtn.cancel();},_adjustment_call:function(_d7d){if(_d7d.success=="OK"){_d75.publish(PRCOMMON.Events.Financial_ReLoad,[]);alert("Adjustment Added");this._dialog.hide();this.clear();}else{alert("Problem making Adjustment");}this.addbtn.cancel();},_adjustment:function(){if(_d74.form_validator(this.form)==false){alert("Please Enter Details");this.addbtn.cancel();return false;}if(this.toallocate.get("value")>Math.abs(this.payment.get("value"))){alert("Over Allocation");this.addbtn.cancel();return;}var _d7e=this.form.get("value");_d7e["icustomerid"]=this._customerid;_d7e["allocations"]=this.getAllocations();_d7e["adjustmentdate"]=_d74.to_json_date(this.adjustmentdate.get("value"));_d73.post("/payment/adjust_account",_d74.make_params({data:_d7e})).then(this._adjustment_call_back);},clear:function(){this.payment.set("value","");this.message.set("value","");},postCreate:function(){this.adjustmentdate.set("value",new Date());this.adjustmenttypeid.set("store",this.adjustmenttypes);this.adjustmenttypeid.set("value",1);this._postCreate();this.inherited(arguments);},_on_blur_amount:function(){this._doallocation();}});});},"control/customer/financial":function(){define(["dojo/_base/declare","ttl/BaseWidgetAMD","dojo/text!../customer/templates/financial.html","dijit/layout/BorderContainer","dojo/request","ttl/utilities2","dojo/_base/lang","dojo/topic","dojo/dom-class","dojo/data/ItemFileReadStore","dijit/layout/TabContainer","dijit/layout/ContentPane","dijit/form/Form","dijit/form/FilteringSelect","dijit/form/DateTextBox","dijit/form/ValidationTextBox","dijit/form/TextBox","dijit/form/CheckBox","dijit/form/ComboBox","dijit/form/NumberTextBox","dijit/form/CurrencyTextBox","dijit/form/Textarea","dojox/form/BusyButton","dijit/form/Button","dijit/Dialog","control/customer/payment","control/customer/monthly_payment","control/customer/proforma","control/customer/dd_invoices","control/customer/order_confirmation","control/customer/upgrade_order_confirmation","control/customer/manual_invoice","control/customer/adjustments","control/customer/credit","control/customer/pre_pay_invoice","control/customer/one_off_invoice","control/customer/manual_credit","control/customer/send_dd_conf"],function(_d7f,_d80,_d81,_d82,_d83,_d84,lang,_d85,_d86,_d87){return _d7f("control.customer.financial",[_d80],{templateString:_d81,gutters:false,constructor:function(){this._FinancialResponseCall=lang.hitch(this,this._FinancialResponse);this._update_salesanalysis_call_back=lang.hitch(this,this._update_salesanalysis_call);this._update_address_call_back=lang.hitch(this,this._update_address_call);this._paymentmethods=new _d87({url:"/common/lookups?searchtype=paymentmethods"});this._financialstatus=new _d87({url:"/common/lookups?searchtype=financialstatus"});this._daysofmonth=new _d87({url:"/common/lookups?searchtype=daysofmonth"});this._customerorderstatus=new _d87({url:"/common/lookups?searchtype=customerorderstatus"});this._seopaymenttypes=new _d87({url:"/common/lookups?searchtype=seopaymenttypes"});this._pricecodes_core=new _d87({url:"/common/lookups?searchtype=pricecodes&type=core"});this._pricecodes_adv=new _d87({url:"/common/lookups?searchtype=pricecodes&type=adv"});this._pricecodes_updatum=new _d87({url:"/common/lookups?searchtype=pricecodes&type=updatum"});this._pricecodes_int=new _d87({url:"/common/lookups?searchtype=pricecodes&type=int"});this._pricecodes_clippings=new _d87({url:"/common/lookups?searchtype=pricecodes&type=clippings"});this._LoadInvoiceCallBack=lang.hitch(this,this._LoadInvoiceCall);this._LoadCreditCallBack=lang.hitch(this,this._LoadCreditCall);this._LoadOneOffCallBack=lang.hitch(this,this._LoadOneOffCall);this._LoadCustomerCallBack=lang.hitch(this,this._LoadCustomerCall);this._ManualCreditCallBack=lang.hitch(this,this._ManualCreditCall);this._upgrade_load_confirmation_call_back=lang.hitch(this,this._upgrade_load_confirmation_call);this._send_dd_conf_call_back=lang.hitch(this,this._send_dd_conf_call);this._take_payment_call_back=lang.hitch(this,this._take_payment_call);this._manual_payment_call_back=lang.hitch(this,this._manual_payment_call);},postCreate:function(){this.paymentmethodid.set("store",this._paymentmethods);this.financialstatusid.set("store",this._financialstatus);this.pay_montly_day.set("store",this._daysofmonth);this.sub_start_day.set("store",this._daysofmonth);this.customerorderstatusid.set("store",this._customerorderstatus);this.seopaymenttypeid.set("store",this._seopaymenttypes);this.dd_start_day.set("store",this._daysofmonth);this.pricecodeid.set("store",this._pricecodes_core);this.advpricecodeid.set("store",this._pricecodes_adv);this.updatumpricecodeid.set("store",this._pricecodes_updatum);this.intpricecodeid.set("store",this._pricecodes_int);this.clippingspricecodeid.set("store",this._pricecodes_clippings);this.inherited(arguments);},load:function(data){this.paymentmethodid.set("value",data.cust.paymentmethodid);this.financialstatusid.set("value",data.cust.financialstatusid);this.customerorderstatusid.set("value",data.cust.customerorderstatusid);this.next_invoice_message.set("value",data.cust.next_invoice_message);this.bank_name.set("value",data.cust.bank_name);if(data.cust.renewal_date_d!=null){this.renewal_date.set("value",new Date(data.cust.renewal_date_d.year,data.cust.renewal_date_d.month-1,data.cust.renewal_date_d.day));}else{this.renewal_date.set("value",null);}if(data.cust.renewal_date_features_d!=null){this.renewal_date_features.set("value",new Date(data.cust.renewal_date_features_d.year,data.cust.renewal_date_features_d.month-1,data.cust.renewal_date_features_d.day));}else{this.renewal_date_features.set("value",null);}this.invoiceemail.set("value",data.cust.invoiceemail);this.bank_account_name.set("value",data.cust.bank_account_name);this.bank_sort_code.set("value",data.cust.bank_sort_code);this.bank_account_nbr.set("value",data.cust.bank_account_nbr);this.pay_monthly_value.set("value",dojo.number.round(data.cust.pay_monthly_value/100,2));this.dd_monitoring_value.set("value",dojo.number.round(data.cust.dd_monitoring_value/100,2));this.dd_advance_value.set("value",dojo.number.round(data.cust.dd_advance_value/100,2));this.dd_international_data_value.set("value",dojo.number.round(data.cust.dd_international_data_value/100,2));this.last_paid_date.set("value",data.cust.last_paid_date_display);this.dd_ref.set("value",data.cust.dd_ref);this.dd_collectiondate.set("value",data.cust.dd_collectiondate_display);this.pay_montly_day.set("value",data.cust.pay_montly_day);this.sub_start_day.set("value",data.cust.sub_start_day);this.purchase_order.set("value",data.cust.purchase_order);this.next_month_value.set("value",dojo.number.round(data.cust.next_month_value/100,2));this.seopaymenttypeid.set("value",data.cust.seopaymenttypeid);this.seonbrincredit.set("value",data.cust.seonbrincredit);this.dd_start_day.set("value",data.cust.dd_start_day);this.dd_start_month.set("value",data.cust.dd_start_month);this.has_bundled_invoice.set("checked",data.cust.has_bundled_invoice);this.pricecodeid.set("value",data.cust.pricecodeid);this.advpricecodeid.set("value",data.cust.advpricecodeid);this.updatumpricecodeid.set("value",data.cust.updatumpricecodeid);this.intpricecodeid.set("value",data.cust.intpricecodeid);this.clippingspricecodeid.set("value",data.cust.clippingspricecodeid);this._data=data;this.Show_Hide_Fields(data.cust);},_take_payment_call:function(_d88){if(_d88.success=="OK"){this.takepaymentctrl.setCustomer(_d88.data.cust,this.takepaymentdialog);this.takepaymentdialog.show();}else{alert("Problem Loading");}},_take_payment:function(){var tmp=this.paymentmethodid.get("value");if(tmp==1||tmp==null){_d83.post("/customer/get_internal",_d84.make_params({data:{"icustomerid":this._data.cust.customerid}})).then(this._take_payment_call_back);}else{this.monthlypaymentctrl.setCustomer(this._data.cust.customerid,this._data.cust.customername,this._data.cust.email,this.monthlypaymentdialog,this.pay_monthly_value.get("value"));this.monthlypaymentdialog.show();}},_manual_payment_call:function(_d89){if(_d89.success=="OK"){this.allocpaymentctrl.setCustomer(_d89.data.cust,this.allocpaymentdialog);this.allocpaymentdialog.show();}else{alert("Problem Loading");}},_manual_payment:function(){_d83.post("/customer/get_internal",_d84.make_params({data:{"icustomerid":this._data.cust.customerid}})).then(this._manual_payment_call_back);},_adjustment:function(){this.adjustctrl.setCustomer(this._data.cust.customerid,this._data.cust.customername,this.adjustdialog);this.adjustdialog.show();},_LoadOneOffCall:function(_d8a){if(_d8a.success=="OK"){this.onceoffinvoicectrl.setCustomer(_d8a.data.cust,this.onceoffinvoicedialog);this.onceoffinvoicedialog.show();}},_one_off_invoice:function(){_d83.post("/customer/get_internal",_d84.make_params({data:{"icustomerid":this._data.cust.customerid}})).then(this._LoadOneOffCallBack);},_dd_received_confirm:function(){if(this.dd_ref.get("value").length>0){_d83.post("/customer/get_internal",_d84.make_params({data:{"icustomerid":this._data.cust.customerid}})).then(this._send_dd_conf_call_back);}else{alert("No DD Ref");}},_send_dd_conf_call:function(_d8b){if(_d8b.success=="OK"){this.dd_conf_ctrl.set_customer(_d8b.data.cust,this.dd_conf_dialog);this.dd_conf_dialog.show();}else{alert("Problem Loading");}},_send_confirmation:function(){_d83.post("/customer/get_internal",_d84.make_params({data:{"icustomerid":this._data.cust.customerid}})).then(this._LoadCustomerCallBack);},_LoadCustomerCall:function(_d8c){if(_d8c.success=="OK"){this.sendorderconfirmationctrl.setCustomer(_d8c.data.cust.customerid,this.sendorderconfirmationdialog,_d8c.data.cust);this.sendorderconfirmationdialog.show();}else{alert("Problem Loading Customer Details");}},_send_update_confirmation:function(){_d83.post("/customer/get_internal",_d84.make_params({data:{"icustomerid":this._data.cust.customerid}})).then(this._upgrade_load_confirmation_call_back);},_upgrade_load_confirmation_call:function(_d8d){if(_d8d.success=="OK"){this.upgradeconfirmationctrl.set_customer(_d8d.data.cust.customerid,this.upgradeconfirmationdialog,_d8d.data.cust);this.upgradeconfirmationdialog.show();}else{alert("Problem Loading Customer Details");}},_credit_note:function(){_d83.post("/customer/get_internal",_d84.make_params({data:{icustomerid:this._data.cust.customerid}})).then(this._LoadCreditCallBack);},_LoadCreditCall:function(_d8e){if(_d8e.success=="OK"){this.creditctrl.setCustomer(_d8e.data.cust,this.creditdialog);}},_ManualCreditCall:function(_d8f){if(_d8f.success=="OK"){this.manualcreditctrl.setCustomer(_d8f.data.cust,this.manualcreditdialog);this.manualcreditdialog.show();}},_manual_credit:function(){_d83.post("/customer/get_internal",_d84.make_params({data:{icustomerid:this._data.cust.customerid}})).then(this._ManualCreditCallBack);},_manual_invoice:function(){this.manualinvoicectrl.setCustomer(this._data.cust.customerid,this._data.cust.customername,this.manualinvoicedialog);this.manualinvoicedialog.show();},_invoice:function(){_d83.post("/customer/get_internal",_d84.make_params({data:{icustomerid:this._data.cust.customerid}})).then(this._LoadInvoiceCallBack);},_LoadInvoiceCall:function(_d90){if(_d90.success=="OK"){this.invctrl.setCustomer(_d90.data.cust,this.invdialog);this.invdialog.show();}else{alert("Problem Loading Data");}},_send_proforma:function(){this.sendproformactrl.setCustomer(this._data.cust.customerid,this._data.cust.customername,this._data.cust.email,this.sendproformadialog);this.sendproformadialog.show();},_getEmailAddress:function(){var _d91=this.invoiceemail.get("value");if(_d91==""){_d91=this._data.cust.email;}return _d91;},_UpdateFinancial:function(){if(_d84.form_validator(this.financialForm)==false){this.saveFinancialNode.cancel();return;}var _d92=this.financialForm.get("value");_d92["icustomerid"]=this._data.cust.customerid;_d92["renewal_date"]=_d84.to_json_date(this.renewal_date.get("value"));_d92["renewal_date_features"]=_d84.to_json_date(this.renewal_date_features.get("value"));_d83.post("/customer/update_customer_financial",_d84.make_params({data:_d92})).then(this._FinancialResponseCall);},_FinancialResponse:function(_d93){if(_d93.success=="OK"){alert("Customer Financial Details Updated");}else{if(_d93.message){alert(_d93.message);}else{alert("Problem Updating Financial Details");}}this.saveFinancialNode.cancel();},resize:function(){this.frame.resize(arguments[0]);this.inherited(arguments);},Show_Hide_Fields:function(_d94){if(_d94.updatum){_d86.remove(this.monitoring_1,"prmaxhidden");}else{_d86.add(this.monitoring_1,"prmaxhidden");}if(_d94.advancefeatures){_d86.remove(this.adv_1,"prmaxhidden");}else{_d86.add(this.adv_1,"prmaxhidden");}if(_d94.has_international_data){_d86.remove(this.int_1,"prmaxhidden");}else{_d86.add(this.int_1,"prmaxhidden");}},_update_sales_analysis:function(){if(_d84.form_validator(this.salesform)==false){this.savesalesanalysis.cancel();return;}var _d95=this.salesform.get("value");_d95["icustomerid"]=this._data.cust.customerid;_d83.post("/customer/update_customer_salesanalysis",_d84.make_params({data:_d95})).then(this._update_salesanalysis_call_back);},_update_salesanalysis_call:function(_d96){if(_d96.success=="OK"){alert("Customer Sales Analysis Updated");}else{if(_d96.message){alert(_d96.message);}else{alert("Problem Updating Sales Analysis Details");}}this.savesalesanalysis.cancel();},_update_address:function(){if(_d84.form_validator(this.addressform)==false){this.saveaddress.cancel();return;}var _d97=this.addressform.get("value");_d97["icustomerid"]=this._data.cust.customerid;_d83.post("/customer/update_customer_address",_d84.make_params({data:_d97})).then(this._update_address_call_back);},_update_address_call:function(_d98){if(_d98.success=="OK"){alert("Customer Address Details Updated");}else{if(_d98.message){alert(_d98.message);}else{alert("Problem Updating Address Details");}}this.saveaddress.cancel();}});});},"dijit/form/_FormWidget":function(){define(["dojo/_base/declare","dojo/sniff","dojo/_base/kernel","dojo/ready","../_Widget","../_CssStateMixin","../_TemplatedMixin","./_FormWidgetMixin"],function(_d99,has,_d9a,_d9b,_d9c,_d9d,_d9e,_d9f){if(has("dijit-legacy-requires")){_d9b(0,function(){var _da0=["dijit/form/_FormValueWidget"];require(_da0);});}return _d99("dijit.form._FormWidget",[_d9c,_d9e,_d9d,_d9f],{setDisabled:function(_da1){_d9a.deprecated("setDisabled("+_da1+") is deprecated. Use set('disabled',"+_da1+") instead.","","2.0");this.set("disabled",_da1);},setValue:function(_da2){_d9a.deprecated("dijit.form._FormWidget:setValue("+_da2+") is deprecated.  Use set('value',"+_da2+") instead.","","2.0");this.set("value",_da2);},getValue:function(){_d9a.deprecated(this.declaredClass+"::getValue() is deprecated. Use get('value') instead.","","2.0");return this.get("value");},postMixInProperties:function(){this.nameAttrSetting=(this.name&&!has("msapp"))?("name=\""+this.name.replace(/"/g,"&quot;")+"\""):"";this.inherited(arguments);}});});},"dojox/rpc/JsonRest":function(){define("dojox/rpc/JsonRest",["dojo","dojox","dojox/json/ref","dojox/rpc/Rest"],function(dojo,_da3){var _da4=[];var Rest=_da3.rpc.Rest;var jr;function _da5(_da6,_da7,_da8,_da9){var _daa=_da7.ioArgs&&_da7.ioArgs.xhr&&_da7.ioArgs.xhr.getResponseHeader("Last-Modified");if(_daa&&Rest._timeStamps){Rest._timeStamps[_da9]=_daa;}var _dab=_da6._schema&&_da6._schema.hrefProperty;if(_dab){_da3.json.ref.refAttribute=_dab;}_da8=_da8&&_da3.json.ref.resolveJson(_da8,{defaultId:_da9,index:Rest._index,timeStamps:_daa&&Rest._timeStamps,time:_daa,idPrefix:_da6._store.allowNoTrailingSlash?_da6.servicePath+"/":_da6.servicePath.replace(/[^\/]*$/,""),idAttribute:jr.getIdAttribute(_da6),schemas:jr.schemas,loader:jr._loader,idAsRef:_da6.idAsRef,assignAbsoluteIds:true});_da3.json.ref.refAttribute="$ref";return _da8;};jr=_da3.rpc.JsonRest={serviceClass:_da3.rpc.Rest,conflictDateHeader:"If-Unmodified-Since",commit:function(_dac){_dac=_dac||{};var _dad=[];var _dae={};var _daf=[];for(var i=0;i<_da4.length;i++){var _db0=_da4[i];var _db1=_db0.object;var old=_db0.old;var _db2=false;if(!(_dac.service&&(_db1||old)&&(_db1||old).__id.indexOf(_dac.service.servicePath))&&_db0.save){delete _db1.__isDirty;if(_db1){if(old){var _db3;if((_db3=_db1.__id.match(/(.*)#.*/))){_db1=Rest._index[_db3[1]];}if(!(_db1.__id in _dae)){_dae[_db1.__id]=_db1;if(_dac.incrementalUpdates&&!_db3){var _db4=(typeof _dac.incrementalUpdates=="function"?_dac.incrementalUpdates:function(){_db4={};for(var j in _db1){if(_db1.hasOwnProperty(j)){if(_db1[j]!==old[j]){_db4[j]=_db1[j];}}else{if(old.hasOwnProperty(j)){return null;}}}return _db4;})(_db1,old);}if(_db4){_dad.push({method:"post",target:_db1,content:_db4});}else{_dad.push({method:"put",target:_db1,content:_db1});}}}else{var _db5=jr.getServiceAndId(_db1.__id).service;var _db6=jr.getIdAttribute(_db5);if((_db6 in _db1)&&!_dac.alwaysPostNewItems){_dad.push({method:"put",target:_db1,content:_db1});}else{_dad.push({method:"post",target:{__id:_db5.servicePath},content:_db1});}}}else{if(old){_dad.push({method:"delete",target:old});}}_daf.push(_db0);_da4.splice(i--,1);}}dojo.connect(_dac,"onError",function(){if(_dac.revertOnError!==false){var _db7=_da4;_da4=_daf;var _db8=0;jr.revert();_da4=_db7;}else{dojo.forEach(_daf,function(obj){jr.changing(obj.object,!obj.object);});}});jr.sendToServer(_dad,_dac);return _dad;},sendToServer:function(_db9,_dba){var _dbb;var _dbc=dojo.xhr;var left=_db9.length;var i,_dbd;var _dbe;var _dbf=this.conflictDateHeader;dojo.xhr=function(_dc0,args){args.headers=args.headers||{};args.headers["Transaction"]=_db9.length-1==i?"commit":"open";if(_dbf&&_dbe){args.headers[_dbf]=_dbe;}if(_dbd){args.headers["Content-ID"]="<"+_dbd+">";}return _dbc.apply(dojo,arguments);};for(i=0;i<_db9.length;i++){var _dc1=_db9[i];_da3.rpc.JsonRest._contentId=_dc1.content&&_dc1.content.__id;var _dc2=_dc1.method=="post";_dbe=_dc1.method=="put"&&Rest._timeStamps[_dc1.content.__id];if(_dbe){Rest._timeStamps[_dc1.content.__id]=(new Date())+"";}_dbd=_dc2&&_da3.rpc.JsonRest._contentId;var _dc3=jr.getServiceAndId(_dc1.target.__id);var _dc4=_dc3.service;var dfd=_dc1.deferred=_dc4[_dc1.method](_dc3.id.replace(/#/,""),_da3.json.ref.toJson(_dc1.content,false,_dc4.servicePath,true));(function(_dc5,dfd,_dc6){dfd.addCallback(function(_dc7){try{var _dc8=dfd.ioArgs.xhr&&dfd.ioArgs.xhr.getResponseHeader("Location");if(_dc8){var _dc9=_dc8.match(/(^\w+:\/\/)/)&&_dc8.indexOf(_dc6.servicePath);_dc8=_dc9>0?_dc8.substring(_dc9):(_dc6.servicePath+_dc8).replace(/^(.*\/)?(\w+:\/\/)|[^\/\.]+\/\.\.\/|^.*\/(\/)/,"$2$3");_dc5.__id=_dc8;Rest._index[_dc8]=_dc5;}_dc7=_da5(_dc6,dfd,_dc7,_dc5&&_dc5.__id);}catch(e){}if(!(--left)){if(_dba.onComplete){_dba.onComplete.call(_dba.scope,_db9);}}return _dc7;});})(_dc1.content,dfd,_dc4);dfd.addErrback(function(_dca){left=-1;_dba.onError.call(_dba.scope,_dca);});}dojo.xhr=_dbc;},getDirtyObjects:function(){return _da4;},revert:function(_dcb){for(var i=_da4.length;i>0;){i--;var _dcc=_da4[i];var _dcd=_dcc.object;var old=_dcc.old;var _dce=_da3.data._getStoreForItem(_dcd||old);if(!(_dcb&&(_dcd||old)&&(_dcd||old).__id.indexOf(_dcb.servicePath))){if(_dcd&&old){for(var j in old){if(old.hasOwnProperty(j)&&_dcd[j]!==old[j]){if(_dce){_dce.onSet(_dcd,j,_dcd[j],old[j]);}_dcd[j]=old[j];}}for(j in _dcd){if(!old.hasOwnProperty(j)){if(_dce){_dce.onSet(_dcd,j,_dcd[j]);}delete _dcd[j];}}}else{if(!old){if(_dce){_dce.onDelete(_dcd);}}else{if(_dce){_dce.onNew(old);}}}delete (_dcd||old).__isDirty;_da4.splice(i,1);}}},changing:function(_dcf,_dd0){if(!_dcf.__id){return;}_dcf.__isDirty=true;for(var i=0;i<_da4.length;i++){var _dd1=_da4[i];if(_dcf==_dd1.object){if(_dd0){_dd1.object=false;if(!this._saveNotNeeded){_dd1.save=true;}}return;}}var old=_dcf instanceof Array?[]:{};for(i in _dcf){if(_dcf.hasOwnProperty(i)){old[i]=_dcf[i];}}_da4.push({object:!_dd0&&_dcf,old:old,save:!this._saveNotNeeded});},deleteObject:function(_dd2){this.changing(_dd2,true);},getConstructor:function(_dd3,_dd4){if(typeof _dd3=="string"){var _dd5=_dd3;_dd3=new _da3.rpc.Rest(_dd3,true);this.registerService(_dd3,_dd5,_dd4);}if(_dd3._constructor){return _dd3._constructor;}_dd3._constructor=function(data){var self=this;var args=arguments;var _dd6;var _dd7;function _dd8(_dd9){if(_dd9){_dd8(_dd9["extends"]);_dd6=_dd9.properties;for(var i in _dd6){var _dda=_dd6[i];if(_dda&&(typeof _dda=="object")&&("default" in _dda)){self[i]=_dda["default"];}}}if(_dd9&&_dd9.prototype&&_dd9.prototype.initialize){_dd7=true;_dd9.prototype.initialize.apply(self,args);}};_dd8(_dd3._schema);if(!_dd7&&data&&typeof data=="object"){dojo.mixin(self,data);}var _ddb=jr.getIdAttribute(_dd3);Rest._index[this.__id=this.__clientId=_dd3.servicePath+(this[_ddb]||Math.random().toString(16).substring(2,14)+"@"+((_da3.rpc.Client&&_da3.rpc.Client.clientId)||"client"))]=this;if(_da3.json.schema&&_dd6){_da3.json.schema.mustBeValid(_da3.json.schema.validate(this,_dd3._schema));}_da4.push({object:this,save:true});};return dojo.mixin(_dd3._constructor,_dd3._schema,{load:_dd3});},fetch:function(_ddc){var _ddd=jr.getServiceAndId(_ddc);return this.byId(_ddd.service,_ddd.id);},getIdAttribute:function(_dde){var _ddf=_dde._schema;var _de0;if(_ddf){if(!(_de0=_ddf._idAttr)){for(var i in _ddf.properties){if(_ddf.properties[i].identity||(_ddf.properties[i].link=="self")){_ddf._idAttr=_de0=i;}}}}return _de0||"id";},getServiceAndId:function(_de1){var _de2="";for(var _de3 in jr.services){if((_de1.substring(0,_de3.length)==_de3)&&(_de3.length>=_de2.length)){_de2=_de3;}}if(_de2){return {service:jr.services[_de2],id:_de1.substring(_de2.length)};}var _de4=_de1.match(/^(.*\/)([^\/]*)$/);return {service:new jr.serviceClass(_de4[1],true),id:_de4[2]};},services:{},schemas:{},registerService:function(_de5,_de6,_de7){_de6=_de5.servicePath=_de6||_de5.servicePath;_de5._schema=jr.schemas[_de6]=_de7||_de5._schema||{};jr.services[_de6]=_de5;},byId:function(_de8,id){var _de9,_dea=Rest._index[(_de8.servicePath||"")+id];if(_dea&&!_dea._loadObject){_de9=new dojo.Deferred();_de9.callback(_dea);return _de9;}return this.query(_de8,id);},query:function(_deb,id,args){var _dec=_deb(id,args);_dec.addCallback(function(_ded){if(_ded.nodeType&&_ded.cloneNode){return _ded;}return _da5(_deb,_dec,_ded,typeof id!="string"||(args&&(args.start||args.count))?undefined:id);});return _dec;},_loader:function(_dee){var _def=jr.getServiceAndId(this.__id);var self=this;jr.query(_def.service,_def.id).addBoth(function(_df0){if(_df0==self){delete _df0.$ref;delete _df0._loadObject;}else{self._loadObject=function(_df1){_df1(_df0);};}_dee(_df0);});},isDirty:function(item,_df2){if(!item){if(_df2){return dojo.some(_da4,function(_df3){return _da3.data._getStoreForItem(_df3.object||_df3.old)==_df2;});}return !!_da4.length;}return item.__isDirty;}};return _da3.rpc.JsonRest;});},"dijit/dijit":function(){define(["./main","./_base","dojo/parser","./_Widget","./_TemplatedMixin","./_Container","./layout/_LayoutWidget","./form/_FormWidget","./form/_FormValueWidget"],function(_df4){return _df4;});},"control/admin":function(){define(["dojo/_base/declare","ttl/BaseWidgetAMD","dojo/text!../control/templates/admin.html","dijit/layout/BorderContainer","ttl/grid/Grid","ttl/store/JsonRest","dojo/store/Observable","dojo/request","ttl/utilities2","dojo/data/ItemFileReadStore","dojo/_base/lang","dojo/topic","dojo/dom-class","dijit/layout/ContentPane","dijit/Toolbar","dijit/form/DropDownButton","dijit/TooltipDialog","dijit/form/Select","dijit/form/TextBox","dijit/form/CheckBox","dijit/form/Button","control/customer/view_partner","control/customer/view_internal","control/accounts/PriceCodes"],function(_df5,_df6,_df7,_df8,Grid,_df9,_dfa,_dfb,_dfc,_dfd,lang,_dfe,_dff){return _df5("control.admin",[_df6,_df8],{templateString:_df7,gutters:false,constructor:function(){this.model=new _dfa(new _df9({target:"/customer/list_limited",idProperty:"customerid"}));this._display_details_call_back=lang.hitch(this,this._display_details);_dfe.subscribe("/customer/p_add",lang.hitch(this,this._new_customer_event));_dfe.subscribe("/customer/p_upd",lang.hitch(this,this._upd_customer_event));},postCreate:function(){if(PRMAX.Settings.uctid!=null){_dff.add(this.filter_show_1,"prmaxhidden");_dff.add(this.filter_show_2,"prmaxhidden");_dff.add(this.filter_show_3,"prmaxhidden");_dff.add(this.filter_show_4,"prmaxhidden");_dff.add(this.filter_show_5,"prmaxhidden");_dff.add(this.filter_show_6,"prmaxhidden");}var _e00=[{label:"Acc",className:"dgrid-column-type-boolean",field:"customerid",styles:"text-align:right;padding-right:3px;"},{label:"Customer name",className:"dgrid-column-title",field:"customername"},{label:"Source",className:"dgrid-column-type-small",field:"customertypename"},{label:"Contact",className:"dgrid-column-status",field:"contactname"},{label:"Expires",className:"dgrid-column-type-small",field:"licence_expire"},{label:"Status",className:"dgrid-column-type-small",field:"customerstatusname"}];this.searchgrid=new Grid({columns:_e00,selectionMode:"single",store:this.model,sort:[{attribute:"customerid",descending:false}],query:{active_only:true}});this.filter_customer_statusid.set("store",new _dfd({url:"/common/lookups?searchtype=customerstatus&nofilter=1"}));this.filter_customer_statusid.set("value",-1);this.filter_customertypeid.set("store",new _dfd({url:"/common/lookups?searchtype=customertypes&nofilter=1"}));this.filter_customertypeid.set("value",-1);this.filter_financialstatus.set("store",new _dfd({url:"/common/lookups?searchtype=financialstatus&nofilter=1"}));this.filter_financialstatus.set("value",-1);this.searchgrid_view.set("content",this.searchgrid);this.searchgrid.on(".dgrid-cell:click",lang.hitch(this,this._on_cell_call));},_execute_customer_filter:function(){var _e01={accountnbr:arguments[0].accountnbr,invoicenbr:arguments[0].invoicenbr,contactname:arguments[0].contactname,customername:arguments[0].customername,licence_expired:arguments[0].licence_expired,email:arguments[0].email,isinternal:arguments[0].isinternal,creditnotenbr:arguments[0].creditnotenbr,unallocated:arguments[0].unallocated,customertypeid:arguments[0].customertypeid,financialstatusid:arguments[0].financialstatusid};var _e02=true;if(arguments[0].customerstatusid!="-1"){_e01["statusid"]=arguments[0].customerstatusid;_e02=false;}if(_e02==true){_e01["active_only"]=true;}this.searchgrid.set("query",_e01);this._display_details("blank");},_clear_filter:function(){this.filter_customer_statusid.set("value",-1);this.searchgrid.set("query",{active_only:true});this._display_details("blank");},_logout:function(){window.location.href="/logout";},_on_cell_call:function(e){var cell=this.searchgrid.cell(e);if(cell==null||cell.row==null){return;}this._show_details(cell.row.data.customerid);},_show_details:function(_e03){if(PRMAX.Settings.uctid!=null){this.view_partner.load(_e03,this._display_details_call_back);}else{this.view_internal.load(_e03,this._display_details_call_back);}},_display_details:function(_e04){switch(_e04){case "view_partner":this.options.selectChild(this.view_partner);break;case "view_internal":this.options.selectChild(this.view_internal);break;case "blank":this.options.selectChild(this.blank);break;}},_new_customer_event:function(_e05){this.searchgrid.select(this.model.add(_e05));this._show_details(_e05.customerid);},_upd_customer_event:function(_e06){this.searchgrid.select(this.model.add(_e06));}});});},"dijit/MenuItem":function(){define(["dojo/_base/declare","dojo/dom","dojo/dom-attr","dojo/dom-class","dojo/_base/kernel","dojo/sniff","dojo/_base/lang","./_Widget","./_TemplatedMixin","./_Contained","./_CssStateMixin","dojo/text!./templates/MenuItem.html"],function(_e07,dom,_e08,_e09,_e0a,has,lang,_e0b,_e0c,_e0d,_e0e,_e0f){var _e10=_e07("dijit.MenuItem"+(has("dojo-bidi")?"_NoBidi":""),[_e0b,_e0c,_e0d,_e0e],{templateString:_e0f,baseClass:"dijitMenuItem",label:"",_setLabelAttr:function(val){this._set("label",val);var _e11="";var text;var ndx=val.search(/{\S}/);if(ndx>=0){_e11=val.charAt(ndx+1);var _e12=val.substr(0,ndx);var _e13=val.substr(ndx+3);text=_e12+_e11+_e13;val=_e12+"<span class=\"dijitMenuItemShortcutKey\">"+_e11+"</span>"+_e13;}else{text=val;}this.domNode.setAttribute("aria-label",text+" "+this.accelKey);this.containerNode.innerHTML=val;this._set("shortcutKey",_e11);},iconClass:"dijitNoIcon",_setIconClassAttr:{node:"iconNode",type:"class"},accelKey:"",disabled:false,_fillContent:function(_e14){if(_e14&&!("label" in this.params)){this._set("label",_e14.innerHTML);}},buildRendering:function(){this.inherited(arguments);var _e15=this.id+"_text";_e08.set(this.containerNode,"id",_e15);if(this.accelKeyNode){_e08.set(this.accelKeyNode,"id",this.id+"_accel");}dom.setSelectable(this.domNode,false);},onClick:function(){},focus:function(){try{if(has("ie")==8){this.containerNode.focus();}this.focusNode.focus();}catch(e){}},_setSelected:function(_e16){_e09.toggle(this.domNode,"dijitMenuItemSelected",_e16);},setLabel:function(_e17){_e0a.deprecated("dijit.MenuItem.setLabel() is deprecated.  Use set('label', ...) instead.","","2.0");this.set("label",_e17);},setDisabled:function(_e18){_e0a.deprecated("dijit.Menu.setDisabled() is deprecated.  Use set('disabled', bool) instead.","","2.0");this.set("disabled",_e18);},_setDisabledAttr:function(_e19){this.focusNode.setAttribute("aria-disabled",_e19?"true":"false");this._set("disabled",_e19);},_setAccelKeyAttr:function(_e1a){if(this.accelKeyNode){this.accelKeyNode.style.display=_e1a?"":"none";this.accelKeyNode.innerHTML=_e1a;_e08.set(this.containerNode,"colSpan",_e1a?"1":"2");}this._set("accelKey",_e1a);}});if(has("dojo-bidi")){_e10=_e07("dijit.MenuItem",_e10,{_setLabelAttr:function(val){this.inherited(arguments);if(this.textDir==="auto"){this.applyTextDir(this.textDirNode);}}});}return _e10;});},"prcommon2/date/daterange":function(){define(["dojo/_base/declare","ttl/BaseWidgetAMD","dojo/text!../date/templates/daterange.html","ttl/utilities2","dojo/json","dojo/_base/lang","dojo/dom-attr","dojo/dom-class","dojo/data/ItemFileReadStore","dijit/form/TextBox","dijit/form/DateTextBox","dijit/form/CheckBox","dijit/form/Select"],function(_e1b,_e1c,_e1d,_e1e,json,lan,_e1f,_e20,_e21){return _e1b("prcommon2.date.daterange",[_e1c],{name:"",value:"",required:false,templateString:_e1d,constructor:function(){this._options=null;this._start_date=new Date();this._end_date=new Date();},postCreate:function(){this.inherited(arguments);if(this.no_select==true){this._options={identifier:"id",label:"name",items:[{id:0,name:"None"},{id:1,name:"Before"},{id:2,name:"After"},{id:3,name:"Between"}]};this.option.set("store",new _e21({data:this._options}));this.option.set("value",0);}else{this._options={identifier:"id",label:"name",items:[{id:1,name:"Before"},{id:2,name:"After"},{id:3,name:"Between"}]};this.option.set("store",new _e21({data:this._options}));this.option.set("value",1);if(this.default_value==0){this.default_value=1;}}this.from_date_box.set("value",new Date());this.to_date_box.set("value",new Date());this.option.set("value",this.default_value);},_option_changed:function(){switch(this.option.get("value")){default:case 0:_e20.add(this.from_date_box.domNode,"prmaxhidden");_e20.add(this.to_box_label,"prmaxhidden");_e20.add(this.to_date_box.domNode,"prmaxhidden");break;case 1:case 2:_e20.remove(this.from_date_box.domNode,"prmaxhidden");_e20.add(this.to_box_label,"prmaxhidden");_e20.add(this.to_date_box.domNode,"prmaxhidden");break;case 3:_e20.remove(this.from_date_box.domNode,"prmaxhidden");_e20.remove(this.to_box_label,"prmaxhidden");_e20.remove(this.to_date_box.domNode,"prmaxhidden");break;}},_date_changed:function(){if(this.option.get("value")=="3"){}},isValid:function(){return true;},_getValueAttr:function(){try{var tmp=parseInt(this.option.get("value"));var _e22=0;for(var key in this._options.items){if(this._options.items[key].id[0]==tmp){_e22=this._options.items[key].name[0];break;}}return json.stringify({option:_e22,from_date:_e1e.to_json_date(this.from_date_box.get("value")),to_date:_e1e.to_json_date(this.to_date_box.get("value"))});}catch(e){return "";}},_setValueAttr:function(_e23){if(_e23==null){this.clear();}},clear:function(){this.option.set("value",this.default_value);this.from_date_box.set("value",this._start_date);this.to_date_box.set("value",this._end_date);},set_range_to_week:function(){this._end_date=new Date();this._start_date.setDate(this._end_date.getDate()-6);this.from_date_box.set("value",this._start_date);this.to_date_box.set("value",this._end_date);},set_range_to_last_30_days:function(){this._end_date=new Date();this.option.set("value",3);this.default_value=3;this._start_date.setDate(this._end_date.getDate()-30);this.from_date_box.set("value",this._start_date);this.to_date_box.set("value",this._end_date);},get_physical_values:function(){return {option:this.option.get("value"),from_date:this.from_date_box.get("value"),to_date:this.to_date_box.get("value")};},_setIntvalueAttr:function(_e24){this.option.set("value",_e24.option);this.from_date_box.set("value",_e24.from_date);this.to_date_box.set("value",_e24.to_date);},_getFilterTextAttr:function(){var _e25="";var tmp=parseInt(this.option.get("value"));var _e26=0;for(var key in this._options.items){if(this._options.items[key].id[0]==tmp){_e26=this._options.items[key].name[0];break;}}switch(this.option.get("value")){default:case 0:break;case 1:case 2:_e25=_e26+" - "+this.from_date_box.get("value").toDateString();break;case 3:_e25=_e26+" - "+this.from_date_box.get("value").toDateString()+" to "+this.to_date_box.get("value").toDateString();break;}return _e25;}});});},"dojox/grid/_EditManager":function(){define(["dojo/_base/lang","dojo/_base/array","dojo/_base/declare","dojo/_base/connect","dojo/_base/sniff","./util"],function(lang,_e27,_e28,_e29,has,util){return _e28("dojox.grid._EditManager",null,{constructor:function(_e2a){this.grid=_e2a;this.connections=!has("ie")?[]:[_e29.connect(document.body,"onfocus",lang.hitch(this,"_boomerangFocus"))];this.connections.push(_e29.connect(this.grid,"onBlur",this,"apply"));this.connections.push(_e29.connect(this.grid,"prerender",this,"_onPreRender"));},info:{},destroy:function(){_e27.forEach(this.connections,_e29.disconnect);},cellFocus:function(_e2b,_e2c){if(this.grid.singleClickEdit||this.isEditRow(_e2c)){this.setEditCell(_e2b,_e2c);}else{this.apply();}if(this.isEditing()||(_e2b&&_e2b.editable&&_e2b.alwaysEditing)){this._focusEditor(_e2b,_e2c);}},rowClick:function(e){if(this.isEditing()&&!this.isEditRow(e.rowIndex)){this.apply();}},styleRow:function(_e2d){if(_e2d.index==this.info.rowIndex){_e2d.customClasses+=" dojoxGridRowEditing";}},dispatchEvent:function(e){var c=e.cell,ed=(c&&c["editable"])?c:0;return ed&&ed.dispatchEvent(e.dispatch,e);},isEditing:function(){return this.info.rowIndex!==undefined;},isEditCell:function(_e2e,_e2f){return (this.info.rowIndex===_e2e)&&(this.info.cell.index==_e2f);},isEditRow:function(_e30){return this.info.rowIndex===_e30;},setEditCell:function(_e31,_e32){if(!this.isEditCell(_e32,_e31.index)&&this.grid.canEdit&&this.grid.canEdit(_e31,_e32)){this.start(_e31,_e32,this.isEditRow(_e32)||_e31.editable);}},_focusEditor:function(_e33,_e34){util.fire(_e33,"focus",[_e34]);},focusEditor:function(){if(this.isEditing()){this._focusEditor(this.info.cell,this.info.rowIndex);}},_boomerangWindow:500,_shouldCatchBoomerang:function(){return this._catchBoomerang>new Date().getTime();},_boomerangFocus:function(){if(this._shouldCatchBoomerang()){this.grid.focus.focusGrid();this.focusEditor();this._catchBoomerang=0;}},_doCatchBoomerang:function(){if(has("ie")){this._catchBoomerang=new Date().getTime()+this._boomerangWindow;}},start:function(_e35,_e36,_e37){if(!this._isValidInput()){return;}this.grid.beginUpdate();this.editorApply();if(this.isEditing()&&!this.isEditRow(_e36)){this.applyRowEdit();this.grid.updateRow(_e36);}if(_e37){this.info={cell:_e35,rowIndex:_e36};this.grid.doStartEdit(_e35,_e36);this.grid.updateRow(_e36);}else{this.info={};}this.grid.endUpdate();this.grid.focus.focusGrid();this._focusEditor(_e35,_e36);this._doCatchBoomerang();},_editorDo:function(_e38){var c=this.info.cell;if(c&&c.editable){c[_e38](this.info.rowIndex);}},editorApply:function(){this._editorDo("apply");},editorCancel:function(){this._editorDo("cancel");},applyCellEdit:function(_e39,_e3a,_e3b){if(this.grid.canEdit(_e3a,_e3b)){this.grid.doApplyCellEdit(_e39,_e3b,_e3a.field);}},applyRowEdit:function(){this.grid.doApplyEdit(this.info.rowIndex,this.info.cell.field);},apply:function(){if(this.isEditing()&&this._isValidInput()){this.grid.beginUpdate();this.editorApply();this.applyRowEdit();this.info={};this.grid.endUpdate();this.grid.focus.focusGrid();this._doCatchBoomerang();}},cancel:function(){if(this.isEditing()){this.grid.beginUpdate();this.editorCancel();this.info={};this.grid.endUpdate();this.grid.focus.focusGrid();this._doCatchBoomerang();}},save:function(_e3c,_e3d){var c=this.info.cell;if(this.isEditRow(_e3c)&&(!_e3d||c.view==_e3d)&&c.editable){c.save(c,this.info.rowIndex);}},restore:function(_e3e,_e3f){var c=this.info.cell;if(this.isEditRow(_e3f)&&c.view==_e3e&&c.editable){c.restore(this.info.rowIndex);}},_isValidInput:function(){var w=(this.info.cell||{}).widget;if(!w||!w.isValid){return true;}w.focused=true;return w.isValid(true);},_onPreRender:function(){if(this.isEditing()){this.info.value=this.info.cell.getValue();}}});});},"dojox/grid/_ViewManager":function(){define(["dojo/_base/declare","dojo/_base/sniff","dojo/dom-class"],function(_e40,has,_e41){return _e40("dojox.grid._ViewManager",null,{constructor:function(_e42){this.grid=_e42;},defaultWidth:200,views:[],resize:function(){this.onEach("resize");},render:function(){this.onEach("render");},addView:function(_e43){_e43.idx=this.views.length;this.views.push(_e43);},destroyViews:function(){for(var i=0,v;v=this.views[i];i++){v.destroy();}this.views=[];},getContentNodes:function(){var _e44=[];for(var i=0,v;v=this.views[i];i++){_e44.push(v.contentNode);}return _e44;},forEach:function(_e45){for(var i=0,v;v=this.views[i];i++){_e45(v,i);}},onEach:function(_e46,_e47){_e47=_e47||[];for(var i=0,v;v=this.views[i];i++){if(_e46 in v){v[_e46].apply(v,_e47);}}},normalizeHeaderNodeHeight:function(){var _e48=[];for(var i=0,v;(v=this.views[i]);i++){if(v.headerContentNode.firstChild){_e48.push(v.headerContentNode);}}this.normalizeRowNodeHeights(_e48);},normalizeRowNodeHeights:function(_e49){var h=0;var _e4a=[];if(this.grid.rowHeight){h=this.grid.rowHeight;}else{if(_e49.length<=1){return;}for(var i=0,n;(n=_e49[i]);i++){if(!_e41.contains(n,"dojoxGridNonNormalizedCell")){_e4a[i]=n.firstChild.offsetHeight;h=Math.max(h,_e4a[i]);}}h=(h>=0?h:0);if((has("mozilla")||has("ie")>8)&&h){h++;}}for(i=0;(n=_e49[i]);i++){if(_e4a[i]!=h){n.firstChild.style.height=h+"px";}}},resetHeaderNodeHeight:function(){for(var i=0,v,n;(v=this.views[i]);i++){n=v.headerContentNode.firstChild;if(n){n.style.height="";}}},renormalizeRow:function(_e4b){var _e4c=[];for(var i=0,v,n;(v=this.views[i])&&(n=v.getRowNode(_e4b));i++){n.firstChild.style.height="";_e4c.push(n);}this.normalizeRowNodeHeights(_e4c);},getViewWidth:function(_e4d){return this.views[_e4d].getWidth()||this.defaultWidth;},measureHeader:function(){this.resetHeaderNodeHeight();this.forEach(function(_e4e){_e4e.headerContentNode.style.height="";});var h=0;this.forEach(function(_e4f){h=Math.max(_e4f.headerNode.offsetHeight,h);});return h;},measureContent:function(){var h=0;this.forEach(function(_e50){h=Math.max(_e50.domNode.offsetHeight,h);});return h;},findClient:function(_e51){var c=this.grid.elasticView||-1;if(c<0){for(var i=1,v;(v=this.views[i]);i++){if(v.viewWidth){for(i=1;(v=this.views[i]);i++){if(!v.viewWidth){c=i;break;}}break;}}}if(c<0){c=Math.floor(this.views.length/2);}return c;},arrange:function(l,w){var i,v,vw,len=this.views.length,self=this;var c=(w<=0?len:this.findClient());var _e52=function(v,l){var ds=v.domNode.style;var hs=v.headerNode.style;if(!self.grid.isLeftToRight()){ds.right=l+"px";if(has("ff")<4){hs.right=l+v.getScrollbarWidth()+"px";}else{hs.right=l+"px";}if(!has("webkit")&&hs.width!="auto"){hs.width=parseInt(hs.width,10)-v.getScrollbarWidth()+"px";}}else{ds.left=l+"px";hs.left=l+"px";}ds.top=0+"px";hs.top=0;};for(i=0;(v=this.views[i])&&(i<c);i++){vw=this.getViewWidth(i);v.setSize(vw,0);_e52(v,l);if(v.headerContentNode&&v.headerContentNode.firstChild){vw=v.getColumnsWidth()+v.getScrollbarWidth();}else{vw=v.domNode.offsetWidth;}l+=vw;}i++;var r=w;for(var j=len-1;(v=this.views[j])&&(i<=j);j--){vw=this.getViewWidth(j);v.setSize(vw,0);vw=v.domNode.offsetWidth;r-=vw;_e52(v,r);}if(c<len){v=this.views[c];vw=Math.max(1,r-l);v.setSize(vw+"px",0);_e52(v,l);}return l;},renderRow:function(_e53,_e54,_e55){var _e56=[];for(var i=0,v,n,_e57;(v=this.views[i])&&(n=_e54[i]);i++){_e57=v.renderRow(_e53);n.appendChild(_e57);_e56.push(_e57);}if(!_e55){this.normalizeRowNodeHeights(_e56);}},rowRemoved:function(_e58){this.onEach("rowRemoved",[_e58]);},updateRow:function(_e59,_e5a){for(var i=0,v;v=this.views[i];i++){v.updateRow(_e59);}if(!_e5a){this.renormalizeRow(_e59);}},updateRowStyles:function(_e5b){this.onEach("updateRowStyles",[_e5b]);},setScrollTop:function(_e5c){var top=_e5c;for(var i=0,v;v=this.views[i];i++){top=v.setScrollTop(_e5c);if(has("ie")&&v.headerNode&&v.scrollboxNode){v.headerNode.scrollLeft=v.scrollboxNode.scrollLeft;}}return top;},getFirstScrollingView:function(){for(var i=0,v;(v=this.views[i]);i++){if(v.hasHScrollbar()||v.hasVScrollbar()){return v;}}return null;}});});},"dijit/DropDownMenu":function(){define(["dojo/_base/declare","dojo/keys","dojo/text!./templates/Menu.html","./_MenuBase"],function(_e5d,keys,_e5e,_e5f){return _e5d("dijit.DropDownMenu",_e5f,{templateString:_e5e,baseClass:"dijitMenu",_onUpArrow:function(){this.focusPrev();},_onDownArrow:function(){this.focusNext();},_onRightArrow:function(evt){this._moveToPopup(evt);evt.stopPropagation();evt.preventDefault();},_onLeftArrow:function(evt){if(this.parentMenu){if(this.parentMenu._isMenuBar){this.parentMenu.focusPrev();}else{this.onCancel(false);}}else{evt.stopPropagation();evt.preventDefault();}}});});},"control/customer/options/PrmaxDataSets":function(){define(["dojo/_base/declare","ttl/BaseWidgetAMD","dojo/text!../options/templates/prmaxdatasets.html","dijit/layout/BorderContainer","ttl/utilities2","dojo/request","dojo/_base/lang","dojo/dom-style","dojo/dom-attr","dojo/dom-class","dojo/data/ItemFileReadStore","ttl/store/JsonRest","dojo/store/Observable","ttl/grid/Grid"],function(_e60,_e61,_e62,_e63,_e64,_e65,lang,_e66,_e67,_e68,_e69,_e6a,_e6b,Grid){_data_set_selected=function(_e6c){var _e6d=_e6c?"checked.gif":"unchecked.gif";return "<img  height=\"10px\" width=\"10px\" style=\"padding:0x;margin:0px\" src=\"/static/images/"+_e6d+"\" ></img>";};return _e60("control.customer.options.PrmaxDataSets",[_e61,_e63],{templateString:_e62,gutters:false,constructor:function(){this._datasets=new _e6b(new _e6a({target:"/datasets/customer_data_sets",idProperty:"prmaxdatasetid",onError:_e64.globalerrorchecker,clearOnClose:true,urlPreventCache:true}));this._update_data_set_call_back=lang.hitch(this,this._update_data_set_call);this._has_international_data=false;},postCreate:function(){this.inherited(arguments);var _e6e=[{label:"Selected",className:"grid-field-image-view",field:"customerprmaxdatasetid",formatter:_data_set_selected},{label:"Data Set",className:"dgrid-column-status",field:"prmaxdatasetdescription"}];this.datasetsgrid_view=new Grid({columns:_e6e,selectionMode:"single",store:this._datasets,sort:[{attribute:"prmaxdatasetdescription",descending:false}],query:{}});this.datasetsgrid.set("content",this.datasetsgrid_view);this.datasetsgrid_view.on(".dgrid-cell:click",lang.hitch(this,this._on_row_select));},_on_row_select:function(e){if(this._has_international_data==true){var cell=this.datasetsgrid_view.cell(e);this._row=cell.row.data;var _e6f="Remove Data Set "+this._row.prmaxdatasetdescription+" ?";if(this._row.customerprmaxdatasetid==null){_e6f=null;}if(_e6f==null||confirm(_e6f)==true){var _e70={};_e70["icustomerid"]=this._customerid;_e70["customerprmaxdatasetid"]=this._row.customerprmaxdatasetid;_e70["prmaxdatasetid"]=this._row.prmaxdatasetid;_e65.post("/datasets/customer_data_set_update",_e64.make_params({data:_e70})).then(this._update_data_set_call_back);}}else{alert("International Data Disabled");}},_update_data_set_call:function(_e71){if(_e71.success=="OK"){this._row.customerprmaxdatasetid=_e71.data.customerprmaxdatasetid;this._datasets.put(this._row);}else{alert("Problem Updating");}},load:function(_e72,_e73){if(_e72!=null){this._customerid=_e72;var _e74=lang.mixin(_e64.get_prevent_cache(),{icustomerid:_e72});this.datasetsgrid_view.set("query",_e74);}this._has_international_data=_e73;}});});},"control/customer/options/ReActivateDemo":function(){define(["dojo/_base/declare","ttl/BaseWidgetAMD","dojo/text!../options/templates/ReActivateDemo.html","dijit/layout/BorderContainer","dijit/layout/ContentPane","ttl/utilities2","dojo/request","dojo/_base/lang","dojo/dom-style","dojo/dom-attr","dojo/dom-class","dojo/data/ItemFileReadStore","dijit/ProgressBar","dijit/form/FilteringSelect","dijit/form/Button","dijit/form/Form","dijit/form/NumberTextBox","dojox/form/BusyButton","dijit/form/CheckBox","dijit/form/SimpleTextarea"],function(_e75,_e76,_e77,_e78,_e79,_e7a,_e7b,lang,_e7c,_e7d,_e7e,_e7f){return _e75("control.customer.options.ReActivateDemo",[_e76],{templateString:_e77,constructor:function(){this._UpdatedCallBack=lang.hitch(this,this._UpdatedCall);this._LoadedCallBack=lang.hitch(this,this._LoadedCall);this._userfilter=new _e7f({url:"/common/lookups?searchtype=users&group=sales"});},postCreate:function(){this.assigntoid.set("store",this._userfilter);},Load:function(_e80,_e81){this.updBtn.set("disabled",true);this.icustomerid.set("value",_e80);this._dialog=_e81;_e7b.post("/customer/get_internal",_e7a.make_params({data:{icustomerid:_e80}})).then(this._LoadedCallBack);},_LoadedCall:function(_e82){if(_e82.success=="OK"){var td=new Date();var t=new Date(td.getTime()+4*24*60*60*1000);this.licence_expire.set("value",t);this.email.set("value",_e82.data.cust.email);this.displayname.set("value",_e82.data.cust.displayname);this.sendemail.set("checked",true);this.updBtn.set("disabled",false);this._dialog.show();this.updBtn.cancel();}else{alert("Problem Loading Expire Details");}},_UpdatedCall:function(_e83){if(_e83.success=="OK"){if(this._dialog){this._dialog.hide();}}else{if(_e83.message){alert(_e83.message);}else{alert("Problem Upating");}}this.updBtn.cancel();},_Update:function(){if(_e7a.form_validator(this.form)==false){alert("Missing Data");this.updBtn.cancel();return false;}var _e84=this.form.get("value");_e84["licence_expire"]=_e7a.to_json_date(this.licence_expire.get("value"));_e7b.post("/customer/get_internal",_e7a.make_params({data:_e84})).then(this._UpdatedCallBack);}});});},"ttl/store/JsonRest":function(){define(["dojo/_base/xhr","dojo/json","dojo/_base/declare","dojo/store/util/QueryResults","dojo/request","ttl/store/TtlQueryResults"],function(xhr,JSON,_e85,_e86,_e87,_e88){return _e85("ttl.store.JsonRest",null,{constructor:function(_e89){_e85.safeMixin(this,_e89);},target:"",idProperty:"id",get:function(id,_e8a){},accepts:"application/javascript, application/json",getIdentity:function(_e8b){return _e8b[this.idProperty];},put:function(_e8c,_e8d){return _e8c;},add:function(_e8e,_e8f){_e8f=_e8f||{};_e8f.overwrite=false;return this.put(_e8e,_e8f);},remove:function(id){},query:function(_e90,_e91){if(_e90["data_mode"]==="EMPTYGRID"){return _e86("");}else{var _e92={};_e91=_e91||{};if(_e91.start>=0||_e91.count>=0){_e92.Range="items="+(_e91.start||"0")+"-"+(("count" in _e91&&_e91.count!=Infinity)?(_e91.count+(_e91.start||0)-1):"");}if(_e90&&typeof _e90=="object"){_e90=xhr.objectToQuery(_e90);if(this.target.indexOf("?")!=-1){_e90="&"+_e90;}else{_e90=_e90?"?"+_e90:"";}}if(_e91&&_e91.sort){var _e93=this.sortParam;_e90+=(_e90?"&":"?")+(_e93?_e93+"=":"sort=");for(var i=0;i<_e91.sort.length;i++){var sort=_e91.sort[i];_e90+=(i>0?",":"")+(sort.descending?"-":"+")+encodeURIComponent(sort.attribute);}}var _e94=xhr("GET",{url:this.target+(_e90||""),handleAs:"json",headers:_e92,preventCache:true,timeout:100000});_e94.total=_e94.then(function(){var _e95=_e94.ioArgs.xhr.getResponseHeader("Content-Range");return _e95&&(_e95=_e95.match(/\/(.*)/))&&+_e95[1];});return _e86(_e94);}}});});},"control/accounts/PriceCodes":function(){define(["dojo/_base/declare","ttl/BaseWidgetAMD","dojo/text!../accounts/templates/PriceCodes.html","dijit/layout/BorderContainer","dijit/layout/ContentPane","dojo/request","ttl/utilities2","dojo/_base/lang","dojo/topic","dojo/dom-class","dojo/data/ItemFileReadStore","ttl/grid/Grid","ttl/store/JsonRest","dojo/store/Observable","dijit/form/Select","dijit/form/ValidationTextBox","dojox/form/BusyButton","dijit/form/Button","dijit/form/CurrencyTextBox","dijit/form/NumberTextBox","dijit/Toolbar","dijit/Dialog","dijit/form/Form","dijit/form/FilteringSelect"],function(_e96,_e97,_e98,_e99,_e9a,_e9b,_e9c,lang,_e9d,_e9e,_e9f,Grid,_ea0,_ea1){return _e96("control.accounts.PriceCodes",[_e97],{templateString:_e98,constructor:function(){this._AddPriceCallBack=lang.hitch(this,this._AddPriceCall);this._DeletePriceCallBack=lang.hitch(this,this._DeletePriceCall);this._UpdatePriceCallBack=lang.hitch(this,this._UpdatePriceCall);this._pricecodes=new _ea1(new _ea0({target:"/pricecode/pricecodes",idProperty:"pricecodeid",onError:_e9c.globalerrorchecker,clearOnClose:true,urlPreventCache:true,nocallback:true}));this._modules=new _e9f({url:"/common/lookups?searchtype=prmaxmodules",onError:_e9c.globalerrorchecker,clearOnClose:true,urlPreventCache:true});this._modules=new _e9f({url:"/common/lookups?searchtype=prmaxmodules"});this._customersources=new _e9f({url:"/common/lookups?searchtype=customersources&nofilter=-1"});this._products=new _e9f({url:"/common/lookups?searchtype=customerproducts"});},postCreate:function(){this.inherited(arguments);var _ea2=[{label:"Product",className:"dgrid-column-status-small",field:"customerproductdescription"},{label:"Price Code",className:"dgrid-column-status",field:"pricecodedescription"},{label:"Description",className:"dgrid-column-status-large",field:"pricecodelongdescription"},{label:"Module",className:"dgrid-column-status-small",field:"prmaxmoduledescription"},{label:"Partners",className:"dgrid-column-status-small",field:"customersourcedescription"},{label:"Fixed Renewal Price",className:"dgrid-column-money",field:"fixed_renewalprice",formatter:_e9c.display_money},{label:"Fixed Sales Price",className:"dgrid-column-money",field:"fixed_salesprice",formatter:_e9c.display_money},{label:"Monthly Renewal Price",className:"dgrid-column-money",field:"monthly_renewalprice",formatter:_e9c.display_money},{label:"Monthly Sales Price",className:"dgrid-column-money",field:"monthly_salesprice",formatter:_e9c.display_money},{label:"Con. Users",className:"dgrid-column-nbr-right",field:"concurrentusers"},{label:"Paid Months",className:"dgrid-column-nbr-right",field:"paid_months"},{label:" ",name:"delete",className:"dgrid-column-type-boolean",field:"pricecodeid",formatter:_e9c.delete_row_ctrl},{label:" ",name:"update",className:"dgrid-column-type-boolean",field:"pricecodeid",formatter:_e9c.format_row_ctrl}];this.view=new Grid({columns:_ea2,selectionMode:"single",store:this._pricecodes,sort:[{attribute:"pricecodedescription",descending:false}],query:{}});this.view_grid.set("content",this.view);this.view.on(".dgrid-cell:click",lang.hitch(this,this._OnSelectRow));this.prmaxmoduleid.set("store",this._modules);this.prmaxmoduleid2.set("store",this._modules);this.customersourceid.set("store",this._customersources);this.customersourceid2.set("store",this._customersources);this.customerproductid.set("store",this._products);this.customerproductid2.set("store",this._products);},_OnSelectRow:function(e){var cell=this.view.cell(e);this._row=cell.row.data;if(cell.column.id==11){if(confirm("Delete Price Code "+this._row.pricecodedescription+"?")){_e9b.post("/pricecode/pricecode_delete",_e9c.make_params({data:{pricecodeid:this._row.pricecodeid}})).then(this._DeletePriceCallBack);}}else{if(cell.column.id==12){this.pricecodedescription2.set("value",this._row.pricecodedescription);this.pricecodelongdescription2.set("value",this._row.pricecodelongdescription);this.pricecodeid.set("value",this._row.pricecodeid);this.prmaxmoduleid2.set("value",this._row.prmaxmoduleid);this.customersourceid2.set("value",this._row.customersourceid);this.customerproductid2.set("value",this._row.customerproductid);this.fixed_salesprice2.set("value",this._row.fixed_salesprice);this.fixed_renewalprice2.set("value",this._row.fixed_renewalprice);this.monthly_salesprice2.set("value",this._row.monthly_salesprice);this.monthly_renewalprice2.set("value",this._row.monthly_renewalprice);this.concurrentusers2.set("value",this._row.concurrentusers);this.paid_months2.set("value",this._row.paid_months);this.pricecodeupddialog.show();}}},resize:function(){this.borderControl.resize(arguments[0]);this.inherited(arguments);},_New:function(){this.pricecodedescription.set("value","");this.pricecodelongdescription.set("value","");this.prmaxmoduleid.set("value",1);this.customersourceid.set("value",5);this.customerproductid.set("value",2);this.fixed_salesprice.set("value",0);this.fixed_renewalprice.set("value",0);this.monthly_salesprice.set("value",0);this.monthly_renewalprice.set("value",0);this.concurrentusers.set("value",1);this.paid_months.set("value",12);this.pricecodedialog.show();this.pricecodedescription.focus();},_Close:function(){this.pricecodedialog.hide();},_Add:function(){if(_e9c.form_validator(this.form)==false){this.addbtn.cancel();return false;}_e9b.post("/pricecode/pricecode_add",_e9c.make_params({data:this.form.get("value")})).then(this._AddPriceCallBack);},_AddPriceCall:function(_ea3){if(_ea3.success=="OK"){this._pricecodes.add(_ea3.data);this._Close();this.pricecodedescription.set("value","");this.pricecodelongdescription.set("value","");}else{if(_ea3.success=="DU"){alert("Already exists");}else{alert("Problem Adding");}}this.addbtn.cancel();},_DeletePriceCall:function(_ea4){if(_ea4.success=="OK"){this._pricecodes.remove(this._row.pricecodeid);this._row=null;}else{alert("Problem Deleting (Probably in use)");}},_UpdatePriceCall:function(_ea5){if(_ea5.success=="OK"){this.view.set("query",{});this._Close2();}else{if(_ea5.success=="DU"){alert("Already Exists");this.pricecodedescription2.focus();}else{alert("Problem Adding");}}this.updbtn.cancel();},_Update:function(){if(_e9c.form_validator(this.formupd)==false){this.updbtn.cancel();return false;}_e9b.post("/pricecode/pricecode_update",_e9c.make_params({data:this.formupd.get("value")})).then(this._UpdatePriceCallBack);},_Close2:function(){this.pricecodeupddialog.hide();}});});},"dijit/_base/typematic":function(){define(["../typematic"],function(){});},"dojox/grid/_Grid":function(){define(["dojo/_base/kernel","../main","dojo/_base/declare","./_Events","./_Scroller","./_Layout","./_View","./_ViewManager","./_RowManager","./_FocusManager","./_EditManager","./Selection","./_RowSelector","./util","dijit/_Widget","dijit/_TemplatedMixin","dijit/CheckedMenuItem","dojo/text!./resources/_Grid.html","dojo/string","dojo/_base/array","dojo/_base/lang","dojo/_base/sniff","dojox/html/metrics","dojo/_base/html","dojo/query","dojo/dnd/common","dojo/i18n!dijit/nls/loading"],function(dojo,_ea6,_ea7,_ea8,_ea9,_eaa,_eab,_eac,_ead,_eae,_eaf,_eb0,_eb1,util,_eb2,_eb3,_eb4,_eb5,_eb6,_eb7,lang,has,_eb8,html,_eb9){if(!dojo.isCopyKey){dojo.isCopyKey=dojo.dnd.getCopyKeyState;}var _eba=_ea7("dojox.grid._Grid",[_eb2,_eb3,_ea8],{templateString:_eb5,classTag:"dojoxGrid",rowCount:5,keepRows:75,rowsPerPage:25,autoWidth:false,initialWidth:"",autoHeight:"",rowHeight:0,autoRender:true,defaultHeight:"15em",height:"",structure:null,elasticView:-1,singleClickEdit:false,selectionMode:"extended",rowSelector:"",columnReordering:false,headerMenu:null,placeholderLabel:"GridColumns",selectable:false,_click:null,loadingMessage:"<span class='dojoxGridLoading'>${loadingState}</span>",errorMessage:"<span class='dojoxGridError'>${errorState}</span>",noDataMessage:"",escapeHTMLInData:true,formatterScope:null,editable:false,summary:"",_setSummaryAttr:"domNode",sortInfo:0,_placeholders:null,_layoutClass:_eaa,buildRendering:function(){this.inherited(arguments);if(!this.domNode.getAttribute("tabIndex")){this.domNode.tabIndex="0";}this.createScroller();this.createLayout();this.createViews();this.createManagers();this.createSelection();this.connect(this.selection,"onSelected","onSelected");this.connect(this.selection,"onDeselected","onDeselected");this.connect(this.selection,"onChanged","onSelectionChanged");_eb8.initOnFontResize();this.connect(_eb8,"onFontResize","textSizeChanged");util.funnelEvents(this.domNode,this,"doKeyEvent",util.keyEvents);if(this.selectionMode!="none"){this.domNode.setAttribute("aria-multiselectable",this.selectionMode=="single"?"false":"true");}html.addClass(this.domNode,this.classTag);if(!this.isLeftToRight()){html.addClass(this.domNode,this.classTag+"Rtl");}if(this.rowHeight>0){html.addClass(this.viewsNode,this.classTag+"FixedRowHeight");}},postMixInProperties:function(){this.inherited(arguments);var _ebb=dojo.i18n.getLocalization("dijit","loading",this.lang);this.loadingMessage=_eb6.substitute(this.loadingMessage,_ebb);this.errorMessage=_eb6.substitute(this.errorMessage,_ebb);if(this.srcNodeRef&&this.srcNodeRef.style.height){this.height=this.srcNodeRef.style.height;}this._setAutoHeightAttr(this.autoHeight,true);this.lastScrollTop=this.scrollTop=0;},postCreate:function(){this._placeholders=[];this._setHeaderMenuAttr(this.headerMenu);this._setStructureAttr(this.structure);this._click=[];this.inherited(arguments);if(this.domNode&&this.autoWidth&&this.initialWidth){this.domNode.style.width=this.initialWidth;}if(this.domNode&&!this.editable){html.attr(this.domNode,"aria-readonly","true");}},destroy:function(){this.domNode.onReveal=null;this.domNode.onSizeChange=null;delete this._click;if(this.scroller){this.scroller.destroy();delete this.scroller;}this.edit.destroy();delete this.edit;this.views.destroyViews();if(this.focus){this.focus.destroy();delete this.focus;}if(this.headerMenu&&this._placeholders.length){_eb7.forEach(this._placeholders,function(p){p.unReplace(true);});this.headerMenu.unBindDomNode(this.viewsHeaderNode);}this.inherited(arguments);},_setAutoHeightAttr:function(ah,_ebc){if(typeof ah=="string"){if(!ah||ah=="false"){ah=false;}else{if(ah=="true"){ah=true;}else{ah=window.parseInt(ah,10);}}}if(typeof ah=="number"){if(isNaN(ah)){ah=false;}if(ah<0){ah=true;}else{if(ah===0){ah=false;}}}this.autoHeight=ah;if(typeof ah=="boolean"){this._autoHeight=ah;}else{if(typeof ah=="number"){this._autoHeight=(ah>=this.get("rowCount"));}else{this._autoHeight=false;}}if(this._started&&!_ebc){this.render();}},_getRowCountAttr:function(){return this.updating&&this.invalidated&&this.invalidated.rowCount!=undefined?this.invalidated.rowCount:this.rowCount;},textSizeChanged:function(){this.render();},sizeChange:function(){this.update();},createManagers:function(){this.rows=new _ead(this);this.focus=new _eae(this);this.edit=new _eaf(this);},createSelection:function(){this.selection=new _eb0(this);},createScroller:function(){this.scroller=new _ea9();this.scroller.grid=this;this.scroller.renderRow=lang.hitch(this,"renderRow");this.scroller.removeRow=lang.hitch(this,"rowRemoved");},createLayout:function(){this.layout=new this._layoutClass(this);this.connect(this.layout,"moveColumn","onMoveColumn");},onMoveColumn:function(){this.update();},onResizeColumn:function(_ebd){},createViews:function(){this.views=new _eac(this);this.views.createView=lang.hitch(this,"createView");},createView:function(_ebe,idx){var c=lang.getObject(_ebe);var view=new c({grid:this,index:idx});this.viewsNode.appendChild(view.domNode);this.viewsHeaderNode.appendChild(view.headerNode);this.views.addView(view);html.attr(this.domNode,"align",this.isLeftToRight()?"left":"right");return view;},buildViews:function(){for(var i=0,vs;(vs=this.layout.structure[i]);i++){this.createView(vs.type||_ea6._scopeName+".grid._View",i).setStructure(vs);}this.scroller.setContentNodes(this.views.getContentNodes());},_setStructureAttr:function(_ebf){var s=_ebf;if(s&&lang.isString(s)){dojo.deprecated("dojox.grid._Grid.set('structure', 'objVar')","use dojox.grid._Grid.set('structure', objVar) instead","2.0");s=lang.getObject(s);}this.structure=s;if(!s){if(this.layout.structure){s=this.layout.structure;}else{return;}}this.views.destroyViews();this.focus.focusView=null;if(s!==this.layout.structure){this.layout.setStructure(s);}this._structureChanged();},setStructure:function(_ec0){dojo.deprecated("dojox.grid._Grid.setStructure(obj)","use dojox.grid._Grid.set('structure', obj) instead.","2.0");this._setStructureAttr(_ec0);},getColumnTogglingItems:function(){var _ec1,_ec2=[];_ec1=_eb7.map(this.layout.cells,function(cell){if(!cell.menuItems){cell.menuItems=[];}var self=this;var item=new _eb4({label:cell.name,checked:!cell.hidden,_gridCell:cell,onChange:function(_ec3){if(self.layout.setColumnVisibility(this._gridCell.index,_ec3)){var _ec4=this._gridCell.menuItems;if(_ec4.length>1){_eb7.forEach(_ec4,function(item){if(item!==this){item.setAttribute("checked",_ec3);}},this);}_ec3=_eb7.filter(self.layout.cells,function(c){if(c.menuItems.length>1){_eb7.forEach(c.menuItems,"item.set('disabled', false);");}else{c.menuItems[0].set("disabled",false);}return !c.hidden;});if(_ec3.length==1){_eb7.forEach(_ec3[0].menuItems,"item.set('disabled', true);");}}},destroy:function(){var _ec5=_eb7.indexOf(this._gridCell.menuItems,this);this._gridCell.menuItems.splice(_ec5,1);delete this._gridCell;_eb4.prototype.destroy.apply(this,arguments);}});cell.menuItems.push(item);if(!cell.hidden){_ec2.push(item);}return item;},this);if(_ec2.length==1){_ec2[0].set("disabled",true);}return _ec1;},_setHeaderMenuAttr:function(menu){if(this._placeholders&&this._placeholders.length){_eb7.forEach(this._placeholders,function(p){p.unReplace(true);});this._placeholders=[];}if(this.headerMenu){this.headerMenu.unBindDomNode(this.viewsHeaderNode);}this.headerMenu=menu;if(!menu){return;}this.headerMenu.bindDomNode(this.viewsHeaderNode);if(this.headerMenu.getPlaceholders){this._placeholders=this.headerMenu.getPlaceholders(this.placeholderLabel);}},setHeaderMenu:function(menu){dojo.deprecated("dojox.grid._Grid.setHeaderMenu(obj)","use dojox.grid._Grid.set('headerMenu', obj) instead.","2.0");this._setHeaderMenuAttr(menu);},setupHeaderMenu:function(){if(this._placeholders&&this._placeholders.length){_eb7.forEach(this._placeholders,function(p){if(p._replaced){p.unReplace(true);}p.replace(this.getColumnTogglingItems());},this);}},_fetch:function(_ec6){this.setScrollTop(0);},getItem:function(_ec7){return null;},showMessage:function(_ec8){if(_ec8){this.messagesNode.innerHTML=_ec8;this.messagesNode.style.display="";}else{this.messagesNode.innerHTML="";this.messagesNode.style.display="none";}},_structureChanged:function(){this.buildViews();if(this.autoRender&&this._started){this.render();}},hasLayout:function(){return this.layout.cells.length;},resize:function(_ec9,_eca){this._pendingChangeSize=_ec9;this._pendingResultSize=_eca;this.sizeChange();},_getPadBorder:function(){this._padBorder=this._padBorder||html._getPadBorderExtents(this.domNode);return this._padBorder;},_getHeaderHeight:function(){var vns=this.viewsHeaderNode.style,t=vns.display=="none"?0:this.views.measureHeader();vns.height=t+"px";this.views.normalizeHeaderNodeHeight();return t;},_resize:function(_ecb,_ecc){_ecb=_ecb||this._pendingChangeSize;_ecc=_ecc||this._pendingResultSize;delete this._pendingChangeSize;delete this._pendingResultSize;if(!this.domNode){return;}var pn=this.domNode.parentNode;if(!pn||pn.nodeType!=1||!this.hasLayout()||pn.style.visibility=="hidden"||pn.style.display=="none"){return;}var _ecd=this._getPadBorder();var hh=undefined;var h;if(this._autoHeight){this.domNode.style.height="auto";}else{if(typeof this.autoHeight=="number"){h=hh=this._getHeaderHeight();h+=(this.scroller.averageRowHeight*this.autoHeight);this.domNode.style.height=h+"px";}else{if(this.domNode.clientHeight<=_ecd.h){if(pn==document.body){this.domNode.style.height=this.defaultHeight;}else{if(this.height){this.domNode.style.height=this.height;}else{this.fitTo="parent";}}}}}if(_ecc){_ecb=_ecc;}if(!this._autoHeight&&_ecb){html.marginBox(this.domNode,_ecb);this.height=this.domNode.style.height;delete this.fitTo;}else{if(this.fitTo=="parent"){h=this._parentContentBoxHeight=(this._parentContentBoxHeight>0?this._parentContentBoxHeight:html._getContentBox(pn).h);this.domNode.style.height=Math.max(0,h)+"px";}}var _ece=_eb7.some(this.views.views,function(v){return v.flexCells;});if(!this._autoHeight&&(h||html._getContentBox(this.domNode).h)===0){this.viewsHeaderNode.style.display="none";}else{this.viewsHeaderNode.style.display="block";if(!_ece&&hh===undefined){hh=this._getHeaderHeight();}}if(_ece){hh=undefined;}this.adaptWidth();this.adaptHeight(hh);this.postresize();},adaptWidth:function(){var _ecf=(!this.initialWidth&&this.autoWidth);var w=_ecf?0:this.domNode.clientWidth||(this.domNode.offsetWidth-this._getPadBorder().w),vw=this.views.arrange(1,w);this.views.onEach("adaptWidth");if(_ecf){this.domNode.style.width=vw+"px";}},adaptHeight:function(_ed0){var t=_ed0===undefined?this._getHeaderHeight():_ed0;var h=(this._autoHeight?-1:Math.max(this.domNode.clientHeight-t,0)||0);this.views.onEach("setSize",[0,h]);this.views.onEach("adaptHeight");if(!this._autoHeight){var _ed1=0,_ed2=0;var _ed3=_eb7.filter(this.views.views,function(v){var has=v.hasHScrollbar();if(has){_ed1++;}else{_ed2++;}return (!has);});if(_ed1>0&&_ed2>0){_eb7.forEach(_ed3,function(v){v.adaptHeight(true);});}}if(this.autoHeight===true||h!=-1||(typeof this.autoHeight=="number"&&this.autoHeight>=this.get("rowCount"))){this.scroller.windowHeight=h;}else{this.scroller.windowHeight=Math.max(this.domNode.clientHeight-t,0);}},startup:function(){if(this._started){return;}this.inherited(arguments);if(this.autoRender){this.render();}},render:function(){if(!this.domNode){return;}if(!this._started){return;}if(!this.hasLayout()){this.scroller.init(0,this.keepRows,this.rowsPerPage);return;}this.update=this.defaultUpdate;this._render();},_render:function(){this.scroller.init(this.get("rowCount"),this.keepRows,this.rowsPerPage);this.prerender();this.setScrollTop(0);this.postrender();},prerender:function(){this.keepRows=this._autoHeight?0:this.keepRows;this.scroller.setKeepInfo(this.keepRows);this.views.render();this._resize();},postrender:function(){this.postresize();this.focus.initFocusView();html.setSelectable(this.domNode,this.selectable);},postresize:function(){if(this._autoHeight){var size=Math.max(this.views.measureContent())+"px";this.viewsNode.style.height=size;}},renderRow:function(_ed4,_ed5){this.views.renderRow(_ed4,_ed5,this._skipRowRenormalize);},rowRemoved:function(_ed6){this.views.rowRemoved(_ed6);},invalidated:null,updating:false,beginUpdate:function(){this.invalidated=[];this.updating=true;},endUpdate:function(){this.updating=false;var i=this.invalidated,r;if(i.all){this.update();}else{if(i.rowCount!=undefined){this.updateRowCount(i.rowCount);}else{for(r in i){this.updateRow(Number(r));}}}this.invalidated=[];},defaultUpdate:function(){if(!this.domNode){return;}if(this.updating){this.invalidated.all=true;return;}this.lastScrollTop=this.scrollTop;this.prerender();this.scroller.invalidateNodes();this.setScrollTop(this.lastScrollTop);this.postrender();},update:function(){this.render();},updateRow:function(_ed7){_ed7=Number(_ed7);if(this.updating){this.invalidated[_ed7]=true;}else{this.views.updateRow(_ed7);this.scroller.rowHeightChanged(_ed7);}},updateRows:function(_ed8,_ed9){_ed8=Number(_ed8);_ed9=Number(_ed9);var i;if(this.updating){for(i=0;i<_ed9;i++){this.invalidated[i+_ed8]=true;}}else{for(i=0;i<_ed9;i++){this.views.updateRow(i+_ed8,this._skipRowRenormalize);}this.scroller.rowHeightChanged(_ed8);}},updateRowCount:function(_eda){if(this.updating){this.invalidated.rowCount=_eda;}else{this.rowCount=_eda;this._setAutoHeightAttr(this.autoHeight,true);if(this.layout.cells.length){this.scroller.updateRowCount(_eda);}this._resize();if(this.layout.cells.length){this.setScrollTop(this.scrollTop);}}},updateRowStyles:function(_edb){this.views.updateRowStyles(_edb);},getRowNode:function(_edc){if(this.focus.focusView&&!(this.focus.focusView instanceof _eb1)){return this.focus.focusView.rowNodes[_edc];}else{for(var i=0,_edd;(_edd=this.views.views[i]);i++){if(!(_edd instanceof _eb1)){return _edd.rowNodes[_edc];}}}return null;},rowHeightChanged:function(_ede){this.views.renormalizeRow(_ede);this.scroller.rowHeightChanged(_ede);},fastScroll:true,delayScroll:false,scrollRedrawThreshold:(has("ie")?100:50),scrollTo:function(_edf){if(!this.fastScroll){this.setScrollTop(_edf);return;}var _ee0=Math.abs(this.lastScrollTop-_edf);this.lastScrollTop=_edf;if(_ee0>this.scrollRedrawThreshold||this.delayScroll){this.delayScroll=true;this.scrollTop=_edf;this.views.setScrollTop(_edf);if(this._pendingScroll){window.clearTimeout(this._pendingScroll);}var _ee1=this;this._pendingScroll=window.setTimeout(function(){delete _ee1._pendingScroll;_ee1.finishScrollJob();},200);}else{this.setScrollTop(_edf);}},finishScrollJob:function(){this.delayScroll=false;this.setScrollTop(this.scrollTop);},setScrollTop:function(_ee2){this.scroller.scroll(this.views.setScrollTop(_ee2));},scrollToRow:function(_ee3){this.setScrollTop(this.scroller.findScrollTop(_ee3)+1);},styleRowNode:function(_ee4,_ee5){if(_ee5){this.rows.styleRowNode(_ee4,_ee5);}},_mouseOut:function(e){this.rows.setOverRow(-2);},getCell:function(_ee6){return this.layout.cells[_ee6];},setCellWidth:function(_ee7,_ee8){this.getCell(_ee7).unitWidth=_ee8;},getCellName:function(_ee9){return "Cell "+_ee9.index;},canSort:function(_eea){},sort:function(){},getSortAsc:function(_eeb){_eeb=_eeb==undefined?this.sortInfo:_eeb;return Boolean(_eeb>0);},getSortIndex:function(_eec){_eec=_eec==undefined?this.sortInfo:_eec;return Math.abs(_eec)-1;},setSortIndex:function(_eed,_eee){var si=_eed+1;if(_eee!=undefined){si*=(_eee?1:-1);}else{if(this.getSortIndex()==_eed){si=-this.sortInfo;}}this.setSortInfo(si);},setSortInfo:function(_eef){if(this.canSort(_eef)){this.sortInfo=_eef;this.sort();this.update();}},doKeyEvent:function(e){e.dispatch="do"+e.type;this.onKeyEvent(e);},_dispatch:function(m,e){if(m in this){return this[m](e);}return false;},dispatchKeyEvent:function(e){this._dispatch(e.dispatch,e);},dispatchContentEvent:function(e){this.edit.dispatchEvent(e)||e.sourceView.dispatchContentEvent(e)||this._dispatch(e.dispatch,e);},dispatchHeaderEvent:function(e){e.sourceView.dispatchHeaderEvent(e)||this._dispatch("doheader"+e.type,e);},dokeydown:function(e){this.onKeyDown(e);},doclick:function(e){if(e.cellNode){this.onCellClick(e);}else{this.onRowClick(e);}},dodblclick:function(e){if(e.cellNode){this.onCellDblClick(e);}else{this.onRowDblClick(e);}},docontextmenu:function(e){if(e.cellNode){this.onCellContextMenu(e);}else{this.onRowContextMenu(e);}},doheaderclick:function(e){if(e.cellNode){this.onHeaderCellClick(e);}else{this.onHeaderClick(e);}},doheaderdblclick:function(e){if(e.cellNode){this.onHeaderCellDblClick(e);}else{this.onHeaderDblClick(e);}},doheadercontextmenu:function(e){if(e.cellNode){this.onHeaderCellContextMenu(e);}else{this.onHeaderContextMenu(e);}},doStartEdit:function(_ef0,_ef1){this.onStartEdit(_ef0,_ef1);},doApplyCellEdit:function(_ef2,_ef3,_ef4){this.onApplyCellEdit(_ef2,_ef3,_ef4);},doCancelEdit:function(_ef5){this.onCancelEdit(_ef5);},doApplyEdit:function(_ef6){this.onApplyEdit(_ef6);},addRow:function(){this.updateRowCount(this.get("rowCount")+1);},removeSelectedRows:function(){if(this.allItemsSelected){this.updateRowCount(0);}else{this.updateRowCount(Math.max(0,this.get("rowCount")-this.selection.getSelected().length));}this.selection.clear();}});_eba.markupFactory=function(_ef7,node,ctor,_ef8){var _ef9=function(n){var w=html.attr(n,"width")||"auto";if((w!="auto")&&(w.slice(-2)!="em")&&(w.slice(-1)!="%")){w=parseInt(w,10)+"px";}return w;};if(!_ef7.structure&&node.nodeName.toLowerCase()=="table"){_ef7.structure=_eb9("> colgroup",node).map(function(cg){var sv=html.attr(cg,"span");var v={noscroll:(html.attr(cg,"noscroll")=="true")?true:false,__span:(!!sv?parseInt(sv,10):1),cells:[]};if(html.hasAttr(cg,"width")){v.width=_ef9(cg);}return v;});if(!_ef7.structure.length){_ef7.structure.push({__span:Infinity,cells:[]});}_eb9("thead > tr",node).forEach(function(tr,_efa){var _efb=0;var _efc=0;var _efd;var _efe=null;_eb9("> th",tr).map(function(th){if(!_efe){_efd=0;_efe=_ef7.structure[0];}else{if(_efb>=(_efd+_efe.__span)){_efc++;_efd+=_efe.__span;var _eff=_efe;_efe=_ef7.structure[_efc];}}var cell={name:lang.trim(html.attr(th,"name")||th.innerHTML),colSpan:parseInt(html.attr(th,"colspan")||1,10),type:lang.trim(html.attr(th,"cellType")||""),id:lang.trim(html.attr(th,"id")||"")};_efb+=cell.colSpan;var _f00=html.attr(th,"rowspan");if(_f00){cell.rowSpan=_f00;}if(html.hasAttr(th,"width")){cell.width=_ef9(th);}if(html.hasAttr(th,"relWidth")){cell.relWidth=window.parseInt(html.attr(th,"relWidth"),10);}if(html.hasAttr(th,"hidden")){cell.hidden=(html.attr(th,"hidden")=="true"||html.attr(th,"hidden")===true);}if(_ef8){_ef8(th,cell);}cell.type=cell.type?lang.getObject(cell.type):_ea6.grid.cells.Cell;if(cell.type&&cell.type.markupFactory){cell.type.markupFactory(th,cell);}if(!_efe.cells[_efa]){_efe.cells[_efa]=[];}_efe.cells[_efa].push(cell);});});}return new ctor(_ef7,node);};return _eba;});},"dojo/store/Memory":function(){define(["../_base/declare","./util/QueryResults","./util/SimpleQueryEngine"],function(_f01,_f02,_f03){var base=null;return _f01("dojo.store.Memory",base,{constructor:function(_f04){for(var i in _f04){this[i]=_f04[i];}this.setData(this.data||[]);},data:null,idProperty:"id",index:null,queryEngine:_f03,get:function(id){return this.data[this.index[id]];},getIdentity:function(_f05){return _f05[this.idProperty];},put:function(_f06,_f07){var data=this.data,_f08=this.index,_f09=this.idProperty;var id=_f06[_f09]=(_f07&&"id" in _f07)?_f07.id:_f09 in _f06?_f06[_f09]:Math.random();if(id in _f08){if(_f07&&_f07.overwrite===false){throw new Error("Object already exists");}data[_f08[id]]=_f06;}else{_f08[id]=data.push(_f06)-1;}return id;},add:function(_f0a,_f0b){(_f0b=_f0b||{}).overwrite=false;return this.put(_f0a,_f0b);},remove:function(id){var _f0c=this.index;var data=this.data;if(id in _f0c){data.splice(_f0c[id],1);this.setData(data);return true;}},query:function(_f0d,_f0e){return _f02(this.queryEngine(_f0d,_f0e)(this.data));},setData:function(data){if(data.items){this.idProperty=data.identifier||this.idProperty;data=this.data=data.items;}else{this.data=data;}this.index={};for(var i=0,l=data.length;i<l;i++){this.index[data[i][this.idProperty]]=i;}}});});},"dojox/data/JsonRestStore":function(){define(["dojo/_base/lang","dojo/_base/declare","dojo/_base/connect","dojox/rpc/Rest","dojox/rpc/JsonRest","dojox/json/schema","dojox/data/ServiceStore"],function(lang,_f0f,_f10,_f11,_f12,_f13,_f14){var rpc=lang.getObject("dojox.rpc",true);var _f15=_f0f("dojox.data.JsonRestStore",_f14,{constructor:function(_f16){_f10.connect(_f11._index,"onUpdate",this,function(obj,_f17,_f18,_f19){var _f1a=this.service.servicePath;if(!obj.__id){}else{if(obj.__id.substring(0,_f1a.length)==_f1a){this.onSet(obj,_f17,_f18,_f19);}}});this.idAttribute=this.idAttribute||"id";if(typeof _f16.target=="string"){_f16.target=_f16.target.match(/\/$/)||this.allowNoTrailingSlash?_f16.target:(_f16.target+"/");if(!this.service){this.service=_f12.services[_f16.target]||_f11(_f16.target,true);}}_f12.registerService(this.service,_f16.target,this.schema);this.schema=this.service._schema=this.schema||this.service._schema||{};this.service._store=this;this.service.idAsRef=this.idAsRef;this.schema._idAttr=this.idAttribute;var _f1b=_f12.getConstructor(this.service);var self=this;this._constructor=function(data){_f1b.call(this,data);self.onNew(this);};this._constructor.prototype=_f1b.prototype;this._index=_f11._index;},loadReferencedSchema:true,idAsRef:false,referenceIntegrity:true,target:"",allowNoTrailingSlash:false,newItem:function(data,_f1c){data=new this._constructor(data);if(_f1c){var _f1d=this.getValue(_f1c.parent,_f1c.attribute,[]);_f1d=_f1d.concat([data]);data.__parent=_f1d;this.setValue(_f1c.parent,_f1c.attribute,_f1d);}return data;},deleteItem:function(item){var _f1e=[];var _f1f=_f20._getStoreForItem(item)||this;if(this.referenceIntegrity){_f12._saveNotNeeded=true;var _f21=_f11._index;var _f22=function(_f23){var _f24;_f1e.push(_f23);_f23.__checked=1;for(var i in _f23){if(i.substring(0,2)!="__"){var _f25=_f23[i];if(_f25==item){if(_f23!=_f21){if(_f23 instanceof Array){(_f24=_f24||[]).push(i);}else{(_f20._getStoreForItem(_f23)||_f1f).unsetAttribute(_f23,i);}}}else{if((typeof _f25=="object")&&_f25){if(!_f25.__checked){_f22(_f25);}if(typeof _f25.__checked=="object"&&_f23!=_f21){(_f20._getStoreForItem(_f23)||_f1f).setValue(_f23,i,_f25.__checked);}}}}}if(_f24){i=_f24.length;_f23=_f23.__checked=_f23.concat();while(i--){_f23.splice(_f24[i],1);}return _f23;}return null;};_f22(_f21);_f12._saveNotNeeded=false;var i=0;while(_f1e[i]){delete _f1e[i++].__checked;}}_f12.deleteObject(item);_f1f.onDelete(item);},changing:function(item,_f26){_f12.changing(item,_f26);},cancelChanging:function(_f27){if(!_f27.__id){return;}dirtyObjects=_f28=_f12.getDirtyObjects();for(var i=0;i<dirtyObjects.length;i++){var _f28=dirtyObjects[i];if(_f27==_f28.object){dirtyObjects.splice(i,1);return;}}},setValue:function(item,_f29,_f2a){var old=item[_f29];var _f2b=item.__id?_f20._getStoreForItem(item):this;if(_f13&&_f2b.schema&&_f2b.schema.properties){_f13.mustBeValid(_f13.checkPropertyChange(_f2a,_f2b.schema.properties[_f29]));}if(_f29==_f2b.idAttribute){throw new Error("Can not change the identity attribute for an item");}_f2b.changing(item);item[_f29]=_f2a;if(_f2a&&!_f2a.__parent){_f2a.__parent=item;}_f2b.onSet(item,_f29,old,_f2a);},setValues:function(item,_f2c,_f2d){if(!lang.isArray(_f2d)){throw new Error("setValues expects to be passed an Array object as its value");}this.setValue(item,_f2c,_f2d);},unsetAttribute:function(item,_f2e){this.changing(item);var old=item[_f2e];delete item[_f2e];this.onSet(item,_f2e,old,undefined);},save:function(_f2f){if(!(_f2f&&_f2f.global)){(_f2f=_f2f||{}).service=this.service;}if("syncMode" in _f2f?_f2f.syncMode:this.syncMode){rpc._sync=true;}var _f30=_f12.commit(_f2f);this.serverVersion=this._updates&&this._updates.length;return _f30;},revert:function(_f31){_f12.revert(!(_f31&&_f31.global)&&this.service);},isDirty:function(item){return _f12.isDirty(item,this);},isItem:function(item,_f32){return item&&item.__id&&(_f32||this.service==_f12.getServiceAndId(item.__id).service);},_doQuery:function(args){var _f33=typeof args.queryStr=="string"?args.queryStr:args.query;var _f34=_f12.query(this.service,_f33,args);var self=this;if(this.loadReferencedSchema){_f34.addCallback(function(_f35){var _f36=_f34.ioArgs&&_f34.ioArgs.xhr&&_f34.ioArgs.xhr.getResponseHeader("Content-Type");var _f37=_f36&&_f36.match(/definedby\s*=\s*([^;]*)/);if(_f36&&!_f37){_f37=_f34.ioArgs.xhr.getResponseHeader("Link");_f37=_f37&&_f37.match(/<([^>]*)>;\s*rel="?definedby"?/);}_f37=_f37&&_f37[1];if(_f37){var _f38=_f12.getServiceAndId((self.target+_f37).replace(/^(.*\/)?(\w+:\/\/)|[^\/\.]+\/\.\.\/|^.*\/(\/)/,"$2$3"));var _f39=_f12.byId(_f38.service,_f38.id);_f39.addCallbacks(function(_f3a){lang.mixin(self.schema,_f3a);return _f35;},function(_f3b){return _f35;});return _f39;}return undefined;});}return _f34;},_processResults:function(_f3c,_f3d){var _f3e=_f3c.length;return {totalCount:_f3d.fullLength||(_f3d.request.count==_f3e?(_f3d.request.start||0)+_f3e*2:_f3e),items:_f3c};},getConstructor:function(){return this._constructor;},getIdentity:function(item){var id=item.__clientId||item.__id;if(!id){return id;}var _f3f=this.service.servicePath.replace(/[^\/]*$/,"");return id.substring(0,_f3f.length)!=_f3f?id:id.substring(_f3f.length);},fetchItemByIdentity:function(args){var id=args.identity;var _f40=this;if(id.toString().match(/^(\w*:)?\//)){var _f41=_f12.getServiceAndId(id);_f40=_f41.service._store;args.identity=_f41.id;}args._prefix=_f40.service.servicePath.replace(/[^\/]*$/,"");return _f40.inherited(arguments);},onSet:function(){},onNew:function(){},onDelete:function(){},getFeatures:function(){var _f42=this.inherited(arguments);_f42["dojo.data.api.Write"]=true;_f42["dojo.data.api.Notification"]=true;return _f42;},getParent:function(item){return item&&item.__parent;}});_f15.getStore=function(_f43,_f44){if(typeof _f43.target=="string"){_f43.target=_f43.target.match(/\/$/)||_f43.allowNoTrailingSlash?_f43.target:(_f43.target+"/");var _f45=(_f12.services[_f43.target]||{})._store;if(_f45){return _f45;}}return new (_f44||_f15)(_f43);};var _f20=lang.getObject("dojox.data",true);_f20._getStoreForItem=function(item){if(item.__id){var _f46=_f12.getServiceAndId(item.__id);if(_f46&&_f46.service._store){return _f46.service._store;}else{var _f47=item.__id.toString().match(/.*\//)[0];return new _f15({target:_f47});}}return null;};var _f48=lang.getObject("dojox.json.ref",true);_f48._useRefs=true;return _f15;});},"prcommon2/store/DataStores":function(){define(["dojo/_base/declare","dojo/data/ItemFileReadStore"],function(_f49,_f4a){return _f49("prcommon2.store.DataStores",null,{constructor:function(){this._prmaxoutlettypes=new _f4a({url:"/common/lookups?searchtype=prmaxoutlettypes"});this._prmaxoutlettypes_noFreelancer=new _f4a({url:"/common/lookups?searchtype=prmaxoutlettypes&nofreelancer=1"});this._frequencies=new _f4a({url:"/common/lookups?searchtype=frequencies"});this._reasoncode_data_upd=new _f4a({url:"/common/lookups?searchtype=reasoncodes&reasoncategoryid=2"});this._reasoncode_data_add=new _f4a({url:"/common/lookups?searchtype=reasoncodes&reasoncategoryid=1"});this._reasoncode_data_del=new _f4a({url:"/common/lookups?searchtype=reasoncodes&reasoncategoryid=3"});this._reasoncode_data_email=new _f4a({url:"/common/lookups?searchtype=reasoncodes&reasoncategoryid=4"});this._interest_master_type=new _f4a({url:"/common/lookups?searchtype=interestgroups"});this._interest_sections=new _f4a({url:"/common/lookups?searchtype=interestgroups&sections=1"});this._research_frequencies=new _f4a({url:"/common/lookups?searchtype=researchfrequencies"});this._countries=new _f4a({url:"/common/lookups?searchtype=countries"});this._contacthistorysources=new _f4a({url:"/common/lookups?searchtype=contacthistorytypes"});this._contacthistorysourcesext=new _f4a({url:"/common/lookups?searchtype=contacthistorytypes&include_no_option=1"});this._messagetypes=new _f4a({url:"/common/lookups?searchtype=messagetypes"});this._customertypes_model=new _f4a({url:"/common/lookups?searchtype=customertypes"});this._customertypes_model_ext=new _f4a({url:"/common/lookups?searchtype=customertypes&include_no_option=1"});this._researchprojectstatus=new _f4a({url:"/common/lookups?searchtype=researchprojectstatus"});this._reasoncode_del_hist=new _f4a({url:"/common/lookups?searchtype=reasoncodes&reasoncategoryid=8"});this._makretsector=new _f4a({url:"/common/lookups?searchtype=marketsector"});},Reason_Add_Default:5,Reason_Upd_Default:8,fetch:function(){this._interest_master_type.fetch();this._messagetypes.fetch();},MessageTypes:function(){return this._messagetypes;},OutletTypes:function(){return this._prmaxoutlettypes;},OutletTypes_noFreelancer:function(){return this._prmaxoutlettypes_noFreelancer;},Frequency:function(){return this._frequencies;},Research_Reason_Update_Codes:function(){return this._reasoncode_data_upd;},Research_Reason_Add_Codes:function(){return this._reasoncode_data_add;},Research_Reason_Del_Codes:function(){return this._reasoncode_data_del;},Research_Reason_Del_Hist_Codes:function(){return this._reasoncode_del_hist;},Research_Reason_Add_Email:function(){return this._reasoncode_data_email;},Interest_Filter:function(){return this._interest_master_type;},Research_Frequencies:function(){return this._research_frequencies;},Countries:function(){return this._countries;},ContactHistoryTypes:function(_f4b){if(_f4b===true){return this._contacthistorysourcesext;}else{return this._contacthistorysources;}},interest_sections:function(){return this._interest_sections;},Customer_Types:function(){return this._customertypes_model;},Customer_Types_Filter:function(){return this._customertypes_model_ext;},Research_Project_Status:function(){return this._researchprojectstatus;},MarketSector:function(){return this._makretsector;},});});},"dgrid/OnDemandList":function(){define(["./List","./_StoreMixin","dojo/_base/declare","dojo/_base/lang","dojo/_base/Deferred","dojo/dom","dojo/on","./util/misc","put-selector/put"],function(List,_f4c,_f4d,lang,_f4e,dom,_f4f,_f50,put){return _f4d([List,_f4c],{minRowsPerPage:25,maxRowsPerPage:250,maxEmptySpace:Infinity,bufferRows:10,farOffRemoval:2000,queryRowsOverlap:0,pagingMethod:"debounce",pagingDelay:_f50.defaultDelay,keepScrollPosition:false,rowHeight:22,postCreate:function(){this.inherited(arguments);var self=this;_f4f(this.bodyNode,"scroll",_f50[this.pagingMethod](function(_f51){self._processScroll(_f51);},null,this.pagingDelay));},renderQuery:function(_f52,_f53){var self=this,_f54=(_f53&&_f53.container)||this.contentNode,_f55={query:_f52,count:0,options:_f53},_f56,_f57=this.preload,_f58;var _f59={node:put(_f54,"div.dgrid-preload",{rowIndex:0}),count:0,query:_f52,next:_f55,options:_f53};_f59.node.style.height="0";_f55.node=_f56=put(_f54,"div.dgrid-preload");_f55.previous=_f59;_f56.rowIndex=this.minRowsPerPage;if(_f57){if((_f55.next=_f57.next)&&_f56.offsetTop>=_f57.node.offsetTop){_f55.previous=_f57;}else{_f55.next=_f57;_f55.previous=_f57.previous;}_f55.previous.next=_f55;_f55.next.previous=_f55;}else{this.preload=_f55;}var _f5a=put(_f56,"-div.dgrid-loading"),_f5b=put(_f5a,"div.dgrid-below");_f5b.innerHTML=this.loadingMessage;function _f5c(err){put(_f5a,"!");if(err){if(self._refreshDeferred){self._refreshDeferred.reject(err);delete self._refreshDeferred;}throw err;}};_f53=lang.mixin(this.get("queryOptions"),_f53,{start:0,count:this.minRowsPerPage},"level" in _f52?{queryLevel:_f52.level}:null);this._trackError(function(){return _f58=_f52(_f53);});if(typeof _f58==="undefined"){_f5c();return;}_f4e.when(self.renderArray(_f58,_f56,_f53),function(trs){var _f5d=typeof _f58.total==="undefined"?_f58.length:_f58.total;return _f4e.when(_f5d,function(_f5e){var _f5f=trs.length,_f60=_f56.parentNode,_f61=self.noDataNode;put(_f5a,"!");if(!("queryLevel" in _f53)){self._total=_f5e;}if(_f5e===0){if(_f61){put(_f61,"!");delete self.noDataNode;}self.noDataNode=_f61=put("div.dgrid-no-data");_f60.insertBefore(_f61,self._getFirstRowSibling(_f60));_f61.innerHTML=self.noDataMessage;}var _f62=0;for(var i=0;i<_f5f;i++){_f62+=self._calcRowHeight(trs[i]);}if(_f5f&&_f62){self.rowHeight=_f62/_f5f;}_f5e-=_f5f;_f55.count=_f5e;_f56.rowIndex=_f5f;if(_f5e){_f56.style.height=Math.min(_f5e*self.rowHeight,self.maxEmptySpace)+"px";}else{_f56.style.display="none";_f53.count++;}if(self._previousScrollPosition){self.scrollTo(self._previousScrollPosition);delete self._previousScrollPosition;}self._processScroll();if(self._refreshDeferred){self._refreshDeferred.resolve(_f58);delete self._refreshDeferred;}return trs;},_f5c);},_f5c);return _f58;},refresh:function(_f63){var self=this,keep=(_f63&&_f63.keepScrollPosition),dfd,_f64;if(typeof keep==="undefined"){keep=this.keepScrollPosition;}if(keep){this._previousScrollPosition=this.getScrollPosition();}this.inherited(arguments);if(this.store){dfd=this._refreshDeferred=new _f4e();_f64=self.renderQuery(function(_f65){return self.store.query(self.query,_f65);});if(typeof _f64==="undefined"){dfd.reject();}return dfd.then(function(_f66){setTimeout(function(){_f4f.emit(self.domNode,"dgrid-refresh-complete",{bubbles:true,cancelable:false,grid:self,results:_f66});},0);delete self._refreshDeferred;return _f66;},function(err){delete self._refreshDeferred;throw err;});}},resize:function(){this.inherited(arguments);this._processScroll();},_getFirstRowSibling:function(_f67){return _f67.lastChild;},_calcRowHeight:function(_f68){var _f69=_f68.nextSibling;if(_f69&&!/\bdgrid-preload\b/.test(_f69.className)){return _f69.offsetTop-_f68.offsetTop;}return _f68.offsetHeight;},lastScrollTop:0,_processScroll:function(evt){var grid=this,_f6a=grid.bodyNode,_f6b=(evt&&evt.scrollTop)||this.getScrollPosition().y,_f6c=_f6a.offsetHeight+_f6b,_f6d,_f6e,_f6f=grid.preload,_f70=grid.lastScrollTop,_f71=grid.bufferRows*grid.rowHeight,_f72=_f71-grid.rowHeight,_f73,_f74,_f75,_f76=true;var _f77=1;grid.lastScrollTop=_f6b;function _f78(_f79,_f7a,_f7b,_f7c){var _f7d=grid.farOffRemoval,_f6e=_f79.node;if(_f7a>2*_f7d){var row,_f7e=_f6e[_f7b];var _f7f=0;var _f80=0;var _f81=[];while((row=_f7e)){var _f82=grid._calcRowHeight(row);if(_f7f+_f82+_f7d>_f7a||(_f7e.className.indexOf("dgrid-row")<0&&_f7e.className.indexOf("dgrid-loading")<0)){break;}var _f7e=row[_f7b];_f7f+=_f82;_f80+=row.count||1;grid.removeRow(row,true);_f81.push(row);}_f79.count+=_f80;if(_f7c){_f6e.rowIndex-=_f80;_f83(_f79);}else{_f6e.style.height=(_f6e.offsetHeight+_f7f)+"px";}var _f84=put("div",_f81);setTimeout(function(){put(_f84,"!");},1);}};function _f83(_f85,_f86){_f85.node.style.height=Math.min(_f85.count*grid.rowHeight,_f86?Infinity:grid.maxEmptySpace)+"px";};function _f87(_f88,_f89){do{_f88=_f89?_f88.next:_f88.previous;}while(_f88&&!_f88.node.offsetWidth);return _f88;};while(_f6f&&!_f6f.node.offsetWidth){_f6f=_f6f.previous;}while(_f6f&&_f6f!=_f6d){_f6d=grid.preload;grid.preload=_f6f;_f6e=_f6f.node;var _f8a=_f6e.offsetTop;var _f8b;if(_f6c+_f77+_f72<_f8a){_f6f=_f87(_f6f,(_f76=false));}else{if(_f6b-_f77-_f72>(_f8a+(_f8b=_f6e.offsetHeight))){_f6f=_f87(_f6f,(_f76=true));}else{var _f8c=((_f6e.rowIndex?_f6b-_f71:_f6c)-_f8a)/grid.rowHeight;var _f8d=(_f6c-_f6b+2*_f71)/grid.rowHeight;var _f8e=Math.max(Math.min((_f6b-_f70)*grid.rowHeight,grid.maxRowsPerPage/2),grid.maxRowsPerPage/-2);_f8d+=Math.min(Math.abs(_f8e),10);if(_f6e.rowIndex==0){_f8c-=_f8d;}_f8c=Math.max(_f8c,0);if(_f8c<10&&_f8c>0&&_f8d+_f8c<grid.maxRowsPerPage){_f8d+=Math.max(0,_f8c);_f8c=0;}_f8d=Math.min(Math.max(_f8d,grid.minRowsPerPage),grid.maxRowsPerPage,_f6f.count);if(_f8d==0){_f6f=_f87(_f6f,_f76);continue;}_f8d=Math.ceil(_f8d);_f8c=Math.min(Math.floor(_f8c),_f6f.count-_f8d);var _f8f=lang.mixin(grid.get("queryOptions"),_f6f.options);_f6f.count-=_f8d;var _f90=_f6e,_f91,_f92=grid.queryRowsOverlap,_f93=(_f6e.rowIndex>0||_f6e.offsetTop>_f6b)&&_f6f;if(_f93){var _f94=_f6f.previous;if(_f94){_f78(_f94,_f6b-(_f94.node.offsetTop+_f94.node.offsetHeight),"nextSibling");if(_f8c>0&&_f94.node==_f6e.previousSibling){_f8c=Math.min(_f6f.count,_f8c);_f6f.previous.count+=_f8c;_f83(_f6f.previous,true);_f6e.rowIndex+=_f8c;_f92=0;}else{_f8d+=_f8c;}_f6f.count-=_f8c;}_f8f.start=_f6e.rowIndex-_f92;_f8f.count=Math.min(_f8d+_f92,grid.maxRowsPerPage);_f6e.rowIndex=_f8f.start+_f8f.count;}else{if(_f6f.next){_f78(_f6f.next,_f6f.next.node.offsetTop-_f6c,"previousSibling",true);var _f90=_f6e.nextSibling;if(_f90==_f6f.next.node){_f6f.next.count+=_f6f.count-_f8c;_f6f.next.node.rowIndex=_f8c+_f8d;_f83(_f6f.next);_f6f.count=_f8c;_f92=0;}else{_f91=true;}}_f8f.start=_f6f.count;_f8f.count=Math.min(_f8d+_f92,grid.maxRowsPerPage);}if(_f91&&_f90&&_f90.offsetWidth){_f91=_f90.offsetTop;}_f83(_f6f);if("level" in _f6f.query){_f8f.queryLevel=_f6f.query.level;}if(!("queryLevel" in _f8f)&&(_f8f.start>grid._total||_f8f.count<0)){continue;}var _f95=put(_f90,"-div.dgrid-loading[style=height:"+_f8d*grid.rowHeight+"px]"),_f96=put(_f95,"div.dgrid-"+(_f93?"below":"above"));_f96.innerHTML=grid.loadingMessage;_f95.count=_f8d;var _f97=_f6f.query(_f8f),_f98=grid._trackError(function(){return _f97;});if(_f98===undefined){put(_f95,"!");return;}(function(_f99,_f9a,_f9b,_f9c){_f75=_f4e.when(grid.renderArray(_f9c,_f99,_f8f),function(rows){_f74=_f9c;_f90=_f99.nextSibling;put(_f99,"!");if(_f9b&&_f90&&_f90.offsetWidth){var pos=grid.getScrollPosition();grid.scrollTo({x:pos.x,y:pos.y+_f90.offsetTop-_f9b,preserveMomentum:true});}_f4e.when(_f9c.total||_f9c.length,function(_f9d){if(!("queryLevel" in _f8f)){grid._total=_f9d;}if(_f9a){_f9a.count=_f9d-_f9a.node.rowIndex;if(_f9a.count===0){_f8f.count++;}_f83(_f9a);}});grid._processScroll();return rows;},function(e){put(_f99,"!");throw e;});}).call(this,_f95,_f93,_f91,_f97);_f6f=_f6f.previous;}}}if(_f75&&(_f73=this._refreshDeferred)){delete this._refreshDeferred;_f4e.when(_f75,function(){_f73.resolve(_f74);});}},removeRow:function(_f9e,_f9f){function _fa0(_fa1,_fa2){return _fa1!=null?_fa1:_fa2;};if(_f9e){var _fa3=_f9e.previousSibling,_fa4=_f9e.nextSibling,_fa5=_fa3&&_fa0(_fa3.observerIndex,_fa3.previousObserverIndex),_fa6=_fa4&&_fa0(_fa4.observerIndex,_fa4.nextObserverIndex),_fa7=_f9e.observerIndex;_f9e.observerIndex=undefined;if(_f9f){_f9e.nextObserverIndex=_fa6;_f9e.previousObserverIndex=_fa5;}if(this.cleanEmptyObservers&&_fa7>-1&&_fa7!==_fa5&&_fa7!==_fa6){var _fa8=this.observers;var _fa9=_fa8[_fa7];if(_fa9){if(!_f9f){var rows=_fa9.rows;for(var i=0;i<rows.length;i++){if(rows[i]!=_f9e&&dom.isDescendant(rows[i],this.domNode)){return this.inherited(arguments);}}}_fa9.cancel();this._numObservers--;_fa8[_fa7]=0;}}}this.inherited(arguments);}});});},"dojo/request/iframe":function(){define(["module","require","./watch","./util","./handlers","../_base/lang","../io-query","../query","../has","../dom","../dom-construct","../_base/window","../NodeList-dom"],function(_faa,_fab,_fac,util,_fad,lang,_fae,_faf,has,dom,_fb0,win){var mid=_faa.id.replace(/[\/\.\-]/g,"_"),_fb1=mid+"_onload";if(!win.global[_fb1]){win.global[_fb1]=function(){var dfd=_fb2._currentDfd;if(!dfd){_fb2._fireNextRequest();return;}var _fb3=dfd.response,_fb4=_fb3.options,_fb5=dom.byId(_fb4.form)||dfd._tmpForm;if(_fb5){var _fb6=dfd._contentToClean;for(var i=0;i<_fb6.length;i++){var key=_fb6[i];for(var j=0;j<_fb5.childNodes.length;j++){var _fb7=_fb5.childNodes[j];if(_fb7.name===key){_fb0.destroy(_fb7);break;}}}dfd._originalAction&&_fb5.setAttribute("action",dfd._originalAction);if(dfd._originalMethod){_fb5.setAttribute("method",dfd._originalMethod);_fb5.method=dfd._originalMethod;}if(dfd._originalTarget){_fb5.setAttribute("target",dfd._originalTarget);_fb5.target=dfd._originalTarget;}}if(dfd._tmpForm){_fb0.destroy(dfd._tmpForm);delete dfd._tmpForm;}dfd._finished=true;};}function _fb8(name,_fb9,uri){if(win.global[name]){return win.global[name];}if(win.global.frames[name]){return win.global.frames[name];}if(!uri){if(has("config-useXDomain")&&!has("config-dojoBlankHtmlUrl")){}uri=(has("config-dojoBlankHtmlUrl")||_fab.toUrl("dojo/resources/blank.html"));}var _fba=_fb0.place("<iframe id=\""+name+"\" name=\""+name+"\" src=\""+uri+"\" onload=\""+_fb9+"\" style=\"position: absolute; left: 1px; top: 1px; height: 1px; width: 1px; visibility: hidden\">",win.body());win.global[name]=_fba;return _fba;};function _fbb(_fbc,src,_fbd){var _fbe=win.global.frames[_fbc.name];if(_fbe.contentWindow){_fbe=_fbe.contentWindow;}try{if(!_fbd){_fbe.location=src;}else{_fbe.location.replace(src);}}catch(e){}};function doc(_fbf){if(_fbf.contentDocument){return _fbf.contentDocument;}var name=_fbf.name;if(name){var _fc0=win.doc.getElementsByTagName("iframe");if(_fbf.document&&_fc0[name].contentWindow&&_fc0[name].contentWindow.document){return _fc0[name].contentWindow.document;}else{if(win.doc.frames[name]&&win.doc.frames[name].document){return win.doc.frames[name].document;}}}return null;};function _fc1(){return _fb0.create("form",{name:mid+"_form",style:{position:"absolute",top:"-1000px",left:"-1000px"}},win.body());};function _fc2(){var dfd;try{if(_fb2._currentDfd||!_fb2._dfdQueue.length){return;}do{dfd=_fb2._currentDfd=_fb2._dfdQueue.shift();}while(dfd&&(dfd.canceled||(dfd.isCanceled&&dfd.isCanceled()))&&_fb2._dfdQueue.length);if(!dfd||dfd.canceled||(dfd.isCanceled&&dfd.isCanceled())){_fb2._currentDfd=null;return;}var _fc3=dfd.response,_fc4=_fc3.options,c2c=dfd._contentToClean=[],_fc5=dom.byId(_fc4.form),_fc6=util.notify,data=_fc4.data||null,_fc7;if(!dfd._legacy&&_fc4.method==="POST"&&!_fc5){_fc5=dfd._tmpForm=_fc1();}else{if(_fc4.method==="GET"&&_fc5&&_fc3.url.indexOf("?")>-1){_fc7=_fc3.url.slice(_fc3.url.indexOf("?")+1);data=lang.mixin(_fae.queryToObject(_fc7),data);}}if(_fc5){if(!dfd._legacy){var _fc8=_fc5;do{_fc8=_fc8.parentNode;}while(_fc8&&_fc8!==win.doc.documentElement);if(!_fc8){_fc5.style.position="absolute";_fc5.style.left="-1000px";_fc5.style.top="-1000px";win.body().appendChild(_fc5);}if(!_fc5.name){_fc5.name=mid+"_form";}}if(data){var _fc9=function(name,_fca){_fb0.create("input",{type:"hidden",name:name,value:_fca},_fc5);c2c.push(name);};for(var x in data){var val=data[x];if(lang.isArray(val)&&val.length>1){for(var i=0;i<val.length;i++){_fc9(x,val[i]);}}else{if(!_fc5[x]){_fc9(x,val);}else{_fc5[x].value=val;}}}}var _fcb=_fc5.getAttributeNode("action"),_fcc=_fc5.getAttributeNode("method"),_fcd=_fc5.getAttributeNode("target");if(_fc3.url){dfd._originalAction=_fcb?_fcb.value:null;if(_fcb){_fcb.value=_fc3.url;}else{_fc5.setAttribute("action",_fc3.url);}}if(!dfd._legacy){dfd._originalMethod=_fcc?_fcc.value:null;if(_fcc){_fcc.value=_fc4.method;}else{_fc5.setAttribute("method",_fc4.method);}}else{if(!_fcc||!_fcc.value){if(_fcc){_fcc.value=_fc4.method;}else{_fc5.setAttribute("method",_fc4.method);}}}dfd._originalTarget=_fcd?_fcd.value:null;if(_fcd){_fcd.value=_fb2._iframeName;}else{_fc5.setAttribute("target",_fb2._iframeName);}_fc5.target=_fb2._iframeName;_fc6&&_fc6.emit("send",_fc3,dfd.promise.cancel);_fb2._notifyStart(_fc3);_fc5.submit();}else{var _fce="";if(_fc3.options.data){_fce=_fc3.options.data;if(typeof _fce!=="string"){_fce=_fae.objectToQuery(_fce);}}var _fcf=_fc3.url+(_fc3.url.indexOf("?")>-1?"&":"?")+_fce;_fc6&&_fc6.emit("send",_fc3,dfd.promise.cancel);_fb2._notifyStart(_fc3);_fb2.setSrc(_fb2._frame,_fcf,true);}}catch(e){dfd.reject(e);}};function _fd0(_fd1){return !this.isFulfilled();};function _fd2(_fd3){return !!this._finished;};function _fd4(_fd5,_fd6){if(!_fd6){try{var _fd7=_fd5.options,doc=_fb2.doc(_fb2._frame),_fd8=_fd7.handleAs;if(_fd8!=="html"){if(_fd8==="xml"){if(doc.documentElement.tagName.toLowerCase()==="html"){_faf("a",doc.documentElement).orphan();var _fd9=doc.documentElement.innerText||doc.documentElement.textContent;_fd9=_fd9.replace(/>\s+</g,"><");_fd5.text=lang.trim(_fd9);}else{_fd5.data=doc;}}else{_fd5.text=doc.getElementsByTagName("textarea")[0].value;}_fad(_fd5);}else{_fd5.data=doc;}}catch(e){_fd6=e;}}if(_fd6){this.reject(_fd6);}else{if(this._finished){this.resolve(_fd5);}else{this.reject(new Error("Invalid dojo/request/iframe request state"));}}};function last(_fda){this._callNext();};var _fdb={method:"POST"};function _fb2(url,_fdc,_fdd){var _fde=util.parseArgs(url,util.deepCreate(_fdb,_fdc),true);url=_fde.url;_fdc=_fde.options;if(_fdc.method!=="GET"&&_fdc.method!=="POST"){throw new Error(_fdc.method+" not supported by dojo/request/iframe");}if(!_fb2._frame){_fb2._frame=_fb2.create(_fb2._iframeName,_fb1+"();");}var dfd=util.deferred(_fde,null,_fd0,_fd2,_fd4,last);dfd._callNext=function(){if(!this._calledNext){this._calledNext=true;_fb2._currentDfd=null;_fb2._fireNextRequest();}};dfd._legacy=_fdd;_fb2._dfdQueue.push(dfd);_fb2._fireNextRequest();_fac(dfd);return _fdd?dfd:dfd.promise;};_fb2.create=_fb8;_fb2.doc=doc;_fb2.setSrc=_fbb;_fb2._iframeName=mid+"_IoIframe";_fb2._notifyStart=function(){};_fb2._dfdQueue=[];_fb2._currentDfd=null;_fb2._fireNextRequest=_fc2;util.addCommonMethods(_fb2,["GET","POST"]);return _fb2;});},"dojox/grid/_Events":function(){define(["dojo/keys","dojo/dom-class","dojo/_base/declare","dojo/_base/event","dojo/_base/sniff"],function(keys,_fdf,_fe0,_fe1,has){return _fe0("dojox.grid._Events",null,{cellOverClass:"dojoxGridCellOver",onKeyEvent:function(e){this.dispatchKeyEvent(e);},onContentEvent:function(e){this.dispatchContentEvent(e);},onHeaderEvent:function(e){this.dispatchHeaderEvent(e);},onStyleRow:function(_fe2){var i=_fe2;i.customClasses+=(i.odd?" dojoxGridRowOdd":"")+(i.selected?" dojoxGridRowSelected":"")+(i.over?" dojoxGridRowOver":"");this.focus.styleRow(_fe2);this.edit.styleRow(_fe2);},onKeyDown:function(e){if(e.altKey||e.metaKey){return;}var _fe3;switch(e.keyCode){case keys.ESCAPE:this.edit.cancel();break;case keys.ENTER:if(!this.edit.isEditing()){_fe3=this.focus.getHeaderIndex();if(_fe3>=0){this.setSortIndex(_fe3);break;}else{this.selection.clickSelect(this.focus.rowIndex,dojo.isCopyKey(e),e.shiftKey);}_fe1.stop(e);}if(!e.shiftKey){var _fe4=this.edit.isEditing();this.edit.apply();if(!_fe4){this.edit.setEditCell(this.focus.cell,this.focus.rowIndex);}}if(!this.edit.isEditing()){var _fe5=this.focus.focusView||this.views.views[0];_fe5.content.decorateEvent(e);this.onRowClick(e);_fe1.stop(e);}break;case keys.SPACE:if(!this.edit.isEditing()){_fe3=this.focus.getHeaderIndex();if(_fe3>=0){this.setSortIndex(_fe3);break;}else{this.selection.clickSelect(this.focus.rowIndex,dojo.isCopyKey(e),e.shiftKey);this.focus._focusifyCellNode(true);this.focus.setFocusCell(this.focus.cell,this.focus.rowIndex);}_fe1.stop(e);}break;case keys.TAB:this.focus[e.shiftKey?"previousKey":"nextKey"](e);break;case keys.LEFT_ARROW:case keys.RIGHT_ARROW:if(!this.edit.isEditing()){var _fe6=e.keyCode;_fe1.stop(e);_fe3=this.focus.getHeaderIndex();if(_fe3>=0&&(e.shiftKey&&e.ctrlKey)){this.focus.colSizeAdjust(e,_fe3,(_fe6==keys.LEFT_ARROW?-1:1)*5);}else{var _fe7=(_fe6==keys.LEFT_ARROW)?1:-1;if(this.isLeftToRight()){_fe7*=-1;}this.focus.move(0,_fe7);}}break;case keys.UP_ARROW:if(!this.edit.isEditing()&&this.focus.rowIndex!==0){_fe1.stop(e);this.focus.move(-1,0);}break;case keys.DOWN_ARROW:if(!this.edit.isEditing()&&this.focus.rowIndex+1!=this.rowCount){_fe1.stop(e);this.focus.move(1,0);}break;case keys.PAGE_UP:if(!this.edit.isEditing()&&this.focus.rowIndex!==0){_fe1.stop(e);if(this.focus.rowIndex!=this.scroller.firstVisibleRow+1){this.focus.move(this.scroller.firstVisibleRow-this.focus.rowIndex,0);}else{this.setScrollTop(this.scroller.findScrollTop(this.focus.rowIndex-1));this.focus.move(this.scroller.firstVisibleRow-this.scroller.lastVisibleRow+1,0);}}break;case keys.PAGE_DOWN:if(!this.edit.isEditing()&&this.focus.rowIndex+1!=this.rowCount){_fe1.stop(e);if(this.focus.rowIndex!=this.scroller.lastVisibleRow-1){this.focus.move(this.scroller.lastVisibleRow-this.focus.rowIndex-1,0);}else{this.setScrollTop(this.scroller.findScrollTop(this.focus.rowIndex+1));this.focus.move(this.scroller.lastVisibleRow-this.scroller.firstVisibleRow-1,0);}}break;default:break;}},onMouseOver:function(e){e.rowIndex==-1?this.onHeaderCellMouseOver(e):this.onCellMouseOver(e);},onMouseOut:function(e){e.rowIndex==-1?this.onHeaderCellMouseOut(e):this.onCellMouseOut(e);},onMouseDown:function(e){e.rowIndex==-1?this.onHeaderCellMouseDown(e):this.onCellMouseDown(e);},onMouseOverRow:function(e){if(!this.rows.isOver(e.rowIndex)){this.rows.setOverRow(e.rowIndex);e.rowIndex==-1?this.onHeaderMouseOver(e):this.onRowMouseOver(e);}},onMouseOutRow:function(e){if(this.rows.isOver(-1)){this.onHeaderMouseOut(e);}else{if(!this.rows.isOver(-2)){this.rows.setOverRow(-2);this.onRowMouseOut(e);}}},onMouseDownRow:function(e){if(e.rowIndex!=-1){this.onRowMouseDown(e);}},onCellMouseOver:function(e){if(e.cellNode){_fdf.add(e.cellNode,this.cellOverClass);}},onCellMouseOut:function(e){if(e.cellNode){_fdf.remove(e.cellNode,this.cellOverClass);}},onCellMouseDown:function(e){},onCellClick:function(e){this._click[0]=this._click[1];this._click[1]=e;if(!this.edit.isEditCell(e.rowIndex,e.cellIndex)){this.focus.setFocusCell(e.cell,e.rowIndex);}if(this._click.length>1&&this._click[0]==null){this._click.shift();}this.onRowClick(e);},onCellDblClick:function(e){var _fe8;if(this._click.length>1&&has("ie")){_fe8=this._click[1];}else{if(this._click.length>1&&this._click[0].rowIndex!=this._click[1].rowIndex){_fe8=this._click[0];}else{_fe8=e;}}this.focus.setFocusCell(_fe8.cell,_fe8.rowIndex);this.edit.setEditCell(_fe8.cell,_fe8.rowIndex);this.onRowDblClick(e);},onCellContextMenu:function(e){this.onRowContextMenu(e);},onCellFocus:function(_fe9,_fea){this.edit.cellFocus(_fe9,_fea);},onRowClick:function(e){this.edit.rowClick(e);this.selection.clickSelectEvent(e);},onRowDblClick:function(e){},onRowMouseOver:function(e){},onRowMouseOut:function(e){},onRowMouseDown:function(e){},onRowContextMenu:function(e){_fe1.stop(e);},onHeaderMouseOver:function(e){},onHeaderMouseOut:function(e){},onHeaderCellMouseOver:function(e){if(e.cellNode){_fdf.add(e.cellNode,this.cellOverClass);}},onHeaderCellMouseOut:function(e){if(e.cellNode){_fdf.remove(e.cellNode,this.cellOverClass);}},onHeaderCellMouseDown:function(e){},onHeaderClick:function(e){},onHeaderCellClick:function(e){this.setSortIndex(e.cell.index);this.onHeaderClick(e);},onHeaderDblClick:function(e){},onHeaderCellDblClick:function(e){this.onHeaderDblClick(e);},onHeaderCellContextMenu:function(e){this.onHeaderContextMenu(e);},onHeaderContextMenu:function(e){if(!this.headerMenu){_fe1.stop(e);}},onStartEdit:function(_feb,_fec){},onApplyCellEdit:function(_fed,_fee,_fef){},onCancelEdit:function(_ff0){},onApplyEdit:function(_ff1){},onCanSelect:function(_ff2){return true;},onCanDeselect:function(_ff3){return true;},onSelected:function(_ff4){this.updateRowStyles(_ff4);},onDeselected:function(_ff5){this.updateRowStyles(_ff5);},onSelectionChanged:function(){}});});},"dijit/form/_ListBase":function(){define(["dojo/_base/declare","dojo/on","dojo/window"],function(_ff6,on,_ff7){return _ff6("dijit.form._ListBase",null,{selected:null,_listConnect:function(_ff8,_ff9){var self=this;return self.own(on(self.containerNode,on.selector(function(_ffa,_ffb,_ffc){return _ffa.parentNode==_ffc;},_ff8),function(evt){self[_ff9](evt,this);}));},selectFirstNode:function(){var _ffd=this.containerNode.firstChild;while(_ffd&&_ffd.style.display=="none"){_ffd=_ffd.nextSibling;}this._setSelectedAttr(_ffd,true);},selectLastNode:function(){var last=this.containerNode.lastChild;while(last&&last.style.display=="none"){last=last.previousSibling;}this._setSelectedAttr(last,true);},selectNextNode:function(){var _ffe=this.selected;if(!_ffe){this.selectFirstNode();}else{var next=_ffe.nextSibling;while(next&&next.style.display=="none"){next=next.nextSibling;}if(!next){this.selectFirstNode();}else{this._setSelectedAttr(next,true);}}},selectPreviousNode:function(){var _fff=this.selected;if(!_fff){this.selectLastNode();}else{var prev=_fff.previousSibling;while(prev&&prev.style.display=="none"){prev=prev.previousSibling;}if(!prev){this.selectLastNode();}else{this._setSelectedAttr(prev,true);}}},_setSelectedAttr:function(node,_1000){if(this.selected!=node){var _1001=this.selected;if(_1001){this.onDeselect(_1001);}if(node){if(_1000){_ff7.scrollIntoView(node);}this.onSelect(node);}this._set("selected",node);}else{if(node){this.onSelect(node);}}}});});},"dgrid/util/has-css3":function(){define(["dojo/has"],function(has){var _1002=["ms","O","Moz","Webkit"];function _1003(_1004,_1005){var style=_1004.style,i;if(_1005 in style){return true;}_1005=_1005.slice(0,1).toUpperCase()+_1005.slice(1);for(i=_1002.length;i--;){if((_1002[i]+_1005) in style){return _1002[i];}}return false;};has.add("css-transitions",function(_1006,doc,_1007){return _1003(_1007,"transitionProperty");});has.add("css-transforms",function(_1008,doc,_1009){return _1003(_1009,"transform");});has.add("css-transforms3d",function(_100a,doc,_100b){return _1003(_100b,"perspective");});has.add("transitionend",function(){var tpfx=has("css-transitions");if(!tpfx){return false;}if(tpfx===true){return "transitionend";}return {ms:"MSTransitionEnd",O:"oTransitionEnd",Moz:"transitionend",Webkit:"webkitTransitionEnd"}[tpfx];});return has;});},"dojox/rpc/Rest":function(){define("dojox/rpc/Rest",["dojo","dojox"],function(dojo,dojox){dojo.getObject("rpc.Rest",true,dojox);if(dojox.rpc&&dojox.rpc.transportRegistry){dojox.rpc.transportRegistry.register("REST",function(str){return str=="REST";},{getExecutor:function(func,_100c,svc){return new dojox.rpc.Rest(_100c.name,(_100c.contentType||svc._smd.contentType||"").match(/json|javascript/),null,function(id,args){var _100d=svc._getRequest(_100c,[id]);_100d.url=_100d.target+(_100d.data?"?"+_100d.data:"");if(args&&(args.start>=0||args.count>=0)){_100d.headers=_100d.headers||{};_100d.headers.Range="items="+(args.start||"0")+"-"+(("count" in args&&args.count!=Infinity)?(args.count+(args.start||0)-1):"");}return _100d;});}});}var drr;function index(_100e,_100f,range,id){_100e.addCallback(function(_1010){if(_100e.ioArgs.xhr&&range){range=_100e.ioArgs.xhr.getResponseHeader("Content-Range");_100e.fullLength=range&&(range=range.match(/\/(.*)/))&&parseInt(range[1]);}return _1010;});return _100e;};drr=dojox.rpc.Rest=function(path,_1011,_1012,_1013){var _1014;_1014=function(id,args){return drr._get(_1014,id,args);};_1014.isJson=_1011;_1014._schema=_1012;_1014.cache={serialize:_1011?((dojox.json&&dojox.json.ref)||dojo).toJson:function(_1015){return _1015;}};_1014._getRequest=_1013||function(id,args){if(dojo.isObject(id)){id=dojo.objectToQuery(id);id=id?"?"+id:"";}if(args&&args.sort&&!args.queryStr){id+=(id?"&":"?")+"sort=";for(var i=0;i<args.sort.length;i++){var sort=args.sort[i];id+=(i>0?",":"")+(sort.descending?"-":"+")+encodeURIComponent(sort.attribute);}}var _1016={url:path+(id==null?"":id),handleAs:_1011?"json":"text",contentType:_1011?"application/json":"text/plain",sync:dojox.rpc._sync,preventCache:true,headers:{Accept:_1011?"application/json,application/javascript":"*/*"}};if(args&&(args.start>=0||args.count>=0)){_1016.headers.Range="items="+(args.start||"0")+"-"+(("count" in args&&args.count!=Infinity)?(args.count+(args.start||0)-1):"");}dojox.rpc._sync=false;return _1016;};function _1017(name){_1014[name]=function(id,_1018){return drr._change(name,_1014,id,_1018);};};_1017("put");_1017("post");_1017("delete");_1014.servicePath=path;return _1014;};drr._index={};drr._timeStamps={};drr._change=function(_1019,_101a,id,_101b){var _101c=_101a._getRequest(id);_101c[_1019+"Data"]=_101b;return index(dojo.xhr(_1019.toUpperCase(),_101c,true),_101a);};drr._get=function(_101d,id,args){args=args||{};return index(dojo.xhrGet(_101d._getRequest(id,args)),_101d,(args.start>=0||args.count>=0),id);};return drr;});},"dijit/typematic":function(){define(["dojo/_base/array","dojo/_base/connect","dojo/_base/lang","dojo/on","dojo/sniff","./main"],function(array,_101e,lang,on,has,dijit){var _101f=(dijit.typematic={_fireEventAndReload:function(){this._timer=null;this._callback(++this._count,this._node,this._evt);this._currentTimeout=Math.max(this._currentTimeout<0?this._initialDelay:(this._subsequentDelay>1?this._subsequentDelay:Math.round(this._currentTimeout*this._subsequentDelay)),this._minDelay);this._timer=setTimeout(lang.hitch(this,"_fireEventAndReload"),this._currentTimeout);},trigger:function(evt,_1020,node,_1021,obj,_1022,_1023,_1024){if(obj!=this._obj){this.stop();this._initialDelay=_1023||500;this._subsequentDelay=_1022||0.9;this._minDelay=_1024||10;this._obj=obj;this._node=node;this._currentTimeout=-1;this._count=-1;this._callback=lang.hitch(_1020,_1021);this._evt={faux:true};for(var attr in evt){if(attr!="layerX"&&attr!="layerY"){var v=evt[attr];if(typeof v!="function"&&typeof v!="undefined"){this._evt[attr]=v;}}}this._fireEventAndReload();}},stop:function(){if(this._timer){clearTimeout(this._timer);this._timer=null;}if(this._obj){this._callback(-1,this._node,this._evt);this._obj=null;}},addKeyListener:function(node,_1025,_1026,_1027,_1028,_1029,_102a){var type="keyCode" in _1025?"keydown":"charCode" in _1025?"keypress":_101e._keypress,attr="keyCode" in _1025?"keyCode":"charCode" in _1025?"charCode":"charOrCode";var _102b=[on(node,type,lang.hitch(this,function(evt){if(evt[attr]==_1025[attr]&&(_1025.ctrlKey===undefined||_1025.ctrlKey==evt.ctrlKey)&&(_1025.altKey===undefined||_1025.altKey==evt.altKey)&&(_1025.metaKey===undefined||_1025.metaKey==(evt.metaKey||false))&&(_1025.shiftKey===undefined||_1025.shiftKey==evt.shiftKey)){evt.stopPropagation();evt.preventDefault();_101f.trigger(evt,_1026,node,_1027,_1025,_1028,_1029,_102a);}else{if(_101f._obj==_1025){_101f.stop();}}})),on(node,"keyup",lang.hitch(this,function(){if(_101f._obj==_1025){_101f.stop();}}))];return {remove:function(){array.forEach(_102b,function(h){h.remove();});}};},addMouseListener:function(node,_102c,_102d,_102e,_102f,_1030){var _1031=[on(node,"mousedown",lang.hitch(this,function(evt){evt.preventDefault();_101f.trigger(evt,_102c,node,_102d,node,_102e,_102f,_1030);})),on(node,"mouseup",lang.hitch(this,function(evt){if(this._obj){evt.preventDefault();}_101f.stop();})),on(node,"mouseout",lang.hitch(this,function(evt){if(this._obj){evt.preventDefault();}_101f.stop();})),on(node,"dblclick",lang.hitch(this,function(evt){evt.preventDefault();if(has("ie")<9){_101f.trigger(evt,_102c,node,_102d,node,_102e,_102f,_1030);setTimeout(lang.hitch(this,_101f.stop),50);}}))];return {remove:function(){array.forEach(_1031,function(h){h.remove();});}};},addListener:function(_1032,_1033,_1034,_1035,_1036,_1037,_1038,_1039){var _103a=[this.addKeyListener(_1033,_1034,_1035,_1036,_1037,_1038,_1039),this.addMouseListener(_1032,_1035,_1036,_1037,_1038,_1039)];return {remove:function(){array.forEach(_103a,function(h){h.remove();});}};}});return _101f;});},"dgrid/List":function(){define(["dojo/_base/kernel","dojo/_base/declare","dojo/dom","dojo/on","dojo/has","./util/misc","dojo/has!touch?./TouchScroll","xstyle/has-class","put-selector/put","dojo/_base/sniff","xstyle/css!./css/dgrid.css"],function(_103b,_103c,dom,_103d,has,_103e,_103f,_1040,put){_1040("mozilla","opera","webkit","ie","ie-6","ie-6-7","quirks","no-quirks","touch");var _1041="dgrid-row-odd",_1042="dgrid-row-even",_1043,_1044;function byId(id){return document.getElementById(id);};function _1045(_1046){_1046.className="";document.body.removeChild(_1046);};function _1047(_1048,_1049){put(document.body,_1048,".dgrid-scrollbar-measure");var size=_1048["offset"+_1049]-_1048["client"+_1049];_1045(_1048);return size;};has.add("dom-scrollbar-width",function(_104a,doc,_104b){return _1047(_104b,"Width");});has.add("dom-scrollbar-height",function(_104c,doc,_104d){return _1047(_104d,"Height");});has.add("dom-rtl-scrollbar-left",function(_104e,doc,_104f){var div=put("div"),_1050;put(document.body,_104f,".dgrid-scrollbar-measure[dir=rtl]");put(_104f,div);_1050=!!has("ie")||!!has("trident")||div.offsetLeft>=has("dom-scrollbar-width");_1045(_104f);put(div,"!");_104f.removeAttribute("dir");return _1050;});var _1051=0;function _1052(){return "dgrid_"+_1051++;};var _1053=/ +/g;function _1054(cls){var _1055=cls?"."+cls.replace(_1053,"."):"";if(this._class){_1055="!"+this._class.replace(_1053,"!")+_1055;}put(this.domNode,_1055);this._class=cls;};function _1056(){return this._class;};var _1057=has("ie")<7&&!has("quirks")?function(){var root,w,h,dims;if(!this._started){return;}root=document.documentElement;w=root.clientWidth;h=root.clientHeight;dims=this._prevWinDims||[];if(dims[0]!==w||dims[1]!==h){this.resize();this._prevWinDims=[w,h];}}:function(){if(this._started){this.resize();}};function _1058(){return {x:this.bodyNode.scrollLeft,y:this.bodyNode.scrollTop};};function _1059(_105a){if(typeof _105a.x!=="undefined"){this.bodyNode.scrollLeft=_105a.x;}if(typeof _105a.y!=="undefined"){this.bodyNode.scrollTop=_105a.y;}};return _103c(has("touch")?_103f:null,{tabableHeader:false,showHeader:false,showFooter:false,maintainOddEven:true,cleanAddedRules:true,useTouchScroll:null,addUiClasses:true,cleanEmptyObservers:true,highlightDuration:250,postscript:function(_105b,_105c){var grid=this;(this._Row=function(id,_105d,_105e){this.id=id;this.data=_105d;this.element=_105e;}).prototype.remove=function(){grid.removeRow(this.element);};if(_105c){this.srcNodeRef=_105c=_105c.nodeType?_105c:byId(_105c);}this.create(_105b,_105c);},listType:"list",create:function(_105f,_1060){var _1061=this.domNode=_1060||put("div"),cls;if(_105f){this.params=_105f;_103c.safeMixin(this,_105f);cls=_105f["class"]||_105f.className||_1061.className;this._sort=_105f.sort||[];delete this.sort;}else{this._sort=[];}this.observers=[];this._numObservers=0;this._listeners=[];this._rowIdToObject={};this.postMixInProperties&&this.postMixInProperties();this.id=_1061.id=_1061.id||this.id||_1052();if(this.useTouchScroll===null){this.useTouchScroll=!has("dom-scrollbar-width");}this.buildRendering();if(cls){_1054.call(this,cls);}this.postCreate();delete this.srcNodeRef;if(this.domNode.offsetHeight){this.startup();}},buildRendering:function(){var _1062=this.domNode,_1063=this.addUiClasses,self=this,_1064,_1065,_1066,_1067,isRTL;isRTL=this.isRTL=(document.body.dir||document.documentElement.dir||document.body.style.direction).toLowerCase()=="rtl";_1062.className="";put(_1062,"[role=grid].dgrid.dgrid-"+this.listType+(_1063?".ui-widget":""));_1064=this.headerNode=put(_1062,"div.dgrid-header.dgrid-header-row"+(_1063?".ui-widget-header":"")+(this.showHeader?"":".dgrid-header-hidden"));if(has("quirks")||has("ie")<8){_1065=put(_1062,"div.dgrid-spacer");}_1066=this.bodyNode=put(_1062,"div.dgrid-scroller");if(has("ff")){_1066.tabIndex=-1;}this.headerScrollNode=put(_1062,"div.dgrid-header.dgrid-header-scroll.dgrid-scrollbar-width"+(_1063?".ui-widget-header":""));_1067=this.footerNode=put("div.dgrid-footer"+(this.showFooter?"":".dgrid-footer-hidden"));put(_1062,_1067);if(isRTL){_1062.className+=" dgrid-rtl"+(has("dom-rtl-scrollbar-left")?" dgrid-rtl-swap":"");}_103d(_1066,"scroll",function(event){if(self.showHeader){_1064.scrollLeft=event.scrollLeft||_1066.scrollLeft;}event.stopPropagation();_103d.emit(_1062,"scroll",{scrollTarget:_1066});});this.configStructure();this.renderHeader();this.contentNode=this.touchNode=put(this.bodyNode,"div.dgrid-content"+(_1063?".ui-widget-content":""));this._listeners.push(this._resizeHandle=_103d(window,"resize",_103e.throttleDelayed(_1057,this)));},postCreate:has("touch")?function(){if(this.useTouchScroll){this.inherited(arguments);}}:function(){},startup:function(){if(this._started){return;}this.inherited(arguments);this._started=true;this.resize();this.set("sort",this._sort);},configStructure:function(){},resize:function(){var _1068=this.bodyNode,_1069=this.headerNode,_106a=this.footerNode,_106b=_1069.offsetHeight,_106c=this.showFooter?_106a.offsetHeight:0,_106d=has("quirks")||has("ie")<7;this.headerScrollNode.style.height=_1068.style.marginTop=_106b+"px";_1068.style.marginBottom=_106c+"px";if(_106d){_1068.style.height="";_1068.style.height=Math.max((this.domNode.offsetHeight-_106b-_106c),0)+"px";if(_106c){_106a.style.bottom="1px";setTimeout(function(){_106a.style.bottom="";},0);}}if(!_1043){_1043=has("dom-scrollbar-width");_1044=has("dom-scrollbar-height");if(has("ie")){_1043++;_1044++;}_103e.addCssRule(".dgrid-scrollbar-width","width: "+_1043+"px");_103e.addCssRule(".dgrid-scrollbar-height","height: "+_1044+"px");if(_1043!=17&&!_106d){_103e.addCssRule(".dgrid-header-row","right: "+_1043+"px");_103e.addCssRule(".dgrid-rtl-swap .dgrid-header-row","left: "+_1043+"px");}}if(_106d){_1069.style.width=_1068.clientWidth+"px";setTimeout(function(){_1069.scrollLeft=_1068.scrollLeft;},0);}},addCssRule:function(_106e,css){var rule=_103e.addCssRule(_106e,css);if(this.cleanAddedRules){this._listeners.push(rule);}return rule;},on:function(_106f,_1070){var _1071=_103d(this.domNode,_106f,_1070);if(!has("dom-addeventlistener")){this._listeners.push(_1071);}return _1071;},cleanup:function(){var _1072=this.observers,i;for(i in this._rowIdToObject){if(this._rowIdToObject[i]!=this.columns){var _1073=byId(i);if(_1073){this.removeRow(_1073,true);}}}for(i=0;i<_1072.length;i++){var _1074=_1072[i];_1074&&_1074.cancel();}this.observers=[];this._numObservers=0;this.preload=null;},destroy:function(){if(this._listeners){for(var i=this._listeners.length;i--;){this._listeners[i].remove();}delete this._listeners;}this._started=false;this.cleanup();put(this.domNode,"!");if(this.useTouchScroll){this.inherited(arguments);}},refresh:function(){this.cleanup();this._rowIdToObject={};this._autoId=0;this.contentNode.innerHTML="";this.scrollTo({x:0,y:0});},newRow:function(_1075,_1076,_1077,i,_1078){if(_1076){var row=this.insertRow(_1075,_1076,_1077,i,_1078);put(row,".dgrid-highlight"+(this.addUiClasses?".ui-state-highlight":""));setTimeout(function(){put(row,"!dgrid-highlight!ui-state-highlight");},this.highlightDuration);return row;}},adjustRowIndices:function(_1079){var next=_1079;var _107a=next.rowIndex;if(_107a>-1){do{if(next.rowIndex>-1){if(this.maintainOddEven){if((next.className+" ").indexOf("dgrid-row ")>-1){put(next,"."+(_107a%2==1?_1041:_1042)+"!"+(_107a%2==0?_1041:_1042));}}next.rowIndex=_107a++;}}while((next=next.nextSibling)&&next.rowIndex!=_107a);}},renderArray:function(_107b,_107c,_107d){_107d=_107d||{};var self=this,start=_107d.start||0,_107e=this.observers,rows,_107f,_1080;if(!_107c){this._lastCollection=_107b;}if(_107b.observe){self._numObservers++;var _1081=_107b.observe(function(_1082,from,to){var row,_1083,_1084,_1085;function _1086(){_1084=(_1084.connected||_1084).nextSibling;};if(from>-1&&rows[from]){row=rows.splice(from,1)[0];if(row.parentNode==_107f){_1083=row.nextSibling;if(_1083){if(from!=to){_1083.rowIndex--;}}self.removeRow(row);}_107d.count--;if(self._processScroll){self._processScroll();}}if(to>-1){if(rows.length){if(to===0){_1084=rows[to];_1084=_1084&&_1087(_1084);}else{_1084=rows[to-1];if(_1084){_1084=_1087(_1084);_1086();}}}else{_1084=self._getFirstRowSibling&&self._getFirstRowSibling(_107f);}if(row&&_1084&&row.id===_1084.id){_1086();}if(_1084&&!_1084.parentNode){_1084=byId(_1084.id);}_1085=(_107c&&_107c.parentNode)||(_1084&&_1084.parentNode)||self.contentNode;row=self.newRow(_1082,_1085,_1084,_107d.start+to,_107d);if(row){row.observerIndex=_1080;rows.splice(to,0,row);if(!_1083||to<from){var _1088=row.previousSibling;_1083=!_1088||_1088.rowIndex+1==row.rowIndex||row.rowIndex==0?row:_1088;}}_107d.count++;}if(from===0){_1089(1,1);}else{if(from===_107b.length-(to===-1?0:1)){_1089(0,0);}}from!=to&&_1083&&self.adjustRowIndices(_1083);self._onNotification(rows,_1082,from,to);},true);_1080=_107e.push(_1081)-1;}var _108a=document.createDocumentFragment(),_108b;function _1089(){var sides=arguments;if(_1080>-1){for(var i=0;i<sides.length;i++){var top=sides[i];var _108c=rows[top?0:rows.length-1];_108c=_108c&&_1087(_108c);if(_108c){var row=_108c[top?"previousSibling":"nextSibling"];if(row){row=self.row(row);}if(row&&row.element!=_108c){var _108d=top?"unshift":"push";_107b[_108d](row.data);rows[_108d](row.element);_107d.count++;}}}}};function _1087(row){if(!dom.isDescendant(row,self.domNode)&&byId(row.id)){return self.row(row.id.slice(self.id.length+5)).element;}return row;};function _108e(_108f){_108b=self.insertRow(_108f,_108a,null,start++,_107d);_108b.observerIndex=_1080;return _108b;};function _1090(error){if(typeof _1080!=="undefined"){_107e[_1080].cancel();_107e[_1080]=0;self._numObservers--;}if(error){throw error;}};var _1091;function _1092(_1093){_1091=_1093.slice(0);_107f=_107c?_107c.parentNode:self.contentNode;if(_107f&&_107f.parentNode&&(_107f!==self.contentNode||_1093.length)){_107f.insertBefore(_108a,_107c||null);_108b=_1093[_1093.length-1];_108b&&self.adjustRowIndices(_108b);}else{if(_107e[_1080]&&self.cleanEmptyObservers){_1090();}}rows=_1093;if(_1081){_1081.rows=rows;}};if(_107b.map){rows=_107b.map(_108e,console.error);if(rows.then){return _107b.then(function(_1094){_107b=_1094;return rows.then(function(_1095){_1092(_1095);_1089(1,1,0,0);return _1091;});});}}else{rows=[];for(var i=0,l=_107b.length;i<l;i++){rows[i]=_108e(_107b[i]);}}_1092(rows);_1089(1,1,0,0);return _1091;},_onNotification:function(rows,_1096,from,to){},renderHeader:function(){},_autoId:0,insertRow:function(_1097,_1098,_1099,i,_109a){var _109b=_109a.parentId,id=this.id+"-row-"+(_109b?_109b+"-":"")+((this.store&&this.store.getIdentity)?this.store.getIdentity(_1097):this._autoId++),row=byId(id),_109c=row&&row.previousSibling;if(row){if(row===_1099){_1099=(_1099.connected||_1099).nextSibling;}this.removeRow(row);}row=this.renderRow(_1097,_109a);row.className=(row.className||"")+" dgrid-row "+(i%2==1?_1041:_1042)+(this.addUiClasses?" ui-state-default":"");this._rowIdToObject[row.id=id]=_1097;_1098.insertBefore(row,_1099||null);if(_109c){this.adjustRowIndices(_109c);}row.rowIndex=i;return row;},renderRow:function(value,_109d){return put("div",""+value);},removeRow:function(_109e,_109f){_109e=_109e.element||_109e;delete this._rowIdToObject[_109e.id];if(!_109f){put(_109e,"!");}},row:function(_10a0){var id;if(_10a0 instanceof this._Row){return _10a0;}if(_10a0.target&&_10a0.target.nodeType){_10a0=_10a0.target;}if(_10a0.nodeType){var _10a1;do{var rowId=_10a0.id;if((_10a1=this._rowIdToObject[rowId])){return new this._Row(rowId.substring(this.id.length+5),_10a1,_10a0);}_10a0=_10a0.parentNode;}while(_10a0&&_10a0!=this.domNode);return;}if(typeof _10a0=="object"){id=this.store.getIdentity(_10a0);}else{id=_10a0;_10a0=this._rowIdToObject[this.id+"-row-"+id];}return new this._Row(id,_10a0,byId(this.id+"-row-"+id));},cell:function(_10a2){return {row:this.row(_10a2)};},_move:function(item,steps,_10a3,_10a4){var _10a5,_10a6,_10a7;_10a7=_10a6=item.element;steps=steps||1;do{if((_10a5=_10a6[steps<0?"previousSibling":"nextSibling"])){do{_10a6=_10a5;if(_10a6&&(_10a6.className+" ").indexOf(_10a3+" ")>-1){_10a7=_10a6;steps+=steps<0?1:-1;break;}}while((_10a5=(!_10a4||!_10a6.hidden)&&_10a6[steps<0?"lastChild":"firstChild"]));}else{_10a6=_10a6.parentNode;if(!_10a6||_10a6===this.bodyNode||_10a6===this.headerNode){break;}}}while(steps);return _10a7;},up:function(row,steps,_10a8){if(!row.element){row=this.row(row);}return this.row(this._move(row,-(steps||1),"dgrid-row",_10a8));},down:function(row,steps,_10a9){if(!row.element){row=this.row(row);}return this.row(this._move(row,steps||1,"dgrid-row",_10a9));},scrollTo:has("touch")?function(_10aa){return this.useTouchScroll?this.inherited(arguments):_1059.call(this,_10aa);}:_1059,getScrollPosition:has("touch")?function(){return this.useTouchScroll?this.inherited(arguments):_1058.call(this);}:_1058,get:function(name){var fn="_get"+name.charAt(0).toUpperCase()+name.slice(1);if(typeof this[fn]==="function"){return this[fn].apply(this,[].slice.call(arguments,1));}if(!1&&typeof this[fn+"Attr"]==="function"){}return this[name];},set:function(name,value){if(typeof name==="object"){for(var k in name){this.set(k,name[k]);}}else{var fn="_set"+name.charAt(0).toUpperCase()+name.slice(1);if(typeof this[fn]==="function"){this[fn].apply(this,[].slice.call(arguments,1));}else{if(!1&&typeof this[fn+"Attr"]==="function"){}this[name]=value;}}return this;},_getClass:_1056,_setClass:_1054,_getClassName:_1056,_setClassName:_1054,_setSort:function(_10ab,_10ac){this._sort=typeof _10ab!="string"?_10ab:[{attribute:_10ab,descending:_10ac}];this.refresh();if(this._lastCollection){if(_10ab.length){if(typeof _10ab!="string"){_10ac=_10ab[0].descending;_10ab=_10ab[0].attribute;}this._lastCollection.sort(function(a,b){var aVal=a[_10ab],bVal=b[_10ab];if(aVal===undefined){aVal="";}if(bVal===undefined){bVal="";}return aVal==bVal?0:(aVal>bVal==!_10ac?1:-1);});}this.renderArray(this._lastCollection);}},sort:function(_10ad,_10ae){_103b.deprecated("sort(...)","use set(\"sort\", ...) instead","dgrid 0.4");this.set("sort",_10ad,_10ae);},_getSort:function(){return this._sort;},_setShowHeader:function(show){var _10af=this.headerNode;this.showHeader=show;put(_10af,(show?"!":".")+"dgrid-header-hidden");this.renderHeader();this.resize();if(show){_10af.scrollLeft=this.getScrollPosition().x;}},setShowHeader:function(show){_103b.deprecated("setShowHeader(...)","use set(\"showHeader\", ...) instead","dgrid 0.4");this.set("showHeader",show);},_setShowFooter:function(show){this.showFooter=show;put(this.footerNode,(show?"!":".")+"dgrid-footer-hidden");this.resize();}});});},"dojo/io/iframe":function(){define(["../_base/config","../_base/json","../_base/kernel","../_base/lang","../_base/xhr","../sniff","../_base/window","../dom","../dom-construct","../query","require","../aspect","../request/iframe"],function(_10b0,json,_10b1,lang,xhr,has,win,dom,_10b2,query,_10b3,_10b4,_10b5){_10b1.deprecated("dojo/io/iframe","Use dojo/request/iframe.","2.0");var mid=_10b5._iframeName;mid=mid.substring(0,mid.lastIndexOf("_"));var _10b6=lang.delegate(_10b5,{create:function(){return _10b6._frame=_10b5.create.apply(_10b5,arguments);},get:null,post:null,send:function(args){var rDfd;var dfd=xhr._ioSetArgs(args,function(dfd){rDfd&&rDfd.cancel();},function(dfd){var value=null,_10b7=dfd.ioArgs;try{var _10b8=_10b7.handleAs;if(_10b8==="xml"||_10b8==="html"){value=rDfd.response.data;}else{value=rDfd.response.text;if(_10b8==="json"){value=json.fromJson(value);}else{if(_10b8==="javascript"){value=_10b1.eval(value);}}}}catch(e){value=e;}return value;},function(error,dfd){dfd.ioArgs._hasError=true;return error;});var _10b9=dfd.ioArgs;var _10ba="GET",form=dom.byId(args.form);if(args.method&&args.method.toUpperCase()==="POST"&&form){_10ba="POST";}var _10bb={method:_10ba,handleAs:args.handleAs==="json"||args.handleAs==="javascript"?"text":args.handleAs,form:args.form,query:form?null:args.content,data:form?args.content:null,timeout:args.timeout,ioArgs:_10b9};if(_10bb.method){_10bb.method=_10bb.method.toUpperCase();}if(_10b0.ioPublish&&_10b1.publish&&_10b9.args.ioPublish!==false){var start=_10b4.after(_10b5,"_notifyStart",function(data){if(data.options.ioArgs===_10b9){start.remove();xhr._ioNotifyStart(dfd);}},true);}rDfd=_10b5(_10b9.url,_10bb,true);_10b9._callNext=rDfd._callNext;rDfd.then(function(){dfd.resolve(dfd);}).otherwise(function(error){dfd.ioArgs.error=error;dfd.reject(error);});return dfd;},_iframeOnload:win.global[mid+"_onload"]});lang.setObject("dojo.io.iframe",_10b6);return _10b6;});},"ttl/utilities2":function(){define(["dojo/_base/declare","dojo/number","dojo/_base/lang","dojo/_base/array"],function(_10bc,_10bd,lang,array){tmp=_10bc("ttl.utilities2",null,{});ttl.utilities2.generic_view=function(_10be){if(_10be==null){return "...";}if(_10be){return "<img src=\"/prcommon/images/view.png\" alt=\"view\" width=\"16\" height=\"16\" style=\"padding:0px;margin:0px\"/>";}return "";};ttl.utilities2.delete_icon=function(_10bf){if(_10bf==null){return "...";}return "<img title=\""+_10bf+"\" height=\"10px\" width=\"10px\" style=\"padding:0x;margin:0px\" src=\"/prcommon/images/delete.gif\"></img>";};ttl.utilities2.delete_icon_row=function(_10c0){return "<img height=\"10px\" width=\"10px\" style=\"padding:0x;margin:0px\" src=\"/prcommon/images/delete.gif\"></img>";};ttl.utilities2.edit_icon=function(_10c1){if(_10c1==null){return "...";}return "<img title=\""+_10c1+"\" height=\"10px\" width=\"10px\" style=\"padding:0x;margin:0px\" src=\"/prcommon/images/edit.gif\"></img>";};ttl.utilities2.row_button_small=function(_10c2){if(_10c2==null){return "...";}return "<img height=\"10px\" width=\"10px\" style=\"padding:0x;margin:0px\" src=\"/prcommon/images/rowctrl.gif\"></img>";};ttl.utilities2.format_row_ctrl=function(_10c3){return "<img title=\"Options\" height=\"14px\" width=\"14px\" style=\"padding:0x;margin:0px\" src=\"/prcommon/images/rowctrl.gif\"></img>";};ttl.utilities2.delete_row_ctrl=function(_10c4){return "<img title=\"Delete\" height=\"14px\" width=\"14px\" style=\"padding:0x;margin:0px\" src=\"/prcommon/images/remove.gif\"></img>";};ttl.utilities2.edit_row_ctrl=function(_10c5){return "<img title=\""+_10c5+"\" height=\"14px\" width=\"14px\" style=\"padding:0x;margin:0px\" src=\"/prcommon/images/edit.gif\"></img>";};ttl.utilities2.pdf_icon_row=function(_10c6){if(_10c6==null){return "...";}return "<img height=\"10px\" width=\"10px\" style=\"padding:0x;margin:0px\" src=\"/prcommon/images/pdf.gif\" alt=\"view\"></img>";};ttl.utilities2.check_cell=function(_10c7){var _10c8=_10c7==true?"checked.gif":"unchecked.gif";return "<img  height=\"10px\" width=\"10px\" style=\"padding:0x;margin:0px\" src=\"/prcommon/images/"+_10c8+"\" ></img>";};ttl.utilities2.format_deleted_ctrl=function(_10c9){if(_10c9==2){return "<img height=\"10px\" width=\"10px\" style=\"padding:0x;margin:0px\" src=\"/prcommon/images/delete.gif\"></img>";}else{return "&nbsp;";}};ttl.utilities2.outlet_type=function(_10ca){if(_10ca==null){return "...";}var color="";switch(_10ca){case "national":color="blue";break;case "regional":color="green";break;case "business":color="yellow";break;case "consumer":color="orange";break;case "television":color="purple";break;case "radio":color="black";break;case "internet":color="pink";break;case "news":color="indigo";break;case "others":color="white";break;case "freelance":color="white";break;case "parliamentary":color="gray";break;}return "<div style='background-color:"+color+";width:6px;height:100%'>&nbsp;</div>";};ttl.utilities2.form_validator=function(form){var _10cb=null;return array.every(form.getChildren(),function(_10cc){if(_10cc.get("disabled")==true){return true;}var rest=!_10cc.isValid||_10cc.isValid();if(rest==false){if(_10cc.isFocusable()){try{_10cc.focus();}catch(e){}}else{rest=true;}}return rest;});};ttl.utilities2.to_json_date=function(_10cd){if(_10cd==null){return "";}else{return _10cd.getFullYear()+"-"+(_10cd.getMonth()+1)+"-"+_10cd.getDate();}};ttl.utilities2.error_checker=function(_10ce){var _10cf=false;try{if(_10ce.status==403){_10cf=true;}}catch(a){}if(_10cf){window.location.href=TTL.login_page||"/login";throw "Security Failure";}};ttl.utilities2.add_days_to_date=function(_10d0,days){var _10d1=new Date(_10d0);_10d1.setDate(_10d1.getDate()+days);return _10d1;};ttl.utilities2.xhr_post_error=function(_10d2,_10d3){ttl.utilities2.error_checker(_10d2);if(TTL.isDebug==false){return;}try{alert("Problem with call to server :\nstatus: "+_10d2.status+"\nmessage :"+_10d2.message+"\nresponseText :"+_10d2.responseText);}catch(e){alert("Problem with call to server\n"+_10d2);}};ttl.utilities2.default_params={preventCache:true,timeout:30000,handleAs:"json",url:"/error"};ttl.utilities2.make_params=function(_10d4){var res=lang.mixin({preventCache:true,timeout:30000,handleAs:"json",url:"/error"},_10d4||{});if(_10d4.error==null){res["error"]=ttl.utilities2.xhr_post_error;}return res;};ttl.utilities2.make_params_ignore=function(_10d5){var res=lang.mixin(ttl.utilities2.default_params,_10d5||{});res["error"]=ttl.utilities2.globalerrorchecker;return res;};ttl.utilities2.get_prevent_cache=function(_10d6){var _10d7=new Date().valueOf();return lang.mixin({"dojo.preventCache":_10d7},_10d6||{});};ttl.utilities2.get_prevent_cache_param=function(){var _10d8=new Date().valueOf();return "dojo.preventcache="+_10d8;};ttl.utilities2.from_object_date=function(_10d9){if(_10d9==null||_10d9===""){return new Date();}else{return new Date(new Date(_10d9.year,_10d9.month-1,_10d9.day));}};ttl.utilities2.from_object_date_no_date=function(_10da){if(_10da==null||_10da===""){return null;}else{return new Date(new Date(_10da.year,_10da.month-1,_10da.day));}};ttl.utilities2.display_money=function(_10db){if(isNaN(_10db)){return "...";}else{try{return _10bd.format(parseFloat(_10db),{places:2});}catch(e){return "0.00";}}};ttl.utilities2.display_int_money=function(_10dc){if(isNaN(_10dc)){return "...";}else{try{return _10bd.format(parseFloat(_10dc)/100,{places:2});}catch(e){return "0.00";}}};ttl.utilities2.document_exists=function(_10dd){if(_10dd==null){return "...";}if(_10dd==true){return "<img src='/prcommon/images/pdf.gif' width='16' height='16' style='padding:0px;margin:0px'/>";}return "";};ttl.utilities2.fonticon=function(_10de){if(_10de==null){return "...";}var _10df="";var _10e0="";switch(_10de){case "News":_10df="fa fa-newspaper-o";_10e0="News";break;case "Twitter":_10df="fa fa-twitter-square";break;case "Facebook":_10df="fa fa-facebook-square";break;case "Forums":_10df="fa fa-forumbee";break;case "Blogs":_10df="fa fa-bold";break;case "Instagram":_10df="fa fa-instagram";break;case "YouTube":_10df="fa fa-youtube-square";break;case "GooglePlus":_10df="fa fa-google-plus-official";break;case "Tumblr":_10df="fa fa-tumblr-square";break;case "VKontakte":_10df="fa fa-check-square";break;case "Chat":_10df="fa fa-weixin";break;}return "<i class=\" fa-fw "+_10df+"\" title=\""+_10e0+"\" aria-hidden=\"true\"></i>";};ttl.utilities2.fonticon2=function(_10e1){if(_10e1==null){return "...";}return "<i class=\" fa "+_10e1+"\" aria-hidden=\"true\"></i>";};ttl.utilities2.format_row_icon=function(){return "<i class=\" fa fa-bars aria-hidden=\"true\"></i>";};ttl.utilities2.EMPTYGRID={data_mode:"EMPTYGRID"};ttl.utilities2.range=function(start,end){var total=[];if(!end){end=start;start=0;}for(var i=start;i<end;i+=1){total.push(i);}return total;};ttl.utilities2.round_decimals=function(_10e2,_10e3){var _10e4=_10e2*Math.pow(10,_10e3);var _10e5=Math.round(_10e4);var _10e6=_10e5/Math.pow(10,_10e3);return ttl.utilities2.pad_with_zeros(_10e6,_10e3);};ttl.utilities2.pad_with_zeros=function(_10e7,_10e8){var _10e9=_10e7.toString();var _10ea=_10e9.indexOf(".");if(_10ea==-1){decimal_part_length=0;_10e9+=_10e8>0?".":"";}else{decimal_part_length=_10e9.length-_10ea-1;}var _10eb=_10e8-decimal_part_length;if(_10eb>0){for(var _10ec=1;_10ec<=_10eb;_10ec++){_10e9+="0";}}return _10e9;};return tmp;});},"dijit/form/_FormSelectWidget":function(){define(["dojo/_base/array","dojo/_base/Deferred","dojo/aspect","dojo/data/util/sorter","dojo/_base/declare","dojo/dom","dojo/dom-class","dojo/_base/kernel","dojo/_base/lang","dojo/query","dojo/when","dojo/store/util/QueryResults","./_FormValueWidget"],function(array,_10ed,_10ee,_10ef,_10f0,dom,_10f1,_10f2,lang,query,when,_10f3,_10f4){var _10f5=_10f0("dijit.form._FormSelectWidget",_10f4,{multiple:false,options:null,store:null,_setStoreAttr:function(val){if(this._created){this._deprecatedSetStore(val);}},query:null,_setQueryAttr:function(query){if(this._created){this._deprecatedSetStore(this.store,this.selectedValue,{query:query});}},queryOptions:null,_setQueryOptionsAttr:function(_10f6){if(this._created){this._deprecatedSetStore(this.store,this.selectedValue,{queryOptions:_10f6});}},labelAttr:"",onFetch:null,sortByLabel:true,loadChildrenOnOpen:false,onLoadDeferred:null,getOptions:function(_10f7){var opts=this.options||[];if(_10f7==null){return opts;}if(lang.isArrayLike(_10f7)){return array.map(_10f7,"return this.getOptions(item);",this);}if(lang.isString(_10f7)){_10f7={value:_10f7};}if(lang.isObject(_10f7)){if(!array.some(opts,function(_10f8,idx){for(var a in _10f7){if(!(a in _10f8)||_10f8[a]!=_10f7[a]){return false;}}_10f7=idx;return true;})){_10f7=-1;}}if(_10f7>=0&&_10f7<opts.length){return opts[_10f7];}return null;},addOption:function(_10f9){array.forEach(lang.isArrayLike(_10f9)?_10f9:[_10f9],function(i){if(i&&lang.isObject(i)){this.options.push(i);}},this);this._loadChildren();},removeOption:function(_10fa){var _10fb=this.getOptions(lang.isArrayLike(_10fa)?_10fa:[_10fa]);array.forEach(_10fb,function(_10fc){if(_10fc){this.options=array.filter(this.options,function(node){return (node.value!==_10fc.value||node.label!==_10fc.label);});this._removeOptionItem(_10fc);}},this);this._loadChildren();},updateOption:function(_10fd){array.forEach(lang.isArrayLike(_10fd)?_10fd:[_10fd],function(i){var _10fe=this.getOptions({value:i.value}),k;if(_10fe){for(k in i){_10fe[k]=i[k];}}},this);this._loadChildren();},setStore:function(store,_10ff,_1100){_10f2.deprecated(this.declaredClass+"::setStore(store, selectedValue, fetchArgs) is deprecated. Use set('query', fetchArgs.query), set('queryOptions', fetchArgs.queryOptions), set('store', store), or set('value', selectedValue) instead.","","2.0");this._deprecatedSetStore(store,_10ff,_1100);},_deprecatedSetStore:function(store,_1101,_1102){var _1103=this.store;_1102=_1102||{};if(_1103!==store){var h;while((h=this._notifyConnections.pop())){h.remove();}if(!store.get){lang.mixin(store,{_oldAPI:true,get:function(id){var _1104=new _10ed();this.fetchItemByIdentity({identity:id,onItem:function(_1105){_1104.resolve(_1105);},onError:function(error){_1104.reject(error);}});return _1104.promise;},query:function(query,_1106){var _1107=new _10ed(function(){if(_1108.abort){_1108.abort();}});_1107.total=new _10ed();var _1108=this.fetch(lang.mixin({query:query,onBegin:function(count){_1107.total.resolve(count);},onComplete:function(_1109){_1107.resolve(_1109);},onError:function(error){_1107.reject(error);}},_1106));return new _10f3(_1107);}});if(store.getFeatures()["dojo.data.api.Notification"]){this._notifyConnections=[_10ee.after(store,"onNew",lang.hitch(this,"_onNewItem"),true),_10ee.after(store,"onDelete",lang.hitch(this,"_onDeleteItem"),true),_10ee.after(store,"onSet",lang.hitch(this,"_onSetItem"),true)];}}this._set("store",store);}if(this.options&&this.options.length){this.removeOption(this.options);}if(this._queryRes&&this._queryRes.close){this._queryRes.close();}if(this._observeHandle&&this._observeHandle.remove){this._observeHandle.remove();this._observeHandle=null;}if(_1102.query){this._set("query",_1102.query);}if(_1102.queryOptions){this._set("queryOptions",_1102.queryOptions);}if(store&&store.query){this._loadingStore=true;this.onLoadDeferred=new _10ed();this._queryRes=store.query(this.query,this.queryOptions);when(this._queryRes,lang.hitch(this,function(items){if(this.sortByLabel&&!_1102.sort&&items.length){if(store.getValue){items.sort(_10ef.createSortFunction([{attribute:store.getLabelAttributes(items[0])[0]}],store));}else{var _110a=this.labelAttr;items.sort(function(a,b){return a[_110a]>b[_110a]?1:b[_110a]>a[_110a]?-1:0;});}}if(_1102.onFetch){items=_1102.onFetch.call(this,items,_1102);}array.forEach(items,function(i){this._addOptionForItem(i);},this);if(this._queryRes.observe){this._observeHandle=this._queryRes.observe(lang.hitch(this,function(_110b,_110c,_110d){if(_110c==_110d){this._onSetItem(_110b);}else{if(_110c!=-1){this._onDeleteItem(_110b);}if(_110d!=-1){this._onNewItem(_110b);}}}),true);}this._loadingStore=false;this.set("value","_pendingValue" in this?this._pendingValue:_1101);delete this._pendingValue;if(!this.loadChildrenOnOpen){this._loadChildren();}else{this._pseudoLoadChildren(items);}this.onLoadDeferred.resolve(true);this.onSetStore();}),lang.hitch(this,function(err){this.onLoadDeferred.reject(err);}));}return _1103;},_setValueAttr:function(_110e,_110f){if(!this._onChangeActive){_110f=null;}if(this._loadingStore){this._pendingValue=_110e;return;}if(_110e==null){return;}if(lang.isArrayLike(_110e)){_110e=array.map(_110e,function(value){return lang.isObject(value)?value:{value:value};});}else{if(lang.isObject(_110e)){_110e=[_110e];}else{_110e=[{value:_110e}];}}_110e=array.filter(this.getOptions(_110e),function(i){return i&&i.value;});var opts=this.getOptions()||[];if(!this.multiple&&(!_110e[0]||!_110e[0].value)&&!!opts.length){_110e[0]=opts[0];}array.forEach(opts,function(opt){opt.selected=array.some(_110e,function(v){return v.value===opt.value;});});var val=array.map(_110e,function(opt){return opt.value;});if(typeof val=="undefined"||typeof val[0]=="undefined"){return;}var disp=array.map(_110e,function(opt){return opt.label;});this._setDisplay(this.multiple?disp:disp[0]);this.inherited(arguments,[this.multiple?val:val[0],_110f]);this._updateSelection();},_getDisplayedValueAttr:function(){var ret=array.map([].concat(this.get("selectedOptions")),function(v){if(v&&"label" in v){return v.label;}else{if(v){return v.value;}}return null;},this);return this.multiple?ret:ret[0];},_setDisplayedValueAttr:function(label){this.set("value",this.getOptions(typeof label=="string"?{label:label}:label));},_loadChildren:function(){if(this._loadingStore){return;}array.forEach(this._getChildren(),function(child){child.destroyRecursive();});array.forEach(this.options,this._addOptionItem,this);this._updateSelection();},_updateSelection:function(){this.focusedChild=null;this._set("value",this._getValueFromOpts());var val=[].concat(this.value);if(val&&val[0]){var self=this;array.forEach(this._getChildren(),function(child){var _1110=array.some(val,function(v){return child.option&&(v===child.option.value);});if(_1110&&!self.multiple){self.focusedChild=child;}_10f1.toggle(child.domNode,this.baseClass.replace(/\s+|$/g,"SelectedOption "),_1110);child.domNode.setAttribute("aria-selected",_1110?"true":"false");},this);}},_getValueFromOpts:function(){var opts=this.getOptions()||[];if(!this.multiple&&opts.length){var opt=array.filter(opts,function(i){return i.selected;})[0];if(opt&&opt.value){return opt.value;}else{opts[0].selected=true;return opts[0].value;}}else{if(this.multiple){return array.map(array.filter(opts,function(i){return i.selected;}),function(i){return i.value;})||[];}}return "";},_onNewItem:function(item,_1111){if(!_1111||!_1111.parent){this._addOptionForItem(item);}},_onDeleteItem:function(item){var store=this.store;this.removeOption({value:store.getIdentity(item)});},_onSetItem:function(item){this.updateOption(this._getOptionObjForItem(item));},_getOptionObjForItem:function(item){var store=this.store,label=(this.labelAttr&&this.labelAttr in item)?item[this.labelAttr]:store.getLabel(item),value=(label?store.getIdentity(item):null);return {value:value,label:label,item:item};},_addOptionForItem:function(item){var store=this.store;if(store.isItemLoaded&&!store.isItemLoaded(item)){store.loadItem({item:item,onItem:function(i){this._addOptionForItem(i);},scope:this});return;}var _1112=this._getOptionObjForItem(item);this.addOption(_1112);},constructor:function(_1113){this._oValue=(_1113||{}).value||null;this._notifyConnections=[];},buildRendering:function(){this.inherited(arguments);dom.setSelectable(this.focusNode,false);},_fillContent:function(){if(!this.options){this.options=this.srcNodeRef?query("> *",this.srcNodeRef).map(function(node){if(node.getAttribute("type")==="separator"){return {value:"",label:"",selected:false,disabled:false};}return {value:(node.getAttribute("data-"+_10f2._scopeName+"-value")||node.getAttribute("value")),label:String(node.innerHTML),selected:node.getAttribute("selected")||false,disabled:node.getAttribute("disabled")||false};},this):[];}if(!this.value){this._set("value",this._getValueFromOpts());}else{if(this.multiple&&typeof this.value=="string"){this._set("value",this.value.split(","));}}},postCreate:function(){this.inherited(arguments);_10ee.after(this,"onChange",lang.hitch(this,"_updateSelection"));var store=this.store;if(store&&(store.getIdentity||store.getFeatures()["dojo.data.api.Identity"])){this.store=null;this._deprecatedSetStore(store,this._oValue,{query:this.query,queryOptions:this.queryOptions});}this._storeInitialized=true;},startup:function(){this._loadChildren();this.inherited(arguments);},destroy:function(){var h;while((h=this._notifyConnections.pop())){h.remove();}if(this._queryRes&&this._queryRes.close){this._queryRes.close();}if(this._observeHandle&&this._observeHandle.remove){this._observeHandle.remove();this._observeHandle=null;}this.inherited(arguments);},_addOptionItem:function(){},_removeOptionItem:function(){},_setDisplay:function(){},_getChildren:function(){return [];},_getSelectedOptionsAttr:function(){return this.getOptions({selected:true});},_pseudoLoadChildren:function(){},onSetStore:function(){}});return _10f5;});},"dijit/form/_ComboBoxMenu":function(){define(["dojo/_base/declare","dojo/dom-class","dojo/dom-style","dojo/keys","../_WidgetBase","../_TemplatedMixin","./_ComboBoxMenuMixin","./_ListMouseMixin"],function(_1114,_1115,_1116,keys,_1117,_1118,_1119,_111a){return _1114("dijit.form._ComboBoxMenu",[_1117,_1118,_111a,_1119],{templateString:"<div class='dijitReset dijitMenu' data-dojo-attach-point='containerNode' style='overflow: auto; overflow-x: hidden;' role='listbox'>"+"<div class='dijitMenuItem dijitMenuPreviousButton' data-dojo-attach-point='previousButton' role='option'></div>"+"<div class='dijitMenuItem dijitMenuNextButton' data-dojo-attach-point='nextButton' role='option'></div>"+"</div>",baseClass:"dijitComboBoxMenu",postCreate:function(){this.inherited(arguments);if(!this.isLeftToRight()){_1115.add(this.previousButton,"dijitMenuItemRtl");_1115.add(this.nextButton,"dijitMenuItemRtl");}this.containerNode.setAttribute("role","listbox");},_createMenuItem:function(){var item=this.ownerDocument.createElement("div");item.className="dijitReset dijitMenuItem"+(this.isLeftToRight()?"":" dijitMenuItemRtl");item.setAttribute("role","option");return item;},onHover:function(node){_1115.add(node,"dijitMenuItemHover");},onUnhover:function(node){_1115.remove(node,"dijitMenuItemHover");},onSelect:function(node){_1115.add(node,"dijitMenuItemSelected");},onDeselect:function(node){_1115.remove(node,"dijitMenuItemSelected");},_page:function(up){var _111b=0;var _111c=this.domNode.scrollTop;var _111d=_1116.get(this.domNode,"height");if(!this.getHighlightedOption()){this.selectNextNode();}while(_111b<_111d){var _111e=this.getHighlightedOption();if(up){if(!_111e.previousSibling||_111e.previousSibling.style.display=="none"){break;}this.selectPreviousNode();}else{if(!_111e.nextSibling||_111e.nextSibling.style.display=="none"){break;}this.selectNextNode();}var _111f=this.domNode.scrollTop;_111b+=(_111f-_111c)*(up?-1:1);_111c=_111f;}},handleKey:function(evt){switch(evt.keyCode){case keys.DOWN_ARROW:this.selectNextNode();return false;case keys.PAGE_DOWN:this._page(false);return false;case keys.UP_ARROW:this.selectPreviousNode();return false;case keys.PAGE_UP:this._page(true);return false;default:return true;}}});});},"control/customer/manual_invoice":function(){define(["dojo/_base/declare","ttl/BaseWidgetAMD","dojo/text!../customer/templates/manual_invoice.html","dijit/layout/BorderContainer","dojo/request","ttl/utilities2","dojo/_base/lang","dojo/topic","dojo/dom-class","dojo/dom-attr","dojo/data/ItemFileReadStore","dojo/number","dojo/io/iframe","dojo/request/iframe","dojox/form/FileInput","dijit/form/TextBox","dijit/form/ValidationTextBox","ttl/DateTextBox2","dijit/form/CurrencyTextBox","dijit/form/Button","dijit/form/DateTextBox"],function(_1120,_1121,_1122,_1123,_1124,_1125,lang,topic,_1126,_1127,_1128){return _1120("control/customer/manual_invoice",[_1121],{templateString:_1122,gutters:false,constructor:function(){this._add_call_back=lang.hitch(this,this._add_call);},_add_call:function(_1129){if(_1129.success=="OK"){alert("Invoice Added");topic.publish(PRCOMMON.Events.Financial_ReLoad,[]);this._dialog.hide();}else{alert("Problem Adding Invoice");}},_send:function(){if(this.invoice_ref.isValid()==false||this.invoice_date.isValid()==false||this.amount.isValid()==false||this.vat.isValid()==false||this.unpaidamount.isValid()==false){return false;}var _112a=_1127.get(this.invoice_file,"value").toLowerCase();if(_112a.indexOf(".pdf")==-1){alert("This must be a pdf file");return false;}this.invoice_date2.set("value",this.invoice_date.get("ValueISO"));dojo.io.iframe.send({url:"/payment/add_manual_invoice",handleAs:"json",load:this._add_call_back,form:this.form});},setCustomer:function(_112b,_112c,_112d){this.icustomerid.set("value",_112b);this.invoice_date.set("value",new Date());this.invoice_ref.set("value","");this.amount.set("value",0);this.unpaidamount.set("value",0);this.vat.set("value",0);_1127.set(this.invoice_file,"value","");_1127.set(this.customername,"innerHTML",_112c);this._dialog=_112d;},_amounts:function(){var _112e=this.amount.get("value");var vat=_112e-(_112e/(1+(20/100)));this.unpaidamount.set("value",_112e);this.vat.set("value",dojo.number.format(vat,{places:2}));}});});},"dijit/layout/_TabContainerBase":function(){define(["dojo/_base/declare","dojo/dom-class","dojo/dom-geometry","dojo/dom-style","./StackContainer","./utils","../_TemplatedMixin","dojo/text!./templates/TabContainer.html"],function(_112f,_1130,_1131,_1132,_1133,_1134,_1135,_1136){return _112f("dijit.layout._TabContainerBase",[_1133,_1135],{tabPosition:"top",baseClass:"dijitTabContainer",tabStrip:false,nested:false,templateString:_1136,postMixInProperties:function(){this.baseClass+=this.tabPosition.charAt(0).toUpperCase()+this.tabPosition.substr(1).replace(/-.*/,"");this.srcNodeRef&&_1132.set(this.srcNodeRef,"visibility","hidden");this.inherited(arguments);},buildRendering:function(){this.inherited(arguments);this.tablist=this._makeController(this.tablistNode);if(!this.doLayout){_1130.add(this.domNode,"dijitTabContainerNoLayout");}if(this.nested){_1130.add(this.domNode,"dijitTabContainerNested");_1130.add(this.tablist.containerNode,"dijitTabContainerTabListNested");_1130.add(this.tablistSpacer,"dijitTabContainerSpacerNested");_1130.add(this.containerNode,"dijitTabPaneWrapperNested");}else{_1130.add(this.domNode,"tabStrip-"+(this.tabStrip?"enabled":"disabled"));}},_setupChild:function(tab){_1130.add(tab.domNode,"dijitTabPane");this.inherited(arguments);},startup:function(){if(this._started){return;}this.tablist.startup();this.inherited(arguments);},layout:function(){if(!this._contentBox||typeof (this._contentBox.l)=="undefined"){return;}var sc=this.selectedChildWidget;if(this.doLayout){var _1137=this.tabPosition.replace(/-h/,"");this.tablist.region=_1137;var _1138=[this.tablist,{domNode:this.tablistSpacer,region:_1137},{domNode:this.containerNode,region:"center"}];_1134.layoutChildren(this.domNode,this._contentBox,_1138);this._containerContentBox=_1134.marginBox2contentBox(this.containerNode,_1138[2]);if(sc&&sc.resize){sc.resize(this._containerContentBox);}}else{if(this.tablist.resize){var s=this.tablist.domNode.style;s.width="0";var width=_1131.getContentBox(this.domNode).w;s.width="";this.tablist.resize({w:width});}if(sc&&sc.resize){sc.resize();}}},destroy:function(_1139){if(this.tablist){this.tablist.destroy(_1139);}this.inherited(arguments);}});});},"dijit/_KeyNavContainer":function(){define(["dojo/_base/array","dojo/_base/declare","dojo/dom-attr","dojo/_base/kernel","dojo/keys","dojo/_base/lang","./registry","./_Container","./_FocusMixin","./_KeyNavMixin"],function(array,_113a,_113b,_113c,keys,lang,_113d,_113e,_113f,_1140){return _113a("dijit._KeyNavContainer",[_113f,_1140,_113e],{connectKeyNavHandlers:function(_1141,_1142){var _1143=(this._keyNavCodes={});var prev=lang.hitch(this,"focusPrev");var next=lang.hitch(this,"focusNext");array.forEach(_1141,function(code){_1143[code]=prev;});array.forEach(_1142,function(code){_1143[code]=next;});_1143[keys.HOME]=lang.hitch(this,"focusFirstChild");_1143[keys.END]=lang.hitch(this,"focusLastChild");},startupKeyNavChildren:function(){_113c.deprecated("startupKeyNavChildren() call no longer needed","","2.0");},startup:function(){this.inherited(arguments);array.forEach(this.getChildren(),lang.hitch(this,"_startupChild"));},addChild:function(_1144,_1145){this.inherited(arguments);this._startupChild(_1144);},_startupChild:function(_1146){_1146.set("tabIndex","-1");},_getFirst:function(){var _1147=this.getChildren();return _1147.length?_1147[0]:null;},_getLast:function(){var _1148=this.getChildren();return _1148.length?_1148[_1148.length-1]:null;},focusNext:function(){this.focusChild(this._getNextFocusableChild(this.focusedChild,1));},focusPrev:function(){this.focusChild(this._getNextFocusableChild(this.focusedChild,-1),true);},childSelector:function(node){var node=_113d.byNode(node);return node&&node.getParent()==this;}});});},"dijit/form/DataList":function(){define(["dojo/_base/declare","dojo/dom","dojo/_base/lang","dojo/query","dojo/store/Memory","../registry"],function(_1149,dom,lang,query,_114a,_114b){function _114c(_114d){return {id:_114d.value,value:_114d.value,name:lang.trim(_114d.innerText||_114d.textContent||"")};};return _1149("dijit.form.DataList",_114a,{constructor:function(_114e,_114f){this.domNode=dom.byId(_114f);lang.mixin(this,_114e);if(this.id){_114b.add(this);}this.domNode.style.display="none";this.inherited(arguments,[{data:query("option",this.domNode).map(_114c)}]);},destroy:function(){_114b.remove(this.id);},fetchSelectedItem:function(){var _1150=query("> option[selected]",this.domNode)[0]||query("> option",this.domNode)[0];return _1150&&_114c(_1150);}});});},"dijit/Tooltip":function(){define(["dojo/_base/array","dojo/_base/declare","dojo/_base/fx","dojo/dom","dojo/dom-class","dojo/dom-geometry","dojo/dom-style","dojo/_base/lang","dojo/mouse","dojo/on","dojo/sniff","./_base/manager","./place","./_Widget","./_TemplatedMixin","./BackgroundIframe","dojo/text!./templates/Tooltip.html","./main"],function(array,_1151,fx,dom,_1152,_1153,_1154,lang,mouse,on,has,_1155,place,_1156,_1157,_1158,_1159,dijit){var _115a=_1151("dijit._MasterTooltip",[_1156,_1157],{duration:_1155.defaultDuration,templateString:_1159,postCreate:function(){this.ownerDocumentBody.appendChild(this.domNode);this.bgIframe=new _1158(this.domNode);this.fadeIn=fx.fadeIn({node:this.domNode,duration:this.duration,onEnd:lang.hitch(this,"_onShow")});this.fadeOut=fx.fadeOut({node:this.domNode,duration:this.duration,onEnd:lang.hitch(this,"_onHide")});},show:function(_115b,_115c,_115d,rtl,_115e,_115f,_1160){if(this.aroundNode&&this.aroundNode===_115c&&this.containerNode.innerHTML==_115b){return;}if(this.fadeOut.status()=="playing"){this._onDeck=arguments;return;}this.containerNode.innerHTML=_115b;if(_115e){this.set("textDir",_115e);}this.containerNode.align=rtl?"right":"left";var pos=place.around(this.domNode,_115c,_115d&&_115d.length?_115d:_1161.defaultPosition,!rtl,lang.hitch(this,"orient"));var _1162=pos.aroundNodePos;if(pos.corner.charAt(0)=="M"&&pos.aroundCorner.charAt(0)=="M"){this.connectorNode.style.top=_1162.y+((_1162.h-this.connectorNode.offsetHeight)>>1)-pos.y+"px";this.connectorNode.style.left="";}else{if(pos.corner.charAt(1)=="M"&&pos.aroundCorner.charAt(1)=="M"){this.connectorNode.style.left=_1162.x+((_1162.w-this.connectorNode.offsetWidth)>>1)-pos.x+"px";}else{this.connectorNode.style.left="";this.connectorNode.style.top="";}}_1154.set(this.domNode,"opacity",0);this.fadeIn.play();this.isShowingNow=true;this.aroundNode=_115c;this.onMouseEnter=_115f||noop;this.onMouseLeave=_1160||noop;},orient:function(node,_1163,_1164,_1165,_1166){this.connectorNode.style.top="";var _1167=_1165.h,_1168=_1165.w;node.className="dijitTooltip "+{"MR-ML":"dijitTooltipRight","ML-MR":"dijitTooltipLeft","TM-BM":"dijitTooltipAbove","BM-TM":"dijitTooltipBelow","BL-TL":"dijitTooltipBelow dijitTooltipABLeft","TL-BL":"dijitTooltipAbove dijitTooltipABLeft","BR-TR":"dijitTooltipBelow dijitTooltipABRight","TR-BR":"dijitTooltipAbove dijitTooltipABRight","BR-BL":"dijitTooltipRight","BL-BR":"dijitTooltipLeft"}[_1163+"-"+_1164];this.domNode.style.width="auto";var size=_1153.position(this.domNode);if(has("ie")||has("trident")){size.w+=2;}var width=Math.min((Math.max(_1168,1)),size.w);_1153.setMarginBox(this.domNode,{w:width});if(_1164.charAt(0)=="B"&&_1163.charAt(0)=="B"){var bb=_1153.position(node);var _1169=this.connectorNode.offsetHeight;if(bb.h>_1167){var _116a=_1167-((_1166.h+_1169)>>1);this.connectorNode.style.top=_116a+"px";this.connectorNode.style.bottom="";}else{this.connectorNode.style.bottom=Math.min(Math.max(_1166.h/2-_1169/2,0),bb.h-_1169)+"px";this.connectorNode.style.top="";}}else{this.connectorNode.style.top="";this.connectorNode.style.bottom="";}return Math.max(0,size.w-_1168);},_onShow:function(){if(has("ie")){this.domNode.style.filter="";}},hide:function(_116b){if(this._onDeck&&this._onDeck[1]==_116b){this._onDeck=null;}else{if(this.aroundNode===_116b){this.fadeIn.stop();this.isShowingNow=false;this.aroundNode=null;this.fadeOut.play();}else{}}this.onMouseEnter=this.onMouseLeave=noop;},_onHide:function(){this.domNode.style.cssText="";this.containerNode.innerHTML="";if(this._onDeck){this.show.apply(this,this._onDeck);this._onDeck=null;}}});if(has("dojo-bidi")){_115a.extend({_setAutoTextDir:function(node){this.applyTextDir(node);array.forEach(node.children,function(child){this._setAutoTextDir(child);},this);},_setTextDirAttr:function(_116c){this._set("textDir",_116c);if(_116c=="auto"){this._setAutoTextDir(this.containerNode);}else{this.containerNode.dir=this.textDir;}}});}dijit.showTooltip=function(_116d,_116e,_116f,rtl,_1170,_1171,_1172){if(_116f){_116f=array.map(_116f,function(val){return {after:"after-centered",before:"before-centered"}[val]||val;});}if(!_1161._masterTT){dijit._masterTT=_1161._masterTT=new _115a();}return _1161._masterTT.show(_116d,_116e,_116f,rtl,_1170,_1171,_1172);};dijit.hideTooltip=function(_1173){return _1161._masterTT&&_1161._masterTT.hide(_1173);};var _1174="DORMANT",_1175="SHOW TIMER",_1176="SHOWING",_1177="HIDE TIMER";function noop(){};var _1161=_1151("dijit.Tooltip",_1156,{label:"",showDelay:400,hideDelay:400,connectId:[],position:[],selector:"",_setConnectIdAttr:function(newId){array.forEach(this._connections||[],function(_1178){array.forEach(_1178,function(_1179){_1179.remove();});},this);this._connectIds=array.filter(lang.isArrayLike(newId)?newId:(newId?[newId]:[]),function(id){return dom.byId(id,this.ownerDocument);},this);this._connections=array.map(this._connectIds,function(id){var node=dom.byId(id,this.ownerDocument),_117a=this.selector,_117b=_117a?function(_117c){return on.selector(_117a,_117c);}:function(_117d){return _117d;},self=this;return [on(node,_117b(mouse.enter),function(){self._onHover(this);}),on(node,_117b("focusin"),function(){self._onHover(this);}),on(node,_117b(mouse.leave),lang.hitch(self,"_onUnHover")),on(node,_117b("focusout"),lang.hitch(self,"set","state",_1174))];},this);this._set("connectId",newId);},addTarget:function(node){var id=node.id||node;if(array.indexOf(this._connectIds,id)==-1){this.set("connectId",this._connectIds.concat(id));}},removeTarget:function(node){var id=node.id||node,idx=array.indexOf(this._connectIds,id);if(idx>=0){this._connectIds.splice(idx,1);this.set("connectId",this._connectIds);}},buildRendering:function(){this.inherited(arguments);_1152.add(this.domNode,"dijitTooltipData");},startup:function(){this.inherited(arguments);var ids=this.connectId;array.forEach(lang.isArrayLike(ids)?ids:[ids],this.addTarget,this);},getContent:function(node){return this.label||this.domNode.innerHTML;},state:_1174,_setStateAttr:function(val){if(this.state==val||(val==_1175&&this.state==_1176)||(val==_1177&&this.state==_1174)){return;}if(this._hideTimer){this._hideTimer.remove();delete this._hideTimer;}if(this._showTimer){this._showTimer.remove();delete this._showTimer;}switch(val){case _1174:if(this._connectNode){_1161.hide(this._connectNode);delete this._connectNode;this.onHide();}break;case _1175:if(this.state!=_1176){this._showTimer=this.defer(function(){this.set("state",_1176);},this.showDelay);}break;case _1176:var _117e=this.getContent(this._connectNode);if(!_117e){this.set("state",_1174);return;}_1161.show(_117e,this._connectNode,this.position,!this.isLeftToRight(),this.textDir,lang.hitch(this,"set","state",_1176),lang.hitch(this,"set","state",_1177));this.onShow(this._connectNode,this.position);break;case _1177:this._hideTimer=this.defer(function(){this.set("state",_1174);},this.hideDelay);break;}this._set("state",val);},_onHover:function(_117f){if(this._connectNode&&_117f!=this._connectNode){this.set("state",_1174);}this._connectNode=_117f;this.set("state",_1175);},_onUnHover:function(_1180){this.set("state",_1177);},open:function(_1181){this.set("state",_1174);this._connectNode=_1181;this.set("state",_1176);},close:function(){this.set("state",_1174);},onShow:function(){},onHide:function(){},destroy:function(){this.set("state",_1174);array.forEach(this._connections||[],function(_1182){array.forEach(_1182,function(_1183){_1183.remove();});},this);this.inherited(arguments);}});_1161._MasterTooltip=_115a;_1161.show=dijit.showTooltip;_1161.hide=dijit.hideTooltip;_1161.defaultPosition=["after-centered","before-centered"];return _1161;});},"dojox/form/FileInput":function(){define(["dojo/_base/declare","dojo/_base/kernel","dojo/_base/fx","dojo/dom-attr","dojo/dom-class","dojo/text!./resources/FileInput.html","dijit/form/_FormWidget","dijit/_Templated"],function(_1184,_1185,fx,_1186,_1187,_1188,_1189,_118a){_1185.experimental("dojox.form.FileInput");return _1184("dojox.form.FileInput",_1189,{label:"Browse ...",cancelText:"Cancel",name:"uploadFile",templateString:_1188,startup:function(){this._listener=this.connect(this.fileInput,"onchange","_matchValue");this._keyListener=this.connect(this.fileInput,"onkeyup","_matchValue");},postCreate:function(){},_matchValue:function(){this.inputNode.value=this.fileInput.value;if(this.inputNode.value){this.cancelNode.style.visibility="visible";fx.fadeIn({node:this.cancelNode,duration:275}).play();}},setLabel:function(label,_118b){this.titleNode.innerHTML=label;},reset:function(e){this.disconnect(this._listener);this.disconnect(this._keyListener);if(this.fileInput){this.domNode.removeChild(this.fileInput);}fx.fadeOut({node:this.cancelNode,duration:275}).play();this.fileInput=document.createElement("input");this.fileInput.setAttribute("type","file");this.fileInput.setAttribute("id",this.id);this.fileInput.setAttribute("name",this.name);_1187.add(this.fileInput,"dijitFileInputReal");this.domNode.appendChild(this.fileInput);this._keyListener=this.connect(this.fileInput,"onkeyup","_matchValue");this._listener=this.connect(this.fileInput,"onchange","_matchValue");this.inputNode.value="";}});});},"control/customer/pre_pay_invoice":function(){define(["dojo/_base/declare","ttl/BaseWidgetAMD","dojo/text!../customer/templates/pre_pay_invoice.html","dijit/layout/BorderContainer","dojo/request","ttl/utilities2","dojo/_base/lang","dojo/topic","dojo/dom-class","dojo/dom-attr","dojo/data/ItemFileReadStore","dijit/form/Form","dijit/form/TextBox","ttl/DateTextBox2","dijit/form/Textarea","dijit/form/NumberTextBox","dijit/form/FilteringSelect","dijit/form/CheckBox","dijit/form/DateTextBox","dijit/form/CurrencyTextBox","dijit/form/ValidationTextBox","dojox/form/BusyButton","dojox/validate/regexp"],function(_118c,_118d,_118e,_118f,_1190,_1191,lang,topic,_1192,_1193,_1194){return _118c("control/customer/pre_pay_invoice",[_118d],{templateString:_118e,gutters:false,constructor:function(){this._SendInvoiceCallBack=lang.hitch(this,this._SendInvoiceCall);this._advancefeatures=false;this._updatum=false;},_SendInvoiceCall:function(_1195){if(_1195.success=="OK"){alert("Invoice Sent");topic.publish(PRCOMMON.Events.Financial_ReLoad,[]);this._dialog.hide();}else{alert("Problem Sending Invoice");}this.btn.cancel();},_Send:function(){if(_1191.form_validator(this.form)==false){alert("Please Enter Details");this.btn.cancel();return false;}var _1196=this.form.get("value");_1196["licence_start_date"]=_1191.to_json_date(this.licence_start_date.get("value"));_1196["advance_licence_start"]=_1191.to_json_date(this.advance_licence_start.get("value"));_1196["invoice_date"]=_1191.to_json_date(this.invoice_date.get("value"));_1196["updatum_start_date"]=_1191.to_json_date(this.updatum_start_date.get("value"));_1190.post("/payment/invoice_send",_1191.make_params({data:_1196})).then(this._SendInvoiceCallBack);},setCustomer:function(cust,_1197){this._advancefeatures=cust.advancefeatures;this._updatum=cust.updatum;this.paymentfreqid.set("value",1);this.isdd.set("value",false);_1193.set(this.customername,"innerHTML",cust.customername);this.email.set("value",cust.invoiceemail?cust.invoiceemail:cust.email);this.licence_start_date.set("value",_1191.from_object_date(cust.licence_start_date_d));this.purchase_order.set("value",cust.purchase_order);this._ShowHideAdvance(this._advancefeatures);this._ShowHideUpdatum(this._updatum);this.logins.set("value",cust.logins);this.licence_start_date.set("value",_1191.from_object_date(cust.licence_start_date_d));this.advance_licence_start.set("value",_1191.from_object_date(cust.advance_licence_start_d));this.updatum_start_date.set("value",_1191.from_object_date(cust.updatum_start_date_d));this.months_free.set("value",cust.months_free);this.months_paid.set("value",cust.months_paid);this.adv_months_free.set("value",cust.adv_months_free);this.adv_months_paid.set("value",cust.adv_months_paid);this.updatum_months_free.set("value",cust.updatum_months_free);this.updatum_months_paid.set("value",cust.updatum_months_paid);this._dialog=_1197;this.message.set("value","");this.icustomerid.set("value",cust.customerid);this.invoice_date.set("value",new Date());this._ChangePayment();this.btn.cancel();this.advcost.set("value","0.00");this.cost.set("value","0.00");this.updatumcost.set("value","0.00");},_ChangePayment:function(){this._Show_Hide_DD(this._advancefeatures,this._updatum,this.isdd.get("checked"));},_Show_Hide_DD:function(_1198,_1199,isdd){if(isdd){_1192.add(this.view_dd_1,"prmaxhidden");_1192.add(this.view_dd_2,"prmaxhidden");_1192.add(this.view_dd_3,"prmaxhidden");_1192.add(this.view_dd_4,"prmaxhidden");_1192.add(this.features_view_2,"prmaxhidden");_1192.add(this.features_view_3,"prmaxhidden");_1192.add(this.updatum_view_2,"prmaxhidden");_1192.add(this.updatum_view_3,"prmaxhidden");}else{_1192.remove(this.view_dd_1,"prmaxhidden");_1192.remove(this.view_dd_2,"prmaxhidden");_1192.remove(this.view_dd_3,"prmaxhidden");_1192.remove(this.view_dd_4,"prmaxhidden");if(_1198){_1192.remove(this.features_view_2,"prmaxhidden");_1192.remove(this.features_view_3,"prmaxhidden");}else{_1192.add(this.features_view_2,"prmaxhidden");_1192.add(this.features_view_3,"prmaxhidden");}if(_1199){_1192.remove(this.updatum_view_2,"prmaxhidden");_1192.remove(this.updatum_view_3,"prmaxhidden");}else{_1192.add(this.updatum_view_2,"prmaxhidden");_1192.add(this.updatum_view_3,"prmaxhidden");}}},_ShowHideAdvance:function(_119a){if(_119a){_1192.remove(this.features_view,"prmaxhidden");_1192.remove(this.features_view_1,"prmaxhidden");_1192.remove(this.features_view_5,"prmaxhidden");if(this.isdd.get("checked")==false){_1192.remove(this.features_view_2,"prmaxhidden");_1192.remove(this.features_view_3,"prmaxhidden");}}else{_1192.add(this.features_view,"prmaxhidden");_1192.add(this.features_view_1,"prmaxhidden");_1192.add(this.features_view_2,"prmaxhidden");_1192.add(this.features_view_3,"prmaxhidden");_1192.add(this.features_view_5,"prmaxhidden");}},_ShowHideUpdatum:function(_119b){if(_119b){_1192.remove(this.updatum_view,"prmaxhidden");_1192.remove(this.updatum_view_1,"prmaxhidden");_1192.remove(this.updatum_view_5,"prmaxhidden");if(this.isdd.get("checked")==false){_1192.remove(this.updatum_view_2,"prmaxhidden");_1192.remove(this.updatum_view_3,"prmaxhidden");}}else{_1192.add(this.updatum_view,"prmaxhidden");_1192.add(this.updatum_view_1,"prmaxhidden");_1192.add(this.updatum_view_2,"prmaxhidden");_1192.add(this.updatum_view_3,"prmaxhidden");_1192.add(this.updatum_view_5,"prmaxhidden");}}});});},"dijit/layout/ContentPane":function(){define(["dojo/_base/kernel","dojo/_base/lang","../_Widget","../_Container","./_ContentPaneResizeMixin","dojo/string","dojo/html","dojo/_base/array","dojo/_base/declare","dojo/_base/Deferred","dojo/dom","dojo/dom-attr","dojo/dom-construct","dojo/_base/xhr","dojo/i18n","dojo/when","dojo/i18n!../nls/loading"],function(_119c,lang,_119d,_119e,_119f,_11a0,html,array,_11a1,_11a2,dom,_11a3,_11a4,xhr,i18n,when){return _11a1("dijit.layout.ContentPane",[_119d,_119e,_119f],{href:"",content:"",extractContent:false,parseOnLoad:true,parserScope:_119c._scopeName,preventCache:false,preload:false,refreshOnShow:false,loadingMessage:"<span class='dijitContentPaneLoading'><span class='dijitInline dijitIconLoading'></span>${loadingState}</span>",errorMessage:"<span class='dijitContentPaneError'><span class='dijitInline dijitIconError'></span>${errorState}</span>",isLoaded:false,baseClass:"dijitContentPane",ioArgs:{},onLoadDeferred:null,_setTitleAttr:null,stopParser:true,template:false,markupFactory:function(_11a5,node,ctor){var self=new ctor(_11a5,node);return !self.href&&self._contentSetter&&self._contentSetter.parseDeferred&&!self._contentSetter.parseDeferred.isFulfilled()?self._contentSetter.parseDeferred.then(function(){return self;}):self;},create:function(_11a6,_11a7){if((!_11a6||!_11a6.template)&&_11a7&&!("href" in _11a6)&&!("content" in _11a6)){_11a7=dom.byId(_11a7);var df=_11a7.ownerDocument.createDocumentFragment();while(_11a7.firstChild){df.appendChild(_11a7.firstChild);}_11a6=lang.delegate(_11a6,{content:df});}this.inherited(arguments,[_11a6,_11a7]);},postMixInProperties:function(){this.inherited(arguments);var _11a8=i18n.getLocalization("dijit","loading",this.lang);this.loadingMessage=_11a0.substitute(this.loadingMessage,_11a8);this.errorMessage=_11a0.substitute(this.errorMessage,_11a8);},buildRendering:function(){this.inherited(arguments);if(!this.containerNode){this.containerNode=this.domNode;}this.domNode.removeAttribute("title");},startup:function(){this.inherited(arguments);if(this._contentSetter){array.forEach(this._contentSetter.parseResults,function(obj){if(!obj._started&&!obj._destroyed&&lang.isFunction(obj.startup)){obj.startup();obj._started=true;}},this);}},_startChildren:function(){array.forEach(this.getChildren(),function(obj){if(!obj._started&&!obj._destroyed&&lang.isFunction(obj.startup)){obj.startup();obj._started=true;}});if(this._contentSetter){array.forEach(this._contentSetter.parseResults,function(obj){if(!obj._started&&!obj._destroyed&&lang.isFunction(obj.startup)){obj.startup();obj._started=true;}},this);}},setHref:function(href){_119c.deprecated("dijit.layout.ContentPane.setHref() is deprecated. Use set('href', ...) instead.","","2.0");return this.set("href",href);},_setHrefAttr:function(href){this.cancel();this.onLoadDeferred=new _11a2(lang.hitch(this,"cancel"));this.onLoadDeferred.then(lang.hitch(this,"onLoad"));this._set("href",href);if(this.preload||(this._created&&this._isShown())){this._load();}else{this._hrefChanged=true;}return this.onLoadDeferred;},setContent:function(data){_119c.deprecated("dijit.layout.ContentPane.setContent() is deprecated.  Use set('content', ...) instead.","","2.0");this.set("content",data);},_setContentAttr:function(data){this._set("href","");this.cancel();this.onLoadDeferred=new _11a2(lang.hitch(this,"cancel"));if(this._created){this.onLoadDeferred.then(lang.hitch(this,"onLoad"));}this._setContent(data||"");this._isDownloaded=false;return this.onLoadDeferred;},_getContentAttr:function(){return this.containerNode.innerHTML;},cancel:function(){if(this._xhrDfd&&(this._xhrDfd.fired==-1)){this._xhrDfd.cancel();}delete this._xhrDfd;this.onLoadDeferred=null;},destroy:function(){this.cancel();this.inherited(arguments);},destroyRecursive:function(_11a9){if(this._beingDestroyed){return;}this.inherited(arguments);},_onShow:function(){this.inherited(arguments);if(this.href){if(!this._xhrDfd&&(!this.isLoaded||this._hrefChanged||this.refreshOnShow)){return this.refresh();}}},refresh:function(){this.cancel();this.onLoadDeferred=new _11a2(lang.hitch(this,"cancel"));this.onLoadDeferred.then(lang.hitch(this,"onLoad"));this._load();return this.onLoadDeferred;},_load:function(){this._setContent(this.onDownloadStart(),true);var self=this;var _11aa={preventCache:(this.preventCache||this.refreshOnShow),url:this.href,handleAs:"text"};if(lang.isObject(this.ioArgs)){lang.mixin(_11aa,this.ioArgs);}var hand=(this._xhrDfd=(this.ioMethod||xhr.get)(_11aa)),_11ab;hand.then(function(html){_11ab=html;try{self._isDownloaded=true;return self._setContent(html,false);}catch(err){self._onError("Content",err);}},function(err){if(!hand.canceled){self._onError("Download",err);}delete self._xhrDfd;return err;}).then(function(){self.onDownloadEnd();delete self._xhrDfd;return _11ab;});delete this._hrefChanged;},_onLoadHandler:function(data){this._set("isLoaded",true);try{this.onLoadDeferred.resolve(data);}catch(e){}},_onUnloadHandler:function(){this._set("isLoaded",false);try{this.onUnload();}catch(e){}},destroyDescendants:function(_11ac){if(this.isLoaded){this._onUnloadHandler();}var _11ad=this._contentSetter;array.forEach(this.getChildren(),function(_11ae){if(_11ae.destroyRecursive){_11ae.destroyRecursive(_11ac);}else{if(_11ae.destroy){_11ae.destroy(_11ac);}}_11ae._destroyed=true;});if(_11ad){array.forEach(_11ad.parseResults,function(_11af){if(!_11af._destroyed){if(_11af.destroyRecursive){_11af.destroyRecursive(_11ac);}else{if(_11af.destroy){_11af.destroy(_11ac);}}_11af._destroyed=true;}});delete _11ad.parseResults;}if(!_11ac){_11a4.empty(this.containerNode);}delete this._singleChild;},_setContent:function(cont,_11b0){cont=this.preprocessContent(cont);this.destroyDescendants();var _11b1=this._contentSetter;if(!(_11b1&&_11b1 instanceof html._ContentSetter)){_11b1=this._contentSetter=new html._ContentSetter({node:this.containerNode,_onError:lang.hitch(this,this._onError),onContentError:lang.hitch(this,function(e){var _11b2=this.onContentError(e);try{this.containerNode.innerHTML=_11b2;}catch(e){}})});}var _11b3=lang.mixin({cleanContent:this.cleanContent,extractContent:this.extractContent,parseContent:!cont.domNode&&this.parseOnLoad,parserScope:this.parserScope,startup:false,dir:this.dir,lang:this.lang,textDir:this.textDir},this._contentSetterParams||{});var p=_11b1.set((lang.isObject(cont)&&cont.domNode)?cont.domNode:cont,_11b3);var self=this;return when(p&&p.then?p:_11b1.parseDeferred,function(){delete self._contentSetterParams;if(!_11b0){if(self._started){self._startChildren();self._scheduleLayout();}self._onLoadHandler(cont);}});},preprocessContent:function(_11b4){return _11b4;},_onError:function(type,err,_11b5){this.onLoadDeferred.reject(err);var _11b6=this["on"+type+"Error"].call(this,err);if(_11b5){}else{if(_11b6){this._setContent(_11b6,true);}}},onLoad:function(){},onUnload:function(){},onDownloadStart:function(){return this.loadingMessage;},onContentError:function(){},onDownloadError:function(){return this.errorMessage;},onDownloadEnd:function(){}});});},"control/customer/partner_add":function(){define(["dojo/_base/declare","ttl/BaseWidgetAMD","dojo/text!../customer/templates/partner_add.html","dijit/layout/ContentPane","dojo/request","ttl/utilities2","dojo/_base/lang","dojo/topic","dojo/dom-class","dojo/data/ItemFileReadStore","dijit/form/ValidationTextBox","dojox/form/PasswordValidator","dijit/form/FilteringSelect","dijit/form/CheckBox","dojox/validate/regexp","dojox/form/BusyButton","dijit/form/Textarea","dijit/form/DateTextBox","dijit/form/NumberTextBox"],function(_11b7,_11b8,_11b9,_11ba,_11bb,_11bc,lang,topic,_11bd,_11be){return _11b7("controls.customer.partner_add",[_11b8,_11ba],{templateString:_11b9,gutters:false,constructor:function(){this.countries=new _11be({url:"/common/lookups?searchtype=countries"});this._save_call_back=lang.hitch(this,this._save_call);},postCreate:function(){this.countryid.set("store",this.countries);this.countryid.set("value",1);this._setup_dates();},_setup_dates:function(){this.startdate.set("value",new Date());var tmp=new Date();tmp.setFullYear(new Date().getFullYear()+1);this.enddate.set("value",tmp);},_show_vat:function(){},_customer_save:function(){if(_11bc.form_validator(this.form)==false){alert("Not all required fields filled in");throw "N";}if(confirm("Add Account")){var _11bf=this.form.get("value");_11bf["enddate"]=_11bc.to_json_date(this.enddate.get("value"));_11bf["startdate"]=_11bc.to_json_date(this.startdate.get("value"));_11bb.post("/customer/add_partner_customer",_11bc.make_params({data:_11bf})).then(this._save_call_back);}},_save_call:function(_11c0){if(_11c0.success=="OK"){topic.publish("/customer/p_add",_11c0.data);this._clear();}else{if(_11c0.success=="DU"){alert(_11c0.message);}}this.save_node.cancel();},_clear:function(){this.countryid.set("value",1);this.isdemo.set("checked",false);this._setup_dates();},_demo_active:function(_11c1){var tmp=new Date();if(_11c1==true){tmp.setDate(tmp.getDate()+7);this.enddate.constraints.max=tmp;}else{tmp.setFullYear(new Date().getFullYear()+1);delete this.enddate.constraints.max;}this.enddate.set("value",tmp);}});});},"control/customer/users":function(){define(["dojo/_base/declare","ttl/BaseWidgetAMD","dojo/text!../customer/templates/users.html","dijit/layout/BorderContainer","dojo/request","ttl/utilities2","dojo/_base/lang","dojo/topic","dojo/dom-class","ttl/grid/Grid","ttl/store/JsonRest","dojo/store/Observable","dijit/Menu","dijit/MenuItem","dijit/form/ValidationTextBox","dijit/form/CheckBox","control/customer/user_add","control/customer/user_update","control/customer/user_reset_password","dijit/Dialog"],function(_11c2,_11c3,_11c4,_11c5,_11c6,_11c7,lang,topic,_11c8,Grid,_11c9,_11ca,Menu,_11cb){return _11c2("control.customer.users",[_11c3,_11c5],{templateString:_11c4,gutters:false,constructor:function(){this.model=new _11ca(new _11c9({target:"/customer/user_list",idProperty:"user_id"}));this._show_func_call_back=lang.hitch(this,this._show_func_call);this._delete_call_back=lang.hitch(this,this._delete_call);this._icustomerid=null;this._std_menu=null;},postCreate:function(){var cells=[{label:"User Id",className:"dgrid-column-type-small",field:"user_id"},{label:"Display Name",className:"dgrid-column-title",field:"display_name"},{label:"Login Name",className:"dgrid-column-title",field:"user_name"},{label:"Email",className:"dgrid-column-title",field:"email_address"}];this.searchgrid=new Grid({columns:cells,selectionMode:"single",store:this.model,sort:[{attribute:"user_id",descending:false}],query:_11c7.EMPTYGRID});this.grid_view.set("content",this.searchgrid);this.searchgrid.on(".dgrid-cell:click",lang.hitch(this,this._on_cell_call));},_on_cell_call:function(evt){var cell=this.searchgrid.cell(evt);if(cell==null||cell.row==null){return;}this._selected_row=cell.row.data;if(this._std_menu===null){this._std_menu=new Menu();this._std_menu.addChild(new _11cb({label:"Delete",onClick:lang.hitch(this,this._delete_user)}));this._std_menu.addChild(new _11cb({label:"Edit",onClick:lang.hitch(this,this._edit_user)}));this._std_menu.addChild(new _11cb({label:"Re-Set password",onClick:lang.hitch(this,this._reset_password)}));this._std_menu.startup();}if(this._std_menu!=null){this._std_menu._openMyself(evt);}},load:function(_11cc){this._icustomerid=_11cc;this.searchgrid.set("query",{icustomerid:_11cc});},_add_user:function(){this.user_add_ctrl.load(this._icustomerid,this._show_func_call_back);this.user_add_dlg.show();},_show_func_call:function(_11cd,data){switch(_11cd){case "add":this.model.add(data);this.user_add_dlg.hide();this.user_add_ctrl.clear();break;case "delete":this.model.remove(data);this.user_add_dlg.hide();this.user_add_ctrl.clear();break;case "update_show":this.user_update_dlg.show();break;case "upd_password_close":this.user_password_dlg.hide();break;case "update_finish":this.model.add(data);this.user_update_dlg.hide();break;}},_delete_user:function(){if(confirm("Delete - "+this._selected_row.display_name)){_11c6.post("/customer/user/delete",_11c7.make_params({data:{iuserid:this._selected_row.user_id}})).then(this._delete_call_back);}},_edit_user:function(){this.user_update_ctrl.load(this._selected_row.user_id,this._show_func_call_back);},_reset_password:function(){this.user_password_ctrl.load(this._selected_row.user_id,this._selected_row.user_name,this._show_func_call_back);this.user_password_dlg.show();},_delete_call:function(_11ce){if(_11ce.success=="OK"){this.model.remove(this._selected_row.user_id);this._selected_row=null;}else{alert("Problem");}}});});},"dojox/grid/_SelectionPreserver":function(){define(["dojo/_base/declare","dojo/_base/connect","dojo/_base/lang","dojo/_base/array"],function(_11cf,_11d0,lang,array){return _11cf("dojox.grid._SelectionPreserver",null,{constructor:function(_11d1){this.selection=_11d1;var grid=this.grid=_11d1.grid;this.reset();this._connects=[_11d0.connect(grid,"_setStore",this,"reset"),_11d0.connect(grid,"_addItem",this,"_reSelectById"),_11d0.connect(_11d1,"onSelected",lang.hitch(this,"_selectById",true)),_11d0.connect(_11d1,"onDeselected",lang.hitch(this,"_selectById",false)),_11d0.connect(_11d1,"deselectAll",this,"reset")];},destroy:function(){this.reset();array.forEach(this._connects,_11d0.disconnect);delete this._connects;},reset:function(){this._selectedById={};},_reSelectById:function(item,index){if(item&&this.grid._hasIdentity){this.selection.selected[index]=this._selectedById[this.grid.store.getIdentity(item)];}},_selectById:function(_11d2,_11d3){if(this.selection.mode=="none"||!this.grid._hasIdentity){return;}var item=_11d3,g=this.grid;if(typeof _11d3=="number"||typeof _11d3=="string"){var entry=g._by_idx[_11d3];item=entry&&entry.item;}if(item){this._selectedById[g.store.getIdentity(item)]=!!_11d2;}return item;}});});},"dijit/_HasDropDown":function(){define(["dojo/_base/declare","dojo/_base/Deferred","dojo/dom","dojo/dom-attr","dojo/dom-class","dojo/dom-geometry","dojo/dom-style","dojo/has","dojo/keys","dojo/_base/lang","dojo/on","dojo/touch","./registry","./focus","./popup","./_FocusMixin"],function(_11d4,_11d5,dom,_11d6,_11d7,_11d8,_11d9,has,keys,lang,on,touch,_11da,focus,popup,_11db){return _11d4("dijit._HasDropDown",_11db,{_buttonNode:null,_arrowWrapperNode:null,_popupStateNode:null,_aroundNode:null,dropDown:null,autoWidth:true,forceWidth:false,maxHeight:-1,dropDownPosition:["below","above"],_stopClickEvents:true,_onDropDownMouseDown:function(e){if(this.disabled||this.readOnly){return;}if(e.type!="MSPointerDown"&&e.type!="pointerdown"){e.preventDefault();}this.own(on.once(this.ownerDocument,touch.release,lang.hitch(this,"_onDropDownMouseUp")));this.toggleDropDown();},_onDropDownMouseUp:function(e){var _11dc=this.dropDown,_11dd=false;if(e&&this._opened){var c=_11d8.position(this._buttonNode,true);if(!(e.pageX>=c.x&&e.pageX<=c.x+c.w)||!(e.pageY>=c.y&&e.pageY<=c.y+c.h)){var t=e.target;while(t&&!_11dd){if(_11d7.contains(t,"dijitPopup")){_11dd=true;}else{t=t.parentNode;}}if(_11dd){t=e.target;if(_11dc.onItemClick){var _11de;while(t&&!(_11de=_11da.byNode(t))){t=t.parentNode;}if(_11de&&_11de.onClick&&_11de.getParent){_11de.getParent().onItemClick(_11de,e);}}return;}}}if(this._opened){if(_11dc.focus&&(_11dc.autoFocus!==false||(e.type=="mouseup"&&!this.hovering))){this._focusDropDownTimer=this.defer(function(){_11dc.focus();delete this._focusDropDownTimer;});}}else{if(this.focus){this.defer("focus");}}},_onDropDownClick:function(e){if(this._stopClickEvents){e.stopPropagation();e.preventDefault();}},buildRendering:function(){this.inherited(arguments);this._buttonNode=this._buttonNode||this.focusNode||this.domNode;this._popupStateNode=this._popupStateNode||this.focusNode||this._buttonNode;var _11df={"after":this.isLeftToRight()?"Right":"Left","before":this.isLeftToRight()?"Left":"Right","above":"Up","below":"Down","left":"Left","right":"Right"}[this.dropDownPosition[0]]||this.dropDownPosition[0]||"Down";_11d7.add(this._arrowWrapperNode||this._buttonNode,"dijit"+_11df+"ArrowButton");},postCreate:function(){this.inherited(arguments);var _11e0=this.focusNode||this.domNode;this.own(on(this._buttonNode,touch.press,lang.hitch(this,"_onDropDownMouseDown")),on(this._buttonNode,"click",lang.hitch(this,"_onDropDownClick")),on(_11e0,"keydown",lang.hitch(this,"_onKey")),on(_11e0,"keyup",lang.hitch(this,"_onKeyUp")));},destroy:function(){if(this._opened){this.closeDropDown(true);}if(this.dropDown){if(!this.dropDown._destroyed){this.dropDown.destroyRecursive();}delete this.dropDown;}this.inherited(arguments);},_onKey:function(e){if(this.disabled||this.readOnly){return;}var d=this.dropDown,_11e1=e.target;if(d&&this._opened&&d.handleKey){if(d.handleKey(e)===false){e.stopPropagation();e.preventDefault();return;}}if(d&&this._opened&&e.keyCode==keys.ESCAPE){this.closeDropDown();e.stopPropagation();e.preventDefault();}else{if(!this._opened&&(e.keyCode==keys.DOWN_ARROW||((e.keyCode==keys.ENTER||(e.keyCode==keys.SPACE&&(!this._searchTimer||(e.ctrlKey||e.altKey||e.metaKey))))&&((_11e1.tagName||"").toLowerCase()!=="input"||(_11e1.type&&_11e1.type.toLowerCase()!=="text"))))){this._toggleOnKeyUp=true;e.stopPropagation();e.preventDefault();}}},_onKeyUp:function(){if(this._toggleOnKeyUp){delete this._toggleOnKeyUp;this.toggleDropDown();var d=this.dropDown;if(d&&d.focus){this.defer(lang.hitch(d,"focus"),1);}}},_onBlur:function(){this.closeDropDown(false);this.inherited(arguments);},isLoaded:function(){return true;},loadDropDown:function(_11e2){_11e2();},loadAndOpenDropDown:function(){var d=new _11d5(),_11e3=lang.hitch(this,function(){this.openDropDown();d.resolve(this.dropDown);});if(!this.isLoaded()){this.loadDropDown(_11e3);}else{_11e3();}return d;},toggleDropDown:function(){if(this.disabled||this.readOnly){return;}if(!this._opened){this.loadAndOpenDropDown();}else{this.closeDropDown(true);}},openDropDown:function(){var _11e4=this.dropDown,_11e5=_11e4.domNode,_11e6=this._aroundNode||this.domNode,self=this;var _11e7=popup.open({parent:this,popup:_11e4,around:_11e6,orient:this.dropDownPosition,maxHeight:this.maxHeight,onExecute:function(){self.closeDropDown(true);},onCancel:function(){self.closeDropDown(true);},onClose:function(){_11d6.set(self._popupStateNode,"popupActive",false);_11d7.remove(self._popupStateNode,"dijitHasDropDownOpen");self._set("_opened",false);}});if(this.forceWidth||(this.autoWidth&&_11e6.offsetWidth>_11e4._popupWrapper.offsetWidth)){var _11e8=_11e6.offsetWidth-_11e4._popupWrapper.offsetWidth;var _11e9={w:_11e4.domNode.offsetWidth+_11e8};this._origStyle=_11e5.style.cssText;if(lang.isFunction(_11e4.resize)){_11e4.resize(_11e9);}else{_11d8.setMarginBox(_11e5,_11e9);}if(_11e7.corner[1]=="R"){_11e4._popupWrapper.style.left=(_11e4._popupWrapper.style.left.replace("px","")-_11e8)+"px";}}_11d6.set(this._popupStateNode,"popupActive","true");_11d7.add(this._popupStateNode,"dijitHasDropDownOpen");this._set("_opened",true);this._popupStateNode.setAttribute("aria-expanded","true");this._popupStateNode.setAttribute("aria-owns",_11e4.id);if(_11e5.getAttribute("role")!=="presentation"&&!_11e5.getAttribute("aria-labelledby")){_11e5.setAttribute("aria-labelledby",this.id);}return _11e7;},closeDropDown:function(focus){if(this._focusDropDownTimer){this._focusDropDownTimer.remove();delete this._focusDropDownTimer;}if(this._opened){this._popupStateNode.setAttribute("aria-expanded","false");if(focus&&this.focus){this.focus();}popup.close(this.dropDown);this._opened=false;}if(this._origStyle){this.dropDown.domNode.style.cssText=this._origStyle;delete this._origStyle;}}});});},"dijit/form/_CheckBoxMixin":function(){define(["dojo/_base/declare","dojo/dom-attr"],function(_11ea,_11eb){return _11ea("dijit.form._CheckBoxMixin",null,{type:"checkbox",value:"on",readOnly:false,_aria_attr:"aria-checked",_setReadOnlyAttr:function(value){this._set("readOnly",value);_11eb.set(this.focusNode,"readOnly",value);},_setLabelAttr:undefined,_getSubmitValue:function(value){return (value==null||value==="")?"on":value;},_setValueAttr:function(_11ec){_11ec=this._getSubmitValue(_11ec);this._set("value",_11ec);_11eb.set(this.focusNode,"value",_11ec);},reset:function(){this.inherited(arguments);this._set("value",this._getSubmitValue(this.params.value));_11eb.set(this.focusNode,"value",this.value);},_onClick:function(e){if(this.readOnly){e.stopPropagation();e.preventDefault();return false;}return this.inherited(arguments);}});});},"dojo/html":function(){define(["./_base/kernel","./_base/lang","./_base/array","./_base/declare","./dom","./dom-construct","./parser"],function(_11ed,lang,_11ee,_11ef,dom,_11f0,_11f1){var _11f2=0;var html={_secureForInnerHtml:function(cont){return cont.replace(/(?:\s*<!DOCTYPE\s[^>]+>|<title[^>]*>[\s\S]*?<\/title>)/ig,"");},_emptyNode:_11f0.empty,_setNodeContent:function(node,cont){_11f0.empty(node);if(cont){if(typeof cont=="number"){cont=cont.toString();}if(typeof cont=="string"){cont=_11f0.toDom(cont,node.ownerDocument);}if(!cont.nodeType&&lang.isArrayLike(cont)){for(var _11f3=cont.length,i=0;i<cont.length;i=_11f3==cont.length?i+1:0){_11f0.place(cont[i],node,"last");}}else{_11f0.place(cont,node,"last");}}return node;},_ContentSetter:_11ef("dojo.html._ContentSetter",null,{node:"",content:"",id:"",cleanContent:false,extractContent:false,parseContent:false,parserScope:_11ed._scopeName,startup:true,constructor:function(_11f4,node){lang.mixin(this,_11f4||{});node=this.node=dom.byId(this.node||node);if(!this.id){this.id=["Setter",(node)?node.id||node.tagName:"",_11f2++].join("_");}},set:function(cont,_11f5){if(undefined!==cont){this.content=cont;}if(typeof cont=="number"){cont=cont.toString();}if(_11f5){this._mixin(_11f5);}this.onBegin();this.setContent();var ret=this.onEnd();if(ret&&ret.then){return ret;}else{return this.node;}},setContent:function(){var node=this.node;if(!node){throw new Error(this.declaredClass+": setContent given no node");}try{node=html._setNodeContent(node,this.content);}catch(e){var _11f6=this.onContentError(e);try{node.innerHTML=_11f6;}catch(e){}}this.node=node;},empty:function(){if(this.parseDeferred){if(!this.parseDeferred.isResolved()){this.parseDeferred.cancel();}delete this.parseDeferred;}if(this.parseResults&&this.parseResults.length){_11ee.forEach(this.parseResults,function(w){if(w.destroy){w.destroy();}});delete this.parseResults;}_11f0.empty(this.node);},onBegin:function(){var cont=this.content;if(lang.isString(cont)){if(this.cleanContent){cont=html._secureForInnerHtml(cont);}if(this.extractContent){var match=cont.match(/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im);if(match){cont=match[1];}}}this.empty();this.content=cont;return this.node;},onEnd:function(){if(this.parseContent){this._parse();}return this.node;},tearDown:function(){delete this.parseResults;delete this.parseDeferred;delete this.node;delete this.content;},onContentError:function(err){return "Error occurred setting content: "+err;},onExecError:function(err){return "Error occurred executing scripts: "+err;},_mixin:function(_11f7){var empty={},key;for(key in _11f7){if(key in empty){continue;}this[key]=_11f7[key];}},_parse:function(){var _11f8=this.node;try{var _11f9={};_11ee.forEach(["dir","lang","textDir"],function(name){if(this[name]){_11f9[name]=this[name];}},this);var self=this;this.parseDeferred=_11f1.parse({rootNode:_11f8,noStart:!this.startup,inherited:_11f9,scope:this.parserScope}).then(function(_11fa){return self.parseResults=_11fa;},function(e){self._onError("Content",e,"Error parsing in _ContentSetter#"+this.id);});}catch(e){this._onError("Content",e,"Error parsing in _ContentSetter#"+this.id);}},_onError:function(type,err,_11fb){var _11fc=this["on"+type+"Error"].call(this,err);if(_11fb){}else{if(_11fc){html._setNodeContent(this.node,_11fc,true);}}}}),set:function(node,cont,_11fd){if(undefined==cont){cont="";}if(typeof cont=="number"){cont=cont.toString();}if(!_11fd){return html._setNodeContent(node,cont,true);}else{var op=new html._ContentSetter(lang.mixin(_11fd,{content:cont,node:node}));return op.set();}}};lang.setObject("dojo.html",html);return html;});},"dijit/layout/LayoutContainer":function(){define(["dojo/_base/array","dojo/_base/declare","dojo/dom-class","dojo/dom-style","dojo/_base/lang","../_WidgetBase","./_LayoutWidget","./utils"],function(array,_11fe,_11ff,_1200,lang,_1201,_1202,_1203){var _1204=_11fe("dijit.layout.LayoutContainer",_1202,{design:"headline",baseClass:"dijitLayoutContainer",startup:function(){if(this._started){return;}array.forEach(this.getChildren(),this._setupChild,this);this.inherited(arguments);},_setupChild:function(child){this.inherited(arguments);var _1205=child.region;if(_1205){_11ff.add(child.domNode,this.baseClass+"Pane");}},_getOrderedChildren:function(){var _1206=array.map(this.getChildren(),function(child,idx){return {pane:child,weight:[child.region=="center"?Infinity:0,child.layoutPriority,(this.design=="sidebar"?1:-1)*(/top|bottom/.test(child.region)?1:-1),idx]};},this);_1206.sort(function(a,b){var aw=a.weight,bw=b.weight;for(var i=0;i<aw.length;i++){if(aw[i]!=bw[i]){return aw[i]-bw[i];}}return 0;});return array.map(_1206,function(w){return w.pane;});},layout:function(){_1203.layoutChildren(this.domNode,this._contentBox,this._getOrderedChildren());},addChild:function(child,_1207){this.inherited(arguments);if(this._started){this.layout();}},removeChild:function(child){this.inherited(arguments);if(this._started){this.layout();}_11ff.remove(child.domNode,this.baseClass+"Pane");_1200.set(child.domNode,{top:"auto",bottom:"auto",left:"auto",right:"auto",position:"static"});_1200.set(child.domNode,/top|bottom/.test(child.region)?"width":"height","auto");}});_1204.ChildWidgetProperties={region:"",layoutAlign:"",layoutPriority:0};lang.extend(_1201,_1204.ChildWidgetProperties);return _1204;});},"dojox/grid/cells":function(){define(["../main","./cells/_base"],function(dojox){return dojox.grid.cells;});},"dijit/layout/utils":function(){define(["dojo/_base/array","dojo/dom-class","dojo/dom-geometry","dojo/dom-style","dojo/_base/lang"],function(array,_1208,_1209,_120a,lang){function _120b(word){return word.substring(0,1).toUpperCase()+word.substring(1);};function size(_120c,dim){var _120d=_120c.resize?_120c.resize(dim):_1209.setMarginBox(_120c.domNode,dim);if(_120d){lang.mixin(_120c,_120d);}else{lang.mixin(_120c,_1209.getMarginBox(_120c.domNode));lang.mixin(_120c,dim);}};var utils={marginBox2contentBox:function(node,mb){var cs=_120a.getComputedStyle(node);var me=_1209.getMarginExtents(node,cs);var pb=_1209.getPadBorderExtents(node,cs);return {l:_120a.toPixelValue(node,cs.paddingLeft),t:_120a.toPixelValue(node,cs.paddingTop),w:mb.w-(me.w+pb.w),h:mb.h-(me.h+pb.h)};},layoutChildren:function(_120e,dim,_120f,_1210,_1211){dim=lang.mixin({},dim);_1208.add(_120e,"dijitLayoutContainer");_120f=array.filter(_120f,function(item){return item.region!="center"&&item.layoutAlign!="client";}).concat(array.filter(_120f,function(item){return item.region=="center"||item.layoutAlign=="client";}));array.forEach(_120f,function(child){var elm=child.domNode,pos=(child.region||child.layoutAlign);if(!pos){throw new Error("No region setting for "+child.id);}var _1212=elm.style;_1212.left=dim.l+"px";_1212.top=dim.t+"px";_1212.position="absolute";_1208.add(elm,"dijitAlign"+_120b(pos));var _1213={};if(_1210&&_1210==child.id){_1213[child.region=="top"||child.region=="bottom"?"h":"w"]=_1211;}if(pos=="leading"){pos=child.isLeftToRight()?"left":"right";}if(pos=="trailing"){pos=child.isLeftToRight()?"right":"left";}if(pos=="top"||pos=="bottom"){_1213.w=dim.w;size(child,_1213);dim.h-=child.h;if(pos=="top"){dim.t+=child.h;}else{_1212.top=dim.t+dim.h+"px";}}else{if(pos=="left"||pos=="right"){_1213.h=dim.h;size(child,_1213);dim.w-=child.w;if(pos=="left"){dim.l+=child.w;}else{_1212.left=dim.l+dim.w+"px";}}else{if(pos=="client"||pos=="center"){size(child,dim);}}}});}};lang.setObject("dijit.layout.utils",utils);return utils;});},"dijit/ProgressBar":function(){define(["require","dojo/_base/declare","dojo/dom-class","dojo/_base/lang","dojo/number","./_Widget","./_TemplatedMixin","dojo/text!./templates/ProgressBar.html"],function(_1214,_1215,_1216,lang,_1217,_1218,_1219,_121a){return _1215("dijit.ProgressBar",[_1218,_1219],{progress:"0",value:"",maximum:100,places:0,indeterminate:false,label:"",name:"",templateString:_121a,_indeterminateHighContrastImagePath:_1214.toUrl("./themes/a11y/indeterminate_progress.gif"),postMixInProperties:function(){this.inherited(arguments);if(!(this.params&&"value" in this.params)){this.value=this.indeterminate?Infinity:this.progress;}},buildRendering:function(){this.inherited(arguments);this.indeterminateHighContrastImage.setAttribute("src",this._indeterminateHighContrastImagePath.toString());this.update();},_setDirAttr:function(val){var rtl=val.toLowerCase()=="rtl";_1216.toggle(this.domNode,"dijitProgressBarRtl",rtl);_1216.toggle(this.domNode,"dijitProgressBarIndeterminateRtl",this.indeterminate&&rtl);this.inherited(arguments);},update:function(_121b){lang.mixin(this,_121b||{});var tip=this.internalProgress,ap=this.domNode;var _121c=1;if(this.indeterminate){ap.removeAttribute("aria-valuenow");}else{if(String(this.progress).indexOf("%")!=-1){_121c=Math.min(parseFloat(this.progress)/100,1);this.progress=_121c*this.maximum;}else{this.progress=Math.min(this.progress,this.maximum);_121c=this.maximum?this.progress/this.maximum:0;}ap.setAttribute("aria-valuenow",this.progress);}ap.setAttribute("aria-labelledby",this.labelNode.id);ap.setAttribute("aria-valuemin",0);ap.setAttribute("aria-valuemax",this.maximum);this.labelNode.innerHTML=this.report(_121c);_1216.toggle(this.domNode,"dijitProgressBarIndeterminate",this.indeterminate);_1216.toggle(this.domNode,"dijitProgressBarIndeterminateRtl",this.indeterminate&&!this.isLeftToRight());tip.style.width=(_121c*100)+"%";this.onChange();},_setValueAttr:function(v){this._set("value",v);if(v==Infinity){this.update({indeterminate:true});}else{this.update({indeterminate:false,progress:v});}},_setLabelAttr:function(label){this._set("label",label);this.update();},_setIndeterminateAttr:function(_121d){this._set("indeterminate",_121d);this.update();},report:function(_121e){return this.label?this.label:(this.indeterminate?"&#160;":_1217.format(_121e,{type:"percent",places:this.places,locale:this.lang}));},onChange:function(){}});});},"control/customer/reallocation":function(){define(["dojo/_base/declare","ttl/BaseWidgetAMD","dojo/text!../customer/templates/reallocation.html","dijit/layout/BorderContainer","dojo/request","ttl/utilities2","dojo/_base/lang","dojo/topic","dojo/dom-class","dojo/dom-attr","dojo/data/ItemFileReadStore","dojo/data/ItemFileWriteStore","control/customer/allocation","dijit/form/Form","dijit/form/CurrencyTextBox","dojox/form/BusyButton","dijit/form/TextBox","control/customer/manual_allocate_amount"],function(_121f,_1220,_1221,_1222,_1223,_1224,lang,topic,_1225,_1226,_1227,_1228,_1229){return _121f("control.customer.reallocation",[_1220,_1229],{templateString:_1221,gutters:false,constructor:function(){this._load_call_back=lang.hitch(this,this._load_call);this._reallocate_call_back=lang.hitch(this,this._reallocate_call);this._source="";},Load:function(_122a,keyid){this._customerid=_122a;this.alloc_grid_view.resize({w:590,h:300});_1223.post("/allocation/allocation_get_details",_1224.make_params({data:{keyid:keyid}})).then(this._load_call_back);this.keyid.set("value",keyid);},_load_call:function(_122b){if(_122b.success=="OK"){this._source=_122b.data.source;this.load_allocation(this._customerid,_122b.data.source);this.payment.set("value",_122b.data.unallocated);this.toallocate.set("value",_122b.data.unallocated);this.allocate.cancel();this.dialog.show();}},_on_blur_amount:function(){this._doallocation();},postCreate:function(){this._postCreate();this.inherited(arguments);},_reallocate_call:function(_122c){if(_122c.success=="OK"){alert("Re Allocated Done");this.dialog.hide();topic.publish(PRCOMMON.Events.Financial_ReLoad,[]);}else{alert("Problem with allocations");}this.allocate.cancel();},_reallocate:function(){if(this.toallocate.get("value")>this.payment.get("value")){alert("Over Allocation");this.allocate.cancel();return;}var _122d=this.form.get("value");_122d["icustomerid"]=this._customerid;_122d["unpaidamount"]=this.toallocate.get("value");_122d["allocations"]=this.getAllocations();_1223.post("/allocation/allocation_reallocate",_1224.make_params({data:_122d})).then(this._reallocate_call_back);}});});},"dijit/form/ValidationTextBox":function(){define(["dojo/_base/declare","dojo/_base/kernel","dojo/_base/lang","dojo/i18n","./TextBox","../Tooltip","dojo/text!./templates/ValidationTextBox.html","dojo/i18n!./nls/validate"],function(_122e,_122f,lang,i18n,_1230,_1231,_1232){var _1233=_122e("dijit.form.ValidationTextBox",_1230,{templateString:_1232,required:false,promptMessage:"",invalidMessage:"$_unset_$",missingMessage:"$_unset_$",message:"",constraints:{},pattern:".*",regExp:"",regExpGen:function(){},state:"",tooltipPosition:[],_deprecateRegExp:function(attr,value){if(value!=_1233.prototype[attr]){_122f.deprecated("ValidationTextBox id="+this.id+", set('"+attr+"', ...) is deprecated.  Use set('pattern', ...) instead.","","2.0");this.set("pattern",value);}},_setRegExpGenAttr:function(_1234){this._deprecateRegExp("regExpGen",_1234);this._set("regExpGen",this._computeRegexp);},_setRegExpAttr:function(value){this._deprecateRegExp("regExp",value);},_setValueAttr:function(){this.inherited(arguments);this._refreshState();},validator:function(value,_1235){return (new RegExp("^(?:"+this._computeRegexp(_1235)+")"+(this.required?"":"?")+"$")).test(value)&&(!this.required||!this._isEmpty(value))&&(this._isEmpty(value)||this.parse(value,_1235)!==undefined);},_isValidSubset:function(){return this.textbox.value.search(this._partialre)==0;},isValid:function(){return this.validator(this.textbox.value,this.get("constraints"));},_isEmpty:function(value){return (this.trim?/^\s*$/:/^$/).test(value);},getErrorMessage:function(){var _1236=this.invalidMessage=="$_unset_$"?this.messages.invalidMessage:!this.invalidMessage?this.promptMessage:this.invalidMessage;var _1237=this.missingMessage=="$_unset_$"?this.messages.missingMessage:!this.missingMessage?_1236:this.missingMessage;return (this.required&&this._isEmpty(this.textbox.value))?_1237:_1236;},getPromptMessage:function(){return this.promptMessage;},_maskValidSubsetError:true,validate:function(_1238){var _1239="";var _123a=this.disabled||this.isValid(_1238);if(_123a){this._maskValidSubsetError=true;}var _123b=this._isEmpty(this.textbox.value);var _123c=!_123a&&_1238&&this._isValidSubset();this._set("state",_123a?"":(((((!this._hasBeenBlurred||_1238)&&_123b)||_123c)&&(this._maskValidSubsetError||(_123c&&!this._hasBeenBlurred&&_1238)))?"Incomplete":"Error"));this.focusNode.setAttribute("aria-invalid",this.state=="Error"?"true":"false");if(this.state=="Error"){this._maskValidSubsetError=_1238&&_123c;_1239=this.getErrorMessage(_1238);}else{if(this.state=="Incomplete"){_1239=this.getPromptMessage(_1238);this._maskValidSubsetError=!this._hasBeenBlurred||_1238;}else{if(_123b){_1239=this.getPromptMessage(_1238);}}}this.set("message",_1239);return _123a;},displayMessage:function(_123d){if(_123d&&this.focused){_1231.show(_123d,this.domNode,this.tooltipPosition,!this.isLeftToRight());}else{_1231.hide(this.domNode);}},_refreshState:function(){if(this._created){this.validate(this.focused);}this.inherited(arguments);},constructor:function(_123e){this.constraints=lang.clone(this.constraints);this.baseClass+=" dijitValidationTextBox";},startup:function(){this.inherited(arguments);this._refreshState();},_setConstraintsAttr:function(_123f){if(!_123f.locale&&this.lang){_123f.locale=this.lang;}this._set("constraints",_123f);this._refreshState();},_setPatternAttr:function(_1240){this._set("pattern",_1240);this._refreshState();},_computeRegexp:function(_1241){var p=this.pattern;if(typeof p=="function"){p=p.call(this,_1241);}if(p!=this._lastRegExp){var _1242="";this._lastRegExp=p;if(p!=".*"){p.replace(/\\.|\[\]|\[.*?[^\\]{1}\]|\{.*?\}|\(\?[=:!]|./g,function(re){switch(re.charAt(0)){case "{":case "+":case "?":case "*":case "^":case "$":case "|":case "(":_1242+=re;break;case ")":_1242+="|$)";break;default:_1242+="(?:"+re+"|$)";break;}});}try{"".search(_1242);}catch(e){_1242=this.pattern;}this._partialre="^(?:"+_1242+")$";}return p;},postMixInProperties:function(){this.inherited(arguments);this.messages=i18n.getLocalization("dijit.form","validate",this.lang);this._setConstraintsAttr(this.constraints);},_setDisabledAttr:function(value){this.inherited(arguments);this._refreshState();},_setRequiredAttr:function(value){this._set("required",value);this.focusNode.setAttribute("aria-required",value);this._refreshState();},_setMessageAttr:function(_1243){this._set("message",_1243);this.displayMessage(_1243);},reset:function(){this._maskValidSubsetError=true;this.inherited(arguments);},_onBlur:function(){this.displayMessage("");this.inherited(arguments);},destroy:function(){_1231.hide(this.domNode);this.inherited(arguments);}});return _1233;});},"dijit/form/NumberTextBox":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/i18n","dojo/string","dojo/number","./RangeBoundTextBox"],function(_1244,lang,i18n,_1245,_1246,_1247){var _1248=function(_1249){var _1249=_1249||{},_124a=i18n.getLocalization("dojo.cldr","number",i18n.normalizeLocale(_1249.locale)),_124b=_1249.pattern?_1249.pattern:_124a[(_1249.type||"decimal")+"Format"];var _124c;if(typeof _1249.places=="number"){_124c=_1249.places;}else{if(typeof _1249.places==="string"&&_1249.places.length>0){_124c=_1249.places.replace(/.*,/,"");}else{_124c=(_124b.indexOf(".")!=-1?_124b.split(".")[1].replace(/[^#0]/g,"").length:0);}}return {sep:_124a.decimal,places:_124c};};var _124d=_1244("dijit.form.NumberTextBoxMixin",null,{pattern:function(_124e){return "("+(this.focused&&this.editOptions?this._regExpGenerator(lang.delegate(_124e,this.editOptions))+"|":"")+this._regExpGenerator(_124e)+")";},value:NaN,editOptions:{pattern:"#.######"},_formatter:_1246.format,_regExpGenerator:_1246.regexp,_decimalInfo:_1248(),postMixInProperties:function(){this.inherited(arguments);this._set("type","text");},_setConstraintsAttr:function(_124f){var _1250=typeof _124f.places=="number"?_124f.places:0;if(_1250){_1250++;}if(typeof _124f.max!="number"){_124f.max=9*Math.pow(10,15-_1250);}if(typeof _124f.min!="number"){_124f.min=-9*Math.pow(10,15-_1250);}this.inherited(arguments,[_124f]);if(this.focusNode&&this.focusNode.value&&!isNaN(this.value)){this.set("value",this.value);}this._decimalInfo=_1248(_124f);},_onFocus:function(){if(this.disabled||this.readOnly){return;}var val=this.get("value");if(typeof val=="number"&&!isNaN(val)){var _1251=this.format(val,this.constraints);if(_1251!==undefined){this.textbox.value=_1251;}}this.inherited(arguments);},format:function(value,_1252){var _1253=String(value);if(typeof value!="number"){return _1253;}if(isNaN(value)){return "";}if(!("rangeCheck" in this&&this.rangeCheck(value,_1252))&&_1252.exponent!==false&&/\de[-+]?\d/i.test(_1253)){return _1253;}if(this.editOptions&&this.focused){_1252=lang.mixin({},_1252,this.editOptions);}return this._formatter(value,_1252);},_parser:_1246.parse,parse:function(value,_1254){var _1255=lang.mixin({},_1254,(this.editOptions&&this.focused)?this.editOptions:{});if(this.focused&&_1255.places!=null){var _1256=_1255.places;var _1257=typeof _1256==="number"?_1256:Number(_1256.split(",").pop());_1255.places="0,"+_1257;}var v=this._parser(value,_1255);if(this.editOptions&&this.focused&&isNaN(v)){v=this._parser(value,_1254);}return v;},_getDisplayedValueAttr:function(){var v=this.inherited(arguments);return isNaN(v)?this.textbox.value:v;},filter:function(value){if(value==null||typeof value=="string"&&value==""){return NaN;}else{if(typeof value=="number"&&!isNaN(value)&&value!=0){value=_1246.round(value,this._decimalInfo.places);}}return this.inherited(arguments,[value]);},serialize:function(value,_1258){return (typeof value!="number"||isNaN(value))?"":this.inherited(arguments);},_setBlurValue:function(){var val=lang.hitch(lang.delegate(this,{focused:true}),"get")("value");this._setValueAttr(val,true);},_setValueAttr:function(value,_1259,_125a){if(value!==undefined&&_125a===undefined){_125a=String(value);if(typeof value=="number"){if(isNaN(value)){_125a="";}else{if(("rangeCheck" in this&&this.rangeCheck(value,this.constraints))||this.constraints.exponent===false||!/\de[-+]?\d/i.test(_125a)){_125a=undefined;}}}else{if(!value){_125a="";value=NaN;}else{value=undefined;}}}this.inherited(arguments,[value,_1259,_125a]);},_getValueAttr:function(){var v=this.inherited(arguments);if(isNaN(v)&&this.textbox.value!==""){if(this.constraints.exponent!==false&&/\de[-+]?\d/i.test(this.textbox.value)&&(new RegExp("^"+_1246._realNumberRegexp(lang.delegate(this.constraints))+"$").test(this.textbox.value))){var n=Number(this.textbox.value);return isNaN(n)?undefined:n;}else{return undefined;}}else{return v;}},isValid:function(_125b){if(!this.focused||this._isEmpty(this.textbox.value)){return this.inherited(arguments);}else{var v=this.get("value");if(!isNaN(v)&&this.rangeCheck(v,this.constraints)){if(this.constraints.exponent!==false&&/\de[-+]?\d/i.test(this.textbox.value)){return true;}else{return this.inherited(arguments);}}else{return false;}}},_isValidSubset:function(){var _125c=(typeof this.constraints.min=="number"),_125d=(typeof this.constraints.max=="number"),_125e=this.get("value");if(isNaN(_125e)||(!_125c&&!_125d)){return this.inherited(arguments);}var _125f=_125e|0,_1260=_125e<0,_1261=this.textbox.value.indexOf(this._decimalInfo.sep)!=-1,_1262=this.maxLength||20,_1263=_1262-this.textbox.value.length,_1264=_1261?this.textbox.value.split(this._decimalInfo.sep)[1].replace(/[^0-9]/g,""):"";var _1265=_1261?_125f+"."+_1264:_125f+"";var _1266=_1245.rep("9",_1263),_1267=_125e,_1268=_125e;if(_1260){_1267=Number(_1265+_1266);}else{_1268=Number(_1265+_1266);}return !((_125c&&_1268<this.constraints.min)||(_125d&&_1267>this.constraints.max));}});var _1269=_1244("dijit.form.NumberTextBox",[_1247,_124d],{baseClass:"dijitTextBox dijitNumberTextBox"});_1269.Mixin=_124d;return _1269;});},"dojox/collections/_base":function(){define(["dojo/_base/kernel","dojo/_base/lang","dojo/_base/array"],function(dojo,lang,arr){var _126a=lang.getObject("dojox.collections",true);_126a.DictionaryEntry=function(k,v){this.key=k;this.value=v;this.valueOf=function(){return this.value;};this.toString=function(){return String(this.value);};};_126a.Iterator=function(a){var _126b=0;this.element=a[_126b]||null;this.atEnd=function(){return (_126b>=a.length);};this.get=function(){if(this.atEnd()){return null;}this.element=a[_126b++];return this.element;};this.map=function(fn,scope){return arr.map(a,fn,scope);};this.reset=function(){_126b=0;this.element=a[_126b];};};_126a.DictionaryIterator=function(obj){var a=[];var _126c={};for(var p in obj){if(!_126c[p]){a.push(obj[p]);}}var _126d=0;this.element=a[_126d]||null;this.atEnd=function(){return (_126d>=a.length);};this.get=function(){if(this.atEnd()){return null;}this.element=a[_126d++];return this.element;};this.map=function(fn,scope){return arr.map(a,fn,scope);};this.reset=function(){_126d=0;this.element=a[_126d];};};return _126a;});},"dijit/form/_ComboBoxMenuMixin":function(){define(["dojo/_base/array","dojo/_base/declare","dojo/dom-attr","dojo/has","dojo/i18n","dojo/i18n!./nls/ComboBox"],function(array,_126e,_126f,has,i18n){var _1270=_126e("dijit.form._ComboBoxMenuMixin"+(has("dojo-bidi")?"_NoBidi":""),null,{_messages:null,postMixInProperties:function(){this.inherited(arguments);this._messages=i18n.getLocalization("dijit.form","ComboBox",this.lang);},buildRendering:function(){this.inherited(arguments);this.previousButton.innerHTML=this._messages["previousMessage"];this.nextButton.innerHTML=this._messages["nextMessage"];},_setValueAttr:function(value){this._set("value",value);this.onChange(value);},onClick:function(node){if(node==this.previousButton){this._setSelectedAttr(null);this.onPage(-1);}else{if(node==this.nextButton){this._setSelectedAttr(null);this.onPage(1);}else{this.onChange(node);}}},onChange:function(){},onPage:function(){},onClose:function(){this._setSelectedAttr(null);},_createOption:function(item,_1271){var _1272=this._createMenuItem();var _1273=_1271(item);if(_1273.html){_1272.innerHTML=_1273.label;}else{_1272.appendChild(_1272.ownerDocument.createTextNode(_1273.label));}if(_1272.innerHTML==""){_1272.innerHTML="&#160;";}return _1272;},createOptions:function(_1274,_1275,_1276){this.items=_1274;this.previousButton.style.display=(_1275.start==0)?"none":"";_126f.set(this.previousButton,"id",this.id+"_prev");array.forEach(_1274,function(item,i){var _1277=this._createOption(item,_1276);_1277.setAttribute("item",i);_126f.set(_1277,"id",this.id+i);this.nextButton.parentNode.insertBefore(_1277,this.nextButton);},this);var _1278=false;if(_1274.total&&!_1274.total.then&&_1274.total!=-1){if((_1275.start+_1275.count)<_1274.total){_1278=true;}else{if((_1275.start+_1275.count)>_1274.total&&_1275.count==_1274.length){_1278=true;}}}else{if(_1275.count==_1274.length){_1278=true;}}this.nextButton.style.display=_1278?"":"none";_126f.set(this.nextButton,"id",this.id+"_next");},clearResultList:function(){var _1279=this.containerNode;while(_1279.childNodes.length>2){_1279.removeChild(_1279.childNodes[_1279.childNodes.length-2]);}this._setSelectedAttr(null);},highlightFirstOption:function(){this.selectFirstNode();},highlightLastOption:function(){this.selectLastNode();},selectFirstNode:function(){this.inherited(arguments);if(this.getHighlightedOption()==this.previousButton){this.selectNextNode();}},selectLastNode:function(){this.inherited(arguments);if(this.getHighlightedOption()==this.nextButton){this.selectPreviousNode();}},getHighlightedOption:function(){return this.selected;}});if(has("dojo-bidi")){_1270=_126e("dijit.form._ComboBoxMenuMixin",_1270,{_createOption:function(){var _127a=this.inherited(arguments);this.applyTextDir(_127a);return _127a;}});}return _1270;});},"dijit/Tree":function(){define(["dojo/_base/array","dojo/aspect","dojo/cookie","dojo/_base/declare","dojo/Deferred","dojo/promise/all","dojo/dom","dojo/dom-class","dojo/dom-geometry","dojo/dom-style","dojo/errors/create","dojo/fx","dojo/has","dojo/_base/kernel","dojo/keys","dojo/_base/lang","dojo/on","dojo/topic","dojo/touch","dojo/when","./a11yclick","./focus","./registry","./_base/manager","./_Widget","./_TemplatedMixin","./_Container","./_Contained","./_CssStateMixin","./_KeyNavMixin","dojo/text!./templates/TreeNode.html","dojo/text!./templates/Tree.html","./tree/TreeStoreModel","./tree/ForestStoreModel","./tree/_dndSelector","dojo/query!css2"],function(array,_127b,_127c,_127d,_127e,all,dom,_127f,_1280,_1281,_1282,_1283,has,_1284,keys,lang,on,topic,touch,when,_1285,focus,_1286,_1287,_1288,_1289,_128a,_128b,_128c,_128d,_128e,_128f,_1290,_1291,_1292){function _1293(d){return lang.delegate(d.promise||d,{addCallback:function(_1294){this.then(_1294);},addErrback:function(_1295){this.otherwise(_1295);}});};var _1296=_127d("dijit._TreeNode",[_1288,_1289,_128a,_128b,_128c],{item:null,isTreeNode:true,label:"",_setLabelAttr:function(val){this.labelNode[this.labelType=="html"?"innerHTML":"innerText" in this.labelNode?"innerText":"textContent"]=val;this._set("label",val);if(has("dojo-bidi")){this.applyTextDir(this.labelNode);}},labelType:"text",isExpandable:null,isExpanded:false,state:"NotLoaded",templateString:_128e,baseClass:"dijitTreeNode",cssStateNodes:{rowNode:"dijitTreeRow"},_setTooltipAttr:{node:"rowNode",type:"attribute",attribute:"title"},buildRendering:function(){this.inherited(arguments);this._setExpando();this._updateItemClasses(this.item);if(this.isExpandable){this.labelNode.setAttribute("aria-expanded",this.isExpanded);}this.setSelected(false);},_setIndentAttr:function(_1297){var _1298=(Math.max(_1297,0)*this.tree._nodePixelIndent)+"px";_1281.set(this.domNode,"backgroundPosition",_1298+" 0px");_1281.set(this.rowNode,this.isLeftToRight()?"paddingLeft":"paddingRight",_1298);array.forEach(this.getChildren(),function(child){child.set("indent",_1297+1);});this._set("indent",_1297);},markProcessing:function(){this.state="Loading";this._setExpando(true);},unmarkProcessing:function(){this._setExpando(false);},_updateItemClasses:function(item){var tree=this.tree,model=tree.model;if(tree._v10Compat&&item===model.root){item=null;}this._applyClassAndStyle(item,"icon","Icon");this._applyClassAndStyle(item,"label","Label");this._applyClassAndStyle(item,"row","Row");this.tree._startPaint(true);},_applyClassAndStyle:function(item,lower,upper){var _1299="_"+lower+"Class";var _129a=lower+"Node";var _129b=this[_1299];this[_1299]=this.tree["get"+upper+"Class"](item,this.isExpanded);_127f.replace(this[_129a],this[_1299]||"",_129b||"");_1281.set(this[_129a],this.tree["get"+upper+"Style"](item,this.isExpanded)||{});},_updateLayout:function(){var _129c=this.getParent(),_129d=!_129c||!_129c.rowNode||_129c.rowNode.style.display=="none";_127f.toggle(this.domNode,"dijitTreeIsRoot",_129d);_127f.toggle(this.domNode,"dijitTreeIsLast",!_129d&&!this.getNextSibling());},_setExpando:function(_129e){var _129f=["dijitTreeExpandoLoading","dijitTreeExpandoOpened","dijitTreeExpandoClosed","dijitTreeExpandoLeaf"],_12a0=["*","-","+","*"],idx=_129e?0:(this.isExpandable?(this.isExpanded?1:2):3);_127f.replace(this.expandoNode,_129f[idx],_129f);this.expandoNodeText.innerHTML=_12a0[idx];},expand:function(){if(this._expandDeferred){return _1293(this._expandDeferred);}if(this._collapseDeferred){this._collapseDeferred.cancel();delete this._collapseDeferred;}this.isExpanded=true;this.labelNode.setAttribute("aria-expanded","true");if(this.tree.showRoot||this!==this.tree.rootNode){this.containerNode.setAttribute("role","group");}_127f.add(this.contentNode,"dijitTreeContentExpanded");this._setExpando();this._updateItemClasses(this.item);if(this==this.tree.rootNode&&this.tree.showRoot){this.tree.domNode.setAttribute("aria-expanded","true");}var _12a1=_1283.wipeIn({node:this.containerNode,duration:_1287.defaultDuration});var def=(this._expandDeferred=new _127e(function(){_12a1.stop();}));_127b.after(_12a1,"onEnd",function(){def.resolve(true);},true);_12a1.play();return _1293(def);},collapse:function(){if(this._collapseDeferred){return _1293(this._collapseDeferred);}if(this._expandDeferred){this._expandDeferred.cancel();delete this._expandDeferred;}this.isExpanded=false;this.labelNode.setAttribute("aria-expanded","false");if(this==this.tree.rootNode&&this.tree.showRoot){this.tree.domNode.setAttribute("aria-expanded","false");}_127f.remove(this.contentNode,"dijitTreeContentExpanded");this._setExpando();this._updateItemClasses(this.item);var _12a2=_1283.wipeOut({node:this.containerNode,duration:_1287.defaultDuration});var def=(this._collapseDeferred=new _127e(function(){_12a2.stop();}));_127b.after(_12a2,"onEnd",function(){def.resolve(true);},true);_12a2.play();return _1293(def);},indent:0,setChildItems:function(items){var tree=this.tree,model=tree.model,defs=[];var _12a3=tree.focusedChild;var _12a4=this.getChildren();array.forEach(_12a4,function(child){_128a.prototype.removeChild.call(this,child);},this);this.defer(function(){array.forEach(_12a4,function(node){if(!node._destroyed&&!node.getParent()){tree.dndController.removeTreeNode(node);function _12a5(node){var id=model.getIdentity(node.item),ary=tree._itemNodesMap[id];if(ary.length==1){delete tree._itemNodesMap[id];}else{var index=array.indexOf(ary,node);if(index!=-1){ary.splice(index,1);}}array.forEach(node.getChildren(),_12a5);};_12a5(node);if(tree.persist){var _12a6=array.map(node.getTreePath(),function(item){return tree.model.getIdentity(item);}).join("/");for(var path in tree._openedNodes){if(path.substr(0,_12a6.length)==_12a6){delete tree._openedNodes[path];}}tree._saveExpandedNodes();}if(tree.lastFocusedChild&&!dom.isDescendant(tree.lastFocusedChild,tree.domNode)){delete tree.lastFocusedChild;}if(_12a3&&!dom.isDescendant(_12a3,tree.domNode)){tree.focus();}node.destroyRecursive();}});});this.state="Loaded";if(items&&items.length>0){this.isExpandable=true;array.forEach(items,function(item){var id=model.getIdentity(item),_12a7=tree._itemNodesMap[id],node;if(_12a7){for(var i=0;i<_12a7.length;i++){if(_12a7[i]&&!_12a7[i].getParent()){node=_12a7[i];node.set("indent",this.indent+1);break;}}}if(!node){node=this.tree._createTreeNode({item:item,tree:tree,isExpandable:model.mayHaveChildren(item),label:tree.getLabel(item),labelType:(tree.model&&tree.model.labelType)||"text",tooltip:tree.getTooltip(item),ownerDocument:tree.ownerDocument,dir:tree.dir,lang:tree.lang,textDir:tree.textDir,indent:this.indent+1});if(_12a7){_12a7.push(node);}else{tree._itemNodesMap[id]=[node];}}this.addChild(node);if(this.tree.autoExpand||this.tree._state(node)){defs.push(tree._expandNode(node));}},this);array.forEach(this.getChildren(),function(child){child._updateLayout();});}else{this.isExpandable=false;}if(this._setExpando){this._setExpando(false);}this._updateItemClasses(this.item);var def=all(defs);this.tree._startPaint(def);return _1293(def);},getTreePath:function(){var node=this;var path=[];while(node&&node!==this.tree.rootNode){path.unshift(node.item);node=node.getParent();}path.unshift(this.tree.rootNode.item);return path;},getIdentity:function(){return this.tree.model.getIdentity(this.item);},removeChild:function(node){this.inherited(arguments);var _12a8=this.getChildren();if(_12a8.length==0){this.isExpandable=false;this.collapse();}array.forEach(_12a8,function(child){child._updateLayout();});},makeExpandable:function(){this.isExpandable=true;this._setExpando(false);},setSelected:function(_12a9){this.labelNode.setAttribute("aria-selected",_12a9?"true":"false");_127f.toggle(this.rowNode,"dijitTreeRowSelected",_12a9);},focus:function(){focus.focus(this.focusNode);}});if(has("dojo-bidi")){_1296.extend({_setTextDirAttr:function(_12aa){if(_12aa&&((this.textDir!=_12aa)||!this._created)){this._set("textDir",_12aa);this.applyTextDir(this.labelNode);array.forEach(this.getChildren(),function(_12ab){_12ab.set("textDir",_12aa);},this);}}});}var Tree=_127d("dijit.Tree",[_1288,_128d,_1289,_128c],{baseClass:"dijitTree",store:null,model:null,query:null,label:"",showRoot:true,childrenAttr:["children"],paths:[],path:[],selectedItems:null,selectedItem:null,openOnClick:false,openOnDblClick:false,templateString:_128f,persist:false,autoExpand:false,dndController:_1292,dndParams:["onDndDrop","itemCreator","onDndCancel","checkAcceptance","checkItemAcceptance","dragThreshold","betweenThreshold"],onDndDrop:null,itemCreator:null,onDndCancel:null,checkAcceptance:null,checkItemAcceptance:null,dragThreshold:5,betweenThreshold:0,_nodePixelIndent:19,_publish:function(_12ac,_12ad){topic.publish(this.id,lang.mixin({tree:this,event:_12ac},_12ad||{}));},postMixInProperties:function(){this.tree=this;if(this.autoExpand){this.persist=false;}this._itemNodesMap={};if(!this.cookieName&&this.id){this.cookieName=this.id+"SaveStateCookie";}this.expandChildrenDeferred=new _127e();this.pendingCommandsPromise=this.expandChildrenDeferred.promise;this.inherited(arguments);},postCreate:function(){this._initState();var self=this;this.own(on(this.containerNode,on.selector(".dijitTreeNode",touch.enter),function(evt){self._onNodeMouseEnter(_1286.byNode(this),evt);}),on(this.containerNode,on.selector(".dijitTreeNode",touch.leave),function(evt){self._onNodeMouseLeave(_1286.byNode(this),evt);}),on(this.containerNode,on.selector(".dijitTreeRow",_1285.press),function(evt){self._onNodePress(_1286.getEnclosingWidget(this),evt);}),on(this.containerNode,on.selector(".dijitTreeRow",_1285),function(evt){self._onClick(_1286.getEnclosingWidget(this),evt);}),on(this.containerNode,on.selector(".dijitTreeRow","dblclick"),function(evt){self._onDblClick(_1286.getEnclosingWidget(this),evt);}));if(!this.model){this._store2model();}this.own(_127b.after(this.model,"onChange",lang.hitch(this,"_onItemChange"),true),_127b.after(this.model,"onChildrenChange",lang.hitch(this,"_onItemChildrenChange"),true),_127b.after(this.model,"onDelete",lang.hitch(this,"_onItemDelete"),true));this.inherited(arguments);if(this.dndController){if(lang.isString(this.dndController)){this.dndController=lang.getObject(this.dndController);}var _12ae={};for(var i=0;i<this.dndParams.length;i++){if(this[this.dndParams[i]]){_12ae[this.dndParams[i]]=this[this.dndParams[i]];}}this.dndController=new this.dndController(this,_12ae);}this._load();this.onLoadDeferred=_1293(this.pendingCommandsPromise);this.onLoadDeferred.then(lang.hitch(this,"onLoad"));},_store2model:function(){this._v10Compat=true;_1284.deprecated("Tree: from version 2.0, should specify a model object rather than a store/query");var _12af={id:this.id+"_ForestStoreModel",store:this.store,query:this.query,childrenAttrs:this.childrenAttr};if(this.params.mayHaveChildren){_12af.mayHaveChildren=lang.hitch(this,"mayHaveChildren");}if(this.params.getItemChildren){_12af.getChildren=lang.hitch(this,function(item,_12b0,_12b1){this.getItemChildren((this._v10Compat&&item===this.model.root)?null:item,_12b0,_12b1);});}this.model=new _1291(_12af);this.showRoot=Boolean(this.label);},onLoad:function(){},_load:function(){this.model.getRoot(lang.hitch(this,function(item){var rn=(this.rootNode=this.tree._createTreeNode({item:item,tree:this,isExpandable:true,label:this.label||this.getLabel(item),labelType:this.model.labelType||"text",textDir:this.textDir,indent:this.showRoot?0:-1}));if(!this.showRoot){rn.rowNode.style.display="none";this.domNode.setAttribute("role","presentation");this.domNode.removeAttribute("aria-expanded");this.domNode.removeAttribute("aria-multiselectable");if(this["aria-label"]){rn.containerNode.setAttribute("aria-label",this["aria-label"]);this.domNode.removeAttribute("aria-label");}else{if(this["aria-labelledby"]){rn.containerNode.setAttribute("aria-labelledby",this["aria-labelledby"]);this.domNode.removeAttribute("aria-labelledby");}}rn.labelNode.setAttribute("role","presentation");rn.labelNode.removeAttribute("aria-selected");rn.containerNode.setAttribute("role","tree");rn.containerNode.setAttribute("aria-expanded","true");rn.containerNode.setAttribute("aria-multiselectable",!this.dndController.singular);}else{this.domNode.setAttribute("aria-multiselectable",!this.dndController.singular);this.rootLoadingIndicator.style.display="none";}this.containerNode.appendChild(rn.domNode);var _12b2=this.model.getIdentity(item);if(this._itemNodesMap[_12b2]){this._itemNodesMap[_12b2].push(rn);}else{this._itemNodesMap[_12b2]=[rn];}rn._updateLayout();this._expandNode(rn).then(lang.hitch(this,function(){if(!this._destroyed){this.rootLoadingIndicator.style.display="none";this.expandChildrenDeferred.resolve(true);}}));}),lang.hitch(this,function(err){}));},getNodesByItem:function(item){if(!item){return [];}var _12b3=lang.isString(item)?item:this.model.getIdentity(item);return [].concat(this._itemNodesMap[_12b3]);},_setSelectedItemAttr:function(item){this.set("selectedItems",[item]);},_setSelectedItemsAttr:function(items){var tree=this;return this.pendingCommandsPromise=this.pendingCommandsPromise.always(lang.hitch(this,function(){var _12b4=array.map(items,function(item){return (!item||lang.isString(item))?item:tree.model.getIdentity(item);});var nodes=[];array.forEach(_12b4,function(id){nodes=nodes.concat(tree._itemNodesMap[id]||[]);});this.set("selectedNodes",nodes);}));},_setPathAttr:function(path){if(path.length){return _1293(this.set("paths",[path]).then(function(paths){return paths[0];}));}else{return _1293(this.set("paths",[]).then(function(paths){return paths[0];}));}},_setPathsAttr:function(paths){var tree=this;function _12b5(path,nodes){var _12b6=path.shift();var _12b7=array.filter(nodes,function(node){return node.getIdentity()==_12b6;})[0];if(!!_12b7){if(path.length){return tree._expandNode(_12b7).then(function(){return _12b5(path,_12b7.getChildren());});}else{return _12b7;}}else{throw new Tree.PathError("Could not expand path at "+_12b6);}};return _1293(this.pendingCommandsPromise=this.pendingCommandsPromise.always(function(){return all(array.map(paths,function(path){path=array.map(path,function(item){return item&&lang.isObject(item)?tree.model.getIdentity(item):item;});if(path.length){return _12b5(path,[tree.rootNode]);}else{throw new Tree.PathError("Empty path");}}));}).then(function setNodes(_12b8){tree.set("selectedNodes",_12b8);return tree.paths;}));},_setSelectedNodeAttr:function(node){this.set("selectedNodes",[node]);},_setSelectedNodesAttr:function(nodes){this.dndController.setSelection(nodes);},expandAll:function(){var _12b9=this;function _12ba(node){return _12b9._expandNode(node).then(function(){var _12bb=array.filter(node.getChildren()||[],function(node){return node.isExpandable;});return all(array.map(_12bb,_12ba));});};return _1293(_12ba(this.rootNode));},collapseAll:function(){var _12bc=this;function _12bd(node){var _12be=array.filter(node.getChildren()||[],function(node){return node.isExpandable;}),defs=all(array.map(_12be,_12bd));if(!node.isExpanded||(node==_12bc.rootNode&&!_12bc.showRoot)){return defs;}else{return defs.then(function(){return _12bc._collapseNode(node);});}};return _1293(_12bd(this.rootNode));},mayHaveChildren:function(){},getItemChildren:function(){},getLabel:function(item){return this.model.getLabel(item);},getIconClass:function(item,_12bf){return (!item||this.model.mayHaveChildren(item))?(_12bf?"dijitFolderOpened":"dijitFolderClosed"):"dijitLeaf";},getLabelClass:function(){},getRowClass:function(){},getIconStyle:function(){},getLabelStyle:function(){},getRowStyle:function(){},getTooltip:function(){return "";},_onDownArrow:function(evt,node){var _12c0=this._getNext(node);if(_12c0&&_12c0.isTreeNode){this.focusNode(_12c0);}},_onUpArrow:function(evt,node){var _12c1=node.getPreviousSibling();if(_12c1){node=_12c1;while(node.isExpandable&&node.isExpanded&&node.hasChildren()){var _12c2=node.getChildren();node=_12c2[_12c2.length-1];}}else{var _12c3=node.getParent();if(!(!this.showRoot&&_12c3===this.rootNode)){node=_12c3;}}if(node&&node.isTreeNode){this.focusNode(node);}},_onRightArrow:function(evt,node){if(node.isExpandable&&!node.isExpanded){this._expandNode(node);}else{if(node.hasChildren()){node=node.getChildren()[0];if(node&&node.isTreeNode){this.focusNode(node);}}}},_onLeftArrow:function(evt,node){if(node.isExpandable&&node.isExpanded){this._collapseNode(node);}else{var _12c4=node.getParent();if(_12c4&&_12c4.isTreeNode&&!(!this.showRoot&&_12c4===this.rootNode)){this.focusNode(_12c4);}}},focusLastChild:function(){var node=this._getLast();if(node&&node.isTreeNode){this.focusNode(node);}},_getFirst:function(){return this.showRoot?this.rootNode:this.rootNode.getChildren()[0];},_getLast:function(){var node=this.rootNode;while(node.isExpanded){var c=node.getChildren();if(!c.length){break;}node=c[c.length-1];}return node;},_getNext:function(node){if(node.isExpandable&&node.isExpanded&&node.hasChildren()){return node.getChildren()[0];}else{while(node&&node.isTreeNode){var _12c5=node.getNextSibling();if(_12c5){return _12c5;}node=node.getParent();}return null;}},childSelector:".dijitTreeRow",isExpandoNode:function(node,_12c6){return dom.isDescendant(node,_12c6.expandoNode)||dom.isDescendant(node,_12c6.expandoNodeText);},_onNodePress:function(_12c7,e){this.focusNode(_12c7);},__click:function(_12c8,e,_12c9,func){var _12ca=e.target,_12cb=this.isExpandoNode(_12ca,_12c8);if(_12c8.isExpandable&&(_12c9||_12cb)){this._onExpandoClick({node:_12c8});}else{this._publish("execute",{item:_12c8.item,node:_12c8,evt:e});this[func](_12c8.item,_12c8,e);this.focusNode(_12c8);}e.stopPropagation();e.preventDefault();},_onClick:function(_12cc,e){this.__click(_12cc,e,this.openOnClick,"onClick");},_onDblClick:function(_12cd,e){this.__click(_12cd,e,this.openOnDblClick,"onDblClick");},_onExpandoClick:function(_12ce){var node=_12ce.node;this.focusNode(node);if(node.isExpanded){this._collapseNode(node);}else{this._expandNode(node);}},onClick:function(){},onDblClick:function(){},onOpen:function(){},onClose:function(){},_getNextNode:function(node){_1284.deprecated(this.declaredClass+"::_getNextNode(node) is deprecated. Use _getNext(node) instead.","","2.0");return this._getNext(node);},_getRootOrFirstNode:function(){_1284.deprecated(this.declaredClass+"::_getRootOrFirstNode() is deprecated. Use _getFirst() instead.","","2.0");return this._getFirst();},_collapseNode:function(node){if(node._expandNodeDeferred){delete node._expandNodeDeferred;}if(node.state=="Loading"){return;}if(node.isExpanded){var ret=node.collapse();this.onClose(node.item,node);this._state(node,false);this._startPaint(ret);return ret;}},_expandNode:function(node){if(node._expandNodeDeferred){return node._expandNodeDeferred;}var model=this.model,item=node.item,_12cf=this;if(!node._loadDeferred){node.markProcessing();node._loadDeferred=new _127e();model.getChildren(item,function(items){node.unmarkProcessing();node.setChildItems(items).then(function(){node._loadDeferred.resolve(items);});},function(err){node._loadDeferred.reject(err);});}var def=node._loadDeferred.then(lang.hitch(this,function(){var def2=node.expand();this.onOpen(node.item,node);this._state(node,true);return def2;}));this._startPaint(def);return def;},focusNode:function(node){var _12d0=this.domNode.scrollLeft;this.focusChild(node);this.domNode.scrollLeft=_12d0;},_onNodeMouseEnter:function(){},_onNodeMouseLeave:function(){},_onItemChange:function(item){var model=this.model,_12d1=model.getIdentity(item),nodes=this._itemNodesMap[_12d1];if(nodes){var label=this.getLabel(item),_12d2=this.getTooltip(item);array.forEach(nodes,function(node){node.set({item:item,label:label,tooltip:_12d2});node._updateItemClasses(item);});}},_onItemChildrenChange:function(_12d3,_12d4){var model=this.model,_12d5=model.getIdentity(_12d3),_12d6=this._itemNodesMap[_12d5];if(_12d6){array.forEach(_12d6,function(_12d7){_12d7.setChildItems(_12d4);});}},_onItemDelete:function(item){var model=this.model,_12d8=model.getIdentity(item),nodes=this._itemNodesMap[_12d8];if(nodes){array.forEach(nodes,function(node){this.dndController.removeTreeNode(node);var _12d9=node.getParent();if(_12d9){_12d9.removeChild(node);}if(this.lastFocusedChild&&!dom.isDescendant(this.lastFocusedChild,this.domNode)){delete this.lastFocusedChild;}if(this.focusedChild&&!dom.isDescendant(this.focusedChild,this.domNode)){this.focus();}node.destroyRecursive();},this);delete this._itemNodesMap[_12d8];}},_initState:function(){this._openedNodes={};if(this.persist&&this.cookieName){var oreo=_127c(this.cookieName);if(oreo){array.forEach(oreo.split(","),function(item){this._openedNodes[item]=true;},this);}}},_state:function(node,_12da){if(!this.persist){return false;}var path=array.map(node.getTreePath(),function(item){return this.model.getIdentity(item);},this).join("/");if(arguments.length===1){return this._openedNodes[path];}else{if(_12da){this._openedNodes[path]=true;}else{delete this._openedNodes[path];}this._saveExpandedNodes();}},_saveExpandedNodes:function(){if(this.persist&&this.cookieName){var ary=[];for(var id in this._openedNodes){ary.push(id);}_127c(this.cookieName,ary.join(","),{expires:365});}},destroy:function(){if(this._curSearch){this._curSearch.timer.remove();delete this._curSearch;}if(this.rootNode){this.rootNode.destroyRecursive();}if(this.dndController&&!lang.isString(this.dndController)){this.dndController.destroy();}this.rootNode=null;this.inherited(arguments);},destroyRecursive:function(){this.destroy();},resize:function(_12db){if(_12db){_1280.setMarginBox(this.domNode,_12db);}this._nodePixelIndent=_1280.position(this.tree.indentDetector).w||this._nodePixelIndent;this.expandChildrenDeferred.then(lang.hitch(this,function(){this.rootNode.set("indent",this.showRoot?0:-1);this._adjustWidths();}));},_outstandingPaintOperations:0,_startPaint:function(p){this._outstandingPaintOperations++;if(this._adjustWidthsTimer){this._adjustWidthsTimer.remove();delete this._adjustWidthsTimer;}var oc=lang.hitch(this,function(){this._outstandingPaintOperations--;if(this._outstandingPaintOperations<=0&&!this._adjustWidthsTimer&&this._started){this._adjustWidthsTimer=this.defer("_adjustWidths");}});when(p,oc,oc);},_adjustWidths:function(){if(this._adjustWidthsTimer){this._adjustWidthsTimer.remove();delete this._adjustWidthsTimer;}this.containerNode.style.width="auto";this.containerNode.style.width=this.domNode.scrollWidth>this.domNode.offsetWidth?"auto":"100%";},_createTreeNode:function(args){return new _1296(args);},focus:function(){if(this.lastFocusedChild){this.focusNode(this.lastFocusedChild);}else{this.focusFirstChild();}}});if(has("dojo-bidi")){Tree.extend({_setTextDirAttr:function(_12dc){if(_12dc&&this.textDir!=_12dc){this._set("textDir",_12dc);this.rootNode.set("textDir",_12dc);}}});}Tree.PathError=_1282("TreePathError");Tree._TreeNode=_1296;return Tree;});},"put-selector/put":function(){(function(_12dd){var _12de,_12df=/[-+,> ]/;_12dd([],_12de=function(doc,_12e0){"use strict";_12df=_12e0||_12df;var _12e1=/(?:\s*([-+ ,<>]))?\s*(\.|!\.?|#)?([-\w%$|]+)?(?:\[([^\]=]+)=?['"]?([^\]'"]*)['"]?\])?/g,_12e2,_12e3,_12e4=false,doc=doc||document,_12e5=typeof doc.createElement=="object";function _12e6(_12e7,text){_12e7.appendChild(doc.createTextNode(text));};function put(_12e8){var _12e9,_12ea,_12eb,_12ec,_12ed,args=arguments,_12ee=args[0];function _12ef(){if(_12ed&&_12ec&&_12ed!=_12ec){(_12ec==_12e8&&(_12e9||(_12e9=_12df.test(_12f0)&&doc.createDocumentFragment()))?_12e9:_12ec).insertBefore(_12ed,_12eb||null);}};for(var i=0;i<args.length;i++){var _12f0=args[i];if(typeof _12f0=="object"){_12ea=false;if(_12f0 instanceof Array){_12ed=doc.createDocumentFragment();for(var key=0;key<_12f0.length;key++){_12ed.appendChild(put(_12f0[key]));}_12f0=_12ed;}if(_12f0.nodeType){_12ed=_12f0;_12ef();_12ec=_12f0;_12eb=0;}else{for(var key in _12f0){_12ed[key]=_12f0[key];}}}else{if(_12ea){_12ea=false;_12e6(_12ed,_12f0);}else{if(i<1){_12e8=null;}_12ea=true;var _12f1=_12f0.replace(_12e1,function(t,_12f2,_12f3,value,_12f4,_12f5){if(_12f2){_12ef();if(_12f2=="-"||_12f2=="+"){_12ec=(_12eb=(_12ed||_12ec)).parentNode;_12ed=null;if(_12f2=="+"){_12eb=_12eb.nextSibling;}}else{if(_12f2=="<"){_12ec=_12ed=(_12ed||_12ec).parentNode;}else{if(_12f2==","){_12ec=_12e8;}else{if(_12ed){_12ec=_12ed;}}_12ed=null;}_12eb=0;}if(_12ed){_12ec=_12ed;}}var tag=!_12f3&&value;if(tag||(!_12ed&&(_12f3||_12f4))){if(tag=="$"){_12e6(_12ec,args[++i]);}else{tag=tag||put.defaultTag;var _12f6=_12e5&&args[i+1]&&args[i+1].name;if(_12f6){tag="<"+tag+" name=\""+_12f6+"\">";}_12ed=_12e4&&~(_12e3=tag.indexOf("|"))?doc.createElementNS(_12e4[tag.slice(0,_12e3)],tag.slice(_12e3+1)):doc.createElement(tag);}}if(_12f3){if(value=="$"){value=args[++i];}if(_12f3=="#"){_12ed.id=value;}else{var _12f7=_12ed.className;var _12f8=_12f7&&(" "+_12f7+" ").replace(" "+value+" "," ");if(_12f3=="."){_12ed.className=_12f7?(_12f8+value).substring(1):value;}else{if(_12f0=="!"){var _12f9;if(_12e5){put("div",_12ed,"<").innerHTML="";}else{if(_12f9=_12ed.parentNode){_12f9.removeChild(_12ed);}}}else{_12f8=_12f8.substring(1,_12f8.length-1);if(_12f8!=_12f7){_12ed.className=_12f8;}}}}}if(_12f4){if(_12f5=="$"){_12f5=args[++i];}if(_12f4=="style"){_12ed.style.cssText=_12f5;}else{var _12fa=_12f4.charAt(0)=="!"?(_12f4=_12f4.substring(1))&&"removeAttribute":"setAttribute";_12f5=_12f5===""?_12f4:_12f5;_12e4&&~(_12e3=_12f4.indexOf("|"))?_12ed[_12fa+"NS"](_12e4[_12f4.slice(0,_12e3)],_12f4.slice(_12e3+1),_12f5):_12ed[_12fa](_12f4,_12f5);}}return "";});if(_12f1){throw new SyntaxError("Unexpected char "+_12f1+" in "+_12f0);}_12ef();_12ec=_12ee=_12ed||_12ec;}}}if(_12e8&&_12e9){_12e8.appendChild(_12e9);}return _12ee;};put.addNamespace=function(name,uri){if(doc.createElementNS){(_12e4||(_12e4={}))[name]=uri;}else{doc.namespaces.add(name,uri);}};put.defaultTag="div";put.forDocument=_12de;return put;});})(function(id,deps,_12fb){_12fb=_12fb||deps;if(typeof define==="function"){define([],function(){return _12fb();});}else{if(typeof window=="undefined"){require("./node-html")(module,_12fb);}else{put=_12fb();}}});},"dijit/form/Button":function(){define(["require","dojo/_base/declare","dojo/dom-class","dojo/has","dojo/_base/kernel","dojo/_base/lang","dojo/ready","./_FormWidget","./_ButtonMixin","dojo/text!./templates/Button.html","../a11yclick"],function(_12fc,_12fd,_12fe,has,_12ff,lang,ready,_1300,_1301,_1302){if(has("dijit-legacy-requires")){ready(0,function(){var _1303=["dijit/form/DropDownButton","dijit/form/ComboButton","dijit/form/ToggleButton"];_12fc(_1303);});}var _1304=_12fd("dijit.form.Button"+(has("dojo-bidi")?"_NoBidi":""),[_1300,_1301],{showLabel:true,iconClass:"dijitNoIcon",_setIconClassAttr:{node:"iconNode",type:"class"},baseClass:"dijitButton",templateString:_1302,_setValueAttr:"valueNode",_setNameAttr:function(name){if(this.valueNode){this.valueNode.setAttribute("name",name);}},postCreate:function(){this.inherited(arguments);this._setLabelFromContainer();},_setLabelFromContainer:function(){if(this.containerNode&&!this.label){this.label=lang.trim(this.containerNode.innerHTML);this.onLabelSet();}},_setShowLabelAttr:function(val){if(this.containerNode){_12fe.toggle(this.containerNode,"dijitDisplayNone",!val);}this._set("showLabel",val);},setLabel:function(_1305){_12ff.deprecated("dijit.form.Button.setLabel() is deprecated.  Use set('label', ...) instead.","","2.0");this.set("label",_1305);},onLabelSet:function(){this.inherited(arguments);if(!this.showLabel&&!("title" in this.params)){this.titleNode.title=lang.trim(this.containerNode.innerText||this.containerNode.textContent||"");}}});if(has("dojo-bidi")){_1304=_12fd("dijit.form.Button",_1304,{onLabelSet:function(){this.inherited(arguments);if(this.titleNode.title){this.applyTextDir(this.titleNode,this.titleNode.title);}},_setTextDirAttr:function(_1306){if(this._created&&this.textDir!=_1306){this._set("textDir",_1306);this._setLabelAttr(this.label);}}});}return _1304;});},"dijit/form/_ExpandingTextAreaMixin":function(){define(["dojo/_base/declare","dojo/dom-construct","dojo/has","dojo/_base/lang","dojo/on","dojo/_base/window","../Viewport"],function(_1307,_1308,has,lang,on,win,_1309){has.add("textarea-needs-help-shrinking",function(){var body=win.body(),te=_1308.create("textarea",{rows:"5",cols:"20",value:" ",style:{zoom:1,fontSize:"12px",height:"96px",overflow:"hidden",visibility:"hidden",position:"absolute",border:"5px solid white",margin:"0",padding:"0",boxSizing:"border-box",MsBoxSizing:"border-box",WebkitBoxSizing:"border-box",MozBoxSizing:"border-box"}},body,"last");var _130a=te.scrollHeight>=te.clientHeight;body.removeChild(te);return _130a;});return _1307("dijit.form._ExpandingTextAreaMixin",null,{_setValueAttr:function(){this.inherited(arguments);this.resize();},postCreate:function(){this.inherited(arguments);var _130b=this.textbox;_130b.style.overflowY="hidden";this.own(on(_130b,"focus, resize",lang.hitch(this,"_resizeLater")));},startup:function(){this.inherited(arguments);this.own(_1309.on("resize",lang.hitch(this,"_resizeLater")));this._resizeLater();},_onInput:function(e){this.inherited(arguments);this.resize();},_estimateHeight:function(){var _130c=this.textbox;_130c.rows=(_130c.value.match(/\n/g)||[]).length+1;},_resizeLater:function(){this.defer("resize");},resize:function(){var _130d=this.textbox;function _130e(){var empty=false;if(_130d.value===""){_130d.value=" ";empty=true;}var sh=_130d.scrollHeight;if(empty){_130d.value="";}return sh;};if(_130d.style.overflowY=="hidden"){_130d.scrollTop=0;}if(this.busyResizing){return;}this.busyResizing=true;if(_130e()||_130d.offsetHeight){var newH=_130e()+Math.max(_130d.offsetHeight-_130d.clientHeight,0);var _130f=newH+"px";if(_130f!=_130d.style.height){_130d.style.height=_130f;_130d.rows=1;}if(has("textarea-needs-help-shrinking")){var _1310=_130e(),_1311=_1310,_1312=_130d.style.minHeight,_1313=4,_1314,_1315=_130d.scrollTop;_130d.style.minHeight=_130f;_130d.style.height="auto";while(newH>0){_130d.style.minHeight=Math.max(newH-_1313,4)+"px";_1314=_130e();var _1316=_1311-_1314;newH-=_1316;if(_1316<_1313){break;}_1311=_1314;_1313<<=1;}_130d.style.height=newH+"px";_130d.style.minHeight=_1312;_130d.scrollTop=_1315;}_130d.style.overflowY=_130e()>_130d.clientHeight?"auto":"hidden";if(_130d.style.overflowY=="hidden"){_130d.scrollTop=0;}}else{this._estimateHeight();}this.busyResizing=false;}});});},"control/customer/details":function(){define(["dojo/_base/declare","ttl/BaseWidgetAMD","dojo/text!../customer/templates/details.html","dijit/layout/BorderContainer","dijit/layout/ContentPane","dojo/request","ttl/utilities2","dojo/_base/lang","dojo/topic","dojo/dom-class","dojo/data/ItemFileReadStore","dijit/form/Select","dojox/validate/regexp","dijit/form/ValidationTextBox","dojox/form/BusyButton"],function(_1317,_1318,_1319,_131a,_131b,_131c,_131d,lang,topic,_131e,_131f){return _1317("control.customer.details",[_1318,_131b],{templateString:_1319,gutters:false,constructor:function(){this._countries=new _131f({url:"/common/lookups?searchtype=countries"});this._save_call_back=lang.hitch(this,this._save_call);},postCreate:function(){this.countryid.set("store",this._countries);this.inherited(arguments);},load:function(_1320){this.icustomerid.set("value",_1320.cust.customerid);this.customername.set("value",_1320.cust.customername);this.contact_title.set("value",_1320.cust.contact_title);this.contact_firstname.set("value",_1320.cust.contact_firstname);this.contact_surname.set("value",_1320.cust.contact_surname);this.individual.set("checked",_1320.cust.individual);this.contactjobtitle.set("value",_1320.cust.contactjobtitle);this.address1.set("value",_1320.address.address1);this.address2.set("value",_1320.address.address2);this.townname.set("value",_1320.address.townname);this.county.set("value",_1320.address.county);this.postcode.set("value",_1320.address.postcode);this.email.set("value",_1320.cust.email);this.tel.set("value",_1320.cust.tel);this.countryid.set("value",_1320.cust.countryid);this.vatnumber.set("value",_1320.cust.vatnumber);this.savebtn.cancel();},_customer_save:function(){if(_131d.form_validator(this.customer_form)==false){alert("Please Enter Details");this.savebtn.cancel();return false;}_131c.post("c/update_customer",_131d.make_params({data:this.customer_form.get("value")})).then(this._save_call_back);},_save_call:function(_1321){if(_1321.success=="OK"){topic.publish("/customer/p_upd",_1321.data);alert("Customer Details Updated");}this.savebtn.cancel();}});});},"prcommon2/prevents":function(){define(["dojo/_base/declare"],function(_1322){return _1322("prcommon2.prevents",null,{Employee_Deleted:"/employee/deleted",Employee_Updated:"/employee/update",SearchSession_Added:"/searchsession/add",SearchSession_Deleted:"/searchsession/delete",Outlet_Deleted:"/outlet/deleted",Outlet_Updated:"/outlet/update",Outlet_Overrides:"/outlet/overrides",SearchSession_Changed:"/searchsession/changed",Advance_Session_Changed:"/advance/sessionchanged",Display_Retry:"/display/retry",Employee_Add:"/employee/add",Employee_Override:"/employee/overrides",Display_Clear:"/display/clear",Display_Load:"/display/load",Display_Name:"/display/name",Dialog_Close:"/dialog/close",Display_ReLoad:"/display/refresh",Display_View_Changed:"/display/chnaged",Search_PartialMatch:"/search/partialmatch",Search_Total:"/search/searchtotal",Collateral_Add:"/collateral/add",Project_Add:"/projects/add",Project_Update:"/projects/update",Project_Delete:"/projects/delete",List_Deleted:"/lists/delete",List_Add:"/lists/add",User_Added:"/user/added",Word_Html_Data:"/email.html",Geographical_Area_Delete:"/geographical/delete",Geographical_Area_Update:"/geographical/update",Geographical_Area_Add:"/geographical/add",Interest_Delete:"/interest/delete",Interest_Update:"/interest/update",Interest_Add:"/interest/add",Coverage_Moved:"/coverage/moved",Person_Added:"/person/add",Person_Update:"/person/update",Person_Delete:"/person/delete",PressReleaseStart:"/pressrelease/start",Crm_Note_Add:"/crm/add",Crm_Note_Update:"/crm/update",Crm_Note_Delete:"/crm/delete",Monthly_Payments:"/payment/taken",Message_Sent:"/messages/sent",Button_Pressed:"/button/pressed",Feature_Deleted:"/feature/deleted",Feature_Added:"/feature/added",Feature_Updated:"/feature/update",Feature_List_Add:"/featurelist/add",Feature_List_Update:"/featurelist/update",Feature_List_Update:"/featurelist/delete",Geographical_Selected:"/geographical/selected",BouncedEmail_Completed:"/events/bouncedcompleted",Financial_ReLoad:"/financial/refresh",Publisher_Added:"/publisher/add",Publisher_Update:"/publisher/update",Publisher_Deleted:"/publisher/deleted",Circulation_Sources_Added:"/circulationsources/add",Circulation_Sources_Update:"/circulationsources/update",Circulation_Dates_Added:"/circulationdates/add",Circulation_Dates_Update:"/circulationdates/update",Circulation_Dates_Deleted:"/circulationdates/deleted",Web_Sources_Added:"/websources/add",Web_Sources_Update:"/websources/update",Web_Dates_Added:"/webdates/add",Web_Dates_Update:"/webdates/update",Web_Dates_Deleted:"/webdates/deleted",Market_Sector_Added:"/marketsector/add",Market_Sector_Update:"/marketsector/update",Market_Sector_Deleted:"/marketsector/deleted",Production_Company_Added:"/production/add",Production_Company_Update:"/production/update",Production_Company_Deleted:"/production/delete",Lanquage_Added:"/lang/add",Lanquage_Update:"/lang/update",Desk_Added:"/desk/add",Desk_Updated:"/desk/update",Desk_Deleted:"/desk/delete",Show_Customer_Main:"/m/show",Expire_Date_Changed:"/m/exp",Task_Refresh:"/m/t_refresh",Employee_Quest_Deleted:"/eq/deleted",Employee_Quest_Updated:"/eq/update",Employee_Quest_Add:"/eq/add",Edit_Notes:"/crm/edit_notes",Update_Notes:"crm/notes_updated",Task_Add:"/task/add",Task_Update:"task/updated",Brief_Note_Add:"i/bn/add",Brief_Note_Upd:"i/bn/upd"});});},"dijit/CalendarLite":function(){define(["dojo/_base/array","dojo/_base/declare","dojo/cldr/supplemental","dojo/date","dojo/date/locale","dojo/date/stamp","dojo/dom","dojo/dom-class","dojo/_base/lang","dojo/on","dojo/sniff","dojo/string","./_WidgetBase","./_TemplatedMixin","dojo/text!./templates/Calendar.html","./a11yclick","./hccss"],function(array,_1323,_1324,date,_1325,stamp,dom,_1326,lang,on,has,_1327,_1328,_1329,_132a){var _132b=_1323("dijit.CalendarLite",[_1328,_1329],{templateString:_132a,dowTemplateString:"<th class=\"dijitReset dijitCalendarDayLabelTemplate\" role=\"columnheader\" scope=\"col\"><span class=\"dijitCalendarDayLabel\">${d}</span></th>",dateTemplateString:"<td class=\"dijitReset\" role=\"gridcell\" data-dojo-attach-point=\"dateCells\"><span class=\"dijitCalendarDateLabel\" data-dojo-attach-point=\"dateLabels\"></span></td>",weekTemplateString:"<tr class=\"dijitReset dijitCalendarWeekTemplate\" role=\"row\">${d}${d}${d}${d}${d}${d}${d}</tr>",value:new Date(""),datePackage:"",dayWidth:"narrow",tabIndex:"0",dayOffset:-1,currentFocus:new Date(),_setSummaryAttr:"gridNode",baseClass:"dijitCalendar dijitCalendarLite",_isValidDate:function(value){return value&&!isNaN(value)&&typeof value=="object"&&value.toString()!=this.constructor.prototype.value.toString();},_getValueAttr:function(){var _132c=this._get("value");if(_132c&&!isNaN(_132c)){var value=new this.dateClassObj(_132c);value.setHours(0,0,0,0);if(value.getDate()<_132c.getDate()){value=this.dateModule.add(value,"hour",1);}return value;}else{return null;}},_setValueAttr:function(value,_132d){if(typeof value=="string"){value=stamp.fromISOString(value);}value=this._patchDate(value);if(this._isValidDate(value)&&!this.isDisabledDate(value,this.lang)){this._set("value",value);this.set("currentFocus",value);this._markSelectedDates([value]);if(this._created&&(_132d||typeof _132d=="undefined")){this.onChange(this.get("value"));}}else{this._set("value",null);this._markSelectedDates([]);}},_patchDate:function(value){if(value){value=new this.dateClassObj(value);value.setHours(1,0,0,0);}return value;},_setText:function(node,text){while(node.firstChild){node.removeChild(node.firstChild);}node.appendChild(node.ownerDocument.createTextNode(text));},_populateGrid:function(){var month=new this.dateClassObj(this.currentFocus);month.setDate(1);month=this._patchDate(month);var _132e=month.getDay(),_132f=this.dateModule.getDaysInMonth(month),_1330=this.dateModule.getDaysInMonth(this.dateModule.add(month,"month",-1)),today=new this.dateClassObj(),_1331=this.dayOffset>=0?this.dayOffset:_1324.getFirstDayOfWeek(this.lang);if(_1331>_132e){_1331-=7;}if(!this.summary){var _1332=this.dateLocaleModule.getNames("months","wide","standAlone",this.lang,month);this.gridNode.setAttribute("summary",_1332[month.getMonth()]);}this._date2cell={};array.forEach(this.dateCells,function(_1333,idx){var i=idx+_1331;var date=new this.dateClassObj(month),_1334,clazz="dijitCalendar",adj=0;if(i<_132e){_1334=_1330-_132e+i+1;adj=-1;clazz+="Previous";}else{if(i>=(_132e+_132f)){_1334=i-_132e-_132f+1;adj=1;clazz+="Next";}else{_1334=i-_132e+1;clazz+="Current";}}if(adj){date=this.dateModule.add(date,"month",adj);}date.setDate(_1334);if(!this.dateModule.compare(date,today,"date")){clazz="dijitCalendarCurrentDate "+clazz;}if(this.isDisabledDate(date,this.lang)){clazz="dijitCalendarDisabledDate "+clazz;_1333.setAttribute("aria-disabled","true");}else{clazz="dijitCalendarEnabledDate "+clazz;_1333.removeAttribute("aria-disabled");_1333.setAttribute("aria-selected","false");}var _1335=this.getClassForDate(date,this.lang);if(_1335){clazz=_1335+" "+clazz;}_1333.className=clazz+"Month dijitCalendarDateTemplate";var _1336=date.valueOf();this._date2cell[_1336]=_1333;_1333.dijitDateValue=_1336;this._setText(this.dateLabels[idx],date.getDateLocalized?date.getDateLocalized(this.lang):date.getDate());},this);},_populateControls:function(){var month=new this.dateClassObj(this.currentFocus);month.setDate(1);this.monthWidget.set("month",month);var y=month.getFullYear()-1;var d=new this.dateClassObj();array.forEach(["previous","current","next"],function(name){d.setFullYear(y++);this._setText(this[name+"YearLabelNode"],this.dateLocaleModule.format(d,{selector:"year",locale:this.lang}));},this);},goToToday:function(){this.set("value",new this.dateClassObj());},constructor:function(_1337){this.dateModule=_1337.datePackage?lang.getObject(_1337.datePackage,false):date;this.dateClassObj=this.dateModule.Date||Date;this.dateLocaleModule=_1337.datePackage?lang.getObject(_1337.datePackage+".locale",false):_1325;},_createMonthWidget:function(){return _132b._MonthWidget({id:this.id+"_mddb",lang:this.lang,dateLocaleModule:this.dateLocaleModule},this.monthNode);},buildRendering:function(){var d=this.dowTemplateString,_1338=this.dateLocaleModule.getNames("days",this.dayWidth,"standAlone",this.lang),_1339=this.dayOffset>=0?this.dayOffset:_1324.getFirstDayOfWeek(this.lang);this.dayCellsHtml=_1327.substitute([d,d,d,d,d,d,d].join(""),{d:""},function(){return _1338[_1339++%7];});var r=_1327.substitute(this.weekTemplateString,{d:this.dateTemplateString});this.dateRowsHtml=[r,r,r,r,r,r].join("");this.dateCells=[];this.dateLabels=[];this.inherited(arguments);dom.setSelectable(this.domNode,false);var _133a=new this.dateClassObj(this.currentFocus);this.monthWidget=this._createMonthWidget();this.set("currentFocus",_133a,false);},postCreate:function(){this.inherited(arguments);this._connectControls();},_connectControls:function(){var _133b=lang.hitch(this,function(_133c,part,_133d){this[_133c].dojoClick=true;return on(this[_133c],"click",lang.hitch(this,function(){this._setCurrentFocusAttr(this.dateModule.add(this.currentFocus,part,_133d));}));});this.own(_133b("incrementMonth","month",1),_133b("decrementMonth","month",-1),_133b("nextYearLabelNode","year",1),_133b("previousYearLabelNode","year",-1));},_setCurrentFocusAttr:function(date,_133e){var _133f=this.currentFocus,_1340=this._getNodeByDate(_133f);date=this._patchDate(date);this._set("currentFocus",date);if(!this._date2cell||this.dateModule.difference(_133f,date,"month")!=0){this._populateGrid();this._populateControls();this._markSelectedDates([this.value]);}var _1341=this._getNodeByDate(date);_1341.setAttribute("tabIndex",this.tabIndex);if(this.focused||_133e){_1341.focus();}if(_1340&&_1340!=_1341){if(has("webkit")){_1340.setAttribute("tabIndex","-1");}else{_1340.removeAttribute("tabIndex");}}},focus:function(){this._setCurrentFocusAttr(this.currentFocus,true);},_onDayClick:function(evt){evt.stopPropagation();evt.preventDefault();for(var node=evt.target;node&&!node.dijitDateValue;node=node.parentNode){}if(node&&!_1326.contains(node,"dijitCalendarDisabledDate")){this.set("value",node.dijitDateValue);}},_getNodeByDate:function(value){value=this._patchDate(value);return value&&this._date2cell?this._date2cell[value.valueOf()]:null;},_markSelectedDates:function(dates){function mark(_1342,cell){_1326.toggle(cell,"dijitCalendarSelectedDate",_1342);cell.setAttribute("aria-selected",_1342?"true":"false");};array.forEach(this._selectedCells||[],lang.partial(mark,false));this._selectedCells=array.filter(array.map(dates,this._getNodeByDate,this),function(n){return n;});array.forEach(this._selectedCells,lang.partial(mark,true));},onChange:function(){},isDisabledDate:function(){},getClassForDate:function(){}});_132b._MonthWidget=_1323("dijit.CalendarLite._MonthWidget",_1328,{_setMonthAttr:function(month){var _1343=this.dateLocaleModule.getNames("months","wide","standAlone",this.lang,month),_1344=(has("ie")==6?"":"<div class='dijitSpacer'>"+array.map(_1343,function(s){return "<div>"+s+"</div>";}).join("")+"</div>");this.domNode.innerHTML=_1344+"<div class='dijitCalendarMonthLabel dijitCalendarCurrentMonthLabel'>"+_1343[month.getMonth()]+"</div>";}});return _132b;});},"dijit/Toolbar":function(){define(["require","dojo/_base/declare","dojo/has","dojo/keys","dojo/ready","./_Widget","./_KeyNavContainer","./_TemplatedMixin"],function(_1345,_1346,has,keys,ready,_1347,_1348,_1349){if(has("dijit-legacy-requires")){ready(0,function(){var _134a=["dijit/ToolbarSeparator"];_1345(_134a);});}return _1346("dijit.Toolbar",[_1347,_1349,_1348],{templateString:"<div class=\"dijit\" role=\"toolbar\" tabIndex=\"${tabIndex}\" data-dojo-attach-point=\"containerNode\">"+"</div>",baseClass:"dijitToolbar",_onLeftArrow:function(){this.focusPrev();},_onRightArrow:function(){this.focusNext();}});});},"dojox/data/ServiceStore":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/_base/array"],function(_134b,lang,array){return _134b("dojox.data.ServiceStore",lang.getObject("dojox.data.ClientFilter",0)||null,{service:null,constructor:function(_134c){this.byId=this.fetchItemByIdentity;this._index={};if(_134c){lang.mixin(this,_134c);}this.idAttribute=(_134c&&_134c.idAttribute)||(this.schema&&this.schema._idAttr);},schema:null,idAttribute:"id",labelAttribute:"label",syncMode:false,estimateCountFactor:1,getSchema:function(){return this.schema;},loadLazyValues:true,getValue:function(item,_134d,_134e){var value=item[_134d];return value||(_134d in item?value:item._loadObject?(dojox.rpc._sync=true)&&arguments.callee.call(this,dojox.data.ServiceStore.prototype.loadItem({item:item})||{},_134d,_134e):_134e);},getValues:function(item,_134f){var val=this.getValue(item,_134f);return val instanceof Array?val:val===undefined?[]:[val];},getAttributes:function(item){var res=[];for(var i in item){if(item.hasOwnProperty(i)&&!(i.charAt(0)=="_"&&i.charAt(1)=="_")){res.push(i);}}return res;},hasAttribute:function(item,_1350){return _1350 in item;},containsValue:function(item,_1351,value){return array.indexOf(this.getValues(item,_1351),value)>-1;},isItem:function(item){return (typeof item=="object")&&item&&!(item instanceof Date);},isItemLoaded:function(item){return item&&!item._loadObject;},loadItem:function(args){var item;if(args.item._loadObject){args.item._loadObject(function(_1352){item=_1352;delete item._loadObject;var func=_1352 instanceof Error?args.onError:args.onItem;if(func){func.call(args.scope,_1352);}});}else{if(args.onItem){args.onItem.call(args.scope,args.item);}}return item;},_currentId:0,_processResults:function(_1353,_1354){if(_1353&&typeof _1353=="object"){var id=_1353.__id;if(!id){if(this.idAttribute){id=_1353[this.idAttribute];}else{id=this._currentId++;}if(id!==undefined){var _1355=this._index[id];if(_1355){for(var j in _1355){delete _1355[j];}_1353=lang.mixin(_1355,_1353);}_1353.__id=id;this._index[id]=_1353;}}for(var i in _1353){_1353[i]=this._processResults(_1353[i],_1354).items;}var count=_1353.length;}return {totalCount:_1354.request.count==count?(_1354.request.start||0)+count*this.estimateCountFactor:count,items:_1353};},close:function(_1356){return _1356&&_1356.abort&&_1356.abort();},fetch:function(args){args=args||{};if("syncMode" in args?args.syncMode:this.syncMode){dojox.rpc._sync=true;}var self=this;var scope=args.scope||self;var _1357=this.cachingFetch?this.cachingFetch(args):this._doQuery(args);_1357.request=args;_1357.addCallback(function(_1358){if(args.clientFetch){_1358=self.clientSideFetch({query:args.clientFetch,sort:args.sort,start:args.start,count:args.count},_1358);}var _1359=self._processResults(_1358,_1357);_1358=args.results=_1359.items;if(args.onBegin){args.onBegin.call(scope,_1359.totalCount,args);}if(args.onItem){for(var i=0;i<_1358.length;i++){args.onItem.call(scope,_1358[i],args);}}if(args.onComplete){args.onComplete.call(scope,args.onItem?null:_1358,args);}return _1358;});_1357.addErrback(args.onError&&function(err){return args.onError.call(scope,err,args);});args.abort=function(){_1357.cancel();};args.store=this;return args;},_doQuery:function(args){var query=typeof args.queryStr=="string"?args.queryStr:args.query;return this.service(query);},getFeatures:function(){return {"dojo.data.api.Read":true,"dojo.data.api.Identity":true,"dojo.data.api.Schema":this.schema};},getLabel:function(item){return this.getValue(item,this.labelAttribute);},getLabelAttributes:function(item){return [this.labelAttribute];},getIdentity:function(item){return item.__id;},getIdentityAttributes:function(item){return [this.idAttribute];},fetchItemByIdentity:function(args){var item=this._index[(args._prefix||"")+args.identity];if(item){if(item._loadObject){args.item=item;return this.loadItem(args);}else{if(args.onItem){args.onItem.call(args.scope,item);}}}else{return this.fetch({query:args.identity,onComplete:args.onItem,onError:args.onError,scope:args.scope}).results;}return item;}});});},"control/frame":function(){define(["dojo/_base/declare","ttl/BaseWidgetAMD","dojo/text!../control/templates/frame.html","dijit/layout/BorderContainer","dojo/_base/lang","dojox/collections/Dictionary","dijit/layout/ContentPane","dijit/registry","dijit/layout/StackContainer","dijit/layout/TabContainer","dojo/data/ItemFileReadStore","dijit/tree/ForestStoreModel","dijit/Tree","control/admin"],function(_135a,_135b,_135c,_135d,lang,_135e,_135f,_1360){return _135a("control.frame",[_135b,_135d],{templateString:_135c,gutters:false,constructor:function(){this._windows=new _135e();this._start_up_call_back=lang.hitch(this,this._start_up_call);},_select_node:function(){this._obj=arguments[0];if(this._windows.containsKey(this._obj.id)==false){if(this._obj.type==2){require(["dijit/layout/ContentPane",this._obj.content[0].split(".").join("/")],this._start_up_call_back);}else{if(this._obj.type==0){this._widget=new _135f({title:this._obj.name.toString(),href:this._obj.content[0]});this.frame_zone.addChild(this._widget,0);setTimeout(lang.hitch(this,this._select_child_call),10);this._windows.add(this._obj.id,this._widget.id);}}}else{var wid=this._windows.entry(this._obj.id).value;this.frame_zone.selectChild(_1360.byId(wid));}},_start_up_call:function(_1361,_1362){this._widget=new _1362();this.frame_zone.addChild(this._widget,0);this._windows.add(this._obj.id,this._widget.id);setTimeout(lang.hitch(this,this._select_child_call),10);},_select_child_call:function(){this.frame_zone.selectChild(this._widget.id);}});});},"dojox/grid/_View":function(){define(["dojo","dijit/registry","../main","dojo/_base/declare","dojo/_base/array","dojo/_base/lang","dojo/_base/connect","dojo/_base/sniff","dojo/query","dojo/_base/window","dojo/text!./resources/View.html","dojo/dnd/Source","dijit/_Widget","dijit/_TemplatedMixin","dojox/html/metrics","./util","dojo/_base/html","./_Builder","dojo/dnd/Avatar","dojo/dnd/Manager"],function(dojo,dijit,dojox,_1363,array,lang,_1364,has,query,win,_1365,_1366,_1367,_1368,_1369,util,html,_136a,_136b,_136c){var _136d=function(_136e,_136f){return _136e.style.cssText==undefined?_136e.getAttribute("style"):_136e.style.cssText;};var _1370=_1363("dojox.grid._View",[_1367,_1368],{defaultWidth:"18em",viewWidth:"",templateString:_1365,classTag:"dojoxGrid",marginBottom:0,rowPad:2,_togglingColumn:-1,_headerBuilderClass:_136a._HeaderBuilder,_contentBuilderClass:_136a._ContentBuilder,postMixInProperties:function(){this.rowNodes={};},postCreate:function(){this.connect(this.scrollboxNode,"onscroll","doscroll");util.funnelEvents(this.contentNode,this,"doContentEvent",["mouseover","mouseout","click","dblclick","contextmenu","mousedown"]);util.funnelEvents(this.headerNode,this,"doHeaderEvent",["dblclick","mouseover","mouseout","mousemove","mousedown","click","contextmenu"]);this.content=new this._contentBuilderClass(this);this.header=new this._headerBuilderClass(this);if(!this.grid.isLeftToRight()){this.headerNodeContainer.style.width="";}},destroy:function(){html.destroy(this.headerNode);delete this.headerNode;for(var i in this.rowNodes){this._cleanupRowWidgets(this.rowNodes[i]);html.destroy(this.rowNodes[i]);}this.rowNodes={};if(this.source){this.source.destroy();}this.inherited(arguments);},focus:function(){if(has("ie")||has("webkit")||has("opera")){this.hiddenFocusNode.focus();}else{this.scrollboxNode.focus();}},setStructure:function(_1371){var vs=(this.structure=_1371);if(vs.width&&!isNaN(vs.width)){this.viewWidth=vs.width+"em";}else{this.viewWidth=vs.width||(vs.noscroll?"auto":this.viewWidth);}this._onBeforeRow=vs.onBeforeRow||function(){};this._onAfterRow=vs.onAfterRow||function(){};this.noscroll=vs.noscroll;if(this.noscroll){this.scrollboxNode.style.overflow="hidden";}this.simpleStructure=Boolean(vs.cells.length==1);this.testFlexCells();this.updateStructure();},_cleanupRowWidgets:function(_1372){if(_1372){array.forEach(query("[widgetId]",_1372).map(dijit.byNode),function(w){if(w._destroyOnRemove){w.destroy();delete w;}else{if(w.domNode&&w.domNode.parentNode){w.domNode.parentNode.removeChild(w.domNode);}}});}},onBeforeRow:function(_1373,cells){this._onBeforeRow(_1373,cells);if(_1373>=0){this._cleanupRowWidgets(this.getRowNode(_1373));}},onAfterRow:function(_1374,cells,_1375){this._onAfterRow(_1374,cells,_1375);var g=this.grid;array.forEach(query(".dojoxGridStubNode",_1375),function(n){if(n&&n.parentNode){var lw=n.getAttribute("linkWidget");var _1376=window.parseInt(html.attr(n,"cellIdx"),10);var _1377=g.getCell(_1376);var w=dijit.byId(lw);if(w){n.parentNode.replaceChild(w.domNode,n);if(!w._started){w.startup();}dojo.destroy(n);}else{n.innerHTML="";}}},this);},testFlexCells:function(){this.flexCells=false;for(var j=0,row;(row=this.structure.cells[j]);j++){for(var i=0,cell;(cell=row[i]);i++){cell.view=this;this.flexCells=this.flexCells||cell.isFlex();}}return this.flexCells;},updateStructure:function(){this.header.update();this.content.update();},getScrollbarWidth:function(){var _1378=this.hasVScrollbar();var _1379=html.style(this.scrollboxNode,"overflow");if(this.noscroll||!_1379||_1379=="hidden"){_1378=false;}else{if(_1379=="scroll"){_1378=true;}}return (_1378?_1369.getScrollbar().w:0);},getColumnsWidth:function(){var h=this.headerContentNode;return h&&h.firstChild?(h.firstChild.offsetWidth||html.style(h.firstChild,"width")):0;},setColumnsWidth:function(width){this.headerContentNode.firstChild.style.width=width+"px";if(this.viewWidth){this.viewWidth=width+"px";}},getWidth:function(){return this.viewWidth||(this.getColumnsWidth()+this.getScrollbarWidth())+"px";},getContentWidth:function(){return Math.max(0,html._getContentBox(this.domNode).w-this.getScrollbarWidth())+"px";},render:function(){this.scrollboxNode.style.height="";this.renderHeader();if(this._togglingColumn>=0){this.setColumnsWidth(this.getColumnsWidth()-this._togglingColumn);this._togglingColumn=-1;}var cells=this.grid.layout.cells;var _137a=lang.hitch(this,function(node,_137b){!this.grid.isLeftToRight()&&(_137b=!_137b);var inc=_137b?-1:1;var idx=this.header.getCellNodeIndex(node)+inc;var cell=cells[idx];while(cell&&cell.getHeaderNode()&&cell.getHeaderNode().style.display=="none"){idx+=inc;cell=cells[idx];}if(cell){return cell.getHeaderNode();}return null;});if(this.grid.columnReordering&&this.simpleStructure){if(this.source){this.source.destroy();}var _137c="dojoxGrid_bottomMarker";var _137d="dojoxGrid_topMarker";if(this.bottomMarker){html.destroy(this.bottomMarker);}this.bottomMarker=html.byId(_137c);if(this.topMarker){html.destroy(this.topMarker);}this.topMarker=html.byId(_137d);if(!this.bottomMarker){this.bottomMarker=html.create("div",{"id":_137c,"class":"dojoxGridColPlaceBottom"},win.body());this._hide(this.bottomMarker);this.topMarker=html.create("div",{"id":_137d,"class":"dojoxGridColPlaceTop"},win.body());this._hide(this.topMarker);}this.arrowDim=html.contentBox(this.bottomMarker);var _137e=html.contentBox(this.headerContentNode.firstChild.rows[0]).h;this.source=new _1366(this.headerContentNode.firstChild.rows[0],{horizontal:true,accept:["gridColumn_"+this.grid.id],viewIndex:this.index,generateText:false,onMouseDown:lang.hitch(this,function(e){this.header.decorateEvent(e);if((this.header.overRightResizeArea(e)||this.header.overLeftResizeArea(e))&&this.header.canResize(e)&&!this.header.moveable){this.header.beginColumnResize(e);}else{if(this.grid.headerMenu){this.grid.headerMenu.onCancel(true);}if(e.button===(has("ie")<9?1:0)){_1366.prototype.onMouseDown.call(this.source,e);}}}),onMouseOver:lang.hitch(this,function(e){var src=this.source;if(src._getChildByEvent(e)){_1366.prototype.onMouseOver.apply(src,arguments);}}),_markTargetAnchor:lang.hitch(this,function(_137f){var src=this.source;if(src.current==src.targetAnchor&&src.before==_137f){return;}if(src.targetAnchor&&_137a(src.targetAnchor,src.before)){src._removeItemClass(_137a(src.targetAnchor,src.before),src.before?"After":"Before");}_1366.prototype._markTargetAnchor.call(src,_137f);var _1380=_137f?src.targetAnchor:_137a(src.targetAnchor,src.before);var _1381=0;if(!_1380){_1380=src.targetAnchor;_1381=html.contentBox(_1380).w+this.arrowDim.w/2+2;}var pos=html.position(_1380,true);var left=Math.floor(pos.x-this.arrowDim.w/2+_1381);html.style(this.bottomMarker,"visibility","visible");html.style(this.topMarker,"visibility","visible");html.style(this.bottomMarker,{"left":left+"px","top":(_137e+pos.y)+"px"});html.style(this.topMarker,{"left":left+"px","top":(pos.y-this.arrowDim.h)+"px"});if(src.targetAnchor&&_137a(src.targetAnchor,src.before)){src._addItemClass(_137a(src.targetAnchor,src.before),src.before?"After":"Before");}}),_unmarkTargetAnchor:lang.hitch(this,function(){var src=this.source;if(!src.targetAnchor){return;}if(src.targetAnchor&&_137a(src.targetAnchor,src.before)){src._removeItemClass(_137a(src.targetAnchor,src.before),src.before?"After":"Before");}this._hide(this.bottomMarker);this._hide(this.topMarker);_1366.prototype._unmarkTargetAnchor.call(src);}),destroy:lang.hitch(this,function(){_1364.disconnect(this._source_conn);_1364.unsubscribe(this._source_sub);_1366.prototype.destroy.call(this.source);if(this.bottomMarker){html.destroy(this.bottomMarker);delete this.bottomMarker;}if(this.topMarker){html.destroy(this.topMarker);delete this.topMarker;}}),onDndCancel:lang.hitch(this,function(){_1366.prototype.onDndCancel.call(this.source);this._hide(this.bottomMarker);this._hide(this.topMarker);})});this._source_conn=_1364.connect(this.source,"onDndDrop",this,"_onDndDrop");this._source_sub=_1364.subscribe("/dnd/drop/before",this,"_onDndDropBefore");this.source.startup();}},_hide:function(node){html.style(node,{top:"-10000px","visibility":"hidden"});},_onDndDropBefore:function(_1382,nodes,copy){if(_136c.manager().target!==this.source){return;}this.source._targetNode=this.source.targetAnchor;this.source._beforeTarget=this.source.before;var views=this.grid.views.views;var _1383=views[_1382.viewIndex];var _1384=views[this.index];if(_1384!=_1383){_1383.convertColPctToFixed();_1384.convertColPctToFixed();}},_onDndDrop:function(_1385,nodes,copy){if(_136c.manager().target!==this.source){if(_136c.manager().source===this.source){this._removingColumn=true;}return;}this._hide(this.bottomMarker);this._hide(this.topMarker);var _1386=function(n){return n?html.attr(n,"idx"):null;};var w=html.marginBox(nodes[0]).w;if(_1385.viewIndex!==this.index){var views=this.grid.views.views;var _1387=views[_1385.viewIndex];var _1388=views[this.index];if(_1387.viewWidth&&_1387.viewWidth!="auto"){_1387.setColumnsWidth(_1387.getColumnsWidth()-w);}if(_1388.viewWidth&&_1388.viewWidth!="auto"){_1388.setColumnsWidth(_1388.getColumnsWidth());}}var stn=this.source._targetNode;var stb=this.source._beforeTarget;!this.grid.isLeftToRight()&&(stb=!stb);var _1389=this.grid.layout;var idx=this.index;delete this.source._targetNode;delete this.source._beforeTarget;_1389.moveColumn(_1385.viewIndex,idx,_1386(nodes[0]),_1386(stn),stb);},renderHeader:function(){this.headerContentNode.innerHTML=this.header.generateHtml(this._getHeaderContent);if(this.flexCells){this.contentWidth=this.getContentWidth();this.headerContentNode.firstChild.style.width=this.contentWidth;}util.fire(this,"onAfterRow",[-1,this.structure.cells,this.headerContentNode]);},_getHeaderContent:function(_138a){var n=_138a.name||_138a.grid.getCellName(_138a);if(/^\s+$/.test(n)){n="&nbsp;";}var ret=["<div class=\"dojoxGridSortNode"];if(_138a.index!=_138a.grid.getSortIndex()){ret.push("\">");}else{ret=ret.concat([" ",_138a.grid.sortInfo>0?"dojoxGridSortUp":"dojoxGridSortDown","\"><div class=\"dojoxGridArrowButtonChar\">",_138a.grid.sortInfo>0?"&#9650;":"&#9660;","</div><div class=\"dojoxGridArrowButtonNode\" role=\"presentation\"></div>","<div class=\"dojoxGridColCaption\">"]);}ret=ret.concat([n,"</div></div>"]);return ret.join("");},resize:function(){this.adaptHeight();this.adaptWidth();},hasHScrollbar:function(reset){var _138b=this._hasHScroll||false;if(this._hasHScroll==undefined||reset){if(this.noscroll){this._hasHScroll=false;}else{var style=html.style(this.scrollboxNode,"overflow");if(style=="hidden"){this._hasHScroll=false;}else{if(style=="scroll"){this._hasHScroll=true;}else{this._hasHScroll=(this.scrollboxNode.offsetWidth-this.getScrollbarWidth()<this.contentNode.offsetWidth);}}}}if(_138b!==this._hasHScroll){this.grid.update();}return this._hasHScroll;},hasVScrollbar:function(reset){var _138c=this._hasVScroll||false;if(this._hasVScroll==undefined||reset){if(this.noscroll){this._hasVScroll=false;}else{var style=html.style(this.scrollboxNode,"overflow");if(style=="hidden"){this._hasVScroll=false;}else{if(style=="scroll"){this._hasVScroll=true;}else{this._hasVScroll=(this.scrollboxNode.scrollHeight>this.scrollboxNode.clientHeight);}}}}if(_138c!==this._hasVScroll){this.grid.update();}return this._hasVScroll;},convertColPctToFixed:function(){var _138d=false;this.grid.initialWidth="";var _138e=query("th",this.headerContentNode);var _138f=array.map(_138e,function(c,vIdx){var w=c.style.width;html.attr(c,"vIdx",vIdx);if(w&&w.slice(-1)=="%"){_138d=true;}else{if(w&&w.slice(-2)=="px"){return window.parseInt(w,10);}}return html.contentBox(c).w;});if(_138d){array.forEach(this.grid.layout.cells,function(cell,idx){if(cell.view==this){var _1390=cell.view.getHeaderCellNode(cell.index);if(_1390&&html.hasAttr(_1390,"vIdx")){var vIdx=window.parseInt(html.attr(_1390,"vIdx"));this.setColWidth(idx,_138f[vIdx]);html.removeAttr(_1390,"vIdx");}}},this);return true;}return false;},adaptHeight:function(_1391){if(!this.grid._autoHeight){var h=(this.domNode.style.height&&parseInt(this.domNode.style.height.replace(/px/,""),10))||this.domNode.clientHeight;var self=this;var _1392=function(){var v;for(var i=0;i<self.grid.views.views.length;++i){v=self.grid.views.views[i];if(v!==self&&v.hasHScrollbar()){return true;}}return false;};if(_1391||(this.noscroll&&_1392())){h-=_1369.getScrollbar().h;}util.setStyleHeightPx(this.scrollboxNode,h);}this.hasVScrollbar(true);},adaptWidth:function(){if(this.flexCells){this.contentWidth=this.getContentWidth();this.headerContentNode.firstChild.style.width=this.contentWidth;}var w=this.scrollboxNode.offsetWidth-this.getScrollbarWidth();if(!this._removingColumn){w=Math.max(w,this.getColumnsWidth())+"px";}else{w=Math.min(w,this.getColumnsWidth())+"px";this._removingColumn=false;}var cn=this.contentNode;cn.style.width=w;this.hasHScrollbar(true);},setSize:function(w,h){var ds=this.domNode.style;var hs=this.headerNode.style;if(w){ds.width=w;hs.width=w;}ds.height=(h>=0?h+"px":"");},renderRow:function(_1393){var _1394=this.createRowNode(_1393);this.buildRow(_1393,_1394);return _1394;},createRowNode:function(_1395){var node=document.createElement("div");node.className=this.classTag+"Row";if(this instanceof dojox.grid._RowSelector){html.attr(node,"role","presentation");}else{html.attr(node,"role","row");if(this.grid.selectionMode!="none"){node.setAttribute("aria-selected","false");}}node[util.gridViewTag]=this.id;node[util.rowIndexTag]=_1395;this.rowNodes[_1395]=node;return node;},buildRow:function(_1396,_1397){this.buildRowContent(_1396,_1397);this.styleRow(_1396,_1397);},buildRowContent:function(_1398,_1399){_1399.innerHTML=this.content.generateHtml(_1398,_1398);if(this.flexCells&&this.contentWidth){_1399.firstChild.style.width=this.contentWidth;}util.fire(this,"onAfterRow",[_1398,this.structure.cells,_1399]);},rowRemoved:function(_139a){if(_139a>=0){this._cleanupRowWidgets(this.getRowNode(_139a));}this.grid.edit.save(this,_139a);delete this.rowNodes[_139a];},getRowNode:function(_139b){return this.rowNodes[_139b];},getCellNode:function(_139c,_139d){var row=this.getRowNode(_139c);if(row){return this.content.getCellNode(row,_139d);}},getHeaderCellNode:function(_139e){if(this.headerContentNode){return this.header.getCellNode(this.headerContentNode,_139e);}},styleRow:function(_139f,_13a0){_13a0._style=_136d(_13a0);this.styleRowNode(_139f,_13a0);},styleRowNode:function(_13a1,_13a2){if(_13a2){this.doStyleRowNode(_13a1,_13a2);}},doStyleRowNode:function(_13a3,_13a4){this.grid.styleRowNode(_13a3,_13a4);},updateRow:function(_13a5){var _13a6=this.getRowNode(_13a5);if(_13a6){_13a6.style.height="";this.buildRow(_13a5,_13a6);}return _13a6;},updateRowStyles:function(_13a7){this.styleRowNode(_13a7,this.getRowNode(_13a7));},lastTop:0,firstScroll:0,_nativeScroll:false,doscroll:function(_13a8){if(has("ff")>=13||has("chrome")){this._nativeScroll=true;}var isLtr=this.grid.isLeftToRight();if(this.firstScroll<2){if((!isLtr&&this.firstScroll==1)||(isLtr&&this.firstScroll===0)){var s=html.marginBox(this.headerNodeContainer);if(has("ie")){this.headerNodeContainer.style.width=s.w+this.getScrollbarWidth()+"px";}else{if(has("mozilla")){this.headerNodeContainer.style.width=s.w-this.getScrollbarWidth()+"px";this.scrollboxNode.scrollLeft=isLtr?this.scrollboxNode.clientWidth-this.scrollboxNode.scrollWidth:this.scrollboxNode.scrollWidth-this.scrollboxNode.clientWidth;}}}this.firstScroll++;}this.headerNode.scrollLeft=this.scrollboxNode.scrollLeft;var top=this.scrollboxNode.scrollTop;if(top!==this.lastTop){this.grid.scrollTo(top);}this._nativeScroll=false;},setScrollTop:function(inTop){this.lastTop=inTop;if(!this._nativeScroll){this.scrollboxNode.scrollTop=inTop;}return this.scrollboxNode.scrollTop;},doContentEvent:function(e){if(this.content.decorateEvent(e)){this.grid.onContentEvent(e);}},doHeaderEvent:function(e){if(this.header.decorateEvent(e)){this.grid.onHeaderEvent(e);}},dispatchContentEvent:function(e){return this.content.dispatchEvent(e);},dispatchHeaderEvent:function(e){return this.header.dispatchEvent(e);},setColWidth:function(_13a9,_13aa){this.grid.setCellWidth(_13a9,_13aa+"px");},update:function(){if(!this.domNode){return;}this.content.update();this.grid.update();var left=this.scrollboxNode.scrollLeft;this.scrollboxNode.scrollLeft=left;this.headerNode.scrollLeft=left;}});var _13ab=_1363("dojox.grid._GridAvatar",_136b,{construct:function(){var dd=win.doc;var a=dd.createElement("table");a.cellPadding=a.cellSpacing="0";a.className="dojoxGridDndAvatar";a.style.position="absolute";a.style.zIndex=1999;a.style.margin="0px";var b=dd.createElement("tbody");var tr=dd.createElement("tr");var td=dd.createElement("td");var img=dd.createElement("td");tr.className="dojoxGridDndAvatarItem";img.className="dojoxGridDndAvatarItemImage";img.style.width="16px";var _13ac=this.manager.source,node;if(_13ac.creator){node=_13ac._normalizedCreator(_13ac.getItem(this.manager.nodes[0].id).data,"avatar").node;}else{node=this.manager.nodes[0].cloneNode(true);var table,tbody;if(node.tagName.toLowerCase()=="tr"){table=dd.createElement("table");tbody=dd.createElement("tbody");tbody.appendChild(node);table.appendChild(tbody);node=table;}else{if(node.tagName.toLowerCase()=="th"){table=dd.createElement("table");tbody=dd.createElement("tbody");var r=dd.createElement("tr");table.cellPadding=table.cellSpacing="0";r.appendChild(node);tbody.appendChild(r);table.appendChild(tbody);node=table;}}}node.id="";td.appendChild(node);tr.appendChild(img);tr.appendChild(td);html.style(tr,"opacity",0.9);b.appendChild(tr);a.appendChild(b);this.node=a;var m=_136c.manager();this.oldOffsetY=m.OFFSET_Y;m.OFFSET_Y=1;},destroy:function(){_136c.manager().OFFSET_Y=this.oldOffsetY;this.inherited(arguments);}});var _13ad=_136c.manager().makeAvatar;_136c.manager().makeAvatar=function(){var src=this.source;if(src.viewIndex!==undefined&&!html.hasClass(win.body(),"dijit_a11y")){return new _13ab(this);}return _13ad.call(_136c.manager());};return _1370;});},"dijit/TooltipDialog":function(){define(["dojo/_base/declare","dojo/dom-class","dojo/has","dojo/keys","dojo/_base/lang","dojo/on","./focus","./layout/ContentPane","./_DialogMixin","./form/_FormMixin","./_TemplatedMixin","dojo/text!./templates/TooltipDialog.html","./main"],function(_13ae,_13af,has,keys,lang,on,focus,_13b0,_13b1,_13b2,_13b3,_13b4,dijit){var _13b5=_13ae("dijit.TooltipDialog",[_13b0,_13b3,_13b2,_13b1],{title:"",doLayout:false,autofocus:true,baseClass:"dijitTooltipDialog",_firstFocusItem:null,_lastFocusItem:null,templateString:_13b4,_setTitleAttr:"containerNode",postCreate:function(){this.inherited(arguments);this.own(on(this.domNode,"keydown",lang.hitch(this,"_onKey")));},orient:function(node,_13b6,_13b7){var newC={"MR-ML":"dijitTooltipRight","ML-MR":"dijitTooltipLeft","TM-BM":"dijitTooltipAbove","BM-TM":"dijitTooltipBelow","BL-TL":"dijitTooltipBelow dijitTooltipABLeft","TL-BL":"dijitTooltipAbove dijitTooltipABLeft","BR-TR":"dijitTooltipBelow dijitTooltipABRight","TR-BR":"dijitTooltipAbove dijitTooltipABRight","BR-BL":"dijitTooltipRight","BL-BR":"dijitTooltipLeft","BR-TL":"dijitTooltipBelow dijitTooltipABLeft","BL-TR":"dijitTooltipBelow dijitTooltipABRight","TL-BR":"dijitTooltipAbove dijitTooltipABRight","TR-BL":"dijitTooltipAbove dijitTooltipABLeft"}[_13b6+"-"+_13b7];_13af.replace(this.domNode,newC,this._currentOrientClass||"");this._currentOrientClass=newC;},focus:function(){this._getFocusItems();focus.focus(this._firstFocusItem);},onOpen:function(pos){this.orient(this.domNode,pos.aroundCorner,pos.corner);var _13b8=pos.aroundNodePos;if(pos.corner.charAt(0)=="M"&&pos.aroundCorner.charAt(0)=="M"){this.connectorNode.style.top=_13b8.y+((_13b8.h-this.connectorNode.offsetHeight)>>1)-pos.y+"px";this.connectorNode.style.left="";}else{if(pos.corner.charAt(1)=="M"&&pos.aroundCorner.charAt(1)=="M"){this.connectorNode.style.left=_13b8.x+((_13b8.w-this.connectorNode.offsetWidth)>>1)-pos.x+"px";}}this._onShow();},onClose:function(){this.onHide();},_onKey:function(evt){if(evt.keyCode==keys.ESCAPE){this.defer("onCancel");evt.stopPropagation();evt.preventDefault();}else{if(evt.keyCode==keys.TAB){var node=evt.target;this._getFocusItems();if(this._firstFocusItem==this._lastFocusItem){evt.stopPropagation();evt.preventDefault();}else{if(node==this._firstFocusItem&&evt.shiftKey){focus.focus(this._lastFocusItem);evt.stopPropagation();evt.preventDefault();}else{if(node==this._lastFocusItem&&!evt.shiftKey){focus.focus(this._firstFocusItem);evt.stopPropagation();evt.preventDefault();}else{evt.stopPropagation();}}}}}}});if(has("dojo-bidi")){_13b5.extend({_setTitleAttr:function(title){this.containerNode.title=(this.textDir&&this.enforceTextDirWithUcc)?this.enforceTextDirWithUcc(null,title):title;this._set("title",title);},_setTextDirAttr:function(_13b9){if(!this._created||this.textDir!=_13b9){this._set("textDir",_13b9);if(this.textDir&&this.title){this.containerNode.title=this.enforceTextDirWithUcc(null,this.title);}}}});}return _13b5;});},"control/support/query":function(){define(["dojo/_base/declare","ttl/BaseWidgetAMD","dojo/text!../support/templates/query.html","dijit/layout/BorderContainer","dojo/_base/lang","dojo/dom-attr","dojo/dom-class","dojo/dom-style","dojo/request","ttl/utilities2","dojox/data/JsonRestStore"],function(_13ba,_13bb,_13bc,_13bd,lang,_13be,_13bf,_13c0,_13c1,_13c2,_13c3){return _13ba("control.support.query",[_13bb,_13bd],{templateString:_13bc,constructor:function(){this._QueryCallBack=lang.hitch(this,this._QueryCall);this._QueryLoadCallBack=lang.hitch(this,this._QueryLoadCall);this._QuerySaveCallBack=lang.hitch(this,this._QuerySaveCall);this.queries=new _13c3({target:"/query/queries2",idProperty:"queryhistoryid",labelAttribute:"queryhistoryname"});},postCreate:function(){this.select.set("store",this.queries);this.inherited(arguments);},_QueryCall:function(_13c4){if(_13c4.success=="OK"){this.result_view.setContent(_13c4.data);}else{alert("problem");}this.execute_button.cancel();},_Execute:function(){var query=dojo.attr(this.query_text,"value");_13c1.post("/query/execute",_13c2.make_params({data:{query_text:query}})).then(this._QueryCallBack);},_QueryLoadCall:function(_13c5){if(_13c5.success=="OK"){dojo.attr(this.query_text,"value",_13c5.data.query_text);}else{alert("problem");}},_Load:function(){_13c1.post("/query/load",_13c2.make_params({data:{queryhistoryid:this.select.get("value")}})).then(this._QueryLoadCallBack);},_Save:function(){var _13c6=dojo.attr(this.query_text,"value");if(_13c6.length>0){this.savedlg.show();}},_CancelDialog:function(){this.savedlg.hide();},_QuerySaveCall:function(_13c7){if(_13c7.success=="OK"){alert("Query Saved");this._CancelDialog();}else{alert("problem");}},_Query_Save:function(){if(_13c2.form_validator(this.formNode)==false){alert("Not all required field filled in");throw "B";}var _13c8=dojo.attr(this.query_text,"value");_13c1.post("/query/save2",_13c2.make_params({data:{query_text:_13c8,subject:this.subject_name.get("value")}})).then(this._QuerySaveCallBack);},_To_Excel:function(){this.query_text_to_excel.set("value",dojo.attr(this.query_text,"value"));this.tmp_to_excel.set("value",new Date());return true;}});});},"url:control/customer/templates/reallocation.html":"<div>\r\n\t<div data-dojo-type=\"dijit.Dialog\" data-dojo-attach-point=\"dialog\" data-dojo-props='title:\"Allocate\"'>\r\n\t\t<form data-dojo-attach-point=\"form\"  onsubmit=\"return false\" data-dojo-type=\"dijit/form/Form\">\r\n\t\t\t<input type=\"hidden\" data-dojo-type=\"dijit/form/TextBox\" data-dojo-attach-point=\"keyid\" name=\"keyid\" >\r\n\t\t\t<table width=\"600px\" cellpadding=\"0\" cellpadding=\"0\" >\r\n\t\t\t\t<tr><td colspan=\"2\"><div class=\"prmaxrowdisplaylarge\" style=\"text-align:center;display:inline\"></div><div class=\"prmaxrowdisplaylarge\" style=\"display:inline\" data-dojo-attach-point=\"customername\"></div></td></tr>\r\n\t\t\t\t<tr><td class=\"prmaxrowlabel\" align=\"right\" >Value</td><td>\r\n\t\t\t\t\t<table width=\"100%\" cellpadding=\"0\" cellpadding=\"0\" ><tr>\r\n\t\t\t\t\t\t<td><input data-dojo-props='\"class\":\"prmaxinput\",type:\"text\",readOnly:\"readonly\",style:\"width:8em\"' data-dojo-type=\"dijit/form/CurrencyTextBox\" data-dojo-attach-point=\"payment\" ></input></td>\r\n\t\t\t\t\t\t<td class=\"prmaxrowlabel\">Amount to Allocate</td>\r\n\t\t\t\t\t\t<td class=\"prmaxrowlabel\"><input data-dojo-props='type:\"text\",style:\"width:8em\",readOnly:\"readonly\"' data-dojo-type=\"dijit/form/TextBox\" data-dojo-attach-point=\"toallocate\"  ></input></td>\r\n\t\t\t\t\t</tr></table>\r\n\t\t\t\t</td></tr>\r\n\t\t\t\t<tr><td colspan=\"2\">\r\n\t\t\t\t\t<div data-dojo-attach-point=\"alloc_grid_view\" data-dojo-type=\"dijit/layout/ContentPane\" data-dojo-props='style:\"width:590px;height:300px\"'></div>\r\n\t\t\t\t</td></tr>\r\n\t\t\t\t<tr><td class=\"prmaxrowlabel\" colspan=\"2\" align=\"right\"><button data-dojo-type=\"dojox/form/BusyButton\" data-dojo-props='type:\"button\",labelBusy:\"Re-Allocation\"' data-dojo-attach-point=\"allocate\" data-dojo-attach-event=\"onClick:_reallocate\">Allocate</button></td></tr>\r\n\t\t\t</table>\r\n\t\t</form>\r\n\t</div>\r\n\r\n<div data-dojo-attach-point=\"alloc_manual\" data-dojo-type=\"control/customer/manual_allocate_amount\"></div>\r\n\r\n</div>\r\n","url:dijit/templates/Tree.html":"<div role=\"tree\">\r\n\t<div class=\"dijitInline dijitTreeIndent\" style=\"position: absolute; top: -9999px\" data-dojo-attach-point=\"indentDetector\"></div>\r\n\t<div class=\"dijitTreeExpando dijitTreeExpandoLoading\" data-dojo-attach-point=\"rootLoadingIndicator\"></div>\r\n\t<div data-dojo-attach-point=\"containerNode\" class=\"dijitTreeContainer\" role=\"presentation\">\r\n\t</div>\r\n</div>\r\n","url:control/customer/templates/send_dd_conf.html":"<div>\r\n\t<form data-dojo-attach-point=\"form\" data-dojo-props='onsubmit:\"return false\"' data-dojo-type=\"dijit/form/Form\">\r\n\t\t<table width=\"600px\" cellpadding=\"0\" cellpadding=\"0\" >\r\n\t\t\t<tr><td colspan=\"2\"><div data-dojo-props='\"class\":\"prmaxrowdisplaylarge\",style:\"text-align:center;display:inline\"'>Send DD Conformation For</div><div data-dojo-props='\"class\":\"prmaxrowdisplaylarge\",style:\"display:inline\"' data-dojo-attach-point=\"customername\"></div></td>\r\n\t\t\t<tr><td colspan=\"2\"><td><br/></tr>\r\n\t\t\t<tr><td class=\"prmaxrowlabel\" align=\"right\" >Email Address</td><td><input class=\"prmaxinput\" data-dojo-attach-point=\"email\" data-dojo-type=\"dijit/form/ValidationTextBox\" data-dojo-props='name:\"email\",type:\"text\",style:\"width:100%\",trim:\"true\",required:\"true\",regExpGen:dojox.validate.regexp.emailAddress,invalidMessage:\"invalid email address\",size:\"40\",maxlength:\"70\"'/></td></tr>\r\n\t\t\t<tr><td class=\"prmaxrowlabel\" colspan=\"2\" align=\"right\"><button data-dojo-type=\"dojox/form/BusyButton\" data-dojo-attach-point=\"btn\" data-dojo-props='busylabel:\"Sending ...\",type:\"button\"' data-dojo-attach-event=\"onClick:_send_dd_conf\">Send DD Confirmation</button></td>\r\n\t\t</table>\r\n\t</form>\r\n</div>\r\n","url:control/customer/templates/options.html":"<div>\r\n    <div  data-dojo-type=\"dijit/layout/BorderContainer\" data-dojo-props='region:\"center\", gutters:false' data-dojo-attach-point=\"optionsview\" >\r\n        <div data-dojo-type=\"dijit/layout/TabContainer\" data-dojo-props='region:\"center\", style:\"width:99%;height:100%\"' data-dojo-attach-point=\"options_tab\">\r\n            <div data-dojo-type=\"control/customer/options/details\" data-dojo-props='style:\"width:99%;height:100%\", title:\"Details\"' data-dojo-attach-point=\"options_tab_details\"></div>\r\n            <div data-dojo-type=\"control/customer/options/PrmaxDataSets\" data-dojo-props='style:\"width:99%;height:100%\", title:\"Data Sets\"' data-dojo-attach-point=\"datasets\"></div>\r\n            <div data-dojo-type=\"control/customer/options/extendedsettings\" data-dojo-props='style:\"width:99%;height:100%\", title:\"Extended Settings\"' data-dojo-attach-point=\"extendedsettings\"></div>\r\n            <div data-dojo-type=\"control/customer/options/emailserver\" data-dojo-props='style:\"width:99%;height:100%\", title:\"Email Server\"' data-dojo-attach-point=\"emailserver\"></div>\r\n        </div>\r\n    </div>\r\n</div>\r\n\r\n","url:dijit/form/templates/Button.html":"<span class=\"dijit dijitReset dijitInline\" role=\"presentation\"\r\n\t><span class=\"dijitReset dijitInline dijitButtonNode\"\r\n\t\tdata-dojo-attach-event=\"ondijitclick:__onClick\" role=\"presentation\"\r\n\t\t><span class=\"dijitReset dijitStretch dijitButtonContents\"\r\n\t\t\tdata-dojo-attach-point=\"titleNode,focusNode\"\r\n\t\t\trole=\"button\" aria-labelledby=\"${id}_label\"\r\n\t\t\t><span class=\"dijitReset dijitInline dijitIcon\" data-dojo-attach-point=\"iconNode\"></span\r\n\t\t\t><span class=\"dijitReset dijitToggleButtonIconChar\">&#x25CF;</span\r\n\t\t\t><span class=\"dijitReset dijitInline dijitButtonText\"\r\n\t\t\t\tid=\"${id}_label\"\r\n\t\t\t\tdata-dojo-attach-point=\"containerNode\"\r\n\t\t\t></span\r\n\t\t></span\r\n\t></span\r\n\t><input ${!nameAttrSetting} type=\"${type}\" value=\"${value}\" class=\"dijitOffScreen\"\r\n\t\tdata-dojo-attach-event=\"onclick:_onClick\"\r\n\t\ttabIndex=\"-1\" aria-hidden=\"true\" data-dojo-attach-point=\"valueNode\"\r\n/></span>\r\n","url:control/customer/templates/order_confirmation.html":"<div>\r\n\t<form data-dojo-attach-point=\"form\"  onsubmit=\"return false\" data-dojo-type=\"dijit/form/Form\">\r\n\t\t<input type=\"hidden\" data-dojo-attach-point=\"taskid\" data-dojo-props='name:\"taskid\",value:\"-1\"' data-dojo-type=\"dijit/form/TextBox\" >\r\n\t\t<table width=\"750px\" cellpadding=\"0\" cellpadding=\"0\" style=\"border-collapse:collapse\" >\r\n\t\t\t<tr><td colspan=\"2\"><label class=\"prmaxrowdisplaylarge\" style=\"text-align:center;display:inline\"><div style=\"display:inline\"class=\"prmaxrowdisplaylarge\" data-dojo-attach-point=\"customername\">Name</div></label></td></tr>\r\n\t\t\t<tr><td class=\"prmaxrowtag\" width=\"150px\" align=\"right\" >Concurrent Licence</td><td ><input data-dojo-props='\"class\":\"prmaxrequired\",type:\"text\",name:\"logins\",value:\"1\",style:\"width:4em\",required:\"true\",constraints:{min:1,max:50}' data-dojo-attach-point=\"logins\" data-dojo-type=\"dijit/form/NumberTextBox\" data-dojo-attach-event=\"onChange:_PriceChange\"></td></tr>\r\n\t\t\t<tr data-dojo-attach-point=\"view_monitoring\" class=\"prmaxhidden\"><td class=\"prmaxrowtag\" align=\"right\" >Monitoring Count</td><td ><input class=\"prmaxrequired\" data-dojo-props='type:\"text\",name:\"maxmonitoringusers\",value:\"1\",style:\"width:4em\",constraints:{min:0,max:50}'  data-dojo-attach-point=\"maxmonitoringusers\" data-dojo-type=\"dijit/form/NumberTextBox\" data-dojo-attach-event=\"onChange:_PriceChange\"></td></tr>\r\n\t\t\t<tr><td class=\"prmaxrowtag\" align=\"right\" >Payment Freq</td>\r\n\t\t\t\t<td><select class=\"prmaxinput\" name=\"orderpaymentfreqid\" data-dojo-attach-point=\"orderpaymentfreqid\" style=\"width:15em\" data-dojo-type=\"dijit/form/FilteringSelect\" data-dojo-props='autoComplete:\"true\"' data-dojo-attach-event=\"onChange:_PriceChange\">\r\n\t\t\t\t\t\t<options><option value=\"1\">Fixed Term</option><option value=\"2\">Monthly</option></options>\r\n\t\t\t\t\t</select></td>\r\n\t\t\t</tr>\r\n\t\t\t<tr><td class=\"prmaxrowtag\" align=\"right\" >Payment Method</td><td><select class=\"prmaxinput\" data-dojo-props='name:\"orderpaymentmethodid\",style:\"width:25em\",autoComplete:\"true\"' data-dojo-attach-point=\"orderpaymentmethodid\" data-dojo-type=\"dijit/form/FilteringSelect\" data-dojo-attach-event=\"onChange:_ChangePayment\"></select></td></tr>\r\n\t\t\t<tr><td class=\"prmaxrowtag\" align=\"right\" >Purchase Order</td><td><input class=\"prmaxinput\" data-dojo-attach-point=\"purchase_order\" data-dojo-props='name:\"purchase_order\",type:\"text\",trim:\"true\"' data-dojo-type=\"dijit/form/TextBox\" ></td></tr>\r\n\t\t\t<tr><td class=\"prmaxrowtag\" align=\"right\">Email Confirmation</td><td><input class=\"prmaxinput\" data-dojo-attach-point=\"emailtocustomer\" data-dojo-props='name:\"emailtocustomer\",type:\"checkbox\"' data-dojo-type=\"dijit/form/CheckBox\" checked />\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<input class=\"prmaxinput\" data-dojo-attach-point=\"email\" data-dojo-props='name:\"email\",type:\"text\",style:\"width:20em\",trim:\"true\",required:\"true\",regExpGen:dojox.validate.regexp.emailAddress,trim:\"true\",invalidMessage:\"invalid email address\" ' data-dojo-type=\"dijit/form/ValidationTextBox\" /></td></tr>\r\n\t\t\t<tr><td class=\"prmaxrowtag\"  align=\"right\">Bundled Invoice</td><td><input data-dojo-attach-point=\"has_bundled_invoice\" data-dojo-props='\"class\":\"prmaxinput\",name:\"has_bundled_invoice\",type:\"checkbox\"' data-dojo-type=\"dijit/form/CheckBox\"/></td></tr>\r\n\t\t\t<tr><td class=\"prmaxrowtag\" align=\"right\">Confirmation On Login</td><td><input class=\"prmaxinput\" data-dojo-attach-point=\"confirmation_accepted\" name=\"confirmation_accepted\" type=\"checkbox\" data-dojo-type=\"dijit/form/CheckBox\" checked /></td></tr>\r\n\t\t\t<tr><td colspan=\"2\">&nbsp;</td></tr>\r\n\t\t\t<tr><td colspan=\"2\"><table width=\"100%\" cellpadding=\"0\" cellpadding=\"0\" border=\"0\">\r\n\t\t\t<tr>\r\n\t\t\t\t<td width=\"28%\">&nbsp;</td>\r\n\t\t\t\t<td width=\"12%\">Start Date</td>\r\n\t\t\t\t<td width=\"12%\" data-dojo-attach-point=\"view_dd_2\">Free Mths</td>\r\n\t\t\t\t<td width=\"12%\" data-dojo-attach-point=\"view_dd_1\">Paid Mths</td>\r\n\t\t\t\t<td width=\"12%\">Price Code</td>\r\n\t\t\t\t<td width=\"12%\">Price ex VAT</td>\r\n\t\t\t\t<td width=\"12%\">Rnwl Code</td>\r\n\t\t\t</tr>\r\n\t\t\t<tr><td class=\"prmaxrowtag\">Media DB</td>\r\n\t\t\t\t<td><input type=\"text\" data-dojo-attach-point=\"licence_start_date\" data-dojo-props='name:\"licence_start_date\",required:\"true\",style:\"width:8em\"' data-dojo-type=\"dijit/form/DateTextBox\"></td>\r\n\t\t\t\t<td data-dojo-attach-point=\"view_dd_3\"><input type=\"text\" data-dojo-attach-point=\"months_free\" data-dojo-props='name:\"months_free\",value:\"0\",required:\"true\",constraints:{min:0,max:6},style:\"width:6em\"' data-dojo-type=\"dijit/form/NumberTextBox\" ></td>\r\n\t\t\t\t<td data-dojo-attach-point=\"view_dd_4\"><input type=\"text\" data-dojo-attach-point=\"months_paid\" data-dojo-props='name:\"months_paid\",value:\"12\",required:\"true\",constraints:{min:1,max:36},style:\"width:6em\"' data-dojo-type=\"dijit/form/NumberTextBox\" ></td>\r\n\t\t\t\t<td><select class=\"prmaxinput\" data-dojo-attach-point=\"pricecodeid\" data-dojo-type=\"dijit/form/FilteringSelect\" data-dojo-props='name:\"pricecodeid\",autoComplete:\"true\",style:\"width:8em\"' data-dojo-attach-event=\"onChange:_PriceChange1\"></select></td>\r\n\t\t\t\t<td><input  data-dojo-props='type:\"text\",name:\"cost\",required:\"true\",trim:\"true\",constraints:{min:0.01,max:99999.00,fractional:true,places:\"0,2\"},style:\"width:6em\"' data-dojo-type=\"dijit/form/CurrencyTextBox\"  data-dojo-attach-point=\"cost\" ></input></td>\r\n\t\t\t\t<td><select data-dojo-props='\"class\":\"prmaxinput\",name:\"pricecoderenewalid\",autoComplete:\"true\",style:\"width:8em\"' data-dojo-attach-point=\"pricecoderenewalid\" data-dojo-type=\"dijit/form/FilteringSelect\" ></select></td>\r\n\t\t\t</tr>\r\n\t\t\t<tr ><td class=\"prmaxrowtag\">Features&nbsp;<input data-dojo-props='\"class\":\"prmaxinput\",name:\"advancefeatures\",type:\"checkbox\"' data-dojo-attach-point=\"advancefeatures\" data-dojo-type=\"dijit/form/CheckBox\" data-dojo-attach-event=\"onClick:_Advance\"/></td>\r\n\t\t\t\t<td data-dojo-attach-point=\"features_view_1\" class=\"prmaxhidden\"><input data-dojo-props='type:\"text\",name:\"advance_licence_start\",style:\"width:8em\"' data-dojo-attach-point=\"advance_licence_start\" data-dojo-type=\"dijit/form/DateTextBox\" ></td>\r\n\t\t\t\t<td data-dojo-attach-point=\"features_view_2\" class=\"prmaxhidden\"><input data-dojo-props='type:\"text\",name:\"adv_months_free\",value:\"0\",constraints:{min:0,max:36},required:\"true\",style:\"width:6em\"' data-dojo-attach-point=\"adv_months_free\"  data-dojo-type=\"dijit/form/NumberTextBox\" ></td>\r\n\t\t\t\t<td data-dojo-attach-point=\"features_view_3\" class=\"prmaxhidden\"><input data-dojo-props='type:\"text\",name:\"adv_months_paid\",value:\"12\",constraints:{min:0,max:36},required:\"true\",style:\"width:6em\"' data-dojo-attach-point=\"adv_months_paid\" data-dojo-type=\"dijit/form/NumberTextBox\" ></td>\r\n\t\t\t\t<td data-dojo-attach-point=\"features_view_4\" class=\"prmaxhidden\"><select data-dojo-props='\"class\":\"prmaxinput\",name:\"advpricecodeid\",autoComplete:\"true\",required:\"false\",style:\"width:8em\"' data-dojo-attach-point=\"advpricecodeid\" data-dojo-type=\"dijit/form/FilteringSelect\" data-dojo-attach-event=\"onChange:_PriceChange2\" ></select></td>\r\n\t\t\t\t<td data-dojo-attach-point=\"features_view_5\" class=\"prmaxhidden\"><input data-dojo-props='type:\"text\",name:\"advcost\",trim:\"true\",constraints:{min:0.00,max:99999.00,fractional:true,places:\"0,2\"},style:\"width:6em\"' data-dojo-type=\"dijit/form/CurrencyTextBox\" data-dojo-attach-point=\"advcost\"></input></td>\r\n\t\t\t\t<td data-dojo-attach-point=\"features_view_6\" class=\"prmaxhidden\"><select data-dojo-props='\"class\":\"prmaxinput\",name:\"advpricecoderenewalid\",autoComplete:\"true\",required:\"false\",style:\"width:8em\"' data-dojo-attach-point=\"advpricecoderenewalid\" data-dojo-type=\"dijit/form/FilteringSelect\" ></select></td>\r\n\t\t\t</tr>\r\n\t\t\t<tr ><td class=\"prmaxrowtag\">Monitoring&nbsp;<input data-dojo-props='\"class\":\"prmaxinput\",name:\"updatum\",type:\"checkbox\"' data-dojo-attach-point=\"updatum\" data-dojo-type=\"dijit/form/CheckBox\" data-dojo-attach-event=\"onClick:_Updatum\"/></td>\r\n\t\t\t\t<td data-dojo-attach-point=\"updatum_view_1\" class=\"prmaxhidden\"><input data-dojo-props='type:\"text\",name:\"updatum_start_date\",style:\"width:8em\"' data-dojo-attach-point=\"updatum_start_date\"  data-dojo-type=\"dijit/form/DateTextBox\" ></td>\r\n\t\t\t\t<td data-dojo-attach-point=\"updatum_view_2\" class=\"prmaxhidden\"><input data-dojo-props='type:\"text\",value:\"0\",constraints:{min:0,max:36},required:\"true\",style:\"width:6em\",name:\"updatum_months_free\"' data-dojo-attach-point=\"updatum_months_free\" data-dojo-type=\"dijit/form/NumberTextBox\" ></td>\r\n\t\t\t\t<td data-dojo-attach-point=\"updatum_view_3\" class=\"prmaxhidden\"><input data-dojo-props='type:\"text\",value:\"12\",constraints:{min:0,max:36},required:\"true\",style:\"width:6em\",name:\"updatum_months_paid\"' data-dojo-attach-point=\"updatum_months_paid\" data-dojo-type=\"dijit/form/NumberTextBox\" ></td>\r\n\t\t\t\t<td data-dojo-attach-point=\"updatum_view_4\" class=\"prmaxhidden\"><select data-dojo-props='\"class\":\"prmaxinput\",name:\"updatumpricecodeid\",autoComplete:\"true\",required:\"false\",style:\"width:8em\"' data-dojo-attach-point=\"updatumpricecodeid\" data-dojo-type=\"dijit/form/FilteringSelect\" data-dojo-attach-event=\"onChange:_PriceChange3\" ></select></td>\r\n\t\t\t\t<td data-dojo-attach-point=\"updatum_view_5\" class=\"prmaxhidden\"><input data-dojo-props='type:\"text\",name:\"updatumcost\",trim:\"true\",constraints:{min:0.00,max:99999.00,fractional:true,places:\"0,2\"},style:\"width:6em\"' data-dojo-type=\"dijit/form/CurrencyTextBox\" data-dojo-attach-point=\"updatumcost\" ></input></td>\r\n\t\t\t\t<td data-dojo-attach-point=\"updatum_view_6\" class=\"prmaxhidden\"><select data-dojo-props='\"class\":\"prmaxinput\",name:\"updatumpricecoderenewalid\",autoComplete:\"true\",required:\"false\",style:\"width:8em\"' data-dojo-attach-point=\"updatumpricecoderenewalid\" data-dojo-type=\"dijit/form/FilteringSelect\" ></select></td>\r\n\t\t\t</tr>\r\n\t\t\t<tr ><td class=\"prmaxrowtag\">International&nbsp;<input data-dojo-attach-point=\"has_international_data\" data-dojo-props='\"class\":\"prmaxinput\",name:\"has_international_data\",type:\"checkbox\"' data-dojo-type=\"dijit/form/CheckBox\" data-dojo-attach-event=\"onClick:_international\"/></td>\r\n\t\t\t\t<td data-dojo-attach-point=\"int_view_1\" class=\"prmaxhidden\">&nbsp;</td>\r\n\t\t\t\t<td data-dojo-attach-point=\"int_view_2\" class=\"prmaxhidden\">&nbsp;</td>\r\n\t\t\t\t<td data-dojo-attach-point=\"int_view_3\" class=\"prmaxhidden\">&nbsp;</td>\r\n\t\t\t\t<td data-dojo-attach-point=\"int_view_4\" class=\"prmaxhidden\"><select data-dojo-props='\"class\":\"prmaxinput\",name:\"intpricecodeid\",autoComplete:\"true\",required:\"false\",style:\"width:8em\"' data-dojo-attach-point=\"intpricecodeid\" data-dojo-type=\"dijit/form/FilteringSelect\"></select></td>\r\n\t\t\t\t<td data-dojo-attach-point=\"int_view_5\" class=\"prmaxhidden\"><input data-dojo-props='type:\"text\",name:\"internationalcost\",trim:\"true\",constraints:{min:0.00,max:99999.00,fractional:true,places:\"0,2\"}' data-dojo-type=\"dijit/form/CurrencyTextBox\" data-dojo-attach-point=\"internationalcost\" style=\"width:6em\"></input></td>\r\n\t\t\t\t<td data-dojo-attach-point=\"int_view_6\" class=\"prmaxhidden\"><select data-dojo-props='\"class\":\"prmaxinput\",name:\"intpricecoderenewalid\",autoComplete:\"true\",required:\"false\",style:\"width:8em\"' data-dojo-attach-point=\"intpricecoderenewalid\" data-dojo-type=\"dijit/form/FilteringSelect\"></select></td>\r\n\t\t\t</tr>\r\n\t\t\t</table></td></tr>\r\n\t\t\t<tr><td colspan=\"2\">&nbsp;</td></tr>\r\n\t\t\t<tr><td valign=\"top\" align=\"right\" ><label class=\"prmaxrowtag\">Message</label></td><td><div class=\"stdframe\" ><textarea data-dojo-attach-point=\"order_confirmation_message\" data-dojo-props='name:\"order_confirmation_message\",\"class\":\"dijitTextarea\",style:\"width:99%;height:99%\"' data-dojo-type=\"dijit/form/Textarea\" ></textarea></div></td></tr>\r\n\t\t\t<tr><td valign=\"top\" align=\"right\" ><label class=\"prmaxrowtag\">Internal Note</label></td><td><div class=\"stdframe\" ><textarea data-dojo-attach-point=\"internalnote\" data-dojo-props='name:\"internalnote\",\"class\":\"dijitTextarea\",style:\"width:99%;height:99%\"' data-dojo-type=\"dijit/form/Textarea\"></textarea></div></td></tr>\r\n\t\t\t<tr data-dojo-attach-point=\"owner_view\" class=\"prmaxhidden\"><td align=\"right\" valign=\"top\" class=\"prmaxrowtag\">Assigned To</td><td><select data-dojo-props='\"class\":\"prmaxrequired\",required:\"true\",name:\"assigntoid\",autoComplete:\"true\",style:\"width:15em\",labelType:\"html\"' data-dojo-attach-point=\"assigntoid\" data-dojo-type=\"dijit/form/FilteringSelect\"></select></td></tr>\r\n\t\t\t<tr><td align=\"right\" class=\"prmaxrowtag\">Ordered By</td><td><input data-dojo-props='\"class\":\"prmaxrequired\",type:\"text\",name:\"orderedby\",trim:\"true\",required:\"true\"' data-dojo-type=\"dijit/form/ValidationTextBox\" data-dojo-attach-point=\"orderedby\"></input></td></tr>\r\n\t\t\t<tr><td class=\"prmaxrowlabel\" align=\"right\" colspan=\"2\" align=\"right\"><button data-dojo-type=\"dijit/form/Button\" type=\"button\" data-dojo-attach-event=\"onClick:_Send\">Send Order Confirmation</button></td></tr>\r\n\t\t</table>\r\n\t</form>\r\n\r\n\t<button data-dojo-type=\"dijit/form/Button\" type=\"button\" data-dojo-attach-event=\"onClick:_Save\">Save</button>\r\n\t<button data-dojo-type=\"dijit/form/Button\" type=\"button\" data-dojo-attach-event=\"onClick:_Preview\">Preview</button>\r\n\t\t<form data-dojo-attach-point=\"previewform\" target=\"_newtab\" action=\"/orderconfirmation/order_confirmation_send_preview\" method=\"post\">\r\n\t\t<input type=\"hidden\" name=\"icustomerid\" data-dojo-attach-point=\"icustomerid\">\r\n\t</form>\r\n\r\n</div>\r\n","url:dijit/templates/Dialog.html":"<div class=\"dijitDialog\" role=\"dialog\" aria-labelledby=\"${id}_title\">\r\n\t<div data-dojo-attach-point=\"titleBar\" class=\"dijitDialogTitleBar\">\r\n\t\t<span data-dojo-attach-point=\"titleNode\" class=\"dijitDialogTitle\" id=\"${id}_title\"\r\n\t\t\t\trole=\"heading\" level=\"1\"></span>\r\n\t\t<span data-dojo-attach-point=\"closeButtonNode\" class=\"dijitDialogCloseIcon\" data-dojo-attach-event=\"ondijitclick: onCancel\" title=\"${buttonCancel}\" role=\"button\" tabindex=\"-1\">\r\n\t\t\t<span data-dojo-attach-point=\"closeText\" class=\"closeText\" title=\"${buttonCancel}\">x</span>\r\n\t\t</span>\r\n\t</div>\r\n\t<div data-dojo-attach-point=\"containerNode\" class=\"dijitDialogPaneContent\"></div>\r\n\t${!actionBarTemplate}\r\n</div>\r\n\r\n","url:control/customer/templates/monthly_payment.html":"<div>\r\n<form data-dojo-attach-point=\"form\"  onsubmit=\"return false\" data-dojo-type=\"dijit/form/Form\">\r\n<table width=\"500px\" cellpadding=\"0\" cellpadding=\"0\" >\r\n\t<tr><td colspan=\"4\"><div data-dojo-props='\"class\":\"prmaxrowdisplaylarge\",style:\"text-align:center;display:inline\"'>Monthly Payment (Inc Vat.)</div><div data-dojo-props='\"class\":\"prmaxrowdisplaylarge\",style:\"display:inline\"' data-dojo-attach-point=\"customername\"></div></td>\r\n\t<tr><td class=\"prmaxrowlabel\" align=\"right\">Amount (Inc Vat.)</td>\r\n\t\t<td><input data-dojo-props='type:\"text\",name:\"value\",required:true,trim:true' data-dojo-type=\"dijit/form/CurrencyTextBox\" data-dojo-attach-point=\"payment\" /></td>\r\n\t</tr>\r\n\t<tr><td class=\"prmaxrowlabel\" align=\"right\">Paid Month</td>\r\n\t<td><select data-dojo-props='\"class\":\"prmaxinput\",name:\"monthid\",style:\"width:10em\",autoComplete:\"true\"' data-dojo-attach-point=\"monthid\" data-dojo-type=\"dijit/form/FilteringSelect\"></select></td>\r\n\t<td class=\"prmaxrowlabel\" align=\"right\">Paid Year</td><td><select data-dojo-props='\"class\":\"prmaxinput\",name:\"yearid\",style:\"width:5em\",autoComplete:\"true\"' data-dojo-attach-point=\"yearid\" data-dojo-type=\"dijit/form/FilteringSelect\"></select></td></tr>\r\n\t<tr><td class=\"prmaxrowlabel\" align=\"right\" valign=\"top\">Message</td><td><div class=\"dialogprofileframe\" >\r\n\t<textarea data-dojo-attach-point=\"message\" data-dojo-props='name:\"message\",\"class\":\"dijitTextarea\",style:\"width:99%;height:99%\"' data-dojo-type=\"dijit/form/Textarea\" ></textarea></div></td></tr>\r\n\t<tr><td class=\"prmaxrowlabel\" align=\"right\" >Email Address</td><td><input class=\"prmaxinput\"  data-dojo-props='name:\"email\",type:\"text\",trim:true,required:true,regExpGen:dojox.validate.regexp.emailAddress,invalidMessage:\"invalid email address\",size:\"40\",maxLength:\"85\"' data-dojo-attach-point=\"email\" data-dojo-type=\"dijit/form/ValidationTextBox\" /></td></tr>\r\n\t<tr><td class=\"prmaxrowlabel\" align=\"right\">Payment Date</td><td><input data-dojo-props='type:\"text\",name:\"payment_date\"'  data-dojo-attach-point=\"payment_date\" data-dojo-type=\"dijit/form/DateTextBox\" ></td>\r\n\t</tr>\r\n\t<tr><td class=\"prmaxrowlabel\" colspan=\"4\" align=\"right\"><button data-dojo-type=\"dijit/form/Button\" type=\"button\" data-dojo-attach-event=\"onClick:_take_payment\">Take Payment</button></td>\r\n</table></form>\r\n</div>\r\n","url:control/accounts/templates/SalesPartner.html":"<div>\r\n        <div data-dojo-type=\"dijit/layout/ContentPane\" data-dojo-props='region:\"top\",style:\"height:35px;width:100%;overflow:hidden;border:1px solid black\"'>\r\n            <div class=\"dijitToolbarTop\" data-dojo-type=\"dijit/Toolbar\" data-dojo-props='style:\"float:left:height:100%;width:100%\",\"class\":\"prmaxbuttonlarge\"' >\r\n                <table width=\"50%\" border=\"0\" cellpadding=\"0\" cellspacing=\"0\" >\r\n                    <tr><td class=\"prmaxrowtag\" style=\"width:70px\">Partner</td><td style=\"width:250px\"><select data-dojo-type=\"dijit/form/FilteringSelect\" data-dojo-props='\"class\":\"prmaxinput\",name:\"customersourceid\",style:\"width:15em\"' data-dojo-attach-point=\"customersourceid\" ></select></td>\r\n                        <td><button data-dojo-type=\"dijit/form/Button\" data-dojo-props='type:\"button\"' data-dojo-attach-event=\"onClick:_change_partner\">Show Partner</button></td>\r\n                    </tr>\r\n                </table>\r\n            </div>\r\n        </div>\r\n\r\n    <div data-dojo-type=\"dijit/layout/TabContainer\" data-dojo-props='region:\"center\"' >\r\n        <div data-dojo-type=\"dijit/layout/ContentPane\" data-dojo-props='\"class\":\"scrollpanel\",style:\"width:100%;height:100%\",title:\"Details\"' >\r\n            <form data-dojo-attach-point=\"DetailsForm\" data-dojo-props='onsubmit:\"return false\"' data-dojo-type=\"dijit/form/Form\">\r\n                <table class=\"prmaxtable\" width=\"500px\" cellspacing=\"0\" cellpadding=\"0\" border=\"0\">\r\n                    <tr><td class=\"prmaxrowtag\" style=\"width:30%\" align=\"right\" >Name</td><td width=\"70%\"><input data-dojo-attach-point=\"name\" data-dojo-props='\"class\":\"prmaxinput\",type:\"text\",trim:true,name:\"name\"' data-dojo-type=\"dijit/form/TextBox\"></td></tr>\r\n                    <tr><td class=\"prmaxrowtag\" style=\"width:30%\" align=\"right\" >Contact</td><td width=\"70%\"><input data-dojo-attach-point=\"contactname\" data-dojo-props='\"class\":\"prmaxinput\",type:\"text\",trim:true,name:\"contactname\"' data-dojo-type=\"dijit/form/TextBox\"></td></tr>\r\n                    <tr><td class=\"prmaxrowtag\" style=\"width:30%\" align=\"right\" >Address1</td><td width=\"70%\"><input data-dojo-attach-point=\"address1\" data-dojo-props='\"class\":\"prmaxinput\",type:\"text\",trim:true,name:\"address1\"' data-dojo-type=\"dijit/form/TextBox\"></td></tr>\r\n                    <tr><td class=\"prmaxrowtag\" style=\"width:30%\" align=\"right\" >Address2</td><td width=\"70%\"><input data-dojo-attach-point=\"address2\" data-dojo-props='\"class\":\"prmaxinput\",type:\"text\",trim:true,name:\"address2\"' data-dojo-type=\"dijit/form/TextBox\"></td></tr>\r\n                    <tr><td class=\"prmaxrowtag\" style=\"width:30%\" align=\"right\" >County</td><td width=\"70%\"><input data-dojo-attach-point=\"county\" data-dojo-props='\"class\":\"prmaxinput\",type:\"text\",trim:true,name:\"county\"' data-dojo-type=\"dijit/form/TextBox\"></td></tr>\r\n                    <tr><td class=\"prmaxrowtag\" style=\"width:30%\" align=\"right\" >Postcode</td><td width=\"70%\"><input data-dojo-attach-point=\"postcode\" data-dojo-props='\"class\":\"prmaxinput\",type:\"text\",trim:true,name:\"postcode\"' data-dojo-type=\"dijit/form/TextBox\"></td></tr>\r\n                    <tr><td class=\"prmaxrowtag\" style=\"width:30%\" align=\"right\" >Townname</td><td width=\"70%\"><input data-dojo-attach-point=\"townname\" data-dojo-props='\"class\":\"prmaxinput\",type:\"text\",trim:true,name:\"townname\"' data-dojo-type=\"dijit/form/TextBox\"></td></tr>\r\n                    <tr><td class=\"prmaxrowtag\" style=\"width:30%\" align=\"right\" >Country</td><td width=\"70%\"><select data-dojo-type=\"dijit/form/FilteringSelect\" data-dojo-props='\"class\":\"prmaxinput\",name:\"country\"' data-dojo-attach-point=\"country\" ></select></td></tr>\r\n                    <tr><td class=\"prmaxrowtag\" style=\"width:30%\" align=\"right\" >Email Address</td><td width=\"70%\"><input data-dojo-attach-point=\"email\" data-dojo-props='\"class\":\"prmaxinput\",type:\"text\",trim:true,name:\"email\",required:true,regExpGen:dojox.validate.regexp.emailAddress,invalidMessage:\"invalid email address\",size:40,maxLength:70' data-dojo-type=\"dijit/form/TextBox\"></td></tr>\r\n                    <tr><td class=\"prmaxrowtag\" style=\"width:30%\" align=\"right\" >Phone</td><td width=\"70%\"><input data-dojo-attach-point=\"phone\" data-dojo-props='\"class\":\"prmaxinput\",type:\"text\",trim:true,name:\"phone\"' data-dojo-type=\"dijit/form/TextBox\"></td></tr>\r\n                    <tr><td><button data-dojo-attach-point=\"updbtn\" data-dojo-type=\"dijit/form/Button\" data-dojo-props='type:\"button\"' data-dojo-attach-event=\"onClick:_update_partner\">Update</button></td></tr>\r\n                </table>\r\n            </form>\r\n        </div>\r\n\r\n        <div data-dojo-type=\"dijit/layout/ContentPane\" data-dojo-props='\"class\":\"scrollpanel\",style:\"width:100%;height:100%\",title:\"Financial Log\"' >\r\n            <div style=\"height:6%;width:100%;overflow:hidden;padding:0px;margin:0px\">\r\n                <div style=\"float:left;padding-top:0px;padding-right:10px;margin:5px\" >\r\n                    <label class=\"label_size_small\">Dates</label><div data-dojo-type=\"prcommon2/date/daterange\" data-dojo-attach-point=\"date_search\"></div>\r\n                    <label class=\"prmaxrowdisplay\">Unallocated</label><input data-dojo-props='\"class\":\"prmaxbutton\",type:\"checkbox\",name:\"unallocated\",checked:true' data-dojo-attach-point=\"unallocated\" data-dojo-type=\"dijit/form/CheckBox\" >\r\n                    <button type=\"button\" data-dojo-attach-event=\"onClick:_FilterBy\" data-dojo-type=\"dijit/form/Button\" label=\"Filter By\" ></button>\r\n                    <button data-dojo-attach-event=\"onClick:_statement_report\" data-dojo-attach-point=\"statementreportbtn\" data-dojo-type=\"dojox/form/BusyButton\" data-dojo-props='iconClass:\"fa fa-print\",type:\"button\",busyLabel:\"Generating Statement Report...\",label:\"Statement Report PDF\"'></button>\r\n                    <td><button data-dojo-attach-event=\"onClick:_statement_report_excel\" data-dojo-attach-point=\"statementreportexcelbtn\" data-dojo-type=\"dojox/form/BusyButton\" data-dojo-props='iconClass:\"fa fa-print\",type:\"button\",busyLabel:\"Generating Statement Report Excel...\",label:\"Statement Report Excel\"'></button>\r\n                </div>\r\n            </div>\r\n\r\n             <div data-dojo-attach-point=\"financialgrid\" data-dojo-type=\"dijit/layout/ContentPane\" data-dojo-props='region:\"center\",splitter:true,style:\"width:100%;height:93%\"' ></div>\r\n        </div>\r\n\r\n        <div data-dojo-type=\"dijit/layout/ContentPane\" data-dojo-props='\"class\":\"scrollpanel\",style:\"width:100%;height:100%\",title:\"Customers\"' >\r\n            <div style=\"height:6%;width:100%;overflow:hidden;padding:0px;margin:0px\">\r\n                <div style=\"float:left;padding-top:0px;padding-right:10px;margin:5px\" >\r\n                    <select data-dojo-type=\"dijit/form/FilteringSelect\" data-dojo-props='\"class\":\"prmaxinput\",name:\"customerstatus\", value:0' data-dojo-attach-point=\"customerstatus\" ></select>\r\n                    <button type=\"button\" data-dojo-attach-event=\"onClick:_FilterBy_Customers\" data-dojo-type=\"dijit/form/Button\" label=\"Filter By\" ></button>\r\n                    <button data-dojo-attach-event=\"onClick:_listing_report\" data-dojo-attach-point=\"listingreportbtn\" data-dojo-type=\"dojox/form/BusyButton\" data-dojo-props='iconClass:\"fa fa-print\",type:\"button\",busyLabel:\"Generating Customers Report...\",label:\"Customers Report PDF\"'></button>\r\n                    <button data-dojo-attach-event=\"onClick:_listing_report_excel\" data-dojo-attach-point=\"listingreportexcelbtn\" data-dojo-type=\"dojox/form/BusyButton\" data-dojo-props='iconClass:\"fa fa-print\",type:\"button\",busyLabel:\"Generating Customers Report Excel...\",label:\"Customers Report Excel\"'></button>\r\n                </div>\r\n            </div>\r\n        \r\n            <div data-dojo-attach-point=\"customersgrid\" data-dojo-type=\"dijit/layout/ContentPane\" data-dojo-props='region:\"center\",splitter:true,style:\"width:100%;height:93%\"' ></div>\r\n        </div>\r\n\r\n        <div data-dojo-attach-point=\"listing_report_dlg\" data-dojo-type=\"dijit/Dialog\" title=\"Partners' Customers\" data-dojo-props='style:\"width:300px\"'>\r\n            <div data-dojo-type=\"prcommon2/reports/ReportBuilder\" data-dojo-attach-point=\"listing_report_node\"></div>\r\n        </div><br/>\r\n        <div data-dojo-attach-point=\"statement_report_dlg\" data-dojo-type=\"dijit/Dialog\" title=\"Partners' Statement\" data-dojo-props='style:\"width:300px\"'>\r\n            <div data-dojo-type=\"prcommon2/reports/ReportBuilder\" data-dojo-attach-point=\"statement_report_node\"></div>\r\n        </div>        \r\n    </div>\r\n\r\n    <form data-dojo-attach-point=\"documentform\" target=\"_blank\" method=\"post\" action=\"/audit/viewpdf\">\r\n        <input type=\"hidden\" name=\"audittrailid\" data-dojo-attach-point=\"documentform_audittrailid\">\r\n    </form>\r\n    <form data-dojo-attach-point=\"htmlform\" target=\"_blank\" method=\"post\" action=\"/audit/viewhtml\">\r\n        <input type=\"hidden\" name=\"audittrailid\" data-dojo-attach-point=\"htmlform_audittrailid\">\r\n    </form>\r\n    \r\n</div>\r\n","url:dijit/templates/CheckedMenuItem.html":"<tr class=\"dijitReset\" data-dojo-attach-point=\"focusNode\" role=\"${role}\" tabIndex=\"-1\" aria-checked=\"${checked}\">\r\n\t<td class=\"dijitReset dijitMenuItemIconCell\" role=\"presentation\">\r\n\t\t<span class=\"dijitInline dijitIcon dijitMenuItemIcon dijitCheckedMenuItemIcon\" data-dojo-attach-point=\"iconNode\"></span>\r\n\t\t<span class=\"dijitMenuItemIconChar dijitCheckedMenuItemIconChar\">${!checkedChar}</span>\r\n\t</td>\r\n\t<td class=\"dijitReset dijitMenuItemLabel\" colspan=\"2\" data-dojo-attach-point=\"containerNode,labelNode,textDirNode\"></td>\r\n\t<td class=\"dijitReset dijitMenuItemAccelKey\" style=\"display: none\" data-dojo-attach-point=\"accelKeyNode\"></td>\r\n\t<td class=\"dijitReset dijitMenuArrowCell\" role=\"presentation\">&#160;</td>\r\n</tr>\r\n","url:dijit/form/templates/ComboButton.html":"<table class=\"dijit dijitReset dijitInline dijitLeft\"\r\n\tcellspacing='0' cellpadding='0' role=\"presentation\"\r\n\t><tbody role=\"presentation\"><tr role=\"presentation\"\r\n\t\t><td class=\"dijitReset dijitStretch dijitButtonNode\" data-dojo-attach-point=\"buttonNode\" data-dojo-attach-event=\"ondijitclick:__onClick,onkeydown:_onButtonKeyDown\"\r\n\t\t><div id=\"${id}_button\" class=\"dijitReset dijitButtonContents\"\r\n\t\t\tdata-dojo-attach-point=\"titleNode\"\r\n\t\t\trole=\"button\" aria-labelledby=\"${id}_label\"\r\n\t\t\t><div class=\"dijitReset dijitInline dijitIcon\" data-dojo-attach-point=\"iconNode\" role=\"presentation\"></div\r\n\t\t\t><div class=\"dijitReset dijitInline dijitButtonText\" id=\"${id}_label\" data-dojo-attach-point=\"containerNode\" role=\"presentation\"></div\r\n\t\t></div\r\n\t\t></td\r\n\t\t><td id=\"${id}_arrow\" class='dijitReset dijitRight dijitButtonNode dijitArrowButton'\r\n\t\t\tdata-dojo-attach-point=\"_popupStateNode,focusNode,_buttonNode\"\r\n\t\t\tdata-dojo-attach-event=\"onkeydown:_onArrowKeyDown\"\r\n\t\t\ttitle=\"${optionsTitle}\"\r\n\t\t\trole=\"button\" aria-haspopup=\"true\"\r\n\t\t\t><div class=\"dijitReset dijitArrowButtonInner\" role=\"presentation\"></div\r\n\t\t\t><div class=\"dijitReset dijitArrowButtonChar\" role=\"presentation\">&#9660;</div\r\n\t\t></td\r\n\t\t><td style=\"display:none !important;\"\r\n\t\t\t><input ${!nameAttrSetting} type=\"${type}\" value=\"${value}\" data-dojo-attach-point=\"valueNode\"\r\n\t\t\t\tclass=\"dijitOffScreen\" aria-hidden=\"true\" data-dojo-attach-event=\"onclick:_onClick\"\r\n\t\t/></td></tr></tbody\r\n></table>\r\n","url:control/support/templates/query.html":"<div >\r\n\t<div data-dojo-type=\"dijit/layout/BorderContainer\" data-dojo-props='region:\"center\"'>\r\n\t\t<div data-dojo-type=\"dijit/layout/ContentPane\" data-dojo-props='region:\"top\",style:\"width:100%;height:240px\"'>\r\n\t\t\t<textarea name = \"query_text\" style=\"width:100%\" rows=9 class=\"prmaxdefault\" data-dojo-attach-point=\"query_text\"></textarea>\r\n\t\t\t<table cellpadding=\"0\" cellpadding=\"0\" width=\"100%\">\r\n\t\t\t\t<tr><td><button data-dojo-attach-point=\"execute_button\" data-dojo-type=\"dojox/form/BusyButton\" data-dojo-attach-event=\"onClick:_Execute\" data-dojo-props='busyLabel:\"Wait Executing\"'>Execute</button></td>\r\n\t\t\t<td>\r\n\t\t\t\t<form data-dojo-attach-point=\"to_excel_form\" target=\"_newtab\" method=\"post\" action=\"/query/to_excel\" data-dojo-attach-event=\"onsubmit:_To_Excel\" >\r\n\t\t\t\t\t<input type=\"hidden\"  data-dojo-attach-point=\"query_text_to_excel\" name = \"query_text\" data-dojo-type=\"dijit/form/TextBox\" >\r\n\t\t\t\t\t<input type=\"hidden\"  data-dojo-attach-point=\"tmp_to_excel\" name = \"tmp_cache\" data-dojo-type=\"dijit/form/TextBox\" >\r\n\t\t\t\t\t<button type=\"submit\" data-dojo-type=\"dijit/form/Button\" label=\"To Excel\" ></button>\r\n\t\t\t\t</form>\r\n\t\t\t</td>\r\n\t\t\t<td align=\"right\"><button data-dojo-type=\"dijit/form/Button\" data-dojo-attach-event=\"onClick:_Save\">Save As</button><select data-dojo-attach-point=\"select\" data-dojo-type =\"dijit/form/FilteringSelect\" data-dojo-props='searchAttr:\"subject\",labelType:\"html\"' ></select><button data-dojo-type=\"dijit/form/Button\" data-dojo-attach-event=\"onClick:_Load\">Load</button></td></tr></table>\r\n\t\t\t<br/>\r\n\t\t</div>\r\n\t\t<div data-dojo-type=\"dijit/layout/ContentPane\" data-dojo-props='region:\"center\"' data-dojo-attach-point=\"result_view\">\r\n\t\t</div>\r\n\t</div>\r\n\t<div data-dojo-attach-point=\"savedlg\" data-dojo-type=\"dijit/Dialog\"  title=\"Save Query\">\r\n\t\t<div><br/>\r\n\t\t\t<form class=\"prmaxdefault\" data-dojo-attach-point=\"formNode\" data-dojo-type=\"dijit/form/Form\" onSubmit=\"return false\">\r\n\t\t\t\t<input type=\"hidden\"  name = \"typeid\" value=\"1\" data-dojo-type=\"dijit/form/TextBox\" >\r\n\t\t\t\t<table style=\"width:100%;border-collapse:collapse;\" cellspacing=\"1\" cellpadding=\"1\" border=\"0\">\r\n\t\t\t\t\t<tr><td class=\"prmaxrowtag\">Subject</td><td><input  data-dojo-props='style:\"float:left\",name:\"subject\",type:\"text\",trim:true,required:true' data-dojo-attach-point=\"subject_name\" data-dojo-type=\"dijit/form/ValidationTextBox\"/></td></tr>\r\n\t\t\t\t</table>\r\n\t\t\t</form>\r\n\t\t\t<br/>\r\n\t\t</div>\r\n\t\t<div >\r\n\t\t\t\t<button data-dojo-type=\"dijit/form/Button\" type=\"button\" data-dojo-attach-event=\"onClick:_CancelDialog\" style=\"float:left\">Cancel</button>\r\n\t\t\t\t<button data-dojo-type=\"dijit/form/Button\" type=\"button\" data-dojo-attach-event=\"onClick:_Query_Save\" style=\"float:right\">OK</button>\r\n\t\t</div><br/>\r\n\t</div>\r\n</div>\r\n","url:dijit/form/templates/CheckBox.html":"<div class=\"dijit dijitReset dijitInline\" role=\"presentation\"\r\n\t><input\r\n\t \t${!nameAttrSetting} type=\"${type}\" role=\"${type}\" aria-checked=\"false\" ${checkedAttrSetting}\r\n\t\tclass=\"dijitReset dijitCheckBoxInput\"\r\n\t\tdata-dojo-attach-point=\"focusNode\"\r\n\t \tdata-dojo-attach-event=\"ondijitclick:_onClick\"\r\n/></div>\r\n","url:control/customer/templates/dd_invoices.html":"<div>\r\n\t<table width=\"500px\" cellpadding=\"0\" cellpadding=\"0\">\r\n\t\t<tr><td colspan=\"2\"><div class=\"prmaxrowdisplaylarge\" style=\"text-align:center;display:inline\">Create DD Invoices for next 10 Working days (Ignores Bank Holidays)</div></td>\r\n\t\t<tr>\r\n\t\t\t<td class=\"prmaxrowlabel\" align=\"right\" >DD Day</td>\r\n\t\t\t<td>\r\n\t\t\t\t<select data-dojo-props='\"class\":\"prmaxrequired\",required:\"true\",name:\"pay_montly_day\",autoComplete:\"true\",style:\"width:3em\"' data-dojo-attach-point=\"pay_montly_day\" data-dojo-type=\"dijit/form/FilteringSelect\" >\r\n\t\t\t\t\t<option value=\"1\">1</option>\r\n\t\t\t\t\t<option value=\"8\">8</option>\r\n\t\t\t\t\t<option value=\"15\">15</option>\r\n\t\t\t\t\t<option value=\"22\">22</option>\r\n\t\t\t\t</select>\r\n\t\t\t</td>\r\n\t\t</tr>\r\n\t\t<tr><td class=\"prmaxrowlabel\" align=\"right\" >DD Date</td><td><input data-dojo-props='type:\"text\",name:\"take_date\",required:true' data-dojo-attach-point=\"take_date\" data-dojo-type=\"dijit/form/DateTextBox\" ></td></tr>\r\n\t\t<tr><td colspan=\"2\"><br/><br/><br/></td></tr>\r\n\t\t<tr><td class=\"prmaxrowlabel\" colspan=\"2\" align=\"center\"><button data-dojo-type=\"dojox/form/BusyButton\" data-dojo-props='type:\"button\",busylabel:\"Please Wait\" ' data-dojo-attach-event=\"onClick:_create_invoices\" data-dojo-attach-point=\"invbtn\">Create Invoices And Setup Payment</button></td></tr>\r\n\t\t<tr><td colspan=\"2\" ><br/><br/><br/></td></tr>\r\n\t\t<tr><td>\r\n\t\t\t<form target=\"_newtab\" action=\"/payment/payment_dd_invoices_draft\" method=\"post\" data-dojo-attach-event=\"onsubmit:_draft_invoices\" >\r\n\t\t\t\t<input type=\"hidden\"  data-dojo-attach-point=\"tmp_cache\" name = \"tmp_cache\" data-dojo-type=\"dijit/form/TextBox\" >\r\n\t\t\t\t<input type=\"hidden\"  data-dojo-attach-point=\"pay_montly_day2\" name = \"pay_montly_day\" data-dojo-type=\"dijit/form/TextBox\" >\r\n\t\t\t\t<input type=\"hidden\"  data-dojo-attach-point=\"take_date2\" name = \"take_date\" data-dojo-type=\"dijit/form/TextBox\" >\r\n\t\t\t\t<button type=\"submit\" data-dojo-type=\"dijit/form/Button\" label=\"See Draft List\" ></button>\r\n\t\t\t</form>\r\n\t\t</td></tr>\r\n\t</table>\r\n</div>\r\n","url:dijit/layout/templates/TabContainer.html":"<div class=\"dijitTabContainer\">\r\n\t<div class=\"dijitTabListWrapper\" data-dojo-attach-point=\"tablistNode\"></div>\r\n\t<div data-dojo-attach-point=\"tablistSpacer\" class=\"dijitTabSpacer ${baseClass}-spacer\"></div>\r\n\t<div class=\"dijitTabPaneWrapper ${baseClass}-container\" data-dojo-attach-point=\"containerNode\"></div>\r\n</div>\r\n","url:control/support/templates/distribution.html":"<div>\r\n\t<div data-dojo-type=\"dijit/layout/ContentPane\" data-dojo-props='region:\"top\",style:\"height:35px;width:100%;overflow:hidden;border:1px solid black\"'>\r\n\t\t<div class=\"dijitToolbarTop\" data-dojo-type=\"dijit/Toolbar\" data-dojo-props='style:\"height:100%;width:100%\"' >\r\n\t\t\t<div data-dojo-type=\"dijit/form/Button\" data-dojo-props='iconClass:\"fa fa-search-plus fa-2x\",showLabel:true' data-dojo-attach-event=\"onClick:_refresh\">Refresh</div>\r\n\t\t\t<div data-dojo-type=\"dijit/form/Button\" data-dojo-props='iconClass:\"fa fa-first-order fa-2x\",showLabel:true' data-dojo-attach-event=\"onClick:_force_out\">Prioritiese Release for Account</div>\r\n\t\t</div>\r\n\t</div>\r\n\t<div data-dojo-type=\"dijit/layout/ContentPane\" data-dojo-props='region:\"center\",style:\"width:100%;height:240px\"'>\r\n\t</div>\r\n</div>\r\n","url:control/customer/templates/users.html":"<div>\r\n\t<div data-dojo-type=\"dijit/layout/ContentPane\" data-dojo-props='region:\"top\",style:\"width:100%;height:48px;padding:0px;margin:0px\"'>\r\n\t\t<div data-dojo-type=\"dijit/Toolbar\" data-dojo-props='style:\"height:47px;width:100%;padding:0px;margin:0px\"'>\r\n\t\t\t<div data-dojo-type=\"dijit/form/Button\" data-dojo-props='iconClass:\"fa fa-plus fa-3x\",showLabel:true' data-dojo-attach-event=\"onClick:_add_user\"><span>Add User</span></div>\r\n\t\t</div>\r\n\t</div>\r\n\t<div data-dojo-type=\"dijit/layout/BorderContainer\" data-dojo-props='region:\"center\"'>\r\n\t<div data-dojo-type=\"dijit/layout/ContentPane\" data-dojo-props='region:\"center\"' data-dojo-attach-point=\"grid_view\"></div>\r\n\t\t<div data-dojo-type=\"dijit/layout/StackContainer\" data-dojo-attach-point=\"controls\" data-dojo-props=\"region:'bottom',style:'width:100%;height:50%',preload:false,splitter:true\">\r\n\t\t\t<div data-dojo-attach-point=\"blank\" data-dojo-type=\"dijit/layout/ContentPane\" data-dojo-props='title:\"blank\",selected:\"selected\"'></div>\r\n\t\t\t<div data-dojo-attach-point=\"update_user_ctrl\" data-dojo-type=\"dijit/layout/ContentPane\" data-dojo-props='style:\"width:100%;height:100%\",\"class\":\"scrollpanel\"'></div>\r\n\t\t</div>\r\n\t</div>\r\n\t<div data-dojo-attach-point=\"user_add_dlg\" data-dojo-type=\"dijit/Dialog\" data-dojo-props='title:\"Add New User\"' style=\"width:500px\">\r\n\t\t<div data-dojo-attach-point=\"user_add_ctrl\" data-dojo-type=\"control/customer/user_add\"></div>\r\n\t</div>\r\n\t<div data-dojo-attach-point=\"user_update_dlg\" data-dojo-type=\"dijit/Dialog\" data-dojo-props='title:\"Update Users\"' style=\"width:500px\">\r\n\t\t<div data-dojo-attach-point=\"user_update_ctrl\" data-dojo-type=\"control/customer/user_update\"></div>\r\n\t</div>\r\n\t<div data-dojo-attach-point=\"user_password_dlg\" data-dojo-type=\"dijit/Dialog\" data-dojo-props='title:\"Reset Password\"' style=\"width:500px\">\r\n\t\t<div data-dojo-attach-point=\"user_password_ctrl\" data-dojo-type=\"control/customer/user_reset_password\"></div>\r\n\t</div>\r\n\r\n</div>\r\n\r\n","url:control/customer/templates/manual_invoice.html":"<div>\r\n\t<form data-dojo-attach-point=\"form\" method=\"post\" name=\"form\" enctype=\"multipart/form-data\" onSubmit=\"return false;\">\r\n\t\t<input type=\"hidden\" data-dojo-attach-point=\"icustomerid\" name=\"icustomerid\" data-dojo-type=\"dijit/form/TextBox\" ></input>\r\n\t\t<input type=\"hidden\" data-dojo-attach-point=\"invoice_date2\" name=\"invoice_date\" data-dojo-type=\"dijit/form/TextBox\" ></input>\r\n\t\t<table width=\"600px\" cellpadding=\"0\" cellpadding=\"0\" >\r\n\t\t\t<tr><td colspan=\"2\"><label class=\"prmaxrowdisplaylarge\" style=\"text-align:center;display:inline\">Manual Invoice</label><div data-dojo-props='style:\"display:inline\",\"class\":\"prmaxrowdisplaylarge\"' data-dojo-attach-point=\"customername\">Name</div></td></tr>\r\n\t\t\t<tr><td style=\"width:150px\" class=\"prmaxrowlabel\" align=\"right\">Invoice Ref</td><td><input data-dojo-props='type:\"text\",name:\"invoice_ref\",style:\"width:8em\",required:true'  data-dojo-attach-point=\"invoice_ref\" data-dojo-type=\"dijit/form/ValidationTextBox\" ></td></tr>\r\n\t\t\t<tr><td class=\"prmaxrowlabel\" align=\"right\">Invoice Date</td><td><input data-dojo-props='type:\"text\",style:\"width:8em\",required:true' data-dojo-attach-point=\"invoice_date\" data-dojo-type=\"ttl/DateTextBox2\"></td></tr>\r\n\t\t\t<tr><td align=\"right\"><label class=\"prmaxrowlabel\">Gross Amount</label></td><td><input data-dojo-props='type:\"text\",name:\"amount\",style:\"width:8em\",required:true,trim:true,constraints:{min:0.01,max:99999.00,fractional:true,places:\"0,2\"}' data-dojo-type=\"dijit/form/CurrencyTextBox\" data-dojo-attach-point=\"amount\" data-dojo-attach-event=\"onBlur:_amounts\"></input></td></tr>\r\n\t\t\t<tr><td align=\"right\"><label class=\"prmaxrowlabel\">Vat</label></td><td><input data-dojo-props='type:\"text\",name:\"vat\",style:\"width:8em\",required:true,trim:true,constraints:{min:0.00,max:99999.00,fractional:true,places:\"0,2\"}' data-dojo-type=\"dijit/form/CurrencyTextBox\" data-dojo-attach-point=\"vat\"></input></td></tr>\r\n\t\t\t<tr><td align=\"right\"><label class=\"prmaxrowlabel\" >Unpaid Amount</label></td><td><input data-dojo-props='type:\"text\",name:\"unpaidamount\",style:\"width:8em\",required:true,constraints:{min:0.00,max:99999.00,fractional:true,places:\"0,2\"}' data-dojo-type=\"dijit/form/CurrencyTextBox\" data-dojo-attach-point=\"unpaidamount\"></input></td></tr>\r\n\t\t\t<tr><td align=\"right\" class=\"prmaxrowlabel\">Invoice File (pdf)</td><td><input class=\"prmaxinput\" type=\"file\" name=\"invoice_file\" size=\"50\" data-dojo-attach-point=\"invoice_file\"></input></td></tr>\r\n\t\t\t<tr><td class=\"prmaxrowlabel\" align=\"right\" colspan=\"2\" align=\"right\"><button data-dojo-type=\"dijit/form/Button\" type=\"button\" data-dojo-attach-event=\"onClick:_send\">Enter Manual Invoice</button></td></tr>\r\n\t\t</table>\r\n\t</form>\r\n</div>\r\n","url:control/customer/templates/details.html":"<div>\r\n\t<div style=\"margin:5px;width:600px;height:95%;overflow:auto\" class=\"common_prmax_layout\">\r\n\t\t<form data-dojo-attach-point=\"customer_form\" onsubmit=\"return false\" data-dojo-type=\"dijit/form/Form\">\r\n\t\t\t<h1 class=\"heading\">Edit Details</h1>\r\n\t\t\t<input data-dojo-attach-point=\"icustomerid\" data-dojo-props='name:\"icustomerid\",type:\"hidden\",value:\"\"' data-dojo-type=\"dijit/form/TextBox\" />\r\n\t\t\t<label class=\"label_size_1 label_tag label_align_r\">Business Name</label><input data-dojo-attach-point=\"customername\" data-dojo-props='name:\"customername\",type:\"text\",trim:true,required:true,invalidMessage:\"Please Enter the name of the business\",style:\"width:29em\"' data-dojo-type=\"dijit/form/ValidationTextBox\" ><br/>\r\n\t\t\t<label class=\"label_size_1 label_tag label_align_r\">Is Individual</label><input data-dojo-attach-point=\"individual\" data-dojo-props='name:\"individual\"' data-dojo-type=\"dijit/form/CheckBox\" ><br/>\r\n\t\t\t<h1 class=\"heading\">Contact Name</h1>\r\n\t\t\t<label class=\"label_size_1 label_tag label_align_r\">Title</label><input data-dojo-attach-point=\"contact_title\" data-dojo-props='name:\"contact_title\",type:\"text\",trim:true,style:\"width:2em\"' data-dojo-type=\"dijit/form/TextBox\"><br/>\r\n\t\t\t<label class=\"label_size_1 label_tag label_align_r\">First Name</label><input data-dojo-attach-point=\"contact_firstname\" data-dojo-props='name:\"contact_firstname\",type:\"text\",trim:true,style:\"width:8em\"' data-dojo-type=\"dijit/form/TextBox\"><br/>\r\n\t\t\t<label class=\"label_size_1 label_tag label_align_r\">Surname</label><input name=\"contact_surname\" data-dojo-attach-point=\"contact_surname\" data-dojo-props='type:\"text\",trim:true,style:\"width:12em\"' data-dojo-type=\"dijit/form/TextBox\"><br/>\r\n\t\t\t<label class=\"label_size_1 label_tag label_align_r\">Job Title</label><input  data-dojo-attach-point=\"contactjobtitle\" data-dojo-props='name:\"contactjobtitle\",type:\"text\",trim:true,maxlength:\"80\"' data-dojo-type=\"dijit/form/TextBox\"><br/>\r\n\t\t\t<h1 class=\"heading\">Address</h1>\r\n\t\t\t<label class=\"label_size_1 label_tag label_align_r\">Address:</label><input data-dojo-attach-point=\"address1\" data-dojo-props='name:\"address1\",type:\"text\",size:\"40\",required:true,trim:true,style:\"width:29em\"' data-dojo-type=\"dijit/form/TextBox\"/><br/>\r\n\t\t\t<label class=\"label_size_1 label_tag label_align_r\">Address 2:</label><input data-dojo-attach-point=\"address2\" data-dojo-props='name:\"address2\",type:\"text\",size:\"40\",maxlength:\"80\",trim:true,style:\"width:29em\"' data-dojo-type=\"dijit/form/TextBox\"/><br/>\r\n\t\t\t<label class=\"label_size_1 label_tag label_align_r\">Town</label><input  data-dojo-attach-point=\"townname\" data-dojo-props='name:\"townname\",type:\"text\",size:\"30\",trim:true' data-dojo-type=\"dijit/form/TextBox\"/><br/>\r\n\t\t\t<label class=\"label_size_1 label_tag label_align_r\">County</label><input  data-dojo-attach-point=\"county\" data-dojo-props='name:\"county\",type:\"text\",trim:true' data-dojo-type=\"dijit/form/TextBox\"/><br/>\r\n\t\t\t<label class=\"label_size_1 label_tag label_align_r\">Postcode:</label><input  data-dojo-attach-point=\"postcode\" data-dojo-props='name:\"postcode\",type:\"text\",style:\"width:10em\",maxlength:\"10\"' data-dojo-type=\"dijit/form/TextBox\"/><br/>\r\n\t\t\t<label class=\"label_size_1 label_tag label_align_r\">Email:</label><input  data-dojo-attach-point=\"email\" data-dojo-type=\"dijit/form/ValidationTextBox\" data-dojo-props='name:\"email\",type:\"text\",size:\"40\",maxlength:\"80\",trim:true,required:true,pattern:dojox.validate.regexp.emailAddress,invalidMessage:\"invalid email address\"'/><br/>\r\n\t\t\t<label class=\"label_size_1 label_tag label_align_r\">Tel:</label><input  data-dojo-attach-point=\"tel\" data-dojo-props='name:\"tel\",type:\"text\",size:\"25\",maxlength:\"40\"' data-dojo-type=\"dijit/form/TextBox\"/><br/>\r\n\t\t\t<label class=\"label_size_1 label_tag label_align_r\">Country</label><select data-dojo-props='name:\"countryid\",style:\"width:15em\"' data-dojo-attach-point=\"countryid\" data-dojo-type=\"dijit/form/Select\"></select><br/>\r\n\t\t\t<label class=\"label_size_1 label_tag label_align_r\">Vat No</label><input data-dojo-attach-point=\"vatnumber\" data-dojo-props='trim:true,name:\"vatnumber\",type:\"text\",size:\"25\",maxlength:\"40\",style:\"width:10em\"' data-dojo-type=\"dijit/form/TextBox\" /><br/>\r\n\t\t\t<button data-dojo-attach-point=\"savebtn\" data-dojo-type=\"dojox/form/BusyButton\" data-dojo-attach-event=\"onClick:_customer_save\" data-dojo-props='busyLabel:\"Please Wait Saving...\",type:\"button\",label:\"Save\",style:\"float:right;margin-right:20px\"'></button><br/>\r\n\t\t</form>\r\n\t</div>\r\n</div>\r\n\r\n","url:control/templates/frame.html":"<div>\r\n\t<div data-dojo-attach-point=\"frame_tabs\" data-dojo-type=\"dijit/layout/TabContainer\" data-dojo-props='style:\"width:100%;height:100%\",region:\"center\",gutters:false'>\r\n\t\t<div data-dojo-attach-point=\"frame_tab_m\" data-dojo-type=\"control/admin\" data-dojo-props='gutters:false,title:\"Customers\",style:\"width:100%;height:100%\"' ></div>\r\n\t\t<div data-dojo-attach-point=\"frame_tab_e\" data-dojo-type=\"dijit/layout/BorderContainer\" data-dojo-props='gutters:false,title:\"Options\",style:\"width:100%;height:100%;overflow: hidden\"' >\r\n\t\t\t<div data-dojo-type=\"dijit/layout/ContentPane\" data-dojo-props='title:\"Options\",region:\"left\",maxWidth:175,style:\"width:15%;height:100%;overflow: hidden\"' >\r\n\t\t\t\t<div data-dojo-type=\"dojo/data/ItemFileReadStore\" data-dojo-id=\"catStore\" data-dojo-props='url:\"/frame/options\"'></div>\r\n\t\t\t\t<div data-dojo-type=\"dijit/tree/ForestStoreModel\" data-dojo-id=\"catModel\" query=\"{type:'0'}\" childrenAttrs=\"children\" store=\"catStore\" rootId=\"root\" rootLabel=\"root\"></div>\r\n\t\t\t\t<div data-dojo-type=\"dijit/Tree\" data-dojo-props='\"class\":\"bordered\",model:catModel,showRoot:false' data-dojo-attach-event=\"onClick: _select_node\" ></div>\r\n\t\t\t</div>\r\n\t\t\t<div data-dojo-type=\"dijit/layout/StackContainer\" data-dojo-attach-point=\"frame_zone\" data-dojo-props='region:\"center\",style:\"border:1px solid black\"'>\r\n\t\t\t\t<div data-dojo-type=\"dijit/layout/ContentPane\" data-dojo-props='title:\"blank\",style:\"width:100%;height:100%\"'></div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t</div>\r\n</div>\r\n","url:dijit/layout/templates/_ScrollingTabControllerButton.html":"<div data-dojo-attach-event=\"ondijitclick:_onClick\" class=\"dijitTabInnerDiv dijitTabContent dijitButtonContents\"  data-dojo-attach-point=\"focusNode\" role=\"button\">\r\n\t<span role=\"presentation\" class=\"dijitInline dijitTabStripIcon\" data-dojo-attach-point=\"iconNode\"></span>\r\n\t<span data-dojo-attach-point=\"containerNode,titleNode\" class=\"dijitButtonText\"></span>\r\n</div>","url:dijit/templates/Calendar.html":"<div class=\"dijitCalendarContainer dijitInline\" role=\"presentation\" aria-labelledby=\"${id}_mddb ${id}_year\">\r\n\t<div class=\"dijitReset dijitCalendarMonthContainer\" role=\"presentation\">\r\n\t\t<div class='dijitReset dijitCalendarArrow dijitCalendarDecrementArrow' data-dojo-attach-point=\"decrementMonth\">\r\n\t\t\t<img src=\"${_blankGif}\" alt=\"\" class=\"dijitCalendarIncrementControl dijitCalendarDecrease\" role=\"presentation\"/>\r\n\t\t\t<span data-dojo-attach-point=\"decreaseArrowNode\" class=\"dijitA11ySideArrow\">-</span>\r\n\t\t</div>\r\n\t\t<div class='dijitReset dijitCalendarArrow dijitCalendarIncrementArrow' data-dojo-attach-point=\"incrementMonth\">\r\n\t\t\t<img src=\"${_blankGif}\" alt=\"\" class=\"dijitCalendarIncrementControl dijitCalendarIncrease\" role=\"presentation\"/>\r\n\t\t\t<span data-dojo-attach-point=\"increaseArrowNode\" class=\"dijitA11ySideArrow\">+</span>\r\n\t\t</div>\r\n\t\t<div data-dojo-attach-point=\"monthNode\" class=\"dijitInline\"></div>\r\n\t</div>\r\n\t<table cellspacing=\"0\" cellpadding=\"0\" role=\"grid\" data-dojo-attach-point=\"gridNode\">\r\n\t\t<thead>\r\n\t\t\t<tr role=\"row\">\r\n\t\t\t\t${!dayCellsHtml}\r\n\t\t\t</tr>\r\n\t\t</thead>\r\n\t\t<tbody data-dojo-attach-point=\"dateRowsNode\" data-dojo-attach-event=\"ondijitclick: _onDayClick\" class=\"dijitReset dijitCalendarBodyContainer\">\r\n\t\t\t\t${!dateRowsHtml}\r\n\t\t</tbody>\r\n\t</table>\r\n\t<div class=\"dijitReset dijitCalendarYearContainer\" role=\"presentation\">\r\n\t\t<div class=\"dijitCalendarYearLabel\">\r\n\t\t\t<span data-dojo-attach-point=\"previousYearLabelNode\" class=\"dijitInline dijitCalendarPreviousYear\" role=\"button\"></span>\r\n\t\t\t<span data-dojo-attach-point=\"currentYearLabelNode\" class=\"dijitInline dijitCalendarSelectedYear\" role=\"button\" id=\"${id}_year\"></span>\r\n\t\t\t<span data-dojo-attach-point=\"nextYearLabelNode\" class=\"dijitInline dijitCalendarNextYear\" role=\"button\"></span>\r\n\t\t</div>\r\n\t</div>\r\n</div>\r\n","url:control/customer/options/templates/emailserver.html":"<div class=\"common_prmax_layout\">\r\n<br/>\r\n\t<form data-dojo-attach-point=\"form\" data-dojo-type=\"dijit/form/Form\" data-dojo-props='onSubmit:\"return false\",\"class\":\"common_prmax_layout\"'>\r\n\t\t<input data-dojo-attach-point=\"customerid\" data-dojo-props='name:\"customerid\",type:\"hidden\"' data-dojo-type=\"dijit/form/TextBox\" />\r\n\t\t<label class=\"label_size_1 label_tag label_align_r\"><input data-dojo-attach-point=\"thirdparty\" data-dojo-type=\"dijit/form/CheckBox\" data-dojo-props='name:\"thirdparty\",type:\"checkbox\"' data-dojo-attach-event=\"onChange: _change\"/> Via 3rd Party</label><br/><br/><br/><br/>\r\n\t\t<label class=\"label_size_2 label_tag label_align_r\" data-dojo-attach-point=\"emailservertype_label\" class\"=\"prmaxhidden\">Email Server Type</label><select data-dojo-props='\"class\":\"prmaxinput prmaxhidden\",name:\"emailservertypeid\",autoComplete:true,style:\"width:8em\"' data-dojo-type=\"dijit/form/FilteringSelect\" data-dojo-attach-point=\"emailservertypeid\" data-dojo-attach-event=\"onChange: _set_emailservertype\"></select></br>\r\n\t\t<label class=\"label_size_2 label_tag label_align_r\" data-dojo-attach-point=\"hostname_label\" class=\"prmaxhidden\">Host Name</label><input data-dojo-props='\"class\":\"prmaxhidden\", type:\"text\",name:\"hostname\"' data-dojo-type=\"dijit/form/TextBox\" data-dojo-attach-point=\"hostname\" ><br/></br>\r\n\t\t<label class=\"label_size_2 label_tag label_align_r\" data-dojo-attach-point=\"user_name_label\" class=\"prmaxhidden\">Username:</label><input data-dojo-props='\"class\":\"prmaxhidden\",trim:true,name:\"email_username\",type:\"text\",required:false,placeHolder:\"Email server login name\"' data-dojo-attach-point=\"email_username\" data-dojo-type=\"dijit.form.ValidationTextBox\" ><br/>\r\n\t\t<div data-dojo-type=\"dojox.form.PasswordValidator\" name=\"password\" class=\"prmaxrowtag\" data-dojo-attach-point=\"email_password\" data-dojo-props='\"class\":\"prmaxhidden\"'>\r\n\t\t\t<label class=\"label_size_2 label_tag label_align_r\" data-dojo-attach-point=\"password_1_label\" data-dojo-props='\"class\":\"prmaxhidden\"'>Password:</label><input class=\"prmaxrequired\" type=\"password\" pwType=\"new\" name=\"email_password\"/><br/>\r\n\t\t\t<label class=\"label_size_2 label_tag label_align_r\" data-dojo-attach-point=\"password_2_label\" data-dojo-props='\"class\":\"prmaxhidden\"'>Verify:</label><input class=\"prmaxrequired\" type=\"password\" pwType=\"verify\" /><br/>\r\n\t\t</div>\r\n\t\t<br/><br/>\r\n\t\t<button data-dojo-attach-event=\"onClick:_update\" data-dojo-attach-point=\"updatebtn\" data-dojo-type=\"dojox/form/BusyButton\" data-dojo-props='type:\"button\",busyLabel:\"Please Wait Updating ...\",label:\"Update\",'></button><br/><br/>\r\n\t</form>\r\n</div>\r\n","url:control/customer/templates/user_update.html":"<div>\r\n\t<form data-dojo-type=\"dijit/form/Form\" data-dojo-attach-point=\"form\" data-dojo-props='\"class\":\"common_prmax_layout\",onsubmit:\"return false;\"'>\r\n\t\t<input data-dojo-attach-point=\"iuserid\" name=\"iuserid\" type=\"hidden\" data-dojo-type=\"dijit/form/TextBox\" value=\"\" />\r\n\t\t<label class=\"label_1\">Email Address</label><input data-dojo-attach-point=\"user_email_address\" data-dojo-props='name:\"email\",type:\"text\",trim:true,required:true,invalidMessage:\"Please Enter the name of the business\",style:\"width:27em\"' data-dojo-type=\"dijit/form/ValidationTextBox\"><br/>\r\n\t\t<label class=\"label_1\">Login Name</label><input data-dojo-attach-point=\"user_user_name\" data-dojo-props='name:\"user_name\",type:\"text\",trim:true,required:true,style:\"width:15em\"' data-dojo-type=\"dijit/form/ValidationTextBox\"><br/>\r\n\t\t<label class=\"label_1\">Display Name</label><input data-dojo-attach-point=\"user_display_name\" data-dojo-props='name:\"display_name\",type:\"text\",trim:true,required:true,style:\"width:10em\"' data-dojo-type=\"dijit/form/ValidationTextBox\"><br/>\r\n\t\t<label class=\"label_2\"><input data-dojo-props='name:\"isuseradmin\",type:\"checkbox\"' data-dojo-attach-point=\"isuseradmin\" data-dojo-type=\"dijit/form/CheckBox\">&nbsp;User Admin</label><br/>\r\n\t\t<label class=\"label_2\"><input data-dojo-props='type:\"checkbox\",name:\"nodirectmail\"' data-dojo-attach-point=\"nodirectmail\" data-dojo-type=\"dijit/form/CheckBox\">&nbsp;No Direct Mail</label><br/>\r\n\t\t<label class=\"label_2\"><input data-dojo-props='type:\"checkbox\",name:\"canviewfinancial\"' data-dojo-attach-point=\"canviewfinancial\" data-dojo-type=\"dijit/form/CheckBox\">&nbsp;See Invoices</label><br/><br/>\r\n\t\t<button class=\"btnleft\" data-dojo-attach-event=\"onClick:_send_login_details\" data-dojo-type=\"dijit/form/Button\" data-dojo-props='type:\"button\",label:\"Send Login Details\"' ></button>\r\n\t\t<button class=\"btnright\" data-dojo-attach-event=\"onClick:_update_user_details\" data-dojo-attach-point=\"update_ctrl_btn\" data-dojo-type=\"dojox/form/BusyButton\" data-dojo-props='busyLabel:\"Please Wait Saving...\",type:\"button\",label:\"Save\"'></button><br/>\r\n\t</form>\r\n</div>\r\n\r\n","url:dojox/grid/resources/View.html":"<div class=\"dojoxGridView\" role=\"presentation\">\r\n\t<div class=\"dojoxGridHeader\" dojoAttachPoint=\"headerNode\" role=\"presentation\">\r\n\t\t<div dojoAttachPoint=\"headerNodeContainer\" style=\"width:9000em\" role=\"presentation\">\r\n\t\t\t<div dojoAttachPoint=\"headerContentNode\" role=\"row\"></div>\r\n\t\t</div>\r\n\t</div>\r\n\t<input type=\"checkbox\" class=\"dojoxGridHiddenFocus\" dojoAttachPoint=\"hiddenFocusNode\" aria-hidden=\"true\" />\r\n\t<input type=\"checkbox\" class=\"dojoxGridHiddenFocus\" aria-hidden=\"true\" />\r\n\t<div class=\"dojoxGridScrollbox\" dojoAttachPoint=\"scrollboxNode\" role=\"presentation\">\r\n\t\t<div class=\"dojoxGridContent\" dojoAttachPoint=\"contentNode\" hidefocus=\"hidefocus\" role=\"presentation\"></div>\r\n\t</div>\r\n</div>\r\n","url:prcommon2/query/templates/query.html":"<div >\r\n\t<div data-dojo-type=\"dijit/layout/BorderContainer\" data-dojo-props='region:\"center\"'>\r\n\t\t<div data-dojo-type=\"dijit/layout/ContentPane\" data-dojo-props='region:\"top\",style:\"width:100%;height:240px\"'>\r\n\t\t\t<textarea name = \"query_text\" style=\"width:100%\" rows=9 class=\"prmaxdefault\" data-dojo-attach-point=\"query_text\"></textarea>\r\n\t\t\t<table cellpadding=\"0\" cellpadding=\"0\" width=\"100%\">\r\n\t\t\t\t<tr><td><button data-dojo-attach-point=\"execute_button\" data-dojo-type=\"dojox/form/BusyButton\" data-dojo-attach-event=\"onClick:_Execute\" data-dojo-props='busyLabel:\"Wait Executing\"'>Execute</button></td>\r\n\t\t\t<td>\r\n\t\t\t\t<form data-dojo-attach-point=\"to_excel_form\" target=\"_newtab\" method=\"post\" action=\"/query/to_excel\" data-dojo-attach-event=\"onsubmit:_To_Excel\" >\r\n\t\t\t\t\t<input type=\"hidden\"  data-dojo-attach-point=\"query_text_to_excel\" name = \"query_text\" data-dojo-type=\"dijit/form/TextBox\" >\r\n\t\t\t\t\t<input type=\"hidden\"  data-dojo-attach-point=\"tmp_to_excel\" name = \"tmp_cache\" data-dojo-type=\"dijit/form/TextBox\" >\r\n\t\t\t\t\t<button type=\"submit\" data-dojo-type=\"dijit/form/Button\" label=\"To Excel\" ></button>\r\n\t\t\t\t</form>\r\n\t\t\t</td>\r\n\t\t\t<td align=\"right\"><button data-dojo-type=\"dijit/form/Button\" data-dojo-attach-event=\"onClick:_Save\">Save As</button><select data-dojo-attach-point=\"select\" data-dojo-type =\"dijit/form/FilteringSelect\" data-dojo-props='searchAttr:\"subject\",labelType:\"html\"' ></select><button data-dojo-type=\"dijit/form/Button\" data-dojo-attach-event=\"onClick:_Load\">Load</button></td></tr></table>\r\n\t\t\t<br/>\r\n\t\t</div>\r\n\t\t<div data-dojo-type=\"dijit/layout/ContentPane\" data-dojo-props='region:\"center\"' data-dojo-attach-point=\"result_view\">\r\n\t\t</div>\r\n\t</div>\r\n\t<div data-dojo-attach-point=\"savedlg\" data-dojo-type=\"dijit/Dialog\"  title=\"Save Query\">\r\n\t\t<div><br/>\r\n\t\t\t<form class=\"prmaxdefault\" data-dojo-attach-point=\"formNode\" data-dojo-type=\"dijit/form/Form\" onSubmit=\"return false\">\r\n\t\t\t\t<input type=\"hidden\"  name = \"typeid\" value=\"1\" data-dojo-type=\"dijit/form/TextBox\" >\r\n\t\t\t\t<table style=\"width:100%;border-collapse:collapse;\" cellspacing=\"1\" cellpadding=\"1\" border=\"0\">\r\n\t\t\t\t\t<tr><td class=\"prmaxrowtag\">Subject</td><td><input  data-dojo-props='style:\"float:left\",name:\"subject\",type:\"text\",trim:true,required:true' data-dojo-attach-point=\"subject_name\" data-dojo-type=\"dijit/form/ValidationTextBox\"/></td></tr>\r\n\t\t\t\t</table>\r\n\t\t\t</form>\r\n\t\t\t<br/>\r\n\t\t</div>\r\n\t\t<div >\r\n\t\t\t\t<button data-dojo-type=\"dijit/form/Button\" type=\"button\" data-dojo-attach-event=\"onClick:_CancelDialog\" style=\"float:left\">Cancel</button>\r\n\t\t\t\t<button data-dojo-type=\"dijit/form/Button\" type=\"button\" data-dojo-attach-event=\"onClick:_Query_Save\" style=\"float:right\">OK</button>\r\n\t\t</div><br/>\r\n\t</div>\r\n</div>\r\n","url:control/customer/templates/financiallog.html":"<div>\r\n    <div  data-dojo-attach-point=\"borderControl\" data-dojo-type=\"dijit/layout/BorderContainer\" data-dojo-props='gutters:false,style:\"width:100%;height:100%;overflow:hidden;border:0;padding:0;margin:0\"' >\r\n        <div data-dojo-type=\"dijit/layout/ContentPane\" data-dojo-props='region:\"top\"' style=\"width:100%;height:45px;\">\r\n            <div style=\"height:44px;width:100%;overflow:hidden;padding:0px;margin:0px\">\r\n                <div style=\"float:left\" >\r\n                <p class=\"prmaxrowdisplaylarge\" >Balance £&nbsp;<span data-dojo-attach-point=\"balance_figure\">0.00</span></p>\r\n                </div>\r\n                <div style=\"float:right;padding-top:0px;padding-right:10px;margin:5px\" >\r\n                    <input class=\"prmaxbutton\" data-dojo-props='type:\"text\",name:\"filterdate\"' data-dojo-attach-point=\"filterdate\" data-dojo-type=\"dijit/form/DateTextBox\" >\r\n                    <label class=\"prmaxrowdisplay\">Unallocated</label><input data-dojo-props='\"class\":\"prmaxbutton\",type:\"checkbox\",name:\"unallocated\"' data-dojo-attach-point=\"unallocated\" data-dojo-type=\"dijit/form/CheckBox\" >\r\n                    <label class=\"prmaxrowdisplay\">Money Only</label><input data-dojo-props='\"class\":\"prmaxbutton\",type:\"checkbox\",name:\"moneyonly\",checked:\"true\"' data-dojo-attach-point=\"moneyonly\" data-dojo-type=\"dijit/form/CheckBox\" >\r\n                    <button type=\"button\" data-dojo-attach-event=\"onClick:_FilterBy\" data-dojo-type=\"dijit/form/Button\" label=\"Filter By\" ></button>\r\n                </div>\r\n            </div>\r\n        </div>\r\n            <div data-dojo-attach-point=\"financialgrid\" data-dojo-type=\"dijit/layout/ContentPane\" data-dojo-props='region:\"center\",splitter:true,style:\"width:100%;height:100%\"' ></div>\r\n        <div  data-dojo-type=\"dijit/layout/ContentPane\" data-dojo-props='region:\"bottom\",splitter:true,style:\"width:100%;height:20%\"'>\r\n            <div data-dojo-type=\"dijit/layout/StackContainer\" data-dojo-attach-point=\"zone\" data-dojo-props='region:\"center\",doLayout:true,style:\"border:1px solid black\"'>\r\n                <div data-dojo-type=\"dijit/layout/ContentPane\" title=\"blank\" data-dojo-attach-point=\"blank_view\" selected></div>\r\n                <div data-dojo-type=\"dijit/layout/BorderContainer\" data-dojo-props='style:\"width:100%;height:100%\",title:\"allocations\",gutters:false' data-dojo-attach-point=\"allocations_view\">\r\n                    <div data-dojo-attach-point=\"allocations_grid\" data-dojo-type=\"dijit/layout/ContentPane\" data-dojo-props='region:\"center\"'></div>\r\n                    <div data-dojo-type=\"dijit/layout/ContentPane\" data-dojo-props='region:\"right\",style:\"width:50%;height:100%\"'>\r\n                        <button class=\"prmaxbutton\"  type=\"button\" data-dojo-type=\"dijit/form/Button\" label=\"Re-Allocate\" data-dojo-attach-event=\"onClick:_ReAllocate\" data-dojo-attach-point=\"reallocate\" ></button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n\r\n    <form data-dojo-attach-point=\"documentform\" target=\"_blank\" method=\"post\" action=\"/audit/viewpdf\">\r\n        <input type=\"hidden\" name=\"audittrailid\" data-dojo-attach-point=\"documentform_audittrailid\">\r\n    </form>\r\n    <form data-dojo-attach-point=\"htmlform\" target=\"_blank\" method=\"post\" action=\"/audit/viewhtml\">\r\n        <input type=\"hidden\" name=\"audittrailid\" data-dojo-attach-point=\"htmlform_audittrailid\">\r\n    </form>\r\n    \r\n    \r\n    <div data-dojo-type=\"control/customer/reallocation\" data-dojo-attach-point=\"reallocation\"></div>\r\n\r\n</div>\r\n","url:dijit/templates/MenuItem.html":"<tr class=\"dijitReset\" data-dojo-attach-point=\"focusNode\" role=\"menuitem\" tabIndex=\"-1\">\r\n\t<td class=\"dijitReset dijitMenuItemIconCell\" role=\"presentation\">\r\n\t\t<span role=\"presentation\" class=\"dijitInline dijitIcon dijitMenuItemIcon\" data-dojo-attach-point=\"iconNode\"></span>\r\n\t</td>\r\n\t<td class=\"dijitReset dijitMenuItemLabel\" colspan=\"2\" data-dojo-attach-point=\"containerNode,textDirNode\"\r\n\t\trole=\"presentation\"></td>\r\n\t<td class=\"dijitReset dijitMenuItemAccelKey\" style=\"display: none\" data-dojo-attach-point=\"accelKeyNode\"></td>\r\n\t<td class=\"dijitReset dijitMenuArrowCell\" role=\"presentation\">\r\n\t\t<span data-dojo-attach-point=\"arrowWrapper\" style=\"visibility: hidden\">\r\n\t\t\t<span class=\"dijitInline dijitIcon dijitMenuExpand\"></span>\r\n\t\t\t<span class=\"dijitMenuExpandA11y\">+</span>\r\n\t\t</span>\r\n\t</td>\r\n</tr>\r\n","url:dijit/form/templates/DropDownBox.html":"<div class=\"dijit dijitReset dijitInline dijitLeft\"\r\n\tid=\"widget_${id}\"\r\n\trole=\"combobox\"\r\n\taria-haspopup=\"true\"\r\n\tdata-dojo-attach-point=\"_popupStateNode\"\r\n\t><div class='dijitReset dijitRight dijitButtonNode dijitArrowButton dijitDownArrowButton dijitArrowButtonContainer'\r\n\t\tdata-dojo-attach-point=\"_buttonNode\" role=\"presentation\"\r\n\t\t><input class=\"dijitReset dijitInputField dijitArrowButtonInner\" value=\"&#9660; \" type=\"text\" tabIndex=\"-1\" readonly=\"readonly\" role=\"button presentation\" aria-hidden=\"true\"\r\n\t\t\t${_buttonInputDisabled}\r\n\t/></div\r\n\t><div class='dijitReset dijitValidationContainer'\r\n\t\t><input class=\"dijitReset dijitInputField dijitValidationIcon dijitValidationInner\" value=\"&#935; \" type=\"text\" tabIndex=\"-1\" readonly=\"readonly\" role=\"presentation\"\r\n\t/></div\r\n\t><div class=\"dijitReset dijitInputField dijitInputContainer\"\r\n\t\t><input class='dijitReset dijitInputInner' ${!nameAttrSetting} type=\"${type}\" autocomplete=\"off\"\r\n\t\t\tdata-dojo-attach-point=\"textbox,focusNode\" role=\"textbox\"\r\n\t/></div\r\n></div>\r\n","url:control/customer/templates/view_internal.html":"<div>\r\n\t<div data-dojo-attach-point=\"tab_frame\" data-dojo-type=\"dijit/layout/TabContainer\" data-dojo-props='style:\"width:100%;height:100%\",region:\"center\",gutters:\"false\"'>\r\n\t\t<div data-dojo-attach-point=\"view_summary\" data-dojo-type=\"dijit/layout/ContentPane\" data-dojo-props='title:\"Summary\",style:\"width:100%;height:100%\"' ></div>\r\n\t\t<div data-dojo-attach-point=\"view_users\" data-dojo-type=\"control/customer/users\" data-dojo-props='title:\"Users\",style:\"width:100%;height:100%\"' ></div>\r\n\t\t<div data-dojo-attach-point=\"view_details\" data-dojo-type=\"control/customer/details\" data-dojo-props='title:\"Details\",style:\"width:100%;height:100%\"' ></div>\r\n\t\t<div data-dojo-attach-point=\"view_options\" data-dojo-type=\"control/customer/options\" data-dojo-props='title:\"Options\",style:\"width:100%;height:100%\"' ></div>\r\n\t\t<div data-dojo-attach-point=\"view_financial_details\" data-dojo-type=\"control/customer/financial\" data-dojo-props='title:\"Financial\",style:\"width:100%;height:100%\"' ></div>\r\n\t\t<div data-dojo-attach-point=\"view_financial_log\" data-dojo-type=\"control/customer/financiallog\" data-dojo-props='title:\"Financial Log\",style:\"width:100%;height:100%\"' ></div>\r\n\t\t<div data-dojo-attach-point=\"view_audit\" data-dojo-type=\"control/customer/audit\" data-dojo-props='title:\"Audit\",style:\"width:100%;height:100%\"' ></div>\r\n\t</div>\r\n</div>\r\n","url:dijit/templates/Tooltip.html":"<div class=\"dijitTooltip dijitTooltipLeft\" id=\"dojoTooltip\" data-dojo-attach-event=\"mouseenter:onMouseEnter,mouseleave:onMouseLeave\"\r\n\t><div class=\"dijitTooltipConnector\" data-dojo-attach-point=\"connectorNode\"></div\r\n\t><div class=\"dijitTooltipContainer dijitTooltipContents\" data-dojo-attach-point=\"containerNode\" role='alert'></div\r\n></div>\r\n","url:control/customer/options/templates/SetFreeSEOCount.html":"<div>\r\n\t<div data-dojo-attach-point=\"dlg\" data-dojo-type=\"dijit/Dialog\" data-dojo-props='title:\"Set Nbr of Free SEO for Customer\"'>\r\n\t\t<form data-dojo-attach-point=\"form\"  data-dojo-props='onsubmit:\"return false\"' data-dojo-type=\"dijit/form/Form\">\r\n\t\t\t<input data-dojo-attach-point=\"icustomerid\" data-dojo-props='name:\"icustomerid\",type:\"hidden\"' data-dojo-type=\"dijit/form/TextBox\">\r\n\t\t\t<table style=\"width:400px;border-collapse:collapse;\" cellpadding=\"0\" cellspacing=\"0\">\r\n\t\t\t\t<tr ><td class=\"prmaxrowtag\" align=\"right\" >SEO Credit Qty</td><td><input data-dojo-props='\"class\":\"prmaxinput\",name:\"seonbrincredit\",type:\"text\",trim:true' data-dojo-attach-point=\"seonbrincredit\" data-dojo-type=\"dijit/form/NumberTextBox\"></td></tr>\r\n\t\t\t\t<tr><td align=\"right\" valign=\"top\" class=\"prmaxrowtag\">Reason</td><td colspan=\"2\"><div class=\"stdframe prmaxrequired\" style=\"height:150px;\"><textarea data-dojo-attach-point=\"reason\" data-dojo-props='\"class\":\"prmaxrequired\", name:\"reason\", trim:true, required:true, style:\"width:99%;height:80%\"' data-dojo-type=\"dijit/form/Textarea\" ></textarea></div></td></tr>\r\n\t\t\t\t<tr><td colspan=\"2\"><br/></td></tr>\r\n\t\t\t\t<tr><td><button data-dojo-attach-event=\"onClick:_Close\" data-dojo-type=\"dijit/form/Button\" data-dojo-props='label:\"Close\", type:\"button\"' ></button></td><td align=\"right\"><button data-dojo-attach-point=\"updBtn\" data-dojo-attach-event=\"onClick:_Update\" data-dojo-type=\"dojox/form/BusyButton\" data-dojo-props='type:\"button\", label:\"Set Free SEO Qty\",busyLabel:\"Please wait Updating\"' ></button></td></tr>\r\n\t\t\t</table>\r\n\t\t</form>\r\n\t</div>\r\n</div>","url:control/customer/templates/view_partner.html":"<div>\r\n\t<div data-dojo-attach-point=\"tab_frame\" data-dojo-type=\"dijit/layout/TabContainer\" data-dojo-props='style:\"width:100%;height:100%\",region:\"center\",gutters:\"false\"'>\r\n\t\t<div data-dojo-attach-point=\"view_summary\" data-dojo-type=\"dijit/layout/ContentPane\" data-dojo-props='title:\"Summary\",style:\"width:100%;height:100%\"'></div>\r\n\t\t<div data-dojo-attach-point=\"view_users\" data-dojo-type=\"control/customer/users\" data-dojo-props='title:\"Users\",style:\"width:100%;height:100%\"'></div>\r\n\t\t<div data-dojo-attach-point=\"view_options\" data-dojo-type=\"control/customer/partner_options\" data-dojo-props='title:\"Options\",style:\"width:100%;height:100%\"'></div>\r\n\t\t<div data-dojo-attach-point=\"view_details\" data-dojo-type=\"control/customer/details\" data-dojo-props='title:\"Details\",style:\"width:100%;height:100%;overflow: auto\"'></div>\r\n\t</div>\r\n</div>\r\n\r\n","url:dijit/layout/templates/_TabButton.html":"<div role=\"presentation\" data-dojo-attach-point=\"titleNode,innerDiv,tabContent\" class=\"dijitTabInner dijitTabContent\">\r\n\t<span role=\"presentation\" class=\"dijitInline dijitIcon dijitTabButtonIcon\" data-dojo-attach-point=\"iconNode\"></span>\r\n\t<span data-dojo-attach-point='containerNode,focusNode' class='tabLabel'></span>\r\n\t<span class=\"dijitInline dijitTabCloseButton dijitTabCloseIcon\" data-dojo-attach-point='closeNode'\r\n\t\t  role=\"presentation\">\r\n\t\t<span data-dojo-attach-point='closeText' class='dijitTabCloseText'>[x]</span\r\n\t\t\t\t></span>\r\n</div>\r\n","url:dijit/templates/TreeNode.html":"<div class=\"dijitTreeNode\" role=\"presentation\"\r\n\t><div data-dojo-attach-point=\"rowNode\" class=\"dijitTreeRow\" role=\"presentation\"\r\n\t\t><span data-dojo-attach-point=\"expandoNode\" class=\"dijitInline dijitTreeExpando\" role=\"presentation\"></span\r\n\t\t><span data-dojo-attach-point=\"expandoNodeText\" class=\"dijitExpandoText\" role=\"presentation\"></span\r\n\t\t><span data-dojo-attach-point=\"contentNode\"\r\n\t\t\tclass=\"dijitTreeContent\" role=\"presentation\">\r\n\t\t\t<span role=\"presentation\" class=\"dijitInline dijitIcon dijitTreeIcon\" data-dojo-attach-point=\"iconNode\"></span\r\n\t\t\t><span data-dojo-attach-point=\"labelNode,focusNode\" class=\"dijitTreeLabel\" role=\"treeitem\"\r\n\t\t\t\t   tabindex=\"-1\" aria-selected=\"false\" id=\"${id}_label\"></span>\r\n\t\t</span\r\n\t></div>\r\n\t<div data-dojo-attach-point=\"containerNode\" class=\"dijitTreeNodeContainer\" role=\"presentation\"\r\n\t\t style=\"display: none;\" aria-labelledby=\"${id}_label\"></div>\r\n</div>\r\n","url:control/customer/templates/audit.html":"<div>\r\n        <div data-dojo-attach-point=\"auditgrid\" data-dojo-type=\"dijit/layout/ContentPane\" data-dojo-props='region:\"center\"'></div>\r\n    \r\n    <form data-dojo-attach-point=\"documentform\" target=\"_blank\" method=\"post\" action=\"/audit/viewpdf\">\r\n        <input type=\"hidden\" name=\"audittrailid\"data-dojo-attach-point=\"documentform_audittrailid\">\r\n    </form>\r\n    <form data-dojo-attach-point=\"htmlform\" target=\"_blank\" method=\"post\" action=\"/audit/viewhtml\">\r\n        <input type=\"hidden\" name=\"audittrailid\" data-dojo-attach-point=\"htmlform_audittrailid\">\r\n    </form>\r\n</div>\r\n","url:dojox/grid/resources/_Grid.html":"<div hidefocus=\"hidefocus\" role=\"grid\" dojoAttachEvent=\"onmouseout:_mouseOut\">\r\n\t<div class=\"dojoxGridMasterHeader\" dojoAttachPoint=\"viewsHeaderNode\" role=\"presentation\"></div>\r\n\t<div class=\"dojoxGridMasterView\" dojoAttachPoint=\"viewsNode\" role=\"presentation\"></div>\r\n\t<div class=\"dojoxGridMasterMessages\" style=\"display: none;\" dojoAttachPoint=\"messagesNode\"></div>\r\n\t<span dojoAttachPoint=\"lastFocusNode\" tabindex=\"0\"></span>\r\n</div>\r\n","url:control/customer/templates/upgrade_order_confirmation.html":"<div style=\"width:800px;height:500px;padding:0px;margin:0px\">\r\n\t<div data-dojo-attach-point=\"frame\" data-dojo-type=\"dijit/layout/BorderContainer\" data-dojo-props='style:\"width:100%;height:100%\"' >\r\n\t\t<div data-dojo-type=\"dijit/layout/ContentPane\" data-dojo-props='region:\"left\",style:\"width:150px;height:100%\"'>\r\n\t\t<input class=\"prmaxinput\" data-dojo-type=\"dijit/form/CheckBox\" data-dojo-props='name:\"media_upgrade\",type:\"checkbox\"' data-dojo-attach-point=\"media_upgrade\" data-dojo-attach-event=\"onClick:_change_media_view\"/><label class=\"prmaxrowtag\">Media Core</label><br/>\r\n\t\t<input class=\"prmaxinput\" data-dojo-type=\"dijit/form/CheckBox\" data-dojo-props='name:\"advance_upgrade\",type:\"checkbox\"' data-dojo-attach-point=\"advance_upgrade\" data-dojo-attach-event=\"onClick:_change_advance_view\"/><label class=\"prmaxrowtag\">Advance Features</label><br/>\r\n\t\t<input class=\"prmaxinput\" data-dojo-type=\"dijit/form/CheckBox\" data-dojo-props='name:\"monitoring_upgrade\",type:\"checkbox\"' data-dojo-attach-point=\"monitoring_upgrade\" data-dojo-attach-event=\"onClick:_change_monitoring_view\"/><label class=\"prmaxrowtag\">Monitoring</label><br/>\r\n\t\t<input class=\"prmaxinput\" data-dojo-type=\"dijit/form/CheckBox\" data-dojo-props='name:\"international_upgrade\",type:\"checkbox\"' data-dojo-attach-point=\"international_upgrade\" data-dojo-attach-event=\"onClick:_change_international_view\"/><label class=\"prmaxrowtag\">International</label><br/>\r\n\t\t</div>\r\n\t\t<div data-dojo-type=\"dijit/layout/ContentPane\" data-dojo-props='region:\"center\",\"class\":\"scrollpanel\"'>\r\n\t\t\t<form data-dojo-attach-point=\"form\"  data-dojo-props='onsubmit:\"return false\"' data-dojo-type=\"dijit/form/Form\">\r\n\t\t\t\t<table width=\"100%\" cellpadding=\"0\" cellpadding=\"0\" style=\"border-collapse:collapse\" >\r\n\t\t\t\t<input data-dojo-attach-point=\"orderpaymentfreqid\" data-dojo-props='type:\"hidden\",name:\"orderpaymentfreqid\"' data-dojo-type=\"dijit/form/TextBox\" >\r\n\t\t\t\t\t<tr><td colspan=\"2\"><label class=\"prmaxrowdisplaylarge\" style=\"text-align:center;display:inline\"><div style=\"display:inline;text-align:center\" class=\"prmaxrowdisplaylarge\" data-dojo-attach-point=\"customername\">Name</div></label></td>\r\n\t\t\t\t\t<tr><td class=\"prmaxrowtag\" align=\"right\">Payment Method</td><td><select data-dojo-props='\"class\":\"prmaxinput\",name:\"paymentmethodid\",style:\"width:15em\",autoComplete:true,readonly:\"readonly\"' data-dojo-attach-point=\"paymentmethodid\" data-dojo-type=\"dijit/form/FilteringSelect\"></select></td></tr>\r\n\t\t\t\t\t<tr><td class=\"prmaxrowtag\" align=\"right\" >Purchase Order</td><td><input data-dojo-attach-point=\"purchase_order\" data-dojo-props='\"class\":\"prmaxinput\",name:\"purchase_order\",type:\"text\",trim:true' data-dojo-type=\"dijit/form/TextBox\" ></td></tr>\r\n\t\t\t\t\t<tr><td class=\"prmaxrowtag\" align=\"right\">Email Confirmation</td><td><input data-dojo-attach-point=\"emailtocustomer\" data-dojo-type=\"dijit.form.CheckBox\" data-dojo-props='name:\"emailtocustomer\", type:\"checkbox\",\"class\":\"prmaxinput\", checked:\"checked\"' /><input data-dojo-attach-point=\"email\" data-dojo-type=\"dijit/form/ValidationTextBox\" data-dojo-props='\"class\":\"prmaxinput\",name:\"email\",type:\"text\",style:\"width:20em\",trim:true,regExpGen:dojox.validate.regexp.emailAddress,invalidMessage:\"invalid email address\"' /></td></tr>\r\n\t\t\t\t\t<tr data-dojo-attach-point=\"sendinvoice_view\"><td class=\"prmaxrowtag\" align=\"right\">Send Invoice</td><td><input data-dojo-attach-point=\"sendinvoice\" data-dojo-type=\"dijit/form/CheckBox\" data-dojo-props='name:\"sendinvoice\", type:\"checkbox\",\"class\":\"prmaxinput\"' /></td></tr>\r\n\t\t\t\t\t<tr><td class=\"prmaxrowtag\" align=\"right\">Confirmation On Login</td><td><input data-dojo-attach-point=\"upgrade_confirmation_accepted\" data-dojo-props='\"class\":\"prmaxinput\",name:\"upgrade_confirmation_accepted\",type:\"checkbox\"' data-dojo-type=\"dijit/form/CheckBox\" checked /></td></tr>\r\n\t\t\t\t\t<tr><td valign=\"top\" align=\"right\" ><label class=\"prmaxrowtag\">Message</label></td><td><div class=\"stdframe\" ><textarea data-dojo-attach-point=\"order_confirmation_message\" data-dojo-props='name:\"order_confirmation_message\", \"class\":\"dijitTextarea\",style:\"width:99%;height:99%\"' data-dojo-type=\"dijit/form/Textarea\"></textarea></div></td></tr>\r\n\t\t\t\t\t<tr><td align=\"right\" class=\"prmaxrowtag\">Ordered By</td><td><input data-dojo-props='\"class\":\"prmaxrequired\",type:\"text\",name:\"orderedby\",trim:true,required:true' data-dojo-type=\"dijit/form/ValidationTextBox\" data-dojo-attach-point=\"orderedby\"></input></td></tr>\r\n\r\n\t\t\t\t</table>\r\n\t\t\t<div data-dojo-attach-point=\"media_core_view\" class=\"prmaxhidden\" style=\"padding-top:10px\">\r\n\t\t\t\t<hr/>\r\n\t\t\t\t<table width=\"100%\" cellpadding=\"0\" cellpadding=\"0\" style=\"border-collapse:collapse\" >\r\n\t\t\t\t\t<tr><td colspan=\"2\"><label class=\"prmaxrowdisplaylarge\" style=\"text-align:center;display:inline\">Core Media Settings</label></td></tr>\r\n\t\t\t\t\t<tr><td class=\"prmaxrowtag\" width=\"150px\" align=\"right\" >Concurrent Licence</td><td ><input data-dojo-attach-point=\"logins\" data-dojo-type=\"dijit/form/NumberTextBox\"data-dojo-props='\"class\":\"prmaxrequired\",type:\"text\",name:\"logins\",value:\"1\",style:\"width:4em\",required:true,constraints:{min:1,max:50}'></td></tr>\r\n\t\t\t\t\t<tr><td width=\"12%\">Price Code</td><td width=\"12%\">Price ex VAT</td><td width=\"12%\">Rnwl Code</td></tr>\r\n\t\t\t\t\t<tr>\r\n\t\t\t\t\t\t<td><select data-dojo-props='\"class\":\"prmaxinput\",name:\"pricecodeid\",autoComplete:true,style:\"width:8em\"' data-dojo-attach-point=\"pricecodeid\"  data-dojo-type=\"dijit/form/FilteringSelect\" data-dojo-attach-event=\"onChange:_PriceChange\" ></select></td>\r\n\t\t\t\t\t\t<td><input data-dojo-type=\"dijit.form.CurrencyTextBox\" data-dojo-attach-point=\"cost\" data-dojo-props='type:\"text\",name:\"cost\",required:true,trim:true,constraints:{min:0.00,max:99999.00,fractional:true,places:\"0,2\"},style:\"width:6em\"'></input></td>\r\n\t\t\t\t\t\t<td><select data-dojo-props='\"class\":\"prmaxinput\",name:\"pricecoderenewalid\",autoComplete:true,style:\"width:8em\"' data-dojo-attach-point=\"pricecoderenewalid\"  data-dojo-type=\"dijit/form/FilteringSelect\" ></select></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t\t<div data-dojo-attach-point=\"advance_view\" class=\"prmaxhidden\">\r\n\t\t\t\t<hr/>\r\n\t\t\t\t<table width=\"100%\" cellpadding=\"0\" cellpadding=\"0\" style=\"border-collapse:collapse\" >\r\n\t\t\t\t\t<tr><td colspan=\"4\"><label class=\"prmaxrowdisplaylarge\" style=\"text-align:center;display:inline\">Advance Features Settings</label></td></tr>\r\n\t\t\t\t\t<tr><td width=\"12%\">Price Code</td><td width=\"12%\">Price ex VAT</td><td width=\"12%\">Rnwl Code</td></tr>\r\n\t\t\t\t\t<tr>\r\n\t\t\t\t\t\t<td  data-dojo-attach-point=\"features_view_4\"><select data-dojo-attach-point=\"advpricecodeid\" data-dojo-type=\"dijit/form/FilteringSelect\" data-dojo-attach-event=\"onChange:_PriceChange\" data-dojo-props='\"class\":\"prmaxinput\",name:\"advpricecodeid\",autoComplete:true, required:false,style:\"width:8em\"'  ></select></td>\r\n\t\t\t\t\t\t<td  data-dojo-attach-point=\"features_view_5\"><input data-dojo-type=\"dijit/form/CurrencyTextBox\" data-dojo-attach-point=\"advcost\" data-dojo-props='type:\"text\",name:\"advcost\",trim:true,constraints:{min:0.00,max:99999.00,fractional:true,places:\"0,2\"},style:\"width:6em\"'></input></td>\r\n\t\t\t\t\t\t<td  data-dojo-attach-point=\"features_view_6\"><select data-dojo-props='\"class\":\"prmaxinput\",name:\"advpricecoderenewalid\",autoComplete:true,required:false,style:\"width:8em\"' data-dojo-attach-point=\"advpricecoderenewalid\" data-dojo-type=\"dijit/form/FilteringSelect\"></select></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t\t<div data-dojo-attach-point=\"international_view\" class=\"prmaxhidden\">\r\n\t\t\t\t<hr/>\r\n\t\t\t\t<table width=\"100%\" cellpadding=\"0\" cellpadding=\"0\" style=\"border-collapse:collapse\" >\r\n\t\t\t\t\t<tr><td colspan=\"4\"><label class=\"prmaxrowdisplaylarge\" style=\"text-align:center;display:inline\">International Settings</label></td></tr>\r\n\t\t\t\t\t<tr><td width=\"12%\">Price Code</td><td width=\"12%\">Price ex VAT</td><td width=\"12%\">Rnwl Code</td></tr>\r\n\t\t\t\t\t<tr>\r\n\t\t\t\t\t\t<td  data-dojo-attach-point=\"international_view_4\">&nbsp;</td>\r\n\t\t\t\t\t\t<td  data-dojo-attach-point=\"international_view_5\"><input data-dojo-type=\"dijit/form/CurrencyTextBox\" data-dojo-attach-point=\"internationalcost\" data-dojo-props='type:\"text\",name:\"internationalcost\",trim:true,constraints:{min:0.00,max:99999.00,fractional:true,places:\"0,2\"},style:\"width:6em\"'></input></td>\r\n\t\t\t\t\t\t<td  data-dojo-attach-point=\"international_view_6\">&nbsp;</td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t\t<div data-dojo-attach-point=\"monitoring_view\" class=\"prmaxhidden\">\r\n\t\t\t\t<hr/>\r\n\t\t\t\t<table width=\"100%\" cellpadding=\"0\" cellpadding=\"0\" style=\"border-collapse:collapse\" >\r\n\t\t\t\t\t<tr><td colspan=\"2\"><label class=\"prmaxrowdisplaylarge\" style=\"text-align:center;display:inline\">Monitoring Settings</label></td></tr>\r\n\t\t\t\t\t<tr><td class=\"prmaxrowtag\" align=\"right\" >Monitoring Count</td><td><input data-dojo-attach-point=\"maxmonitoringusers\" data-dojo-props='\"class\":\"prmaxrequired\",type:\"text\",name:\"maxmonitoringusers\",value:\"1\",style:\"width:4em\",constraints:{min:0,max:50}' data-dojo-type=\"dijit/form/NumberTextBox\"></td></tr>\r\n\t\t\t\t\t<tr><td width=\"12%\">Start Date</td><td width=\"12%\" data-dojo-attach-point=\"view_dd_1\">Free Mths</td><td width=\"12%\" data-dojo-attach-point=\"view_dd_2\">Paid Mths</td><td width=\"12%\">Price Code</td><td width=\"12%\">Price ex VAT</td><td width=\"12%\">Rnwl Code</td></tr>\r\n\t\t\t\t\t<tr>\r\n\t\t\t\t\t\t<td  data-dojo-attach-point=\"updatum_view_1\"><input data-dojo-attach-point=\"updatum_start_date\" data-dojo-type=\"dijit/form/DateTextBox\" data-dojo-props='name:\"updatum_start_date\",type:\"text\",style:\"width:8em\"'></td>\r\n\t\t\t\t\t\t<td  data-dojo-attach-point=\"updatum_view_2\"><input data-dojo-attach-point=\"updatum_months_free\" data-dojo-type=\"dijit/form/NumberTextBox\" data-dojo-props='type:\"text\",name:\"updatum_months_free\",value:0,constraints:{min:0,max:36},required:true,style:\"width:6em\"'></td>\r\n\t\t\t\t\t\t<td  data-dojo-attach-point=\"updatum_view_3\"><input data-dojo-attach-point=\"updatum_months_paid\" data-dojo-type=\"dijit/form/NumberTextBox\" data-dojo-props='name:\"updatum_months_paid\",type:\"text\",value:12,constraints:{min:3,max:36},required:true,style:\"width:6em\"'></td>\r\n\t\t\t\t\t\t<td  data-dojo-attach-point=\"updatum_view_4\"><select data-dojo-attach-event=\"onChange:_PriceChange\" data-dojo-attach-point=\"updatumpricecodeid\"  data-dojo-type=\"dijit.form.FilteringSelect\" data-dojo-props='\"class\":\"prmaxinput\",name:\"updatumpricecodeid\",autoComplete:true,required:false,style:\"width:8em\"' ></select></td>\r\n\t\t\t\t\t\t<td  data-dojo-attach-point=\"updatum_view_5\"><input data-dojo-attach-point=\"updatumcost\" data-dojo-type=\"dijit/form/CurrencyTextBox\" data-dojo-props='type:\"text\",name:\"updatumcost\",trim:true,constraints:{min:0.00,max:99999.00,fractional:true,places:\"0,2\"},style:\"width:6em\"'></input></td>\r\n\t\t\t\t\t\t<td  data-dojo-attach-point=\"updatum_view_6\"><select data-dojo-attach-point=\"updatumpricecoderenewalid\" data-dojo-type=\"dijit/form/FilteringSelect\" data-dojo-props='\"class\":\"prmaxinput\",name:\"updatumpricecoderenewalid\",autoComplete:true,required:false,style:\"width:8em\"'></select></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t\t</form>\r\n\t\t</div>\r\n\t\t<div data-dojo-type=\"dijit/layout/ContentPane\" data-dojo-props='region:\"bottom\",style:\"width:100%;height:2.5em\"'>\r\n\t\t\t<button data-dojo-type=\"dijit/form/Button\" data-dojo-props='type:\"button\"' data-dojo-attach-event=\"onClick:_Close\">Close</button>\r\n\t\t\t<button data-dojo-type=\"dijit/form/Button\" data-dojo-props='type:\"button\"' data-dojo-attach-event=\"onClick:_Preview\">Preview</button>\r\n\t\t\t<button data-dojo-type=\"dojox/form/BusyButton\" data-dojo-attach-point=\"sendbtn\" data-dojo-props='busyLabel:\"Sending upgrade confirmation ...\",type:\"button\",style:\"float:right;padding-right:10px\"' data-dojo-attach-event=\"onClick:_Send\">Send Upgrade Confirmation</button>\r\n\t\t</div>\r\n\t</div>\r\n</div>\r\n","url:control/customer/templates/user_add.html":"<div>\r\n\t<form data-dojo-attach-point=\"form\" data-dojo-type=\"dijit/form/Form\" data-dojo-props='onSubmit:\"return false\",\"class\":\"common_prmax_layout\"'>\r\n\t\t<input data-dojo-attach-point=\"icustomerid\" name=\"icustomerid\" type=\"hidden\" size=\"40\" data-dojo-type=\"dijit/form/TextBox\" value=\"\" />\r\n\t\t<label class=\"label_size_1 label_align_r\">Email Address</label><input data-dojo-attach-point=\"email\" name=\"email\" type=\"text\" maxlength=\"80\" data-dojo-type=\"dijit/form/ValidationTextBox\" data-dojo-props='trim:true,pattern:dojox.validate.regexp.emailAddress,required:true,invalidMessage:\"invalid email address\",style:\"width:27em\"'/><br/>\r\n\t\t<label class=\"label_size_1 label_align_r\">Display Name</label><input data-dojo-attach-point=\"displayname\" name=\"displayname\" type=\"text\" maxlength=\"80\" data-dojo-type=\"dijit/form/ValidationTextBox\" data-dojo-props='trim:true,required:true,invalidMessage:\"Must be entered\",style:\"width:15em\"'/><br/>\r\n\t\t<label class=\"label_size_1 label_align_r\">Password</label><input data-dojo-attach-point=\"password\" name=\"password\" type=\"password\" size=\"20\" maxlength=\"20\" data-dojo-type=\"dijit/form/ValidationTextBox\" data-dojo-props='required:true,trim:true,invalidMessage:\"Must be entered\",style:\"width:10em\"'/><br/><br/>\r\n\t\t<button class=\"btnright\" data-dojo-attach-point=\"save_user_btn\" data-dojo-attach-event=\"onClick:_add_user\" data-dojo-type=\"dojox/form/BusyButton\" data-dojo-props='busyLabel:\"Please Wait Adding...\",label:\"Add\"'></button><br/><br/>\r\n\t</form>\r\n</div>\r\n","url:control/customer/options/templates/details.html":"<div class=\"common_prmax_layout\">\r\n<br/>\r\n\t<table style=\"width:100%;border-collapse:collapse;\" cellpadding=\"0\" cellspacing=\"0\">\r\n\t\t<tr><td class=\"prmaxrowtag\">Name</td><td class=\"prmaxrowdisplay\" data-dojo-attach-point=\"displayname\"></td></tr>\r\n\t\t<tr><td class=\"prmaxrowtag\">Customer Source</td><td data-dojo-attach-point=\"customersourcedescription\"></td></tr>\r\n\r\n\t\t<tr><td class=\"prmaxrowtag\">Status</td><td>\r\n\t\t\t<select data-dojo-attach-point=\"statusid\" data-dojo-props=\"autoComplete:true,labelType:'html'\" data-dojo-type=\"dijit/form/FilteringSelect\"></select>\r\n\t\t\t<button data-dojo-type=\"dojox/form/BusyButton\" data-dojo-props='label:\"Change Status\"' data-dojo-attach-point=\"statusidbutton\" data-dojo-attach-event=\"onClick:_ChangeStatus\"></button>\r\n\t\t</td></tr>\r\n\t\t<tr><td class=\"prmaxrowtag\">Customer type</td><td>\r\n\t\t\t<select data-dojo-attach-point=\"customertypeid\" data-dojo-props=\"autoComplete:true,labelType:'html'\" data-dojo-type=\"dijit/form/FilteringSelect\"></select>\r\n\t\t\t<button data-dojo-attach-event=\"onClick:_CustomerType\" data-dojo-type=\"dijit/form/Button\" data-dojo-props='label:\"Set Customer Type\",type:\"button\"' ></button>\r\n\t\t</td></tr>\r\n\t\t<tr><td class=\"prmaxrowtag\">Expire Date</td>\r\n\t\t\t<td><div style=\"display:inline\" class=\"prmaxrowtag\" data-dojo-attach-point=\"expire_display\"></div>&nbsp;\r\n\t\t\t\t<button data-dojo-type=\"dijit/form/Button\" data-dojo-props='label:\"Set Expire Date\",type:\"button\"' data-dojo-attach-event=\"onClick:_SetExpireDate\" ></button>\r\n\t\t\t</td>\r\n\t\t</tr>\r\n\t\t<tr><td class=\"prmaxrowtag\">Concurrent Count</td><td>\r\n\t\t\t<form data-dojo-attach-point=\"setusercountform\"  onsubmit=\"return false\" data-dojo-type=\"dijit/form/Form\">\r\n\t\t\t\t<input data-dojo-props='type:\"text\",name:\"logins\"' data-dojo-type=\"dijit/form/NumberTextBox\" data-dojo-attach-point=\"logins\" >\r\n\t\t\t\t<button data-dojo-attach-point=\"setusercount\" data-dojo-type=\"dijit/form/Button\" data-dojo-props='label:\"Set User Count\",type:\"submit\"' ></button>\r\n\t\t\t</form>\r\n\t\t</td></tr>\r\n\t\t<tr><td class=\"prmaxrowtag\">User Name Count</td><td>\r\n\t\t\t<form data-dojo-attach-point=\"setupernamecount\"  onsubmit=\"return false\" data-dojo-type=\"dijit/form/Form\">\r\n\t\t\t\t<input data-dojo-props='type:\"text\",name:\"nbrofusersaccounts\"' data-dojo-type=\"dijit/form/NumberTextBox\" data-dojo-attach-point=\"nbrofusersaccounts\" >\r\n\t\t\t\t<button data-dojo-attach-point=\"setusercount\" data-dojo-type=\"dijit/form/Button\" data-dojo-props='label:\"Set User Name Count\",type:\"submit\"'></button>\r\n\t\t\t</form>\r\n\t\t</td></tr>\r\n\t\t<tr><td class=\"prmaxrowtag\">Collateral Limit</td><td>\r\n\t\t\t<form data-dojo-attach-point=\"collaterallimitform\"  onsubmit=\"return false\" data-dojo-type=\"dijit/form/Form\">\r\n\t\t\t\t<input data-dojo-props='type:\"text\",name:\"collateral_size\"' data-dojo-type=\"dijit/form/NumberTextBox\" data-dojo-attach-point=\"collateral_size\" >\r\n\t\t\t\t<button data-dojo-attach-point=\"collateral_sizecollateral_size_btn\" data-dojo-type=\"dijit/form/Button\" data-dojo-props='label:\"Set Collateral Size\",type:\"submit\"'></button>\r\n\t\t\t</form>\r\n\t\t</td></tr>\r\n\t\t<tr><td class=\"prmaxrowtag\">Email Day Limit</td><td>\r\n\t\t\t<form data-dojo-attach-point=\"emaillimitform\"  onsubmit=\"return false\" data-dojo-type=\"dijit/form/Form\">\r\n\t\t\t\t<input data-dojo-props='type:\"text\",name:\"max_emails_for_day\"' data-dojo-type=\"dijit/form/NumberTextBox\" data-dojo-attach-point=\"max_emails_for_day\" >\r\n\t\t\t\t<button data-dojo-attach-point=\"email_limit_btn\" data-dojo-type=\"dijit/form/Button\" data-dojo-props='label:\"Set Email Day Limit\",type:\"submit\"'></button>\r\n\t\t\t</form>\r\n\t\t</td></tr>\r\n\t\t<tr><td class=\"prmaxrowtag\" valign=\"top\">Demo Status</td><td>\r\n\t\t\t<form data-dojo-attach-point=\"demoaccountform\"  onsubmit=\"return false\" data-dojo-type=\"dijit/form/Form\">\r\n\t\t\t\t<table style=\"width:100%;border-collapse:collapse;\" cellspacing=\"0\" cellpadding=\"0\">\r\n\t\t\t\t\t<tr><td class=\"prmaxrowtag\" width=\"20%\">Core</td><td align=\"left\"><input data-dojo-props='type:\"text\",name:\"demo\"' data-dojo-type=\"dijit/form/CheckBox\" data-dojo-attach-point=\"demoaccount_check\"></td></tr>\r\n\t\t\t\t\t<tr><td class=\"prmaxrowtag\">Features</td><td><input data-dojo-props='type:\"text\",name:\"isadvancedemo\"' data-dojo-type=\"dijit/form/CheckBox\" data-dojo-attach-point=\"isadvancedemo\"></td></tr>\r\n\t\t\t\t\t<tr><td class=\"prmaxrowtag\">Monitoring</td><td><input data-dojo-props='type:\"text\",name:\"ismonitoringdemo\"' data-dojo-type=\"dijit/form/CheckBox\" data-dojo-attach-point=\"ismonitoringdemo\"></td></tr>\r\n\t\t\t\t\t<tr><td></td><td><button data-dojo-attach-point=\"demoaccountset\" data-dojo-type=\"dijit/form/Button\" data-dojo-props='label:\"Change Demo Status\",type:\"submit\"'></button>\r\n\t\t\t\t\t<button data-dojo-attach-point=\"reactive_demo\" data-dojo-type=\"dijit/form/Button\" data-dojo-props='label:\"Re-Activate Demo\",type:\"button\",\"class\":\"prmaxhidden\"' data-dojo-attach-event=\"onClick:_ReActiveDemo\" ></button></td></tr>\r\n\t\t\t\t</table>\r\n\t\t\t</form>\r\n\t\t</td></tr>\r\n\t\t<tr><td class=\"prmaxrowtag\">Email Enabled</td><td>\r\n\t\t\t<form data-dojo-attach-point=\"emailenabledform\"  data-dojo-props='onsubmit:\"return false\"' data-dojo-type=\"dijit/form/Form\">\r\n\t\t\t\t<input data-dojo-props='type:\"text\",name:\"useemail\",value:\"1\"' data-dojo-type=\"dijit/form/CheckBox\" data-dojo-attach-point=\"useemail_check\">\r\n\t\t\t\t<label> Email Test Mode</label>\r\n\t\t\t\t<input data-dojo-props='type:\"text\",name:\"emailistestmode\",value:\"1\"' data-dojo-type=\"dijit/form/CheckBox\" data-dojo-attach-point=\"emailistestmode_check\">\r\n\t\t\t\t<button data-dojo-attach-point=\"useemailset\" data-dojo-type=\"dijit/form/Button\" data-dojo-props='label:\"Change Email Status\",type:\"submit\"'></button>\r\n\t\t\t</form>\r\n\t\t</td></tr>\r\n\t\t<tr><td class=\"prmaxrowtag\">Is Internal Account</td><td>\r\n\t\t\t\t<input data-dojo-props='type:\"text\",name:\"isinternal\"' data-dojo-type=\"dijit/form/CheckBox\" data-dojo-attach-point=\"isinternal\">\r\n\t\t\t\t<button data-dojo-type=\"dijit/form/Button\" data-dojo-props='label:\"Change Internal Status\",type:\"button\"' data-dojo-attach-event=\"onClick:_ChangeInternalStatus\"></button>\r\n\t\t</td></tr>\r\n\t\t<tr><td class=\"prmaxrowtag\">Delete Account</td>\r\n\t\t\t<td><button data-dojo-attach-point=\"deleteaccount\" data-dojo-attach-event=\"onClick: _DeleteAccount\" data-dojo-type=\"dijit/form/Button\" data-dojo-props='label:\"Delete Account\",type:\"button\"' ></button></td></tr>\r\n\t\t<tr><td class=\"prmaxrowtag\" valign=\"top\">Modules</td><td>\r\n\t\t\t<table>\r\n\t\t\t\t<tr><td class=\"prmaxrowtag\" align=\"right\">Professional</td>\r\n\t\t\t\t\t<td><input data-dojo-attach-point=\"is_bundle\" data-dojo-props='name:\"is_bundle\",type:\"checkBox\",value:true' data-dojo-type=\"dijit/form/CheckBox\" data-dojo-attach-event=\"_bundle_settings\"></td><td></td></tr>\r\n\t\t\t\t<tr><td class=\"prmaxrowtag\" align=\"right\">Features</td>\r\n\t\t\t\t\t<td><input data-dojo-attach-point=\"advancefeatures\" data-dojo-props='name:\"advancefeatures\",type:\"checkBox\",value:true' data-dojo-type=\"dijit/form/CheckBox\" ></td><td></td></tr>\r\n\t\t\t\t<tr><td class=\"prmaxrowtag\" align=\"right\">Crm</td>\r\n\t\t\t\t\t<td><input data-dojo-attach-point=\"crm\" data-dojo-props='name:\"crm\",type:\"checkBox\",value:true' data-dojo-type=\"dijit/form/CheckBox\"></td></tr>\r\n\t\t\t\t<tr><td class=\"prmaxrowtag\" align=\"right\">International Data</td>\r\n\t\t\t\t\t<td><input data-dojo-attach-point=\"has_international_data\" data-dojo-props='name:\"has_international_data\",type:\"checkBox\",value:true' data-dojo-type=\"dijit/form/CheckBox\"></td></tr>\r\n\t\t\t\t<tr>\r\n\t\t\t\t\t<td class=\"prmaxrowtag\" align=\"right\">Monitoring</td>\r\n\t\t\t\t\t<td><input data-dojo-attach-point=\"updatum\" data-dojo-props='name:\"updatum\",type:\"checkBox\",value:true' data-dojo-type=\"dijit/form/CheckBox\" data-dojo-attach-event=\"onClick:_CheckLayout\" ></td>\r\n\t\t\t\t\t<td><table width=\"100%\" data-dojo-attach-point=\"max_users_monitoring\" class=\"prmaxhidden\"><tr><td class=\"prmaxrowtag\">Max Logins</td>\r\n\t\t\t\t\t<td><input data-dojo-props='name:\"maxmonitoringusers\",type:\"text\"' data-dojo-type=\"dijit/form/NumberTextBox\" data-dojo-attach-point=\"maxmonitoringusers\" ></td></tr></table></td>\r\n\t\t\t\t</tr>\r\n\t\t\t\t<tr><td class=\"prmaxrowtag\" align=\"right\">News Room's</td>\r\n\t\t\t\t<td><input data-dojo-attach-point=\"has_news_rooms\" data-dojo-props='name:\"has_news_rooms\",type:\"checkBox\",value:true' data-dojo-type=\"dijit/form/CheckBox\"></td><td></td></tr>\r\n\t\t\t\t<tr><td class=\"prmaxrowtag\" align=\"right\">SEO</td>\r\n\t\t\t\t<td><input data-dojo-attach-point=\"seo\" data-dojo-props='name:\"seo\",type:\"checkBox\",value:true' data-dojo-type=\"dijit/form/CheckBox\"></td></tr>\r\n\t\t\t\t<tr><td class=\"prmaxrowtag\" align=\"right\">Journo Requests</td>\r\n\t\t\t\t<td><input data-dojo-attach-point=\"has_journorequests\" data-dojo-props='name:\"has_journorequests\",type:\"checkBox\",value:true' data-dojo-type=\"dijit/form/CheckBox\"></td></tr>\r\n\t\t\t\t<tr><td class=\"prmaxrowtag\" align=\"right\">Clippings</td>\r\n\t\t\t\t<td><input data-dojo-attach-point=\"has_clippings\" data-dojo-props='name:\"has_clippings\",type:\"checkBox\",value:true' data-dojo-type=\"dijit/form/CheckBox\" ></td>\r\n\t\t\t\t<td><button data-dojo-attach-event=\"onClick:_UpdateModules\" data-dojo-type=\"dijit/form/Button\" data-dojo-props='label:\"Update Modules\",type:\"button\"' ></button></td></tr>\r\n\t\t\t</table></td>\r\n\t\t</tr>\r\n\t\t<tr><td class=\"prmaxrowtag\">Support User</td><td>\r\n\t\t\t\t<select data-dojo-attach-point=\"support_userid\" data-dojo-props=\"autoComplete:true,searchAttr:'name',labelType:'html',required:true\" data-dojo-type=\"dijit/form/FilteringSelect\" ></select>\r\n\t\t\t\t<button data-dojo-props='\"class\":\"prmaxbutton\",type:\"button\",label:\"Set Support User to Customer\"' data-dojo-attach-event=\"onClick:_SetCustomer\" data-dojo-type=\"dijit/form/Button\"></button>\r\n\t\t</td></tr>\r\n\t\t<tr><td class=\"prmaxrowtag\">SEO Free Qty</td>\r\n\t\t\t<td class=\"prmaxrowtag\"><button data-dojo-type=\"dijit/form/Button\" data-dojo-attach-event=\"onClick:_SetSeoCount\" data-dojo-props='label:\"Set SEO Free Count\"'></button></td></tr>\r\n\t\t<tr><td class=\"prmaxrowtag\">Extended Email Subject</td><td>\r\n\t\t\t\t<input data-dojo-props='type:\"text\",name:\"has_extended_email_subject\"' data-dojo-type=\"dijit/form/CheckBox\" data-dojo-attach-point=\"has_extended_email_subject\">\r\n\t\t\t\t<button data-dojo-type=\"dijit/form/Button\" data-dojo-props='label:\"Change Extended Subject\",type:\"button\"' data-dojo-attach-event=\"onClick:_change_extended_subject\"></button>\r\n\t\t</td></tr>\r\n\t</table>\r\n<div data-dojo-attach-point=\"expirectrl\" data-dojo-type=\"control/customer/options/SetExpireDate\" ></div>\r\n<div data-dojo-type=\"dijit/Dialog\" data-dojo-props='title:\"Re-Activate Demo\"' data-dojo-attach-point=\"reactiveatedialog\">\r\n\t<div data-dojo-attach-point=\"reactiveatectrl\" data-dojo-type=\"control/customer/options/ReActivateDemo\"></div>\r\n</div>\r\n<div data-dojo-type=\"control/customer/options/SetFreeSEOCount\" data-dojo-attach-point=\"seofree\"></div>\r\n\r\n\r\n</div>\r\n","url:dijit/form/templates/ValidationTextBox.html":"<div class=\"dijit dijitReset dijitInline dijitLeft\"\r\n\tid=\"widget_${id}\" role=\"presentation\"\r\n\t><div class='dijitReset dijitValidationContainer'\r\n\t\t><input class=\"dijitReset dijitInputField dijitValidationIcon dijitValidationInner\" value=\"&#935; \" type=\"text\" tabIndex=\"-1\" readonly=\"readonly\" role=\"presentation\"\r\n\t/></div\r\n\t><div class=\"dijitReset dijitInputField dijitInputContainer\"\r\n\t\t><input class=\"dijitReset dijitInputInner\" data-dojo-attach-point='textbox,focusNode' autocomplete=\"off\"\r\n\t\t\t${!nameAttrSetting} type='${type}'\r\n\t/></div\r\n></div>\r\n","url:control/customer/templates/partner_add.html":"<div>\r\n\t<h1>Add New customer</h1>\r\n\t<form  data-dojo-attach-point=\"form\" data-dojo-type=\"dijit/form/Form\" data-dojo-props='\"class\":\"prmaxdefault\",onsubmit:\"return false;\"'>\r\n\t\t<table width=\"600px\" border=\"0\">\r\n\t\t\t<tr><td class=\"prmaxrowtag\" align=\"right\">Title</td><td><input data-dojo-attach-point=\"contact_title\" data-dojo-type=\"dijit/form/TextBox\" data-dojo-props='\"class\":\"prmaxinput\",name:\"contact_title\",type:\"text\",trim:true,style:\"width:2em;\"'></td></tr>\r\n\t\t\t<tr><td class=\"prmaxrowtag\" align=\"right\">First Name</td><td><input data-dojo-props='\"class\":\"prmaxrequired\",name:\"contact_firstname\",type:\"text\",trim:true,required:true' data-dojo-attach-point=\"contact_firstname\" data-dojo-type=\"dijit/form/ValidationTextBox\" style=\"width: 8em;\"></td></tr>\r\n\t\t\t<tr><td class=\"prmaxrowtag\" align=\"right\">Surname</td><td><input data-dojo-props='\"class\":\"prmaxrequired\",name:\"contact_surname\",type:\"text\",trim:true,required:true' data-dojo-attach-point=\"contact_surname\" data-dojo-type=\"dijit/form/ValidationTextBox\" style=\"width: 12em;\"></td></tr>\r\n\t\t\t<tr><td align=\"right\" class=\"prmaxrowtag\">Job Title</td><td><input data-dojo-attach-point=\"contactjobtitle\" data-dojo-props='\"class\":\"prmaxinput\",name:\"contactjobtitle\",type:\"text\",trim:true,maxlength:\"80\",style:\"width:100%\"' data-dojo-type=\"dijit/form/TextBox\"></td></tr>\r\n\t\t\t<tr><td align=\"right\" class=\"prmaxrowtag\">Business Name</td><td><input data-dojo-attach-point=\"customername\" data-dojo-props='\"class\":\"prmaxrequired\",name:\"customername\",type:\"text\",trim:true,required:true,maxlength:\"80\",invalidMessage:\"Please Enter the name of the business\",style:\"width:100%\"' data-dojo-type=\"dijit/form/ValidationTextBox\"></td></tr>\r\n\t\t\t<tr><td align=\"right\" class=\"prmaxrowtag\">Email:</td><td><input data-dojo-attach-point=\"email\" data-dojo-type=\"dijit/form/ValidationTextBox\" data-dojo-props='\"class\":\"prmaxrequired\",name:\"email\",type:\"text\",size:\"40\",maxlength:\"80\",trim:true,required:true,lowercase:true,pattern:dojox.validate.regexp.emailAddress,trim:true,invalidMessage:\"invalid email address\",style:\"width:100%\",maxlength:\"79\"'/></td></tr>\r\n\t\t\t<tr><td colspan=\"2\">\r\n\t\t\t\t<div data-dojo-type=\"dojox/form/PasswordValidator\" data-dojo-props='name:\"password\",\"class\":\"prmaxrowtag\"' data-dojo-attach-point=\"password\">\r\n\t\t\t\t\t<table class=\"prmaxtable\" width=\"100%\">\r\n\t\t\t\t\t\t<tr><td align=\"right\" class=\"prmaxrowtag\" width=\"30%\">Password:</td><td><input class=\"prmaxrequired\" type=\"password\" pwType=\"new\" /></td></tr>\r\n\t\t\t\t\t\t<tr><td align=\"right\" class=\"prmaxrowtag\">Verify:</td><td><input class=\"prmaxrequired\" type=\"password\" pwType=\"verify\" /></td></tr>\r\n\t\t\t\t\t</table>\r\n\t\t\t\t</div>\r\n\t\t\t</td></tr>\r\n\t\t\t<tr><td align=\"right\" class=\"prmaxrowtag\">Address:</td><td><input data-dojo-attach-point=\"address1\" data-dojo-props='\"class\":\"prmaxrequired\",name:\"address1\",type:\"text\",required:true,invalidMessage:\"Please Enter first line of address\",style:\"width:100%\"' data-dojo-type=\"dijit/form/ValidationTextBox\"/></td></tr>\r\n\t\t\t<tr><td align=\"right\" class=\"prmaxrowtag\">Address 2:</td><td><input data-dojo-attach-point=\"address2\" data-dojo-props='\"class\":\"prmaxinput\",name:\"address2\",type:\"text\",maxlength:\"80\",style:\"width:100%\"' data-dojo-type=\"dijit/form/TextBox\"/></td></tr>\r\n\t\t\t<tr><td align=\"right\" class=\"prmaxrowtag\">Town</td><td><input data-dojo-attach-point=\"townname\" data-dojo-props='name:\"townname\",type:\"text\",maxLength:\"40\"' data-dojo-type=\"dijit/form/TextBox\"/></td></tr>\r\n\t\t\t<tr><td align=\"right\" class=\"prmaxrowtag\">County</td><td><input data-dojo-attach-point=\"county\" class=\"prmaxinput\" name=\"county\" type=\"text\" data-dojo-type=\"dijit/form/TextBox\"/></td></tr>\r\n\t\t\t<tr><td align=\"right\" class=\"prmaxrowtag\">Postcode:</td><td><input data-dojo-attach-point=\"postcode\" data-dojo-props='\"class\":\"prmaxrequired\",name:\"postcode\",type:\"text\",style:\"width:10em\",maxlength:\"10\",required:true,invalidMessage:\"Please Enter a post code\"' data-dojo-type=\"dijit/form/ValidationTextBox\"/></td></tr>\r\n\t\t\t<tr><td align=\"right\" class=\"prmaxrowtag\">Country</td><td><select data-dojo-attach-point=\"countryid\" data-dojo-props='autoComplete:true,\"class\":\"prmaxinput\",name:\"countryid\",style:\"width:15em\"' data-dojo-attach-event=\"onChange:_show_vat\" data-dojo-type=\"dijit/form/Select\" ></select></td></tr>\r\n\t\t\t<tr class=\"prmaxhidden\" data-dojo-attach-point=\"vatnumber_view\"><td align=\"right\" class=\"prmaxrowtag\">Vat No</td><td><input data-dojo-attach-point=\"vatnumber\" data-dojo-props='\"class\":\"prmaxrequired\",trim:true,name:\"vatnumber\",type:\"text\",size:25,maxlength:40' data-dojo-type=\"dijit/form/TextBox\" /></td></tr>\r\n\t\t\t<tr><td align=\"right\" class=\"prmaxrowtag\">Tel:</td><td><input class=\"prmaxrequired\" data-dojo-attach-point=\"tel\" data-dojo-props='name:\"tel\",type:\"text\",size:\"25\",maxlength:\"40\",required:true,invalidMessage:\"Please enter a contact telephone number\"' data-dojo-type=\"dijit/form/ValidationTextBox\" /></td></tr>\r\n\t\t\t<tr><td align=\"right\" class=\"prmaxrowtag\">Features</td><td><input data-dojo-attach-point=\"advancefeatures\" data-dojo-type=\"dijit/form/CheckBox\" data-dojo-props='\"class\":\"prmaxinput\",name:\"advancefeatures\",value:\"1\"'/></td></tr>\r\n\t\t\t<tr><td align=\"right\" class=\"prmaxrowtag\">Nbr Logins</td><td><input data-dojo-type=\"dijit/form/NumberTextBox\" type=\"text\" name=\"maxnbrofusersaccounts\" required=\"true\" value=\"3\" data-dojo-props=\"constraints:{min:1,max:11,places:0},invalidMessage:'Please enter a numeric value.',rangeMessage:'Invalid elevation.',style:'width:2em'\" data-dojo-attach-point=\"maxnbrofusersaccounts\"/></td></tr>\r\n\t\t\t<tr><td align=\"right\" class=\"prmaxrowtag\">Concurrent Users</td><td><input data-dojo-type=\"dijit/form/NumberTextBox\" type=\"text\" name=\"logins\" required=\"true\" value=\"1\" data-dojo-props=\"constraints:{min:1,max:5,places:0},invalidMessage:'Please enter a numeric value.',rangeMessage:'Invalid elevation.',style:'width:2em'\" data-dojo-attach-point=\"logins\"/></td></tr>\r\n\t\t\t<tr><td align=\"right\" class=\"prmaxrowtag\">Is Demo</td><td><input data-dojo-attach-point=\"isdemo\" data-dojo-type=\"dijit/form/CheckBox\" data-dojo-props='\"class\":\"prmaxinput\",name:\"isdemo\"' data-dojo-attach-event=\"onChange:_demo_active\"/></td></tr>\r\n\t\t\t<tr><td align=\"right\" class=\"prmaxrowtag\">Start Date</td><td><input data-dojo-props='type:\"text\",name:\"startdate\",required:true,style:\"width:8em\"' data-dojo-attach-point=\"startdate\" data-dojo-type=\"dijit/form/DateTextBox\" ></td></tr>\r\n\t\t\t<tr><td align=\"right\" class=\"prmaxrowtag\">End Date</td><td><input data-dojo-props='type:\"text\",name:\"enddate\",required:true,style:\"width:8em\"' data-dojo-attach-point=\"enddate\" data-dojo-type=\"dijit/form/DateTextBox\" ></td></tr>\r\n\t\t\t<tr><td align=\"right\" class=\"prmaxrowtag\">Notes</td><td><div class=\"stdframe\" style=\"height:150px;\" ><textarea data-dojo-attach-point=\"details\" data-dojo-type=\"dijit/form/Textarea\" data-dojo-props='name:\"details\",trim:true,required:true,style:\"width:99%;height:80%\"' ></textarea></div></td></tr>\r\n\t\t\t<tr><td class=\"prmaxrowtag\" colspan=\"2\" align=\"right\"><button data-dojo-attach-point=\"save_node\" data-dojo-type=\"dojox/form/BusyButton\" data-dojo-attach-event=\"onClick:_customer_save\" data-dojo-props='busyLabel:\"Please Wait Creating...\",label:\"Create Account\",\"class\":\"prmaxbutton\"'></button></td></tr>\r\n\t\t</table>\r\n\t</form>\r\n</div>\r\n\r\n\r\n\r\n","url:control/customer/templates/manual_allocate_amount.html":"<div>\r\n\t<div data-dojo-attach-point=\"popup_view\" data-dojo-type=\"dijit/Dialog\" data-dojo-props='title:\"Enter Amount Remaining\"'>\r\n\t\t<br/>\r\n\t\t<table width=\"300px\" cellpadding=\"0\" cellpadding=\"0\" >\r\n\t\t\t<tr><td colspan>Amount</td><td><input data-dojo-props='type:\"text\",name:\"value\",trim:true,style:\"width:8em\",constraints:{min:0.01,max:99999.00,fractional:true,places:\"0,2\"}' data-dojo-type=\"dijit/form/CurrencyTextBox\" data-dojo-attach-point=\"toallocate_value\" ></input></td></tr>\r\n\t\t\t<tr>\r\n\t\t\t\t<td align=\"left\"><button data-dojo-type=\"dijit/form/Button\" data-dojo-props='type:\"button\"' data-dojo-attach-event=\"onClick:_close\">Close</button></td>\r\n\t\t\t\t<td align=\"right\"><button data-dojo-type=\"dijit/form/Button\" data-dojo-props='type:\"button\"' data-dojo-attach-event=\"onClick:_allocate\">Allocate</button></td>\r\n\t\t\t</tr>\r\n\t\t</table>\r\n\t</div>\r\n</div>\r\n","url:control/accounts/templates/PriceCodes.html":"<div>\r\n\t<div data-dojo-attach-point=\"borderControl\" data-dojo-type=\"dijit/layout/BorderContainer\" data-dojo-props='style:\"width:100%;height:100%\",gutters:false'>\r\n\t\t<div data-dojo-type=\"dijit/layout/ContentPane\" data-dojo-props='region:\"top\",style:\"height:35px;width:100%;overflow:hidden;border:1px solid black\"'>\r\n\t\t\t<div class=\"dijitToolbarTop\" data-dojo-type=\"dijit/Toolbar\" data-dojo-props='style:\"float:left:height:100%;width:100%\",\"class\":\"prmaxbuttonlarge\"' >\r\n\t\t\t\t<div data-dojo-type=\"dijit/form/Button\" data-dojo-props='iconClass:\"PrmaxResultsIcon PrmaxResultsEmpty\",showLabel:true' data-dojo-attach-event=\"onClick:_New\">New</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t\t<div data-dojo-attach-point=\"view_grid\" data-dojo-type=\"dijit/layout/ContentPane\" data-dojo-props='region:\"center\",splitter:true'></div>\t\r\n\t</div>\r\n\t<div data-dojo-type=\"dijit/Dialog\" title=\"New Price Code\" data-dojo-attach-point=\"pricecodedialog\">\r\n\t\t<form data-dojo-attach-point=\"form\" onsubmit=\"return false\" data-dojo-type=\"dijit/form/Form\">\r\n\t\t\t<table style=\"width:500px;border-collapse:collapse;\" cellpadding=\"0\" cellspacing=\"0\">\r\n\t\t\t\t<tr><td align=\"right\" class=\"prmaxrowtag\" >Products</td><td><input data-dojo-props='type:\"text\",required:true,name:\"customerproductid\",style:\"width:300px\"' data-dojo-attach-point=\"customerproductid\" data-dojo-type=\"dijit/form/FilteringSelect\"></td></tr>\r\n\t\t\t\t<tr><td align=\"right\" class=\"prmaxrowtag\" width=\"150px\">Price Code</td><td><input data-dojo-props='type:\"text\",required:true,name:\"pricecodedescription\",style:\"width:150px\"' data-dojo-attach-point=\"pricecodedescription\" data-dojo-type=\"dijit/form/ValidationTextBox\"></td></tr>\r\n\t\t\t\t<tr><td align=\"right\" class=\"prmaxrowtag\" >Price Description</td><td><input data-dojo-props='type:\"text\",required:true,name:\"pricecodelongdescription\",style:\"width:300px\"' data-dojo-attach-point=\"pricecodelongdescription\" data-dojo-type=\"dijit/form/ValidationTextBox\" ></td></tr>\r\n\t\t\t\t<tr><td align=\"right\" class=\"prmaxrowtag\" >Module Type</td><td><select data-dojo-props='\"class\":\"prmaxinput\",name:\"prmaxmoduleid\",style:\"width:10em\",autoComplete:true,required:true' data-dojo-attach-point=\"prmaxmoduleid\" data-dojo-type=\"dijit/form/FilteringSelect\" ></select>\r\n\t\t\t\t\r\n\t\t\t\t<tr><td align=\"right\" class=\"prmaxrowtag\" >Partners</td><td><select data-dojo-props='\"class\":\"prmaxinput\",name:\"customersourceid\",style:\"width:10em\"' data-dojo-attach-point=\"customersourceid\" data-dojo-type=\"dijit/form/FilteringSelect\" ></select>\r\n\r\n\t\t\t\t<tr><td align=\"right\" class=\"prmaxrowtag\" >Fixed Sales Price</td><td><input data-dojo-props='\"class\":\"prmaxinput\",type:\"text\",name:\"fixed_salesprice\",required:true,trim:true,style:\"width:8em\",constraints:{min:0.00,max:99999.00,fractional:true,places:\"0,2\"}' data-dojo-type=\"dijit/form/CurrencyTextBox\" data-dojo-attach-point=\"fixed_salesprice\"  ></input>\r\n\t\t\t\t<tr><td align=\"right\" class=\"prmaxrowtag\" >Fixed Renewal Price</td><td><input data-dojo-props='\"class\":\"prmaxinput\",type:\"text\",name:\"fixed_renewalprice\",required:true,trim:true,style:\"width:8em\",constraints:{min:0.01,max:99999.00,fractional:true,places:\"0,2\"}' data-dojo-type=\"dijit/form/CurrencyTextBox\" data-dojo-attach-point=\"fixed_renewalprice\" ></input>\r\n\t\t\t\t<tr><td align=\"right\" class=\"prmaxrowtag\" >Monthly Sales Price</td><td><input data-dojo-props='\"class\":\"prmaxinput\",type:\"text\",name:\"monthly_salesprice\",required:true,trim:true,style:\"width:8em\",constraints:{min:0.00,max:99999.00,fractional:true,places:\"0,2\"}' data-dojo-type=\"dijit/form/CurrencyTextBox\" data-dojo-attach-point=\"monthly_salesprice\"></input>\r\n\t\t\t\t<tr><td align=\"right\" class=\"prmaxrowtag\" >Monthly Renewal Price</td><td><input data-dojo-props='\"class\":\"prmaxinput\",type:\"text\",name:\"monthly_renewalprice\",required:true,trim:true,style:\"width:8em\",constraints:{min:0.01,max:99999.00,fractional:true,places:\"0,2\"}' data-dojo-type=\"dijit/form/CurrencyTextBox\" data-dojo-attach-point=\"monthly_renewalprice\" ></input>\r\n\t\t\t\t<tr><td align=\"right\" class=\"prmaxrowtag\" >Concurrent Users</td><td><input data-dojo-props='\"class\":\"prmaxinput\",type:\"text\",name:\"concurrentusers\",required:true,trim:true,style:\"width:5em\",constraints:{min:1,max:200}' data-dojo-type=\"dijit/form/NumberTextBox\" data-dojo-attach-point=\"concurrentusers\" ></input>\r\n\t\t\t\t<tr><td align=\"right\" class=\"prmaxrowtag\" >Paid Months</td><td><input data-dojo-props='\"class\":\"prmaxinput\",type:\"text\",name:\"paid_months\",required:true,trim:true,style:\"width:5em\",constraints:{min:1,max:50}' data-dojo-type=\"dijit/form/NumberTextBox\" data-dojo-attach-point=\"paid_months\"></input>\r\n\t\t\t\t<tr><td colspan=\"2\"><br/></td></tr>\r\n\t\t\t\t<tr>\r\n\t\t\t\t\t<td><button data-dojo-props='type:\"button\",label:\"Close\"' data-dojo-attach-event=\"onClick:_Close\" data-dojo-type=\"dijit/form/Button\"></button></td>\r\n\t\t\t\t\t<td align=\"right\"><button data-dojo-props='type:\"button\",busyLabel:\"Adding ...\",label:\"Add Price Code\"' data-dojo-attach-point=\"addbtn\" data-dojo-attach-event=\"onClick:_Add\" data-dojo-type=\"dojox/form/BusyButton\"></button></td>\r\n\t\t\t\t</tr>\r\n\t\t\t</table>\r\n\t\t</form>\r\n\t</div>\r\n\t<div data-dojo-type=\"dijit/Dialog\" title=\"Update Price Code\" data-dojo-attach-point=\"pricecodeupddialog\">\r\n\t\t<form data-dojo-attach-point=\"formupd\"  onsubmit=\"return false\" data-dojo-type=\"dijit/form/Form\">\r\n\t\t\t<input type=\"hidden\" data-dojo-attach-point=\"pricecodeid\" name = \"pricecodeid\" data-dojo-type=\"dijit/form/TextBox\" />\r\n\t\t\t<table style=\"width:500px;border-collapse:collapse;\" cellpadding=\"0\" cellspacing=\"0\">\r\n\t\t\t\t<tr><td align=\"right\" class=\"prmaxrowtag\" >Products</td><td><input data-dojo-props='type:\"text\",required:true,name:\"customerproductid\",style:\"width:300px\"' data-dojo-attach-point=\"customerproductid2\" data-dojo-type=\"dijit/form/FilteringSelect\"></td></tr>\r\n\t\t\t\t<tr><td align=\"right\" class=\"prmaxrowtag\" width=\"150px\">New Price Code</td><td><input data-dojo-props='type:\"text\",required:true,name:\"pricecodedescription\",style:\"width:300px\"' data-dojo-attach-point=\"pricecodedescription2\" data-dojo-type=\"dijit/form/ValidationTextBox\"></td></tr>\r\n\t\t\t\t<tr><td align=\"right\" class=\"prmaxrowtag\" >Price Description</td><td><input data-dojo-props='type:\"text\",required:true,name:\"pricecodelongdescription\",style:\"width:300px\"' data-dojo-attach-point=\"pricecodelongdescription2\" data-dojo-type=\"dijit/form/ValidationTextBox\" ></td></tr>\r\n\t\t\t\t<tr><td align=\"right\" class=\"prmaxrowtag\" >Module Type</td><td><select  data-dojo-props='\"class\":\"prmaxinput\",name:\"prmaxmoduleid\",style:\"width:10em\",autoComplete:true,required:true' data-dojo-attach-point=\"prmaxmoduleid2\" data-dojo-type=\"dijit/form/FilteringSelect\" ></select>\r\n\r\n\t\t\t\t<tr><td align=\"right\" class=\"prmaxrowtag\" >Partners</td><td><select data-dojo-props='\"class\":\"prmaxinput\",name:\"customersourceid\",style:\"width:10em\"' data-dojo-attach-point=\"customersourceid2\" data-dojo-type=\"dijit/form/FilteringSelect\" ></select>\r\n\r\n\t\t\t\t<tr><td align=\"right\" class=\"prmaxrowtag\" >Fixed Sales Price</td><td><input data-dojo-props='\"class\":\"prmaxinput\",type:\"text\",name:\"fixed_salesprice\",required:true,trim:true,style:\"width:8em\",constraints:{min:0.00,max:99999.00,fractional:true,places:\"0,2\"}' data-dojo-type=\"dijit/form/CurrencyTextBox\" data-dojo-attach-point=\"fixed_salesprice2\"  ></input>\r\n\t\t\t\t<tr><td align=\"right\" class=\"prmaxrowtag\" >Fixed Renewal Price</td><td><input data-dojo-props='\"class\":\"prmaxinput\",type:\"text\",name:\"fixed_renewalprice\",required:true,trim:true,style:\"width:8em\",constraints:{min:0.01,max:99999.00,fractional:true,places:\"0,2\"}' data-dojo-type=\"dijit/form/CurrencyTextBox\" data-dojo-attach-point=\"fixed_renewalprice2\" ></input>\r\n\t\t\t\t<tr><td align=\"right\" class=\"prmaxrowtag\" >Monthly Sales Price</td><td><input data-dojo-props='\"class\":\"prmaxinput\",type:\"text\",name:\"monthly_salesprice\",required:true,trim:true,style:\"width:8em\",constraints:{min:0.00,max:99999.00,fractional:true,places:\"0,2\"}' data-dojo-type=\"dijit/form/CurrencyTextBox\" data-dojo-attach-point=\"monthly_salesprice2\"></input>\r\n\t\t\t\t<tr><td align=\"right\" class=\"prmaxrowtag\" >MOnthly Renewal Price</td><td><input data-dojo-props='\"class\":\"prmaxinput\",type:\"text\",name:\"monthly_renewalprice\",required:true,trim:true,style:\"width:8em\",constraints:{min:0.01,max:99999.00,fractional:true,places:\"0,2\"}' data-dojo-type=\"dijit/form/CurrencyTextBox\" data-dojo-attach-point=\"monthly_renewalprice2\" ></input>\r\n\t\t\t\t<tr><td align=\"right\" class=\"prmaxrowtag\" >Concurrent Users</td><td><input data-dojo-props='\"class\":\"prmaxinput\",type:\"text\",name:\"concurrentusers\",required:true,trim:true,style:\"width:5em\",constraints:{min:1,max:200}' data-dojo-type=\"dijit/form/NumberTextBox\" data-dojo-attach-point=\"concurrentusers2\" ></input>\r\n\t\t\t\t<tr><td align=\"right\" class=\"prmaxrowtag\" >Paid Months</td><td><input data-dojo-props='\"class\":\"prmaxinput\",type:\"text\",name:\"paid_months\",required:true,trim:true,style:\"width:5em\",constraints:{min:1,max:50}' data-dojo-type=\"dijit/form/NumberTextBox\" data-dojo-attach-point=\"paid_months2\"></input>\r\n\t\t\t\t<tr><td colspan=\"2\"><br/></td></tr>\r\n\t\t\t\t<tr>\r\n\t\t\t\t\t<td><button data-dojo-props='type:\"button\",label:\"Close\"' data-dojo-attach-event=\"onClick:_Close2\" data-dojo-type=\"dijit/form/Button\"></button></td>\r\n\t\t\t\t\t<td align=\"right\"><button data-dojo-props='type:\"button\",busyLabel:\"Updating ...\",label:\"Update Price Code\"' data-dojo-attach-point=\"updbtn\" data-dojo-attach-event=\"onClick:_Update\" data-dojo-type=\"dojox/form/BusyButton\" ></button></td>\r\n\t\t\t\t</tr>\r\n\t\t\t</table>\r\n\t\t</form>\r\n\t</div>\r\n</div>\r\n","url:dijit/form/templates/Select.html":"<table class=\"dijit dijitReset dijitInline dijitLeft\"\r\n\tdata-dojo-attach-point=\"_buttonNode,tableNode,focusNode,_popupStateNode\" cellspacing='0' cellpadding='0'\r\n\trole=\"listbox\" aria-haspopup=\"true\"\r\n\t><tbody role=\"presentation\"><tr role=\"presentation\"\r\n\t\t><td class=\"dijitReset dijitStretch dijitButtonContents\" role=\"presentation\"\r\n\t\t\t><div class=\"dijitReset dijitInputField dijitButtonText\"  data-dojo-attach-point=\"containerNode,textDirNode\" role=\"presentation\"></div\r\n\t\t\t><div class=\"dijitReset dijitValidationContainer\"\r\n\t\t\t\t><input class=\"dijitReset dijitInputField dijitValidationIcon dijitValidationInner\" value=\"&#935; \" type=\"text\" tabIndex=\"-1\" readonly=\"readonly\" role=\"presentation\"\r\n\t\t\t/></div\r\n\t\t\t><input type=\"hidden\" ${!nameAttrSetting} data-dojo-attach-point=\"valueNode\" value=\"${value}\" aria-hidden=\"true\"\r\n\t\t/></td\r\n\t\t><td class=\"dijitReset dijitRight dijitButtonNode dijitArrowButton dijitDownArrowButton dijitArrowButtonContainer\"\r\n\t\t\tdata-dojo-attach-point=\"titleNode\" role=\"presentation\"\r\n\t\t\t><input class=\"dijitReset dijitInputField dijitArrowButtonInner\" value=\"&#9660; \" type=\"text\" tabIndex=\"-1\" readonly=\"readonly\" role=\"presentation\"\r\n\t\t\t\t${_buttonInputDisabled}\r\n\t\t/></td\r\n\t></tr></tbody\r\n></table>\r\n","url:control/customer/templates/manual_credit.html":"<div>\r\n\t<form data-dojo-attach-point=\"form\" method=\"post\" name=\"form\" enctype=\"multipart/form-data\" onSubmit=\"return false;\">\r\n\t\t<input data-dojo-props='type:\"hidden\",name:\"icustomerid\"'  data-dojo-attach-point=\"icustomerid\" data-dojo-type=\"dijit/form/TextBox\" ></input>\r\n\t\t<input data-dojo-attach-point=\"invoice_date2\" data-dojo-props='name:\"credit_date\",type:\"hidden\"' data-dojo-type=\"dijit/form/TextBox\" ></input>\r\n\t\t<table width=\"600px\" cellpadding=\"0\" cellpadding=\"0\" >\r\n\t\t\t<tr><td colspan=\"2\"><label class=\"prmaxrowdisplaylarge\" style=\"text-align:center;display:inline\">Manual Credit</label><div style=\"display:inline\" class=\"prmaxrowdisplaylarge\" data-dojo-attach-point=\"customername\">Name</div></td></tr>\r\n\t\t\t<tr><td style=\"width:150px\" class=\"prmaxrowlabel\" align=\"right\">Reference</td><td><input data-dojo-attach-point=\"ref\" data-dojo-type=\"dijit/form/ValidationTextBox\" data-dojo-props='type:\"text\",name:\"ref\",style:\"width:8em\",required:true' ></td></tr>\r\n\t\t\t<tr><td class=\"prmaxrowlabel\" align=\"right\">Date</td><td><input data-dojo-attach-point=\"credit_date\" data-dojo-type=\"ttl/DateTextBox2\" data-dojo-props='type:\"text\",style:\"width:8em\",required:true' ></td></tr>\r\n\t\t\t<tr><td class=\"prmaxrowtag\" valign=\"top\" align=\"right\" >Message</td><td><div class=\"stdframe\" ><textarea data-dojo-attach-point=\"message\" data-dojo-type=\"dijit/form/Textarea\" data-dojo-props='name:\"message\",\"class\":\"dijitTextarea\",style:\"width:99%;height:99%\"'></textarea></div></td></tr>\r\n\t\t\t<tr><td align=\"right\" class=\"prmaxrowlabel\">Amount</td><td><input data-dojo-type=\"dijit/form/CurrencyTextBox\" data-dojo-props='type:\"text\",name:\"amount\",style:\"width:8em\",required:true,trim:true,constraints:{min:0.01,max:99999.00,fractional:true,places:\"0,2\"}' data-dojo-attach-point=\"amount\" data-dojo-attach-event=\"onBlur:_amounts\"></input></td></tr>\r\n\t\t\t<tr><td align=\"right\" class=\"prmaxrowlabel\">Vat</td><td><input data-dojo-type=\"dijit/form/CurrencyTextBox\" data-dojo-props='type:\"text\",name:\"vat\",required:true,constraints:{min:0.00,max:99999.00,fractional:true,places:\"0,2\"},style:\"width:8em\"' data-dojo-attach-point=\"vat\"></input></td></tr>\r\n\t\t\t<tr><td align=\"right\" class=\"prmaxrowlabel\" >Unpaid Amount</td><td><input data-dojo-type=\"dijit/form/CurrencyTextBox\" data-dojo-attach-point=\"unpaidamount\" data-dojo-props='type:\"text\",name:\"unpaidamount\",required:true,style:\"width:8em\",constraints:{min:0.00,max:99999.00,fractional:true,places:\"0,2\"}'></input></td></tr>\r\n\t\t\t<tr><td align=\"right\" class=\"prmaxrowlabel\">Credit File (pdf)</td><td><input class=\"prmaxinput\" type=\"file\" data-dojo-attach-point=\"credit_file\" name=\"credit_file\" size=\"50\"></input></td></tr>\r\n\t\t\t<tr><td class=\"prmaxrowlabel\" align=\"right\" colspan=\"2\" align=\"right\"><button data-dojo-type=\"dijit/form/Button\" type=\"button\" data-dojo-attach-event=\"onClick:_send\">Enter Manual Credit Note</button></td></tr>\r\n\t\t</table>\r\n\t</form>\r\n</div>\r\n","url:control/customer/options/templates/SetExpireDate.html":"<div>\r\n\t<div data-dojo-attach-point=\"dlg\" data-dojo-type=\"dijit.Dialog\" title=\"Set Expire Date\">\r\n\t\t<form data-dojo-attach-point=\"form\"  onsubmit=\"return false\" data-dojo-type=\"dijit.form.Form\">\r\n\t\t\t<input data-dojo-props='type:\"hidden\", name:\"icustomerid\"' data-dojo-attach-point=\"icustomerid\" data-dojo-type=\"dijit/form/TextBox\">\r\n\t\t\t<input data-dojo-props='type:\"hidden\", name:\"taskid\"'  data-dojo-attach-point=\"taskid\" data-dojo-type=\"dijit/form/TextBox\">\r\n\t\t\t<table style=\"width:400px;border-collapse:collapse;\" cellpadding=\"0\" cellspacing=\"0\">\r\n\t\t\t<tr><td width=\"15%\"></td><td class=\"prmaxrowtag\" >Start Date</td><td class=\"prmaxrowtag\" >Expire Date</td></tr>\r\n\t\t\t<tr><td align=\"right\" class=\"prmaxrowtag\" width=\"25%\">Media</td>\r\n\t\t\t\t<td><input data-dojo-props='type:\"text\",required:true,name:\"licence_start_date\",style:\"width:8em\"' data-dojo-attach-point=\"licence_start_date\"  data-dojo-type=\"dijit/form/DateTextBox\" ></td>\r\n\t\t\t\t<td><input data-dojo-props='type:\"text\",required:true,name:\"licence_expire\",style:\"width:8em\"' data-dojo-attach-point=\"licence_expire\" data-dojo-type=\"dijit/form/DateTextBox\"></td>\r\n\t\t\t</tr>\r\n\t\t\t<tr data-dojo-attach-point=\"view1\"><td align=\"right\" class=\"prmaxrowtag\">Features</td>\r\n\t\t\t\t<td><input data-dojo-props='type:\"text\",name:\"advance_licence_start\",style:\"width:8em\"' data-dojo-attach-point=\"advance_licence_start\" data-dojo-type=\"dijit/form/DateTextBox\"></td>\r\n\t\t\t\t<td><input data-dojo-props='type:\"text\",name:\"advance_licence_expired\",style:\"width:8em\"' data-dojo-attach-point=\"advance_licence_expired\" data-dojo-type=\"dijit/form/DateTextBox\"></td>\r\n\t\t\t</tr>\r\n\t\t\t<tr data-dojo-attach-point=\"view2\"><td align=\"right\" class=\"prmaxrowtag\">Monitoring</td>\r\n\t\t\t\t<td><input data-dojo-props='type:\"text\",name:\"updatum_start_date\",style:\"width:8em\"' data-dojo-attach-point=\"updatum_start_date\" data-dojo-type=\"dijit/form/DateTextBox\"></td>\r\n\t\t\t\t<td><input data-dojo-props='type:\"text\",name:\"updatum_end_date\",style:\"width:8em\"' data-dojo-attach-point=\"updatum_end_date\" data-dojo-type=\"dijit/form/DateTextBox\"></td>\r\n\t\t\t</tr>\r\n\t\t\t<tr><td align=\"right\" valign=\"top\" class=\"prmaxrowtag\">Reason</td>\r\n\t\t\t\t<td colspan=\"2\"><div data-dojo-props='\"class\":\"stdframe prmaxrequired\",style:\"height:150px;\"'>\r\n\t\t\t\t\t\t\t\t<textarea data-dojo-props='\"class\":\"prmaxrequired\",name:\"reason\",trim:true,required:true,style:\"width:99%;height:80%\",rows:\"5\",cols:\"50\"' data-dojo-attach-point=\"reason\" data-dojo-type=\"dijit/form/SimpleTextarea\"></textarea></div></td></tr>\r\n\t\t\t<tr><td colspan=\"3\"><br/></td></tr>\r\n\t\t\t<tr><td><button data-dojo-props='type:\"button\",label:\"Close\"' data-dojo-attach-event=\"onClick:_Close\" data-dojo-type=\"dijit/form/Button\"></button></td>\r\n\t\t\t\t<td colspan=\"2\" align=\"right\"><button data-dojo-props='type:\"button\",label:\"Set Expire Date\"' data-dojo-attach-event=\"onClick:_Update\" data-dojo-type=\"dijit/form/Button\"></button></td></tr>\r\n\t\t\t</table>\r\n\t\t</form>\r\n\t</div>\r\n</div>","url:dijit/templates/MenuSeparator.html":"<tr class=\"dijitMenuSeparator\" role=\"separator\">\r\n\t<td class=\"dijitMenuSeparatorIconCell\">\r\n\t\t<div class=\"dijitMenuSeparatorTop\"></div>\r\n\t\t<div class=\"dijitMenuSeparatorBottom\"></div>\r\n\t</td>\r\n\t<td colspan=\"3\" class=\"dijitMenuSeparatorLabelCell\">\r\n\t\t<div class=\"dijitMenuSeparatorTop dijitMenuSeparatorLabel\"></div>\r\n\t\t<div class=\"dijitMenuSeparatorBottom\"></div>\r\n\t</td>\r\n</tr>\r\n","url:prcommon2/reports/templates/ReportBuilder.html":"<div>\r\n\t<table data-dojo-attach-point=\"waitbar\" width=\"100%\" cellpadding=\"0\" cellspacing=\"0\">\r\n\t\t<tr><td align=\"left\" valign=\"middle\" style=\"padding:0px 3px;width:100%;vertical-align:middle\" class=\"square_button_red\">\r\n\t\t\t<button data-dojo-props='type:\"button\",title:\"Cancel\"' data-dojo-type=\"dijit/form/Button\" data-dojo-attach-event=\"onClick:stop\" data-dojo-attach-point=\"cancelbtn\"><i class=\"fa fa-times fa-lg\"></i>&nbsp;&nbsp;Cancel</button>\r\n\t\t</td>\r\n\t\t<td align=\"right\" valign=\"middle\" style=\"padding:5px 3px;vertical-align:'middle'\">\r\n\t\t\t<i class=\"fa fa-spinner fa-2x fa-pulse\" style=\"color:#4296d0\"></i>\r\n\t\t</td><td width=\"80px\" nowrap valign=\"middle\" style=\"padding: 6px 8px 6px 4px;vertical-align:'middle';\">\r\n\t\t\tPlease wait...\r\n\t\t</td></tr>\r\n\t</table>\r\n\t<form data-dojo-attach-point=\"reportForm\" target=\"_blank\" method=\"post\" action=\"/reports/view\">\r\n\t\t<input type=\"hidden\" name=\"reportid\" data-dojo-attach-point=\"reportid\">\r\n\t\t<input type=\"hidden\" name=\"cache_buster\" data-dojo-attach-point=\"cache_buster\">\r\n\t</form>\r\n</div>\r\n\r\n\r\n","url:control/customer/templates/user_reset_password.html":"<div>\r\n\t<form data-dojo-type=\"dijit/form/Form\" data-dojo-attach-point=\"form\" data-dojo-props='\"class\":\"common_prmax_layout\",onsubmit:\"return false;\"'>\r\n\t\t<input data-dojo-attach-point=\"iuserid\" name=\"iuserid\" type=\"hidden\" data-dojo-type=\"dijit/form/TextBox\" value=\"\" />\r\n\t\t<p data-dojo-attach-point=\"display_details\" class=\"heading\"></p><br/>\r\n\t\t<label class=\"label_size_1 label_align_r\">Password</label><input data-dojo-attach-point=\"password\" name=\"password\" type=\"password\" size=\"20\" maxlength=\"20\" data-dojo-type=\"dijit/form/ValidationTextBox\" data-dojo-props='required:true,trim:true,invalidMessage:\"Must be entered\",style:\"width:10em\"'/><br/><br/>\r\n\t\t<button class=\"btnright\" data-dojo-attach-event=\"onClick:_update_user_password\" data-dojo-attach-point=\"update_ctrl_btn\" data-dojo-type=\"dojox/form/BusyButton\" data-dojo-props='busyLabel:\"Please Wait Saving...\",type:\"button\",label:\"Save\"'></button><br/>\r\n\t</form>\r\n</div>\r\n\r\n","url:dijit/templates/Menu.html":"<table class=\"dijit dijitMenu dijitMenuPassive dijitReset dijitMenuTable\" role=\"menu\" tabIndex=\"${tabIndex}\"\r\n\t   cellspacing=\"0\">\r\n\t<tbody class=\"dijitReset\" data-dojo-attach-point=\"containerNode\"></tbody>\r\n</table>\r\n","url:control/customer/templates/one_off_invoice.html":"<div>\r\n\t<form data-dojo-attach-point=\"form\"  data-dojo-props='onsubmit:\"return false\"' data-dojo-type=\"dijit/form/Form\">\r\n\t\t<input data-dojo-props='type:\"hidden\",name:\"icustomerid\"' data-dojo-attach-point=\"icustomerid\" data-dojo-type=\"dijit/form/TextBox\" ></input>\r\n\t\t<table width=\"600px\" cellpadding=\"0\" cellpadding=\"0\" >\r\n\t\t\t<tr><td colspan=\"2\"><label class=\"prmaxrowdisplaylarge\" style=\"text-align:center;display:inline\">Enter Invoice</label><div style=\"display:inline\" class=\"prmaxrowdisplaylarge\" data-dojo-attach-point=\"customername\">Name</div></td></tr>\r\n\t\t\t<tr><td width=\"28%\" class=\"prmaxrowtag\" align=\"right\" width=\"120px\">Invoice Date</td><td><input data-dojo-attach-point=\"invoice_date\" data-dojo-type=\"ttl/DateTextBox2\" data-dojo-props='type:\"text\",style:\"width:8em\",required:true' ></td></tr>\r\n\t\t\t<tr><td class=\"prmaxrowtag\" valign=\"top\" align=\"right\" >Message</td><td><div class=\"stdframe\" ><textarea data-dojo-attach-point=\"message\" data-dojo-type=\"dijit/form/Textarea\" data-dojo-props='name:\"message\",\"class\":\"dijitTextarea\",style:\"width:99%;height:99%\"'></textarea></div></td></tr>\r\n\t\t\t<tr><td class=\"prmaxrowtag\" align=\"right\" >Purchase Order</td><td><input data-dojo-attach-point=\"purchase_order\" data-dojo-props='\"class\":\"prmaxinput\",name:\"purchase_order\",type:\"text\",trim:true' data-dojo-type=\"dijit/form/TextBox\" ></td></tr>\r\n\t\t\t<tr><td class=\"prmaxrowtag\" align=\"right\">Gross Amount</td><td><input data-dojo-type=\"dijit/form/CurrencyTextBox\" data-dojo-props='type:\"text\",name:\"amount\",required:true,trim:true,constraints:{min:0.01,max:99999.00,fractional:true,places:\"0,2\"},style:\"width:8em\" ' data-dojo-attach-point=\"amount\" data-dojo-attach-event=\"onBlur:_Amounts\"></input></td></tr>\r\n\t\t\t<tr><td class=\"prmaxrowtag\" align=\"right\">Vat</td><td><input data-dojo-type=\"dijit/form/CurrencyTextBox\" data-dojo-props='type:\"text\",name:\"vat\",required:true,trim:true,constraints:{min:0.00,max:99999.00,fractional:true,places:\"0,2\"},style:\"width:8em\"' data-dojo-attach-point=\"vat\" ></input></td></tr>\r\n\t\t\t<tr><td class=\"prmaxrowtag\" align=\"right\">Email Address</td><td><input data-dojo-attach-point=\"email\" data-dojo-props='\"class\":\"prmaxinput\",name:\"email\",type:\"text\",style:\"width:100%\",trim:true,required:true,regExpGen:dojox.validate.regexp.emailAddress,invalidMessage:\"invalid email address\",size:\"40\",maxlength:\"70\"' data-dojo-type=\"dijit/form/ValidationTextBox\" /></td></tr>\r\n\t\t\t<tr><td class=\"prmaxrowtag\" align=\"right\" colspan=\"2\" align=\"right\"><button data-dojo-type=\"dojox/form/BusyButton\" data-dojo-attach-point=\"btn\" data-dojo-props='busyLabel:\"Sending ... \",type:\"button\"' data-dojo-attach-event=\"onClick:_Send\">Send Invoice</button></td></tr>\r\n\t\t</table>\r\n\t</form>\r\n</div>\r\n","url:control/customer/templates/partner_options.html":"<div>\r\n\t<div data-dojo-type=\"dijit/layout/ContentPane\" data-dojo-props='region:\"center\"'>\r\n\t\t<div data-dojo-attach-point=\"view_demo_to_live\" class=\"common_prmax_layout prmaxhidden\" style=\"width:450px\">\r\n\t\t\t<h1>Demo to Live</h1>\r\n\t\t\t<form data-dojo-type=\"dijit/form/Form\" data-dojo-attach-point=\"demo_to_live_form\" data-dojo-props='onsubmit:\"return false;\"'>\r\n\t\t\t\t<input data-dojo-attach-point=\"demo_to_live_customerid\" name=\"icustomerid\" type=\"hidden\" data-dojo-type=\"dijit/form/TextBox\" >\r\n\t\t\t\t<label class=\"label_size_1 label_tag label_align_r\">Start Date</label><input data-dojo-props='type:\"text\",name:\"startdate\",required:true,style:\"width:8em\"' data-dojo-attach-point=\"startdate\" data-dojo-type=\"dijit/form/DateTextBox\" ><br/>\r\n\t\t\t\t<label class=\"label_size_1 label_tag label_align_r\">End Date</label><input data-dojo-props='type:\"text\",name:\"enddate\",required:true,style:\"width:8em\"' data-dojo-attach-point=\"enddate\" data-dojo-type=\"dijit/form/DateTextBox\" ><br/>\r\n\t\t\t\t<button data-dojo-attach-point=\"demo_to_live_btn\" data-dojo-type=\"dojox/form/BusyButton\" data-dojo-attach-event=\"onClick:_demo_to_live\" class=\"btnright\" style=\"float:right\" data-dojo-props='busyLabel:\"Please Wait Updating...\",label:\"Demo Account to Live\"'></button>\r\n\t\t\t</form>\r\n\t\t</div>\r\n\t\t<div data-dojo-attach-point=\"view_extended_licence\" class=\"common_prmax_layout prmaxhidden\" style=\"width:450px\">\r\n\t\t\t<h1>Extended Licence</h1>\r\n\t\t\t<form data-dojo-type=\"dijit/form/Form\" data-dojo-attach-point=\"extended_licence_form\" data-dojo-props='onsubmit:\"return false;\"'>\r\n\t\t\t\t<input data-dojo-attach-point=\"extended_licence_customerid\" name=\"icustomerid\" type=\"hidden\" data-dojo-type=\"dijit/form/TextBox\" >\r\n\t\t\t\t<label class=\"label_size_2 label_tag label_align_r\">Nbr Logins</label><input data-dojo-type=\"dijit/form/NumberTextBox\" type=\"text\" name=\"maxnbrofusersaccounts\" required=\"true\" value=\"3\" data-dojo-props=\"constraints:{min:1,max:11,places:0},invalidMessage:'Please enter a numeric value.',rangeMessage:'Invalid elevation.',style:'width:2em'\" data-dojo-attach-point=\"extended_licence_maxnbrofusersaccounts\"/><br/>\r\n\t\t\t\t<label class=\"label_size_2 label_tag label_align_r\">Concurrent Users</label><input data-dojo-type=\"dijit/form/NumberTextBox\" type=\"text\" name=\"logins\" required=\"true\" value=\"1\" data-dojo-props=\"constraints:{min:1,max:5,places:0},invalidMessage:'Please enter a numeric value.',rangeMessage:'Invalid elevation.',style:'width:2em'\" data-dojo-attach-point=\"extended_licence_logins\"/><br/>\r\n\t\t\t\t<label class=\"label_size_2 label_tag label_align_r\">Features</label><input data-dojo-attach-point=\"extended_licence_advancefeatures\" data-dojo-type=\"dijit/form/CheckBox\" data-dojo-props='\"class\":\"prmaxinput\",name:\"advancefeatures\",value:\"1\"'/></br>\r\n\t\t\t\t<label class=\"label_size_2 label_tag label_align_r\">End Date</label><input data-dojo-props='type:\"text\",name:\"enddate\",required:true,style:\"width:8em\"' data-dojo-attach-point=\"extended_licence_enddate\" data-dojo-type=\"dijit/form/DateTextBox\" ><br/>\r\n\t\t\t\t<button data-dojo-attach-point=\"extended_licence_btn\" data-dojo-type=\"dojox/form/BusyButton\" data-dojo-attach-event=\"onClick:_extended_licence\" class=\"btnright\" style=\"float:right\" data-dojo-props='busyLabel:\"Please Wait Updating...\",label:\"Extended Licence\"'></button>\r\n\t\t\t</form>\r\n\t\t</div>\r\n\t</div>\r\n</div>\r\n\r\n","url:control/customer/templates/dd_csv.html":"<div>\r\n\t<form target=\"_newtab\" action=\"/payment/payment_dd_csv\" data-dojo-attach-event=\"onsubmit:_create_csv\" >\r\n\t\t<table width=\"700px\" cellpadding=\"0\" cellpadding=\"0\" >\r\n\t\t\t<tr>\r\n\t\t\t\t<td colspan=\"2\">\r\n\t\t\t\t\t<div class=\"prmaxrowdisplaylarge\" style=\"text-align:center;display:inline\">Create DD Csv </div>\r\n\t\t\t\t</td>\r\n\t\t\t</tr>\r\n\t\t\t<tr>\r\n\t\t\t\t<td class=\"prmaxrowlabel\" align=\"right\" >DD Day</td>\r\n\t\t\t\t<td>\r\n\t\t\t\t\t<select data-dojo-props='\"class\":\"prmaxrequired\",required:\"true\",name:\"pay_montly_day\",autoComplete:\"true\",style:\"width:3em\"' data-dojo-attach-point=\"pay_montly_day\" data-dojo-type=\"dijit/form/FilteringSelect\" >\r\n\t\t\t\t\t\t<option value=\"1\">1</option>\r\n\t\t\t\t\t\t<option value=\"8\">8</option>\r\n\t\t\t\t\t\t<option value=\"15\">15</option>\r\n\t\t\t\t\t\t<option value=\"22\">22</option>\r\n\t\t\t\t\t</select>\r\n\t\t\t\t</td>\r\n\t\t\t</tr>\r\n\t\t\t<tr>\r\n\t\t\t\t<td colspan=\"2\"><br/><br/><br/></td>\r\n\t\t\t</tr>\r\n\t\t\t<tr>\r\n\t\t\t\t<td>\r\n\t\t\t\t\t<button data-dojo-props='type:\"button\",label:\"Reset Monthly Figures\"' data-dojo-type=\"dijit/form/Button\" data-dojo-attach-event=\"onClick:_clear_down\" ></button>\r\n\t\t\t\t</td>\r\n\t\t\t\t<td class=\"prmaxrowlabel\" align=\"left\">\r\n\t\t\t\t\t<button type=\"submit\" data-dojo-type=\"dijit/form/Button\" label=\"Create DD Csv\" ></button>\r\n\t\t\t\t</td>\r\n\t\t\t</tr>\r\n\t\t</table>\r\n\t</form>\r\n\r\n\r\n\r\n\t<br/><br/><br/>\r\n\t<table width=\"700px\" cellpadding=\"0\" cellpadding=\"0\" >\r\n\t\t<tr>\r\n\t\t\t<td>\r\n\t\t\t\t<form target=\"_newtab\" action=\"/payment/payment_dd_csv_draft\" method=\"post\" data-dojo-attach-event=\"onsubmit:_draft_invoices\" >\r\n\t\t\t\t\t<input data-dojo-props='\"class\":\"prmaxhidden\", name:\"tmp_cache\" ' data-dojo-attach-poin=\"tmp_cache\" data-dojo-type=\"dijit/form/TextBox\" />\r\n\t\t\t\t\t<input type=\"hidden\"  data-dojo-attach-poin=\"pay_montly_day2\" name = \"pay_montly_day\" data-dojo-type=\"dijit/form/TextBox\" />\r\n\t\t\t\t\t<button type=\"submit\" data-dojo-type=\"dijit/form/Button\" label=\"See Draft List\" ></button>\r\n\t\t\t\t</form>\r\n\t\t\t</td>\r\n\t\t</tr>\r\n\t</table>\r\n</div>\r\n","url:prcommon2/date/templates/daterange.html":"<div class=\"dijit dijitReset dijitInline dijitLeft\">\r\n\t<div style=\"width:100%\" class=\"dijit dijitReset daterange\">\r\n\t\t<select data-dojo-type=\"dijit/form/Select\" data-dojo-props='style:\"margin-right:5px;float:left;width:80px\",autocomplete:false,\"class\":\"dijit dijitReset\"' data-dojo-attach-point=\"option\" data-dojo-attach-event=\"onChange:_option_changed\"></select>\r\n\t\t<input data-dojo-attach-point=\"from_date_box\" class=\"prmaxhidden dijit dijitReset\" data-dojo-props='style:\"margin-right:5px;float:left;width:94px\",type:\"text\"' data-dojo-type=\"dijit/form/DateTextBox\" data-dojo-attach-event=\"onChange:_date_changed\"/>\r\n\t\t<label data-dojo-attach-point=\"to_box_label\" style=\"height:100%;float:left;margin-right:7px;vertical-align:center\" class=\"dijit dijitReset prmaxhidden and_label\">&nbsp;and&nbsp;</label>\r\n\t\t<input data-dojo-attach-point=\"to_date_box\" class=\"prmaxhidden dijit dijitReset\" data-dojo-props='style:\"float:left;width:94px\",type:\"text\"' data-dojo-type=\"dijit/form/DateTextBox\" data-dojo-attach-event=\"onChange:_date_changed\" />\r\n\t</div>\r\n</div>\r\n\r\n","url:dojox/form/resources/FileInput.html":"<div class=\"dijitFileInput\">\r\n\t<input id=\"${id}\" class=\"dijitFileInputReal\" type=\"file\" dojoAttachPoint=\"fileInput\" name=\"${name}\" />\r\n\t<div class=\"dijitFakeInput\">\r\n\t\t<input class=\"dijitFileInputVisible\" type=\"text\" dojoAttachPoint=\"focusNode, inputNode\" />\r\n\t\t<div class=\"dijitInline dijitFileInputText\" dojoAttachPoint=\"titleNode\">${label}</div>\r\n\t\t<div class=\"dijitInline dijitFileInputButton\" dojoAttachPoint=\"cancelNode\" \r\n\t\t\tdojoAttachEvent=\"onclick:reset\">${cancelText}</div>\r\n\t</div>\r\n</div>\r\n","url:control/support/templates/PrivateData.html":"<div>\r\n\t<form  data-dojo-attach-point=\"private_form\" method=\"post\" name=\"private_form\" enctype=\"multipart/form-data\"  onSubmit=\"return false;\">\r\n\t\t<input class=\"prmaxinput\" type=\"hidden\" data-dojo-attach-point=\"private_cache\" name=\"private_cache\" value=\"-1\"></input>\r\n\t\t<table width=\"50%\" border=\"0\" cellpadding=\"0\" cellspacing=\"0\" >\r\n\t\t\t<tr>\r\n\t\t\t\t<td class=\"prmaxrowtag\">File Name</td>\r\n\t\t\t\t<td>\r\n\t\t\t\t\t<input size=\"30\" class=\"prmaxinput\" type=\"file\" data-dojo-attach-point=\"private_file\" name=\"private_file\"></input>\r\n\t\t\t\t</td>\r\n\t\t\t</tr>\r\n\t\t\t\r\n\t\t\t<tr><td class=\"prmaxrowtag\">Customer</td><td><select data-dojo-type=\"dijit/form/FilteringSelect\" data-dojo-props='name:\"icustomerid\",autoComplete:true,labelType:\"html\",searchAttr:\"customername\"' data-dojo-attach-point=\"icustomerid\"></select></td></tr>\r\n\t\t\t<tr><td class=\"prmaxrowtag\">Add to existing Outlets</td><td><input type=\"checkbox\" name=\"no_add_outlet\" data-dojo-type=\"dijit/form/CheckBox\"></td></tr>\r\n\t\t\t<tr><td colspan = \"2\" >&nbsp;</td></tr>\r\n\t\t\t<tr><td colspan = \"2\" ><span data-dojo-attach-point=\"progressNode\" style=\"display:none;\"><div data-dojo-type=\"dijit/ProgressBar\" data-dojo-attach-point=\"progressControl\" data-dojo-props='style:\"width:200px\", indeterminate:\"true\"'></div></span></td></tr>\r\n\t\t\t<tr><td colspan=\"2\" align=\"right\"><button class=\"prmaxbutton\"  data-dojo-attach-point=\"saveNode\" type=\"button\"  data-dojo-type=\"dijit/form/Button\" label=\"Upload Private Data\" data-dojo-attach-event=\"onClick:_Add\"></button></td></tr>\r\n\t\t</table>\r\n\t</form>\r\n</div>\r\n","url:dijit/templates/TooltipDialog.html":"<div role=\"alertdialog\" tabIndex=\"-1\">\r\n\t<div class=\"dijitTooltipContainer\" role=\"presentation\">\r\n\t\t<div data-dojo-attach-point=\"contentsNode\" class=\"dijitTooltipContents dijitTooltipFocusNode\">\r\n\t\t\t<div data-dojo-attach-point=\"containerNode\"></div>\r\n\t\t\t${!actionBarTemplate}\r\n\t\t</div>\r\n\t</div>\r\n\t<div class=\"dijitTooltipConnector\" role=\"presentation\" data-dojo-attach-point=\"connectorNode\"></div>\r\n</div>\r\n","url:control/customer/templates/pre_pay_invoice.html":"<div>\r\n\t<form data-dojo-attach-point=\"form\"  data-dojo-props='onsubmit:\"return false\"' data-dojo-type=\"dijit/form/Form\">\r\n\t\t<input data-dojo-attach-point=\"icustomerid\" data-dojo-props='type:\"hidden\",name:\"icustomerid\"' data-dojo-type=\"dijit/form/TextBox\" ></input>\r\n\t\t<table width=\"600px\" cellpadding=\"0\" cellpadding=\"0\" >\r\n\t\t\t<tr><td colspan=\"2\">\r\n\t\t\t\t<label class=\"prmaxrowdisplaylarge\" style=\"text-align:center;display:inline\">Enter Invoice</label>\r\n\t\t\t\t<div style=\"display:inline\" class=\"prmaxrowdisplaylarge\" data-dojo-attach-point=\"customername\">Name</div>\r\n\t\t\t</td></tr>\r\n\t\t\t<tr><td width=\"28%\" class=\"prmaxrowtag\" align=\"right\" width=\"120px\">Invoice Date</td><td><input data-dojo-attach-point=\"invoice_date\" data-dojo-type=\"ttl/DateTextBox2\" data-dojo-props='type:\"text\",style:\"width:8em\",required:true'></td></tr>\r\n\t\t\t<tr><td valign=\"top\" align=\"right\" ><label class=\"prmaxrowtag\">Message</label></td><td><div class=\"stdframe\" ><textarea data-dojo-attach-point=\"message\" data-dojo-type=\"dijit/form/Textarea\" data-dojo-props='name:\"message\",\"class\":\"dijitTextarea\",style:\"width:99%;height:99%\"' ></textarea></div></td></tr>\r\n\t\t\t<tr><td class=\"prmaxrowtag\" width=\"150px\" align=\"right\" >Concurrent Licence</td><td ><input data-dojo-attach-point=\"logins\" data-dojo-type=\"dijit/form/NumberTextBox\" data-dojo-props='type:\"text\",name:\"logins\",value:\"1\",style:\"width:8em\",required:true,constraints:{min:1,max:50}' ></td></tr>\r\n\t\t\t<tr><td class=\"prmaxrowtag\" align=\"right\" >Payment Freq</td><td><select data-dojo-props='\"class\":\"prmaxinput\",autoComplete:true,name:\"paymentfreqid\",style:\"width:15em\"' data-dojo-attach-point=\"paymentfreqid\" data-dojo-type=\"dijit/form/FilteringSelect\"><options><option value=\"1\">Fixed Term</option><option value=\"2\">Monthly</option></options></select></td></tr>\r\n\t\t\t<tr><td class=\"prmaxrowtag\" align=\"right\" >Is Direct Debit</td><td><input data-dojo-attach-point=\"isdd\" data-dojo-props='\"class\":\"prmaxinput\",name:\"isdd\",type:\"checkbox\"' data-dojo-type=\"dijit/form/CheckBox\" data-dojo-attach-event=\"onClick:_ChangePayment\"/></td></tr>\r\n\t\t\t<tr><td class=\"prmaxrowtag\" align=\"right\" >Purchase Order</td><td><input data-dojo-attach-point=\"purchase_order\" data-dojo-props='\"class\":\"prmaxinput\",name:\"purchase_order\",type:\"text\",trim:true' data-dojo-type=\"dijit/form/TextBox\" ></td></tr>\r\n\t\t</td></tr>\r\n\t\t<tr><td colspan=\"2\"><table width=\"100%\" cellpadding=\"0\" cellpadding=\"0\" border=\"0\">\r\n\t\t<tr><td width=\"28%\">&nbsp;</td><td width=\"12%\">Start Date</td><td width=\"12%\" data-dojo-attach-point=\"view_dd_1\">Free Mths</td><td width=\"12%\" data-dojo-attach-point=\"view_dd_2\">Paid Mths</td><td width=\"12%\">Price ex VAT</td></tr>\r\n\t\t<tr><td class=\"prmaxrowtag\"  align=\"right\" >Media DB</td>\r\n\t\t\t<td><input data-dojo-type=\"dijit/form/DateTextBox\" data-dojo-attach-point=\"licence_start_date\" data-dojo-props='type:\"text\",name:\"licence_start_date\",required:true,style:\"width:8em\"'></td>\r\n\t\t\t<td data-dojo-attach-point=\"view_dd_3\"><input data-dojo-attach-point=\"months_free\" data-dojo-type=\"dijit/form/NumberTextBox\" data-dojo-props='type:\"text\",name:\"months_free\",value:\"0\",required:true,constraints:{min:0,max:6},style:\"width:6em\"'></td>\r\n\t\t\t<td data-dojo-attach-point=\"view_dd_4\"><input data-dojo-attach-point=\"months_paid\" data-dojo-type=\"dijit/form/NumberTextBox\" data-dojo-props='name:\"months_paid\",type:\"text\",value:\"12\",required:true,constraints:{min:1,max:36},style:\"width:6em\"'></td>\r\n\t\t\t<td><input data-dojo-props='type:\"text\",name:\"cost\",required:true,trim:true,constraints:{min:0.01,max:99999.00,fractional:true,places:\"0,2\"},style:\"width:6em\"' data-dojo-type=\"dijit/form/CurrencyTextBox\" data-dojo-attach-point=\"cost\"></input></td>\r\n\t\t</tr>\r\n\t\t<tr data-dojo-attach-point=\"features_view\" class=\"prmaxhidden\" ><td class=\"prmaxrowtag\"  align=\"right\" >Features</td>\r\n\t\t\t<td data-dojo-attach-point=\"features_view_1\" class=\"prmaxhidden\"><input data-dojo-attach-point=\"advance_licence_start\" data-dojo-type=\"dijit/form/DateTextBox\" data-dojo-props='type:\"text\",name:\"advance_licence_start\",style:\"width:8em\"'></td>\r\n\t\t\t<td data-dojo-attach-point=\"features_view_2\" class=\"prmaxhidden\"><input data-dojo-attach-point=\"adv_months_free\" data-dojo-type=\"dijit/form/NumberTextBox\" data-dojo-props='name:\"adv_months_free\",type:\"text\",value:\"0\",constraints:{min:0,max:36},style:\"width:6em\"'></td>\r\n\t\t\t<td data-dojo-attach-point=\"features_view_3\" class=\"prmaxhidden\"><input data-dojo-attach-point=\"adv_months_paid\" data-dojo-type=\"dijit/form/NumberTextBox\" data-dojo-props='type:\"text\",name:\"adv_months_paid\",value:\"12\",constraints:{min:0,max:36},style:\"width:6em\"'></td>\r\n\t\t\t<td data-dojo-attach-point=\"features_view_5\" class=\"prmaxhidden\"><input data-dojo-type=\"dijit/form/CurrencyTextBox\" data-dojo-attach-point=\"advcost\" data-dojo-props='trim:true,type:\"text\",name:\"advcost\",constraints:{min:0.00,max:99999.00,fractional:true,places:\"0,2\"},style:\"width:6em\",required:true'></input></td>\r\n\t\t</tr>\r\n\t\t<tr data-dojo-attach-point=\"updatum_view\" class=\"prmaxhidden\" ><td class=\"prmaxrowtag\"  align=\"right\" >Monitoring</td>\r\n\t\t\t<td data-dojo-attach-point=\"updatum_view_1\" class=\"prmaxhidden\"><input data-dojo-attach-point=\"updatum_start_date\" data-dojo-type=\"dijit/form/DateTextBox\" data-dojo-props='type:\"text\",name:\"updatum_start_date\",style:\"width:8em\"'></td>\r\n\t\t\t<td data-dojo-attach-point=\"updatum_view_2\" class=\"prmaxhidden\"><input data-dojo-attach-point=\"updatum_months_free\" data-dojo-type=\"dijit/form/NumberTextBox\" data-dojo-props='type:\"text\",name:\"updatum_months_free\",value:\"0\",constraints:{min:0,max:36},style:\"width:6em\"'></td>\r\n\t\t\t<td data-dojo-attach-point=\"updatum_view_3\" class=\"prmaxhidden\"><input data-dojo-attach-point=\"updatum_months_paid\" data-dojo-type=\"dijit/form/NumberTextBox\" data-dojo-props='type:\"text\",name:\"updatum_months_paid\",value:\"12\",constraints:{min:1,max:36},style:\"width:6em\"'></td>\r\n\t\t\t<td data-dojo-attach-point=\"updatum_view_5\" class=\"prmaxhidden\"><input data-dojo-attach-point=\"updatumcost\" data-dojo-type=\"dijit/form/CurrencyTextBox\" data-dojo-props='name:\"updatumcost\",type:\"text\",trim:true,constraints:{min:0.00,max:99999.00,fractional:true,places:\"0,2\"},style:\"width:6em\",required:true'></input></td>\r\n\t\t</tr>\r\n\t\t</table></td></tr>\r\n\t\t\t<tr><td class=\"prmaxrowtag\" align=\"right\">Email Address</td><td><input data-dojo-type=\"dijit/form/ValidationTextBox\" data-dojo-attach-point=\"email\" data-dojo-props='\"class\":\"prmaxinput\",name:\"email\",type:\"text\",style:\"width:100%\",trim:true,required:true,regExpGen:dojox.validate.regexp.emailAddress,trim:true,invalidMessage:\"invalid email address\",size:\"40\",maxlength:\"70\"'/></td></tr>\r\n\t\t\t<tr><td class=\"prmaxrowtag\" align=\"right\" colspan=\"2\" align=\"right\">\r\n\t\t\t<button data-dojo-type=\"dojox/form/BusyButton\" data-dojo-attach-point=\"btn\" data-dojo-props='busyLabel:\"Sending ... \",type:\"button\"' data-dojo-attach-event=\"onClick:_Send\">Send Invoice</button></td></tr>\r\n\t\t</table>\r\n\t</form>\r\n</div>\r\n","url:control/customer/options/templates/ReActivateDemo.html":"<div>\r\n\t<form data-dojo-attach-point=\"form\" data-dojo-props='onsubmit:\"return false\",\"class\":\"prmaxdefault\"' data-dojo-type=\"dijit/form/Form\">\r\n\t\t<input data-dojo-props='type:\"hidden\",name:\"icustomerid\"' data-dojo-attach-point=\"icustomerid\" data-dojo-type=\"dijit/form/TextBox\" ></input>\r\n\t\t<table class=\"prmaxtable\" width=\"500px\"  border=\"0\">\r\n\t\t\t<tr><td class=\"prmaxrowtag\" align=\"right\" >Email Address</td><td><input data-dojo-type=\"dijit/form/ValidationTextBox\" data-dojo-props='\"class\":\"prmaxinput\",name:\"email\",type:\"text\",size:\"40\",maxlength:\"80\",trim:true,required:true,regExpGen:dojox.validate.regexp.emailAddress,invalidMessage:\"invalid email address\",size:\"40\"' data-dojo-attach-point=\"email\" /></td></tr>\r\n\t\t\t<tr><td class=\"prmaxrowtag\" align=\"right\" >Contact Name</td><td><input data-dojo-type=\"dijit/form/ValidationTextBox\" data-dojo-props='\"class\":\"prmaxinput\",name:\"displayname\",type:\"text\",size:\"80\",maxlength:\"80\",trim:true,required:true' data-dojo-attach-point=\"displayname\" /></td></tr>\r\n\t\t\t<tr><td class=\"prmaxrowtag\" align=\"right\" >End Date</td><td><input data-dojo-props='type:\"text\",required:true,name:\"licence_expire\",style:\"width:8em\"' data-dojo-attach-point=\"licence_expire\" data-dojo-type=\"dijit/form/DateTextBox\"><td></tr>\r\n\t\t\t<tr><td class=\"prmaxrowtag\" align=\"right\" >Send Email</td><td><input data-dojo-attach-point=\"sendemail\" data-dojo-props='value:\"true\",name:\"sendemail\",type:\"checkBox\"' data-dojo-type=\"dijit.form.CheckBox\" ></td></tr>\r\n\t\t\t<tr><td align=\"right\" class=\"prmaxrowtag\">Assigned To</td><td><select data-dojo-props='\"class\":\"prmaxrequired\",required:true,name:\"assigntoid\",autoComplete:true,style:\"width:15em\",labelType:\"html\"' data-dojo-attach-point=\"assigntoid\"  data-dojo-type=\"dijit/form/FilteringSelect\" ></select></td></td></tr>\r\n\r\n\t\t\t<tr><td class=\"prmaxrowtag\" colspan =\"2\">&nbsp;</td></tr>\r\n\t\t\t<tr><td class=\"prmaxrowtag\" colspan=\"2\" align=\"right\"><button data-dojo-attach-point=\"updBtn\" data-dojo-type=\"dojox/form/BusyButton\" data-dojo-props='busyLabel:\"Please Wait Updating...\",label:\"Re-Activate\",\"class\":\"prmaxbutton\"' data-dojo-attach-event=\"onClick:_Update\" ></button></td></tr>\r\n\t\t</table>\r\n\t</form>\r\n</div>\r\n\r\n\r\n","url:dijit/layout/templates/ScrollingTabController.html":"<div class=\"dijitTabListContainer-${tabPosition}\" style=\"visibility:hidden\">\r\n\t<div data-dojo-type=\"dijit.layout._ScrollingTabControllerMenuButton\"\r\n\t\t class=\"tabStripButton-${tabPosition}\"\r\n\t\t id=\"${id}_menuBtn\"\r\n\t\t data-dojo-props=\"containerId: '${containerId}', iconClass: 'dijitTabStripMenuIcon',\r\n\t\t\t\t\tdropDownPosition: ['below-alt', 'above-alt']\"\r\n\t\t data-dojo-attach-point=\"_menuBtn\" showLabel=\"false\" title=\"\">&#9660;</div>\r\n\t<div data-dojo-type=\"dijit.layout._ScrollingTabControllerButton\"\r\n\t\t class=\"tabStripButton-${tabPosition}\"\r\n\t\t id=\"${id}_leftBtn\"\r\n\t\t data-dojo-props=\"iconClass:'dijitTabStripSlideLeftIcon', showLabel:false, title:''\"\r\n\t\t data-dojo-attach-point=\"_leftBtn\" data-dojo-attach-event=\"onClick: doSlideLeft\">&#9664;</div>\r\n\t<div data-dojo-type=\"dijit.layout._ScrollingTabControllerButton\"\r\n\t\t class=\"tabStripButton-${tabPosition}\"\r\n\t\t id=\"${id}_rightBtn\"\r\n\t\t data-dojo-props=\"iconClass:'dijitTabStripSlideRightIcon', showLabel:false, title:''\"\r\n\t\t data-dojo-attach-point=\"_rightBtn\" data-dojo-attach-event=\"onClick: doSlideRight\">&#9654;</div>\r\n\t<div class='dijitTabListWrapper' data-dojo-attach-point='tablistWrapper'>\r\n\t\t<div role='tablist' data-dojo-attach-event='onkeydown:onkeydown'\r\n\t\t\t data-dojo-attach-point='containerNode' class='nowrapTabStrip'></div>\r\n\t</div>\r\n</div>","url:control/customer/templates/payment.html":"<div>\r\n\t<form data-dojo-attach-point=\"form\"  data-dojo-props='onsubmit:\"return false\"' data-dojo-type=\"dijit/form/Form\">\r\n\t\t<table width=\"600px\" cellpadding=\"0\" cellpadding=\"0\" >\r\n\t\t\t<tr><td colspan=\"2\"><div class=\"prmaxrowdisplaylarge\" style=\"text-align:center;display:inline\">Take Payment for </div><div class=\"prmaxrowdisplaylarge\" style=\"display:inline\" data-dojo-attach-point=\"customername\"></div></td>\r\n\t\t\t<tr><td width=\"150px\"  align=\"right\" class=\"prmaxrowtag\">Payment Type</td>\r\n\t\t\t\t<td><select data-dojo-props='name:\"paymenttypeid\",autoComplete:\"true\",labelType:\"html\"' data-dojo-type=\"dijit/form/FilteringSelect\" data-dojo-attach-point=\"paymenttypeid\"></select></td>\r\n\t\t\t</tr>\r\n\t\t\t<tr><td class=\"prmaxrowtag\" align=\"right\" >Value</td><td>\r\n\t\t\t\t<table width=\"100%\" cellpadding=\"0\" cellpadding=\"0\" ><tr>\r\n\t\t\t\t\t<td><input data-dojo-type=\"dijit/form/CurrencyTextBox\" data-dojo-props ='\"class\":\"prmaxinput\",type:\"text\",name:\"value\",required:true, trim:true,style:\"width:8em\",constraints:{min:0.01,max:99999.00,fractional:true,places:\"0,2\"}' data-dojo-attach-point=\"payment\" data-dojo-attach-event=\"onBlur:_on_blur_amount\"></input></td>\r\n\t\t\t\t\t<td data-dojo-attach-point=\"alloc_view_3\" class=\"prmaxhidden prmaxrowtag\">Amount to Allocated</td>\r\n\t\t\t\t\t<td data-dojo-attach-point=\"alloc_view_4\" class=\"prmaxhidden prmaxrowtag\"><input data-dojo-type=\"dijit/form/TextBox\" data-dojo-attach-point=\"toallocate\" data-dojo-props='type:\"text\",style:\"width:8em\",readOnly:\"readonly\"'></input></td>\r\n\t\t\t\t</tr></table>\r\n\t\t\t</td></tr>\r\n\t\t\t<tr><td class=\"prmaxrowtag\" align=\"right\">Send Email Confirmation</td><td><input data-dojo-attach-point=\"emailtocustomer\" data-dojo-props='\"class\":\"prmaxinput\",name:\"emailtocustomer\",type:\"checkbox\"' data-dojo-type=\"dijit/form/CheckBox\" checked /></td></tr>\r\n\t\t\t<tr data-dojo-attach-point=\"alloc_view_1\"><td class=\"prmaxrowtag\" align=\"right\">Expire Date</td><td><input data-dojo-props='type:\"text\",name:\"licence_expire\"' data-dojo-attach-point=\"licence_expire\" data-dojo-type=\"dijit/form/DateTextBox\" ></td></tr>\r\n\t\t\t<tr><td class=\"prmaxrowtag\" align=\"right\" valign=\"top\">Message</td><td><div class=\"dialogprofileframe\" ><textarea data-dojo-attach-point=\"message\" data-dojo-props='name:\"message\",\"class\":\"dijitTextarea\",style:\"width:99%;height:99%\"' data-dojo-type=\"dijit/form/Textarea\" ></textarea></div></td></tr>\r\n\t\t\t<tr data-dojo-attach-point=\"alloc_view_2\"><td class=\"prmaxrowtag\" align=\"right\" >Email Address</td><td><input data-dojo-props='\"class\":\"prmaxinput\",name:\"email\",type:\"text\",style:\"width:100%\",trim:true,required:true,regExpGen:dojox.validate.regexp.emailAddress,invalidMessage:\"invalid email address\",size:40,maxLength:70'data-dojo-attach-point=\"email\" data-dojo-type=\"dijit/form/ValidationTextBox\" /></td></tr>\r\n\t\t\t<tr><td class=\"prmaxrowtag\" align=\"right\" >Payment Date</td><td><input data-dojo-props='type:\"text\",name:\"payment_date\",required:true' data-dojo-attach-point=\"payment_date\" data-dojo-type=\"dijit/form/DateTextBox\" ></td>\r\n\t\t\t<tr data-dojo-attach-point=\"alloc_view\"><td colspan=\"2\"><div data-dojo-attach-point=\"alloc_grid_view\" data-dojo-type=\"dijit/layout/ContentPane\" data-dojo-props='style:\"width:590px;height:300px\"'></div></td></tr>\r\n\t\t\t<tr><td class=\"prmaxrowtag\" colspan=\"2\" align=\"right\"><button data-dojo-type=\"dojox/form/BusyButton\" data-dojo-props='busylabel:\"Taking Payment ...\",type:\"button\"' data-dojo-attach-point=\"btn\" data-dojo-attach-event=\"onClick:_TakePayment\">Take Payment</button></td>\r\n\t\t</table>\r\n\t</form>\r\n\t<div data-dojo-attach-point=\"alloc_manual\" data-dojo-type=\"control/customer/manual_allocate_amount\"></div>\r\n</div>\r\n","url:control/customer/templates/financial.html":"<div>\r\n    <div data-dojo-attach-point=\"frame\" data-dojo-type=\"dijit/layout/BorderContainer\" data-dojo-props='gutters:true,style:\"width:100%;height:100%\"' >\r\n        <div data-dojo-type=\"dijit/layout/TabContainer\" data-dojo-props='region:\"center\"' >\r\n            <div data-dojo-type=\"dijit/layout/ContentPane\" data-dojo-props='\"class\":\"scrollpanel\",style:\"width:100%;height:100%\",title:\"Details\"' >\r\n                <form data-dojo-attach-point=\"financialForm\" data-dojo-props='onsubmit:\"return false\"' data-dojo-type=\"dijit/form/Form\">\r\n                    <table class=\"prmaxtable\" width=\"500px\" cellspacing=\"0\" cellpadding=\"0\" border=\"0\">\r\n                        <tr><td class=\"prmaxrowtag\" style=\"width:30%\" align=\"right\" >Order Status</td><td width=\"70%\"><select data-dojo-props='\"class\":\"prmaxinput\",name:\"customerorderstatusid\",style:\"width:19em\",autoComplete:true' data-dojo-attach-point=\"customerorderstatusid\" data-dojo-type=\"dijit/form/FilteringSelect\" ></select></td></tr>\r\n                        <tr><td class=\"prmaxrowtag\" style=\"width:30%\" align=\"right\" >Financial Status</td><td width=\"70%\"><select data-dojo-props='\"class\":\"prmaxinput\",name:\"financialstatusid\",style:\"width:15em\",autoComplete:true' data-dojo-attach-point=\"financialstatusid\" data-dojo-type=\"dijit/form/FilteringSelect\"></select></td></tr>\r\n                        <tr><td class=\"prmaxrowtag\" style=\"width:30%\" align=\"right\" >Payment Method</td><td width=\"70%\"><select data-dojo-props='\"class\":\"prmaxinput\",name:\"paymentmethodid\",style:\"width:15em\",autoComplete:true' data-dojo-attach-point=\"paymentmethodid\" data-dojo-type=\"dijit/form/FilteringSelect\"></select></td></tr>\r\n                        <tr><td class=\"prmaxrowtag\" style=\"width:30%\" align=\"right\" >Core Renewal Date</td><td><input data-dojo-attach-point=\"renewal_date\" data-dojo-props='\"class\":\"prmaxinput\",type:\"text\",required:true,name:\"renewal_date\"' data-dojo-type=\"dijit/form/DateTextBox\" ></td></tr>\r\n                        <tr><td class=\"prmaxrowtag\" style=\"width:30%\" align=\"right\" >Features Renewal Date</td><td><input data-dojo-attach-point=\"renewal_date_features\" data-dojo-props='\"class\":\"prmaxinput\",type:\"text\",name:\"renewal_date_features\"' data-dojo-type=\"dijit/form/DateTextBox\"></td></tr>\r\n                        <tr><td class=\"prmaxrowtag\" style=\"width:30%\" align=\"right\" >Bank Name</td><td width=\"70%\"><input data-dojo-props='\"class\":\"prmaxinput\",name:\"bank_name\",type:\"text\",trim:true' data-dojo-attach-point=\"bank_name\" data-dojo-type=\"dijit/form/TextBox\" ></td></tr>\r\n                        <tr><td class=\"prmaxrowtag\" style=\"width:30%\" align=\"right\" >Account Name</td><td width=\"70%\"><input data-dojo-attach-point=\"bank_account_name\" data-dojo-props='name:\"bank_account_name\",type:\"text\",trim:true,\"class\":\"prmaxinput\"' data-dojo-type=\"dijit/form/TextBox\" ></td></tr>\r\n                        <tr><td class=\"prmaxrowtag\" style=\"width:30%\" align=\"right\" >Sort Code</td><td width=\"70%\"><input data-dojo-props='\"class\":\"prmaxinput\",name:\"bank_sort_code\",type:\"text\",trim:true' data-dojo-attach-point=\"bank_sort_code\" data-dojo-type=\"dijit/form/TextBox\" ></td></tr>\r\n                        <tr><td class=\"prmaxrowtag\" style=\"width:30%\" align=\"right\" >Account Number</td><td width=\"70%\"><input data-dojo-attach-point=\"bank_account_nbr\" data-dojo-props='\"class\":\"prmaxinput\",name:\"bank_account_nbr\",type:\"text\",trim:\"true\"' data-dojo-type=\"dijit/form/TextBox\" ></td></tr>\r\n                        <tr><td class=\"prmaxrowtag\" style=\"width:30%\" align=\"right\" >Purchase Order</td><td width=\"70%\"><input data-dojo-attach-point=\"purchase_order\" data-dojo-props='\"class\":\"prmaxinput\",name:\"purchase_order\",type:\"text\",trim:true' data-dojo-type=\"dijit/form/TextBox\" ></td></tr>\r\n                        <tr><td class=\"prmaxrowtag\" style=\"width:30%\" align=\"right\" >Bundled Invoice</td><td><input data-dojo-attach-point=\"has_bundled_invoice\" data-dojo-props='\"class\":\"prmaxinput\",name:\"has_bundled_invoice\",type:\"checkbox\"' data-dojo-type=\"dijit/form/CheckBox\"/></td></tr>\r\n                        <tr><td class=\"prmaxrowtag\" align=\"right\" style=\"width:30%\">DD Reference</td><td width=\"70%\"><input data-dojo-attach-point=\"dd_ref\" data-dojo-props='type:\"text\",\"class\":\"prmaxinput\",name:\"dd_ref\"' data-dojo-type=\"dijit/form/TextBox\" ></td></tr>\r\n                        <tr><td class=\"prmaxrowtag\" align=\"right\" style=\"width:30%\">DD Start Day of Month</td><td width=\"70%\"><select data-dojo-props='style:\"width:50px\",\"class\":\"prmaxinput\",name:\"dd_start_day\",type:\"text\"' data-dojo-attach-point=\"dd_start_day\" data-dojo-type=\"dijit/form/ComboBox\"></select></td></tr>\r\n                        <tr><td class=\"prmaxrowtag\" align=\"right\" style=\"width:30%\">DD Start Month</td><td width=\"70%\"><input data-dojo-props='\"class\":\"prmaxinput\",name:\"dd_start_month\",type:\"text\",trim:true, constraints:{min:0,max:3}, style:\"width:3em\"' data-dojo-attach-point=\"dd_start_month\" data-dojo-type=\"dijit/form/NumberTextBox\"></td></tr>\r\n                        <tr>\r\n                            <td class=\"prmaxrowtag\" align=\"right\" style=\"width:30%\">DD Media Mn.</td><td width=\"70%\">\r\n                                <input data-dojo-attach-point=\"pay_monthly_value\" data-dojo-props='\"class\":\"prmaxinput\",name:\"pay_monthly_value\",type:\"text\",trim:true' data-dojo-type=\"dijit/form/CurrencyTextBox\" >&nbsp;\r\n                                <select data-dojo-props='\"class\":\"prmaxinput\",name:\"dd_media_pricecodeid\",style:\"width:5em\",autoComplete:true' data-dojo-attach-point=\"dd_media_pricecodeid\" data-dojo-type=\"dijit/form/ComboBox\"></select>\r\n                            </td>\r\n                        </tr>\r\n                        <tr data-dojo-attach-point=\"adv_1\"><td class=\"prmaxrowtag\" align=\"right\" style=\"width:30%\">DD Features Mn.</td><td width=\"70%\"><input data-dojo-attach-point=\"dd_advance_value\" data-dojo-props='\"class\":\"prmaxinput\",name:\"dd_advance_value\",type:\"text\",trim:true' data-dojo-type=\"dijit/form/CurrencyTextBox\"></td></tr>\r\n                        <tr data-dojo-attach-point=\"monitoring_1\"><td class=\"prmaxrowtag\" align=\"right\" style=\"width:30%\">DD Monitoring Mn.</td><td width=\"70%\"><input data-dojo-attach-point=\"dd_monitoring_value\" data-dojo-props='\"class\":\"prmaxinput\",name:\"dd_monitoring_value\",type:\"text\",trim:true' data-dojo-type=\"dijit/form/CurrencyTextBox\"></td></tr>\r\n                        <tr data-dojo-attach-point=\"int_1\"><td class=\"prmaxrowtag\" align=\"right\" style=\"width:30%\">DD International Mn.</td><td width=\"70%\"><input data-dojo-attach-point=\"dd_international_data_value\" data-dojo-props='\"class\":\"prmaxinput\",name:\"dd_international_data_value\",type:\"text\",trim:true' data-dojo-type=\"dijit/form/CurrencyTextBox\"></td></tr>\r\n                        <tr><td class=\"prmaxrowtag\" align=\"right\" style=\"width:30%\">Monthly Day</td><td width=\"70%\"><select data-dojo-props='style:\"width:50px\",\"class\":\"prmaxinput\",name:\"pay_montly_day\",type:\"text\"' data-dojo-attach-point=\"pay_montly_day\" data-dojo-type=\"dijit/form/ComboBox\"></select></td></tr>\r\n                        <tr><td class=\"prmaxrowtag\" align=\"right\" style=\"width:30%\">Next Monthly Value</td><td width=\"70%\"><input data-dojo-props='\"class\":\"prmaxinput\",name:\"next_month_value\",type:\"text\",trim:true' data-dojo-attach-point=\"next_month_value\" data-dojo-type=\"dijit/form/CurrencyTextBox\"></td></tr>\r\n                        <tr><td class=\"prmaxrowtag\" align=\"right\" valign=\"top\">Next Monthly Invoice Message</td><td><div class=\"dialogprofileframe\" ><textarea data-dojo-attach-point=\"next_invoice_message\" data-dojo-props='name:\"next_invoice_message\",\"class\":\"dijitTextarea\",style:\"width:99%;height:99%\"' data-dojo-type=\"dijit/form/Textarea\" ></textarea></div></td></tr>\r\n                        <tr><td class=\"prmaxrowtag\" align=\"right\" style=\"width:30%\">Sub Day of Month</td><td width=\"70%\"><select data-dojo-props='style:\"width:50px\",\"class\":\"prmaxinput\",name:\"sub_start_day\",type:\"text\"' data-dojo-attach-point=\"sub_start_day\" data-dojo-type=\"dijit/form/ComboBox\"></select></td></tr>\r\n                        <tr><td class=\"prmaxrowtag\" align=\"right\" style=\"width:30%\">Last Paid Month</td><td width=\"70%\"><input data-dojo-attach-point=\"last_paid_date\" data-dojo-props='\"class\":\"prmaxinput\",readonly:\"readonly\",type:\"text\",trim:true' data-dojo-type=\"dijit/form/TextBox\" ></td></tr>\r\n                        <tr><td class=\"prmaxrowtag\" align=\"right\" style=\"width:30%\">Collection Date</td><td width=\"70%\"><input data-dojo-props='\"class\":\"prmaxinput\",readonly:\"readonly\",type:\"text\",trim:true' data-dojo-attach-point=\"dd_collectiondate\" data-dojo-type=\"dijit/form/TextBox\" ></td></tr>\r\n                        <tr><td class=\"prmaxrowtag\" align=\"right\" >SEO Payment Method</td><td ><select data-dojo-props='\"class\":\"prmaxinput\",name:\"seopaymenttypeid\",style:\"width:15em\",autoComplete:true' data-dojo-attach-point=\"seopaymenttypeid\" data-dojo-type=\"dijit/form/FilteringSelect\" ></select></td></tr>\r\n                        <tr><td class=\"prmaxrowtag\" align=\"right\" >SEO Free Qty</td><td><input data-dojo-props='\"class\":\"prmaxinput\",readonly:\"readonly\", type:\"text\", \"disabled\":\"disabled\"' data-dojo-attach-point=\"seonbrincredit\" data-dojo-type=\"dijit/form/TextBox\"></td></tr>\r\n                        <tr ><td class=\"prmaxrowtag\" colspan=\"2\"><button data-dojo-props='label:\"Save\",\"class\":\"prmaxbutton\",busyLabel:\"Please Wait Saving...\",type:\"button\"' data-dojo-attach-point=\"saveFinancialNode\" data-dojo-type=\"dojox/form/BusyButton\" data-dojo-attach-event=\"onClick:_UpdateFinancial\" ></button></td></tr>\r\n                    </table>\r\n                </form>\r\n            </div>\r\n            <div data-dojo-type=\"dijit/layout/ContentPane\" data-dojo-props='\"class\":\"scrollpanel\",style:\"width:100%;height:100%\",title:\"Sales Analysis\"' >\r\n                <form data-dojo-attach-point=\"salesform\" data-dojo-props='onsubmit:\"return false\"' data-dojo-type=\"dijit/form/Form\">\r\n                    <table class=\"prmaxtable\" width=\"500px\" cellspacing=\"0\" cellpadding=\"0\" border=\"0\">\r\n                        <tr><td class=\"prmaxrowtag\" align=\"right\" style=\"width:30%\">Media</td><td width=\"70%\"><select data-dojo-props='\"class\":\"prmaxinput\",name:\"pricecodeid\",style:\"width:9em\",autoComplete:true' data-dojo-attach-point=\"pricecodeid\" data-dojo-type=\"dijit/form/FilteringSelect\"></select></td></tr>\r\n                        <tr><td class=\"prmaxrowtag\" align=\"right\" style=\"width:30%\">Features</td><td width=\"70%\"><select data-dojo-props='\"class\":\"prmaxinput\",name:\"advpricecodeid\",style:\"width:9em\",autoComplete:true' data-dojo-attach-point=\"advpricecodeid\" data-dojo-type=\"dijit/form/FilteringSelect\"></select></td></tr>\r\n                        <tr><td class=\"prmaxrowtag\" align=\"right\" style=\"width:30%\">Updateum</td><td width=\"70%\"><select data-dojo-props='\"class\":\"prmaxinput\",name:\"updatumpricecodeid\",style:\"width:9em\",autoComplete:true' data-dojo-attach-point=\"updatumpricecodeid\" data-dojo-type=\"dijit/form/FilteringSelect\"></select></td></tr>\r\n                        <tr><td class=\"prmaxrowtag\" align=\"right\" style=\"width:30%\">International</td><td width=\"70%\"><select data-dojo-props='\"class\":\"prmaxinput\",name:\"intpricecodeid\",style:\"width:9em\",autoComplete:true' data-dojo-attach-point=\"intpricecodeid\" data-dojo-type=\"dijit/form/FilteringSelect\"></select></td></tr>\r\n                        <tr><td class=\"prmaxrowtag\" align=\"right\" style=\"width:30%\">Clippings</td><td width=\"70%\"><select data-dojo-props='\"class\":\"prmaxinput\",name:\"clippingspricecodeid\",style:\"width:9em\",autoComplete:true' data-dojo-attach-point=\"clippingspricecodeid\" data-dojo-type=\"dijit/form/FilteringSelect\"></select></td></tr>\r\n\r\n                        <tr><td class=\"prmaxrowtag\" colspan=\"2\"><button data-dojo-props='label:\"Save\",\"class\":\"prmaxbutton\",busyLabel:\"Please Wait Saving...\",type:\"button\"' data-dojo-attach-point=\"savesalesanalysis\" data-dojo-type=\"dojox/form/BusyButton\" data-dojo-attach-event=\"onClick:_update_sales_analysis\" ></button></td></tr>\r\n                    </table>\r\n                </form>\r\n            </div>\r\n            <div data-dojo-type=\"dijit/layout/ContentPane\" data-dojo-props='\"class\":\"scrollpanel\",style:\"width:100%;height:100%\",title:\"Address\"' >\r\n                <form data-dojo-attach-point=\"addressform\" data-dojo-props='onsubmit:\"return false\"' data-dojo-type=\"dijit/form/Form\">\r\n                    <table class=\"prmaxtable\" width=\"500px\" cellspacing=\"0\" cellpadding=\"0\" border=\"0\">\r\n                        <tr><td class=\"prmaxrowtag\" style=\"width:30%\" align=\"right\" >Invoice Email</td><td width=\"70%\"><input data-dojo-props='\"class\":\"prmaxinput\",regExpGen:dojox.validate.regexp.emailAddress,trim:true,name:\"invoiceemail\",type:\"text\"' data-dojo-attach-point=\"invoiceemail\" data-dojo-type=\"dijit/form/ValidationTextBox\" ></td></tr>\r\n                        <tr><td class=\"prmaxrowtag\" colspan=\"2\"><button data-dojo-props='label:\"Save\",\"class\":\"prmaxbutton\",busyLabel:\"Please Wait Saving...\",type:\"button\"' data-dojo-attach-point=\"saveaddress\" data-dojo-type=\"dojox/form/BusyButton\" data-dojo-attach-event=\"onClick:_update_address\" ></button></td></tr>\r\n                    </table>\r\n                </form>\r\n            </div>\r\n        </div>\r\n\r\n        <div data-dojo-type=\"dijit/layout/ContentPane\" data-dojo-props='\"class\":\"scrollpanel\",region:\"right\",style:\"height:100%;width:150px\"' >\r\n            <button data-dojo-attach-event=\"onClick:_take_payment\" data-dojo-type=\"dijit/form/Button\" data-dojo-props='label:\"Enter Payment\",type:\"button\"'></button>\r\n            <button data-dojo-attach-event=\"onClick:_manual_payment\" data-dojo-type=\"dijit/form/Button\" data-dojo-props='label:\"Pay & Allocate\",type:\"button\"' ></button>\r\n            <button data-dojo-attach-event=\"onClick:_one_off_invoice\" data-dojo-type=\"dijit/form/Button\" data-dojo-props='label:\"One Off Invoice\",type:\"button\"' ></button>\r\n            <button data-dojo-attach-event=\"onClick:_send_proforma\" data-dojo-type=\"dijit/form/Button\" data-dojo-props='label:\"Send Proforma\",type:\"button\"' ></button>\r\n            <button data-dojo-attach-event=\"onClick:_manual_invoice\" data-dojo-type=\"dijit/form/Button\" data-dojo-props='label:\"Manual Invoice\",type:\"button\"' ></button>\r\n            <button data-dojo-attach-event=\"onClick:_invoice\" data-dojo-type=\"dijit/form/Button\" data-dojo-props='label:\"Invoice\",type:\"button\"' ></button>\r\n            <button data-dojo-attach-event=\"onClick:_credit_note\" data-dojo-type=\"dijit/form/Button\" data-dojo-props='label:\"Credit Note\",type:\"button\"' ></button>\r\n            <button data-dojo-attach-event=\"onClick:_manual_credit\" data-dojo-type=\"dijit/form/Button\" data-dojo-props='label:\"Manual Credit\",type:\"button\"' ></button>\r\n            <button data-dojo-attach-event=\"onClick:_adjustment\" data-dojo-type=\"dijit/form/Button\" data-dojo-props='label:\"Adjustment\",type:\"button\"' ></button>\r\n            <hr/>\r\n            <button data-dojo-type=\"dijit/form/Button\" data-dojo-attach-event=\"onClick:_send_confirmation\" data-dojo-props='label:\"Order Confirmation\"' ></button>\r\n            <button data-dojo-type=\"dijit/form/Button\" data-dojo-attach-event=\"onClick:_send_update_confirmation\" data-dojo-props='label:\"Upgrade Confirmation\"' ></button>\r\n            <hr/>\r\n            <button data-dojo-type=\"dijit/form/Button\" data-dojo-attach-event=\"onClick:_dd_received_confirm\" data-dojo-props='label:\"Letter DD Received\"' ></button>            \r\n        </div>\r\n    </div>\r\n    <div data-dojo-type=\"dijit/Dialog\" data-dojo-props='title:\"Send Proforma\"' data-dojo-attach-point=\"sendproformadialog\">\r\n        <div  data-dojo-attach-point=\"sendproformactrl\" data-dojo-type=\"control/customer/proforma\" ></div>\r\n    </div>\r\n    <div data-dojo-type=\"dijit/Dialog\" data-dojo-props='title:\"Invoice Account\"' data-dojo-attach-point=\"invdialog\">\r\n        <div  data-dojo-attach-point=\"invctrl\" data-dojo-type=\"control/customer/pre_pay_invoice\" ></div>\r\n    </div>\r\n    <div data-dojo-type=\"dijit/Dialog\" data-dojo-props='title:\"Enter Manual Invoice\"' data-dojo-attach-point=\"manualinvoicedialog\">\r\n        <div data-dojo-attach-point=\"manualinvoicectrl\" data-dojo-type=\"control/customer/manual_invoice\" ></div>\r\n    </div>\r\n    <div data-dojo-type=\"dijit/Dialog\" data-dojo-props='title:\"Manual Credit\"' data-dojo-attach-point=\"manualcreditdialog\">\r\n        <div data-dojo-attach-point=\"manualcreditctrl\" data-dojo-type=\"control/customer/manual_credit\" ></div>\r\n    </div>\r\n    <div data-dojo-type=\"dijit/Dialog\" data-dojo-props='title:\"Credit Account\"' data-dojo-attach-point=\"creditdialog\">\r\n        <div  data-dojo-attach-point=\"creditctrl\" data-dojo-type=\"control/customer/credit\" ></div>\r\n    </div>\r\n    <div data-dojo-type=\"dijit/Dialog\" data-dojo-props='title:\"Enter Order Confirmation\"' data-dojo-attach-point=\"sendorderconfirmationdialog\">\r\n        <div data-dojo-attach-point=\"sendorderconfirmationctrl\" data-dojo-type=\"control/customer/order_confirmation\" ></div>\r\n    </div>\r\n    <div data-dojo-type=\"dijit/Dialog\" data-dojo-props='title:\"Upgrade Confirmation\"' data-dojo-attach-point=\"upgradeconfirmationdialog\">\r\n        <div data-dojo-attach-point=\"upgradeconfirmationctrl\" data-dojo-type=\"control/customer/upgrade_order_confirmation\" ></div>\r\n    </div>\r\n    <div data-dojo-type=\"dijit/Dialog\" data-dojo-props='title:\"Send DD Confirmation\"' data-dojo-attach-point=\"dd_conf_dialog\">\r\n        <div data-dojo-attach-point=\"dd_conf_ctrl\" data-dojo-type=\"control/customer/send_dd_conf\" ></div>\r\n    </div>\r\n    <div data-dojo-type=\"dijit/Dialog\" data-dojo-props='title:\"One Off Invoice\"' data-dojo-attach-point=\"onceoffinvoicedialog\">\r\n        <div data-dojo-attach-point=\"onceoffinvoicectrl\" data-dojo-type=\"control/customer/one_off_invoice\" ></div>\r\n    </div>\r\n    <div data-dojo-type=\"dijit/Dialog\" data-dojo-props='title:\"Adjust Account\"' data-dojo-attach-point=\"adjustdialog\">\r\n        <div  data-dojo-attach-point=\"adjustctrl\" data-dojo-type=\"control/customer/adjustments\" ></div>\r\n    </div>\r\n    <div data-dojo-type=\"dijit/Dialog\" data-dojo-props='title:\"Enter Payment & Allocated\"' data-dojo-attach-point=\"allocpaymentdialog\">\r\n        <div  data-dojo-attach-point=\"allocpaymentctrl\" data-dojo-props='manualmode:\"true\"' data-dojo-type=\"control/customer/payment\" ></div>\r\n    </div>\r\n    <div data-dojo-type=\"dijit/Dialog\" data-dojo-props='title:\"Take Payment\"' data-dojo-attach-point=\"takepaymentdialog\">\r\n        <div  data-dojo-attach-point=\"takepaymentctrl\" data-dojo-type=\"control/customer/payment\" ></div>\r\n    </div>\r\n    <div data-dojo-type=\"dijit/Dialog\" data-dojo-props='title:\"Monthly Payment\"' data-dojo-attach-point=\"monthlypaymentdialog\">\r\n        <div  data-dojo-attach-point=\"monthlypaymentctrl\" data-dojo-type=\"control/customer/monthly_payment\" ></div>\r\n    </div>\r\n</div>\r\n\r\n","url:control/customer/options/templates/extendedsettings.html":"<div class=\"common_prmax_layout\">\r\n<br/>\r\n\t<form data-dojo-attach-point=\"form\" data-dojo-type=\"dijit/form/Form\" data-dojo-props='onSubmit:\"return false\",\"class\":\"common_prmax_layout\"'>\r\n\t\t<input data-dojo-attach-point=\"customerid\" data-dojo-props='name:\"icustomerid\",type:\"hidden\"' data-dojo-type=\"dijit/form/TextBox\" />\r\n\t\t<label class=\"label_3\"><input data-dojo-attach-point=\"search_show_job_roles\" data-dojo-type=\"dijit/form/CheckBox\" data-dojo-props='name:\"search_show_job_roles\",type:\"checkbox\"'/> Job Title Search</label><br/>\r\n\t\t<label class=\"label_3\"><input data-dojo-attach-point=\"search_show_coverage\" data-dojo-type=\"dijit/form/CheckBox\" data-dojo-props='name:\"search_show_coverage\",type:\"checkbox\"'/> Coverage Search</label><br/>\r\n\t\t<label class=\"label_3\"><input data-dojo-attach-point=\"search_show_profile\" data-dojo-type=\"dijit/form/CheckBox\" data-dojo-props='name:\"search_show_profile\",type:\"checkbox\"'/> Profile Search</label><br/>\r\n\t\t<label class=\"label_3\"><input data-dojo-attach-point=\"search_show_smart\" data-dojo-type=\"dijit/form/CheckBox\" data-dojo-props='name:\"search_show_smart\",type:\"checkbox\"'/> Smart Search</label><br/>\r\n\t\t<label class=\"label_3\"><input data-dojo-attach-point=\"view_outlet_results_colours\" data-dojo-type=\"dijit/form/CheckBox\" data-dojo-props='name:\"view_outlet_results_colours\",type:\"checkbox\"'/> Outlet Results Colours </label><br/>\r\n\t\t<label class=\"label_3\"><input data-dojo-attach-point=\"no_distribution\" data-dojo-type=\"dijit/form/CheckBox\" data-dojo-props='name:\"no_distribution\",type:\"checkbox\"'/> No Distribution </label><br/>\r\n\t\t<label class=\"label_3\"><input data-dojo-attach-point=\"distributionistemplated\" data-dojo-type=\"dijit/form/CheckBox\" data-dojo-props='name:\"distributionistemplated\",type:\"checkbox\"'/> Distribution is Templated</label><br/>\r\n\t\t<label class=\"label_3\"><input data-dojo-attach-point=\"no_export\" data-dojo-type=\"dijit/form/CheckBox\" data-dojo-props='name:\"no_export\",type:\"checkbox\"'/> No Export (Excel)</label><br/>\r\n\t\t<label class=\"label_3\"><input data-dojo-attach-point=\"has_clickthrought\" data-dojo-type=\"dijit/form/CheckBox\" data-dojo-props='name:\"has_clickthrought\",type:\"checkbox\"'/> Click Through Release</label><br/>\r\n\t\t<label class=\"label_3\"><input data-dojo-attach-point=\"cla\" data-dojo-type=\"dijit/form/CheckBox\" data-dojo-props='name:\"cla\",type:\"checkbox\",value:\"2\"'/> CLA Licence</label><br/>\r\n\t\t<label class=\"label_3\"><input data-dojo-attach-point=\"nla\" data-dojo-type=\"dijit/form/CheckBox\" data-dojo-props='name:\"nla\",type:\"checkbox\",value:\"3\"'/> NLA Licence</label><br/>\r\n\t\t<label class=\"label_3\"><input data-dojo-attach-point=\"extended_security\" data-dojo-type=\"dijit/form/CheckBox\" data-dojo-props='name:\"extended_security\",type:\"checkbox\"'/> Extended Security</label><br/>\r\n\t\t<label class=\"label_3\"><input data-dojo-attach-point=\"required_client\" data-dojo-type=\"dijit/form/CheckBox\" data-dojo-props='name:\"required_client\",type:\"checkbox\"'/> Required Client</label><br/><br/><br/>\r\n\t\t<br/><br/>\r\n\t\t<label class=\"label_2\">IP Restrictions</label><input data-dojo-props='type:\"text\",name:\"valid_ips\"' data-dojo-type=\"dijit/form/TextBox\" data-dojo-attach-point=\"valid_ips\" ><br/>\r\n\t\t<br/><br/>\r\n\t\t<button data-dojo-attach-event=\"onClick:_update\" data-dojo-attach-point=\"updatebtn\" data-dojo-type=\"dojox/form/BusyButton\" data-dojo-props='type:\"button\",busyLabel:\"Please Wait Updating ...\",label:\"Update\",'></button><br/><br/>\r\n\t</form>\r\n</div>\r\n","url:control/customer/templates/proforma.html":"<div>\r\n<form data-dojo-attach-point=\"form\"  onsubmit=\"return false\" data-dojo-type=\"dijit/form/Form\">\r\n<table width=\"500px\" cellpadding=\"0\" cellpadding=\"0\" >\r\n\t<tr><td colspan=\"2\"><label class=\"prmaxrowdisplaylarge\" style=\"text-align:center;display:inline\">Take Payment for <div data-dojo-props='style:\"display:inline\",\"class\":\"prmaxrowdisplaylarge\"' data-dojo-attach-point=\"customername\">Name</div></td>\r\n\t<tr><td width=\"200px\" ><label class=\"prmaxrowlabel\">Text</label></td>\r\n\t<td><input data-dojo-props='type:\"text\",name:\"proformatext\",required:true,trim:true' data-dojo-type=\"dijit/form/ValidationTextBox\" data-dojo-attach-point=\"proformatext\"></td></tr>\r\n\t<tr><td><label class=\"prmaxrowlabel\">Value (Excluding Vat)</label></td>\r\n\t\t<td><input data-dojo-props='type:\"text\",name:\"value\",required:true,trim:true' data-dojo-type=\"dijit/form/CurrencyTextBox\" data-dojo-attach-point=\"payment\"></input></td>\r\n\t</tr>\r\n\t<tr><td class=\"prmaxrowlabel\">Email Address</td>\r\n\t\t<td><input data-dojo-props='\"class\":\"prmaxinput\",name:\"email\",type:\"text\",style:\"width:100%\",trim:true,required:true,regExpGen:dojox.validate.regexp.emailAddress,invalidMessage:\"invalid email address\",size:\"40\",maxlength:\"70\"' data-dojo-attach-point=\"email\" data-dojo-type=\"dijit/form/ValidationTextBox\" /></td>\r\n\t</tr>\r\n\t<tr><td class=\"prmaxrowlabel\" colspan=\"2\" align=\"right\"><button data-dojo-type=\"dijit/form/Button\" type=\"button\" data-dojo-attach-event=\"onClick:_send_proforma\">Send Proforma</button></td>\r\n</table></form>\r\n</div>\r\n","url:control/customer/templates/adjustments.html":"<div>\r\n\t<form data-dojo-attach-point=\"form\" data-dojo-props='onsubmit:\"return false\"' data-dojo-type=\"dijit/form/Form\">\r\n\t\t<table width=\"600px\" cellpadding=\"0\" cellpadding=\"0\" >\r\n\t\t\t<tr><td colspan=\"2\"><div class=\"prmaxrowdisplaylarge\" style=\"text-align:center;display:inline\">Adjustment for </div><div class=\"prmaxrowdisplaylarge\" style=\"display:inline\" data-dojo-attach-point=\"customername\"></div></td>\r\n\t\t\t<tr><td width=\"150px\"  align=\"right\" class=\"prmaxrowlabel\">Adjustment Type</td><td><select\r\n\t\t\t\t\tdata-dojo-props='name:\"adjustmenttypeid\",autoComplete:\"true\",labelType:\"html\"'\r\n\t\t\t\t\tdata-dojo-type=\"dijit/form/FilteringSelect\"\r\n\t\t\t\t\tdata-dojo-attach-point=\"adjustmenttypeid\"></select></td></tr>\r\n\t\t\t<tr><td class=\"prmaxrowlabel\" align=\"right\" >Value</td><td>\r\n\t\t\t\t<table width=\"100%\" cellpadding=\"0\" cellpadding=\"0\" ><tr>\r\n\t\t\t\t\t<td><input\r\n\t\t\t\t\t\t\t\tdata-dojo-props='\"class\":\"prmaxinput\",type:\"text\",name:\"value\",required:\"true\",trim:\"true\",style:\"width:8em\",constraints:{fractional:true,places:\"0,2\",min:0.01,max:99999.00}'\r\n\t\t\t\t\t\t\t\tdata-dojo-type=\"dijit/form/CurrencyTextBox\"\r\n\t\t\t\t\t\t\t\tdata-dojo-attach-point=\"payment\"\r\n\t\t\t\t\t\t\t\tdata-dojo-attach-event=\"onBlur:_on_blur_amount\"></input></td>\r\n\t\t\t\t\t<td class=\"prmaxrowlabel\">Amount Remaining</td>\r\n\t\t\t\t\t<td class=\"prmaxrowlabel\"><input data-dojo-type=\"dijit/form/TextBox\" data-dojo-attach-point=\"toallocate\" data-dojo-props='type:\"text\",style:\"width:8em\",readonly:\"readonly\"' ></input></td>\r\n\t\t\t\t</tr></table>\r\n\t\t\t</td></tr>\r\n\t\t\t<tr><td class=\"prmaxrowlabel\" align=\"right\" >Adjustment Date</td><td><input data-dojo-props='type:\"text\",name:\"adjustmentdate\",required:\"true\"' data-dojo-attach-point=\"adjustmentdate\" data-dojo-type=\"dijit/form/DateTextBox\" ></td>\r\n\r\n\t\t\t<tr><td class=\"prmaxrowlabel\" align=\"right\" valign=\"top\">Message</td><td><div class=\"dialogprofileframe\" ><textarea data-dojo-attach-point=\"message\" data-dojo-props='name:\"message\",\"class\":\"dijitTextarea\",style:\"width:99%;height:99%\"' data-dojo-type=\"dijit/form/Textarea\" ></textarea></div></td></tr>\r\n\t\t\t<tr data-dojo-attach-point=\"alloc_view\"><td colspan=\"2\">\r\n\t\t\t\t<div data-dojo-attach-point=\"alloc_grid_view\" data-dojo-type=\"dijit/layout/ContentPane\" data-dojo-props='style:\"width:590px;height:200px\"'></div>\r\n\t\t\t</td></tr>\r\n\t\t\t<tr><td class=\"prmaxrowlabel\" colspan=\"2\" align=\"right\"><button data-dojo-type=\"dojox/form/BusyButton\" data-dojo-attach-point=\"addbtn\" data-dojo-props='busyLabel:\"Adding Adjustments ...\",type:\"button\"' data-dojo-attach-event=\"onClick:_adjustment\">Adjust Account</button></td>\r\n\t\t</table>\r\n\t</form>\r\n\t<div data-dojo-attach-point=\"alloc_manual\" data-dojo-type=\"control/customer/manual_allocate_amount\"></div>\r\n</div>\r\n","url:control/customer/templates/credit.html":"<div>\r\n\t<form data-dojo-attach-point=\"form\"  data-dojo-props='onsubmit:\"return false\"' data-dojo-type=\"dijit/form/Form\">\r\n\t\t<table width=\"580px\" cellpadding=\"0\" cellpadding=\"0\" >\r\n\t\t\t<tr><td colspan=\"4\"><div class=\"prmaxrowdisplaylarge\" style=\"text-align:center;display:inline\">Credit for </div><div class=\"prmaxrowdisplaylarge\" style=\"display:inline\" data-dojo-attach-point=\"customername\"></div></td></tr>\r\n\t\t\t<tr>\r\n\t\t\t\t\t<td class=\"prmaxrowlabel\" align=\"right\">Cost</td>\r\n\t\t\t\t\t<td class=\"prmaxrowlabel\"><input data-dojo-type=\"dijit/form/CurrencyTextBox\" data-dojo-attach-point=\"cost\" data-dojo-props='\"class\":\"prmaxinput\",type:\"text\",name:\"cost\",required:true,trim:true,style:\"width:8em\",constraints:{min:0.01,max:99999.00,fractional:true,places:\"0,2\"}' data-dojo-attach-event=\"onBlur:_on_amount\" ></input></td>\r\n\t\t\t\t\t<td class=\"prmaxrowlabel\" align=\"right\">Amount Remaining</td>\r\n\t\t\t\t\t<td class=\"prmaxrowlabel\"><input data-dojo-type=\"dijit/form/TextBox\" data-dojo-attach-point=\"toallocate\" data-dojo-props='type:\"text\",style:\"width:8em\",readOnly:true' ></input></td>\r\n\t\t\t</tr>\r\n\t\t\t<tr>\r\n\t\t\t\t<td align=\"right\" class=\"prmaxrowlabel\">Vat</td>\r\n\t\t\t\t<td><input data-dojo-type=\"dijit/form/CurrencyTextBox\" data-dojo-props='type:\"text\",name:\"vat\",required:true,constraints:{min:0.00,max:99999.00,fractional:true,places:\"0,2\"},style:\"width:8em\"' data-dojo-attach-point=\"vat\" data-dojo-attach-event=\"onBlur:_on_vat_amount\"></input></td>\r\n\t\t\t</tr>\r\n\t\t\t<tr>\r\n\t\t\t\t\t<td class=\"prmaxrowlabel\" align=\"right\" >Gross</td>\r\n\t\t\t\t\t<td><input data-dojo-attach-point=\"payment\" data-dojo-type=\"dijit/form/CurrencyTextBox\" data-dojo-props='\"class\":\"prmaxinput\",type:\"text\",name:\"gross\",style:\"width:8em\",constraints:{min:0.00,max:99999.00,fractional:true,places:\"0,2\"},readOnly:true'></input></td>\r\n\t\t\t</tr>\r\n\t\t\t<tr><td class=\"prmaxrowlabel\" align=\"right\" valign=\"top\">Message</td><td colspan=\"3\"><div class=\"dialogprofileframe\" ><textarea data-dojo-attach-point=\"message\" data-dojo-props='name:\"message\",\"class\":\"dijitTextarea\",style:\"width:99%;height:99%\"' data-dojo-type=\"dijit/form/Textarea\" ></textarea></div></td></tr>\r\n\t\t\t<tr><td class=\"prmaxrowlabel\" align=\"right\" >Credit Date</td><td><input data-dojo-props='type:\"text\",name:\"payment_date\",required:\"true\"' data-dojo-attach-point=\"payment_date\" data-dojo-type=\"dijit/form/DateTextBox\" ></td></tr>\r\n\t\t\t<tr>\r\n\t\t\t\t<td class=\"prmaxrowlabel\" align=\"right\">Send Email</td>\r\n\t\t\t\t<td>\r\n\t\t\t\t\t<input data-dojo-attach-point=\"emailtocustomer\" data-dojo-props='\"class\":\"prmaxinput\",name:\"emailtocustomer\",type:\"checkbox\",checked:\"checked\"' data-dojo-type=\"dijit/form/CheckBox\" data-dojo-attach-event=\"onClick:_email_required\"/>\r\n\t\t\t\t\t<input data-dojo-attach-point=\"email\" data-dojo-props='required:true,\"class\":\"prmaxinput\",name:\"email\",type:\"text\",style:\"width:20em\",trim:\"true\"' data-dojo-type=\"dijit/form/ValidationTextBox\" />\r\n\t\t\t\t</td>\r\n\t\t\t</tr>\r\n\t\t\t<tr><td colspan=\"4\" >\r\n\t\t\t\t<div data-dojo-attach-point=\"alloc_grid_view\" data-dojo-type=\"dijit/layout/ContentPane\" data-dojo-props='style:\"width:690px;height:320px\"'></div>\r\n\t\t\t</td></tr>\r\n\t\t\t<tr><td class=\"prmaxrowlabel\" colspan=\"4\" align=\"right\"><button data-dojo-type=\"dojox/form/BusyButton\" data-dojo-attach-point=\"addbtn\" data-dojo-props='labelBusy:\"Crediting Account\",type:\"button\"' data-dojo-attach-event=\"onClick:_create\">Credit Account</button></td></tr>\r\n\t\t</table>\r\n\t</form>\r\n\r\n<div data-dojo-attach-point=\"alloc_manual\" data-dojo-type=\"control/customer/manual_allocate_amount\"></div>\r\n\r\n</div>\r\n","url:dijit/form/templates/DropDownButton.html":"<span class=\"dijit dijitReset dijitInline\"\r\n\t><span class='dijitReset dijitInline dijitButtonNode'\r\n\t\tdata-dojo-attach-event=\"ondijitclick:__onClick\" data-dojo-attach-point=\"_buttonNode\"\r\n\t\t><span class=\"dijitReset dijitStretch dijitButtonContents\"\r\n\t\t\tdata-dojo-attach-point=\"focusNode,titleNode,_arrowWrapperNode,_popupStateNode\"\r\n\t\t\trole=\"button\" aria-haspopup=\"true\" aria-labelledby=\"${id}_label\"\r\n\t\t\t><span class=\"dijitReset dijitInline dijitIcon\"\r\n\t\t\t\tdata-dojo-attach-point=\"iconNode\"\r\n\t\t\t></span\r\n\t\t\t><span class=\"dijitReset dijitInline dijitButtonText\"\r\n\t\t\t\tdata-dojo-attach-point=\"containerNode\"\r\n\t\t\t\tid=\"${id}_label\"\r\n\t\t\t></span\r\n\t\t\t><span class=\"dijitReset dijitInline dijitArrowButtonInner\"></span\r\n\t\t\t><span class=\"dijitReset dijitInline dijitArrowButtonChar\">&#9660;</span\r\n\t\t></span\r\n\t></span\r\n\t><input ${!nameAttrSetting} type=\"${type}\" value=\"${value}\" class=\"dijitOffScreen\" tabIndex=\"-1\"\r\n\t\tdata-dojo-attach-event=\"onclick:_onClick\" data-dojo-attach-point=\"valueNode\" aria-hidden=\"true\"\r\n/></span>\r\n","url:control/customer/options/templates/prmaxdatasets.html":"<div>\r\n\t<div data-dojo-attach-point=\"datasetsgrid\" data-dojo-type=\"dijit/layout/ContentPane\"  data-dojo-props='region:\"center\"'></div>\r\n</div>\r\n","url:control/templates/admin.html":"<div>\r\n\t<div  data-dojo-type=\"dijit/layout/ContentPane\" data-dojo-props='region:\"top\",style:\"width:100%\"' >\r\n\t\t<div style=\"height:46px;width:100%;overflow:hidden;padding:0px;margin:0px\" class=\"searchresults\">\r\n\t\t\t<div class=\"dijitToolbarTop\" data-dojo-type=\"dijit/Toolbar\" style=\"float:left;height:100%;width:100%;padding:0px;margin:0px\" >\r\n\t\t\t\t<div data-dojo-type=\"dijit/form/DropDownButton\" data-dojo-props='iconClass:\"fa fa-filter fa-3x\",showLabel:true,label:\"Filter By\"'>\r\n\t\t\t\t\t<div data-dojo-type=\"dijit/TooltipDialog\" data-dojo-props='title:\"Enter Project filter\"' data-dojo-attach-event=\"execute: _execute_customer_filter\">\r\n\t\t\t\t\t\t<table width=\"500px\">\r\n\t\t\t\t\t\t\t<tr><td class=\"prmaxrowtag\" align=\"right\"><label>Status</label></td><td>\r\n\t\t\t\t\t\t\t<select data-dojo-type=\"dijit/form/Select\" data-dojo-attach-point=\"filter_customer_statusid\" data-dojo-props='name:\"customerstatusid\",autoComplete:true,labelType:\"html\"'></select></td></tr>\r\n\t\t\t\t\t\t\t<tr data-dojo-attach-point=\"filter_show_6\"><td class=\"prmaxrowtag\" align=\"right\"><label>Customer Source</label></td><td><select data-dojo-props='name:\"customertypeid\",autoComplete:true,labelType:\"html\"'  data-dojo-type=\"dijit/form/Select\" data-dojo-attach-point=\"filter_customertypeid\" ></select></td></tr>\r\n\t\t\t\t\t\t\t<tr data-dojo-attach-point=\"filter_show_1\"><td class=\"prmaxrowtag\" align=\"right\"><label>Financial Status</label></td><td><select data-dojo-props='name:\"financialstatusid\",autoComplete:true,labelType:\"html\"' data-dojo-type=\"dijit/form/Select\" data-dojo-attach-point=\"filter_financialstatus\" ></select></td></tr>\r\n\t\t\t\t\t\t\t<tr><td class=\"prmaxrowtag\" align=\"right\"><label>Customer Name</label></td><td><input data-dojo-props='type:\"text\",name:\"customername\"' data-dojo-type=\"dijit/form/TextBox\" data-dojo-attach-point=\"filter_customername\"></td></tr>\r\n\t\t\t\t\t\t\t<tr><td class=\"prmaxrowtag\" align=\"right\"><label>Account Nbr</label></td><td><input data-dojo-props='type:\"text\",name:\"accountnbr\"' data-dojo-type=\"dijit/form/TextBox\" data-dojo-attach-point=\"filter_accountnbr\"></td></tr>\r\n\t\t\t\t\t\t\t<tr><td class=\"prmaxrowtag\" align=\"right\"><label>Not Expired</label></td><td><input data-dojo-props='type:\"checkbox\",name:\"licence_expired\"' data-dojo-attach-point=\"filter_licence_expired\" data-dojo-type=\"dijit/form/CheckBox\"></td></tr>\r\n\t\t\t\t\t\t\t<tr><td class=\"prmaxrowtag\" align=\"right\"><label>Email</label></td><td><input data-dojo-props='type:\"text\",name:\"email\"' data-dojo-type=\"dijit/form/TextBox\" data-dojo-attach-point=\"filter_customeremail\"></td></tr>\r\n\t\t\t\t\t\t\t<tr data-dojo-attach-point=\"filter_show_2\"><td class=\"prmaxrowtag\" align=\"right\"><label>Is Internal</label></td><td><input data-dojo-props='type:\"text\",name:\"isinternal\"' data-dojo-type=\"dijit/form/CheckBox\" data-dojo-attach-point=\"filter_isinternal\"></td></tr>\r\n\t\t\t\t\t\t\t<tr><td class=\"prmaxrowtag\" align=\"right\"><label>User Name</label></td><td><input data-dojo-props='type:\"text\",name:\"contactname\"' data-dojo-type=\"dijit/form/TextBox\" data-dojo-attach-point=\"filter_contactname\"></td></tr>\r\n\t\t\t\t\t\t\t<tr data-dojo-attach-point=\"filter_show_3\"><td class=\"prmaxrowtag\" align=\"right\"><label>Invoice Nbr</label></td><td><input data-dojo-props='type:\"text\",name:\"invoicenbr\"' data-dojo-type=\"dijit/form/TextBox\" data-dojo-attach-point=\"filter_invoicenbr\"></td></tr>\r\n\t\t\t\t\t\t\t<tr data-dojo-attach-point=\"filter_show_4\"><td class=\"prmaxrowtag\" align=\"right\"><label>Credit Nt/ Nbr</label></td><td><input data-dojo-props='type:\"text\",name:\"creditnotenbr\"' data-dojo-type=\"dijit/form/TextBox\" data-dojo-attach-point=\"filter_icreditnotenbr\"></td></tr>\r\n\t\t\t\t\t\t\t<tr data-dojo-attach-point=\"filter_show_5\"><td class=\"prmaxrowtag\" align=\"right\"><label>UnAllocated</label></td><td><input data-dojo-props='type:\"checkbox\",name:\"unallocated\"' data-dojo-type=\"dijit/form/CheckBox\" data-dojo-attach-point=\"filter_unallocated\"></td></tr>\r\n\t\t\t\t\t\t\t<tr>\r\n\t\t\t\t\t\t\t\t<td align=\"left\"><button data-dojo-type=\"dijit/form/Button\" data-dojo-props='type:\"button\"' data-dojo-attach-event=\"onClick:_clear_filter\">Clear</button></td>\r\n\t\t\t\t\t\t\t\t<td align=\"right\"><button data-dojo-type=\"dijit/form/Button\" data-dojo-props='type:\"submit\",name:\"submit\"'>Submit</button></td>\r\n\t\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t\t</table>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div data-dojo-type=\"dijit/form/Button\" data-dojo-attach-event=\"onClick:_logout\" data-dojo-props='showLabel:\"true\",iconClass:\"fa fa-sign-out fa-3x\"'>Logout</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t</div>\r\n\t<div data-dojo-type=\"dijit/layout/BorderContainer\" data-dojo-props='region:\"center\",gutters:false' >\r\n\t\t<div data-dojo-attach-point=\"searchgrid_view\" data-dojo-type=\"dijit/layout/ContentPane\" data-dojo-props='region:\"left\",style:\"width:40%;height:100%\"' ></div>\r\n\t\t<div data-dojo-type=\"dijit/layout/StackContainer\" data-dojo-attach-point=\"options\" data-dojo-props='region:\"center\"'>\r\n\t\t\t<div title=\"blank\" data-dojo-attach-point=\"blank\" data-dojo-type=\"dijit/layout/ContentPane\" data-dojo-props='selected:\"selected\",style:\"width:100%;height:100%\"'></div>\r\n\t\t\t<div title=\"view_internal\" data-dojo-attach-point=\"view_internal\" data-dojo-type=\"control/customer/view_internal\" data-dojo-props='style:\"width:100%;height:100%\"'></div>\r\n\t\t\t<div title=\"view_partner\" data-dojo-attach-point=\"view_partner\" data-dojo-type=\"control/customer/view_partner\" data-dojo-props='style:\"width:100%;height:100%\"'></div>\r\n\t\t</div>\r\n\t</div>\r\n</div>\r\n","url:control/accounts/templates/DataPartner.html":"<div>\r\n\r\n\r\n</div>\r\n","url:dijit/templates/ProgressBar.html":"<div class=\"dijitProgressBar dijitProgressBarEmpty\" role=\"progressbar\"\r\n\t><div  data-dojo-attach-point=\"internalProgress\" class=\"dijitProgressBarFull\"\r\n\t\t><div class=\"dijitProgressBarTile\" role=\"presentation\"></div\r\n\t\t><span style=\"visibility:hidden\">&#160;</span\r\n\t></div\r\n\t><div data-dojo-attach-point=\"labelNode\" class=\"dijitProgressBarLabel\" id=\"${id}_label\"></div\r\n\t><span data-dojo-attach-point=\"indeterminateHighContrastImage\"\r\n\t\t   class=\"dijitInline dijitProgressBarIndeterminateHighContrastImage\"></span\r\n></div>\r\n","url:control/support/templates/spfcontrol.html":"<div>\r\n\t<div data-dojo-type=\"dijit/layout/ContentPane\" data-dojo-props='region:\"top\",style:\"height:35px;width:100%;overflow:hidden;border:1px solid black\"'>\r\n\t\t<div class=\"dijitToolbarTop\" data-dojo-type=\"dijit/Toolbar\" data-dojo-props='style:\"float:left:height:100%;width:100%\",\"class\":\"prmaxbuttonlarge\"' >\r\n\t\t\t<div data-dojo-type=\"dijit/form/Button\" data-dojo-props='iconClass:\"PrmaxResultsIcon PrmaxResultsEmpty\",showLabel:true' data-dojo-attach-event=\"onClick:_New\">New</div>\r\n\t\t</div>\r\n\t</div>\r\n\t<div data-dojo-type=\"dijit/layout/ContentPane\" data-dojo-props='region:\"center\",style:\"width:100%\"'>\r\n\t\t<div data-dojo-type=\"dijit/layout/BorderContainer\" data-dojo-attach-point=\"hosts_view\" data-dojo-props='style:\"width:100%;height:100%\"' >\r\n\t\t\t<div data-dojo-attach-point=\"hosts_grid_view\" data-dojo-type=\"dijit/layout/ContentPane\" data-dojo-props='style:\"width:50%;height:100%;\",region:\"center\"'></div>\r\n\t\t\t<div data-dojo-type=\"dijit/layout/StackContainer\" data-dojo-attach-point=\"options\" data-dojo-props='region:\"right\",style:\"width:50%;height:100%\"'>\r\n\t\t\t\t<div title=\"blank\" data-dojo-attach-point=\"blank\" data-dojo-type=\"dijit/layout/ContentPane\" data-dojo-props='selected:\"selected\",style:\"width:100%;height:100%\"'></div>\r\n\t\t\t\t<div data-dojo-attach-point=\"host_update\" data-dojo-type=\"dijit/layout/ContentPane\" data-dojo-props='style:\"width:100%;height:100%;\"'>\r\n\t\t\t\t\t<form data-dojo-attach-point=\"formupd\"  onsubmit=\"return false\" data-dojo-type=\"dijit/form/Form\">\r\n\t\t\t\t\t\t<table style=\"width:500px;border-collapse:collapse;\" cellpadding=\"0\" cellspacing=\"0\">\r\n\t\t\t\t\t\t\t<tr><td align=\"right\" class=\"prmaxrowtag\" >Domain</td><td><input data-dojo-props='type:\"text\", readOnly:true, name:\"host2\",style:\"width:300px\"' data-dojo-attach-point=\"host2\" data-dojo-type=\"dijit/form/TextBox\"></td></tr>\r\n\t\t\t\t\t\t\t<tr><td align=\"right\" class=\"prmaxrowtag\" >Is Valid Source</td><td><input data-dojo-props='type:\"text\",name:\"is_valid_source2\"' data-dojo-attach-point=\"is_valid_source2\" data-dojo-type=\"dijit/form/CheckBox\"></td></tr>\r\n\t\t\t\t\t\t\t<tr><td align=\"right\" class=\"prmaxrowtag\" >Private Key</td><td><input data-dojo-props='type:\"text\",name:\"privatekey2\",style:\"width:300px\",rows:\"4\"' data-dojo-attach-point=\"privatekey2\" data-dojo-type=\"dijit/form/SimpleTextarea\"></td></tr>\r\n\t\t\t\t\t\t\t<tr><td align=\"right\" class=\"prmaxrowtag\" >Selector</td><td><input data-dojo-props='type:\"text\",name:\"selector2\",style:\"width:300px\",rows:\"3\"' data-dojo-attach-point=\"selector2\" data-dojo-type=\"dijit/form/SimpleTextarea\"></td></tr><br/><br/>\r\n\t\t\t\t\t\t\t<tr><td></td><td align=\"right\"><button data-dojo-props='type:\"button\",busyLabel:\"Updating ...\",label:\"Update Host\"' data-dojo-attach-point=\"updbtn\" data-dojo-attach-event=\"onClick:_Update\" data-dojo-type=\"dojox/form/BusyButton\" ></button></td></tr>\r\n\t\t\t\t\t\t</table>\r\n\t\t\t\t\t</form>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t</div>\r\n\t<div data-dojo-type=\"dijit/Dialog\" title=\"New Host\" data-dojo-attach-point=\"hostdialog\">\r\n\t\t<form data-dojo-attach-point=\"form\" onsubmit=\"return false\" data-dojo-type=\"dijit/form/Form\">\r\n\t\t\t<table style=\"width:500px;border-collapse:collapse;\" cellpadding=\"0\" cellspacing=\"0\">\r\n\t\t\t\t<tr><td align=\"right\" class=\"prmaxrowtag\" >Domain</td><td><input data-dojo-props='type:\"text\",required:\"true\", name:\"host\",style:\"width:300px\"' data-dojo-attach-point=\"host\" data-dojo-type=\"dijit/form/ValidationTextBox\"></td></tr>\r\n\t\t\t\t<tr><td align=\"right\" class=\"prmaxrowtag\" >Is Valid Source</td><td><input data-dojo-props='type:\"text\",name:\"is_valid_source\"' data-dojo-attach-point=\"is_valid_source\" data-dojo-type=\"dijit/form/CheckBox\"></td></tr>\r\n\t\t\t\t<tr><td align=\"right\" class=\"prmaxrowtag\" >Private Key</td><td><input data-dojo-props='type:\"text\",name:\"privatekey\",style:\"width:300px\",rows:\"4\"' data-dojo-attach-point=\"privatekey\" data-dojo-type=\"dijit/form/SimpleTextarea\"></td></tr>\r\n\t\t\t\t<tr><td align=\"right\" class=\"prmaxrowtag\" >Selector</td><td><input data-dojo-props='type:\"text\",name:\"selector\",style:\"width:300px\",rows:\"3\"' data-dojo-attach-point=\"selector\" data-dojo-type=\"dijit/form/SimpleTextarea\"></td></tr>\r\n\r\n\t\t\t\t<tr><td colspan=\"2\"><br/></td></tr>\r\n\t\t\t\t<tr>\r\n\t\t\t\t\t<td><button data-dojo-props='type:\"button\",label:\"Close\"' data-dojo-attach-event=\"onClick:_Close\" data-dojo-type=\"dijit/form/Button\"></button></td>\r\n\t\t\t\t\t<td align=\"right\"><button data-dojo-props='type:\"button\",busyLabel:\"Adding ...\",label:\"Add Host\"' data-dojo-attach-point=\"addbtn\" data-dojo-attach-event=\"onClick:_Add\" data-dojo-type=\"dojox/form/BusyButton\"></button></td>\r\n\t\t\t\t</tr>\r\n\t\t\t</table>\r\n\t\t</form>\r\n\t</div>\r\n<!--\t\r\n\t<div data-dojo-attach-point=\"getspfctl\" data-dojo-type=\"dijit/Dialog\"  title=\"Look Up Domain Record\">\r\n\t\t<div><br/>\r\n\t\t<button data-dojo-type=\"dijit/form/Button\" type=\"button\" data-dojo-attach-event=\"onClick:_cancel_dialog\" style=\"float:left\">Close</button>\r\n\t\t<button data-dojo-type=\"dijit/form/Button\" type=\"button\" data-dojo-attach-event=\"onClick:_check_domain\" style=\"float:right\">OK</button>\r\n\t\t</div><br/>\r\n\t</div>\r\n-->\t\r\n</div>\r\n","url:dijit/form/templates/TextBox.html":"<div class=\"dijit dijitReset dijitInline dijitLeft\" id=\"widget_${id}\" role=\"presentation\"\r\n\t><div class=\"dijitReset dijitInputField dijitInputContainer\"\r\n\t\t><input class=\"dijitReset dijitInputInner\" data-dojo-attach-point='textbox,focusNode' autocomplete=\"off\"\r\n\t\t\t${!nameAttrSetting} type='${type}'\r\n\t/></div\r\n></div>\r\n","url:dojox/form/resources/PasswordValidator.html":"<div dojoAttachPoint=\"containerNode\">\r\n\t<input type=\"hidden\" name=\"${name}\" value=\"\" dojoAttachPoint=\"focusNode\" />\r\n</div>","*now":function(r){r(["dojo/i18n!*preload*dojo/nls/prmaxcontrol*[\"ar\",\"ca\",\"cs\",\"da\",\"de\",\"el\",\"en-gb\",\"en-us\",\"es-es\",\"fi-fi\",\"fr-fr\",\"he-il\",\"hu\",\"it-it\",\"ja-jp\",\"ko-kr\",\"nl-nl\",\"nb\",\"pl\",\"pt-br\",\"pt-pt\",\"ru\",\"sk\",\"sl\",\"sv\",\"th\",\"tr\",\"zh-tw\",\"zh-cn\",\"ROOT\"]"]);}}});define("dojo/prmaxcontrol",[],1);