/*
	Copyright (c) 2004-2011, The Dojo Foundation All Rights Reserved.
	Available via Academic Free License >= 2.1 OR the modified BSD license.
	see: http://dojotoolkit.org/license for details
*/


if(!dojo._hasResource["prcommon.date.DateExtended"]){dojo._hasResource["prcommon.date.DateExtended"]=true;dojo.provide("prcommon.date.DateExtended");dojo.require("ttl.BaseWidget");dojo.declare("prcommon.date.DateExtended",[ttl.BaseWidget],{widgetsInTemplate:true,name:"",required:false,templateString:"<div>\r\n\t<table style=\"width:100%;border-style:collapsed\" cellpadding=\"0\" cellspacing=\"0\">\r\n\t\t<tr>\r\n\t\t\t<td><input style=\"width:100px\" dojoAttachPoint=\"text_box\" type=\"text\" dojoType=\"dijit.form.TextBox\"></td>\r\n\t\t\t<td><input  style=\"width:80px\" dojoAttachPoint=\"date_box\" class=\"prmaxbutton\" type=\"text\"  dojoType=\"dijit.form.DateTextBox\" ></td>\r\n\t\t\t<td><label dojoAttachPoint=\"label_box\" >Month Only</label></td>\r\n\t\t\t<td><input dojoAttachPoint=\"month_checkbox\" type=\"checkbox\" value=\"1\" dojoType=\"dijit.form.CheckBox\"></td>\r\n\t\t</tr>\r\n\t</table>\r\n</div>\r\n",postCreate:function(){this.date_box.set("value",new Date());this.inherited(arguments);},_getData:function(){return dojo.toJson({text:this.text_box.get("value"),date:ttl.utilities.toJsonDate(this.date_box.get("value")),month:this.month_checkbox.get("value")});},_setValueAttr:function(_1){if(_1==null||_1.date.year==null){this.text_box.set("value","");this.date_box.set("value",(this.required)?new Date():null);this.month_checkbox.set("value",false);}else{this.text_box.set("value",_1.text);if(_1.date.year==null){this.date_box.set("value","");}else{this.date_box.set("value",new Date(_1.date.year,_1.date.month-1,_1.date.day));}this.month_checkbox.set("value",_1.month);}},_getValueAttr:function(){return this._getData();},isValid:function(){var _2=this.date_box.get("value");if(_2==null&&this.required){return false;}else{return true;}},focus:function(){this.date_box.focus();}});}