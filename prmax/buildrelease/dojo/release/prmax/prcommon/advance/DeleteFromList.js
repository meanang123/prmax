/*
	Copyright (c) 2004-2011, The Dojo Foundation All Rights Reserved.
	Available via Academic Free License >= 2.1 OR the modified BSD license.
	see: http://dojotoolkit.org/license for details
*/


if(!dojo._hasResource["prcommon.advance.DeleteFromList"]){dojo._hasResource["prcommon.advance.DeleteFromList"]=true;dojo.provide("prcommon.advance.DeleteFromList");dojo.declare("prcommon.advance.DeleteFromList",[ttl.BaseWidget],{widgetsInTemplate:true,templateString:"<div>\r\n\t<form  class=\"prmaxdefault\" dojoAttachPoint=\"requiredNode\" onSubmit=\"return false\" dojoType=\"dijit.form.Form\">\r\n\t\t<input type=\"hidden\" dojoType=\"dijit.form.TextBox\" dojoAttachPoint=\"advancefeatureslistid\" name=\"advancefeatureslistid\" >\r\n\t\t<table width=\"100%\" class=\"prmaxtable\" cellpadding=\"0\" cellpadding=\"0\">\r\n\t\t\t<tr><td colspan=\"2\">&nbsp;</td></tr>\r\n\t\t\t<tr><td class=\"prmaxrowtag\" valign=\"top\">Selection</td><td><div name=\"deleteoptions\" dojoAttachPoint=\"source\" dojoType=\"prmax.common.SelectOptions\" i></td></tr>\r\n\t\t\t<tr><td colspan=\"2\">&nbsp;</td></tr>\r\n\t\t\t<tr><td colspan=\"2\" align=\"right\"><button class=\"prmaxbutton\" iconClass=\"dijitPrmaxIcon dijitPrmaxDelete\"  type=\"button\" dojoAttachEvent=\"onClick:_SubmitForm\" dojoAttachPoint=\"saveNode\" dojoType=\"dojox.form.BusyButton\" busyLabel=\"Please Wait Deleteing ...\" label=\"Delete\"></button></td></tr>\r\n\t\t</table>\r\n\t</form>\r\n</div>\r\n",constructor:function(){this._DeleteListCall=dojo.hitch(this,this._DeleteList);},postCreate:function(){dojo.connect(this.requiredNode,"onSubmit",dojo.hitch(this,this._Submit));this.inherited(arguments);},Load:function(_1,_2){this.advancefeatureslistid.set("value",_1);this.source.setOptions(_2);},_SubmitForm:function(){this.requiredNode.submit();},_Submit:function(){if(confirm("Remove entries?")==false){this.saveNode.cancel();return;}dojo.xhrPost(ttl.utilities.makeParams({load:this._DeleteListCall,url:"/advance/delete_list_entries",content:this.requiredNode.get("value")}));},_DeleteList:function(_3){if(_3.success=="OK"){dojo.publish(PRCOMMON.Events.Advance_Session_Changed,[_3.data]);dojo.publish(PRCOMMON.Events.Display_Clear,[false]);dojo.publish(PRCOMMON.Events.Dialog_Close,["delete_from_list"]);}else{alert("Problem Deleting Selection");}this.saveNode.cancel();}});}