/*
	Copyright (c) 2004-2011, The Dojo Foundation All Rights Reserved.
	Available via Academic Free License >= 2.1 OR the modified BSD license.
	see: http://dojotoolkit.org/license for details
*/


if(!dojo._hasResource["prcommon.newsrooms.add"]){dojo._hasResource["prcommon.newsrooms.add"]=true;dojo.provide("prcommon.newsrooms.add");dojo.require("dojo.data.ItemFileReadStore");dojo.require("dijit.form.ValidationTextBox");dojo.require("dijit.form.FilteringSelect");dojo.require("dijit.form.Button");dojo.require("dojo.data.ItemFileWriteStore");dojo.require("dijit.layout.ContentPane");dojo.declare("prcommon.newsrooms.add",[ttl.BaseWidget,dijit.layout.ContentPane],{widgetsInTemplate:true,templateString:"<div>\r\n\t<div data-dojo-attach-point=\"tabcont\" data-dojo-type=\"dijit.layout.TabContainer\" data-dojo-props=\"region:'center',splitter:true,'class':'bordered'\">\r\n\t\t<div data-dojo-attach-point=\"details\"  data-dojo-type=\"dijit.layout.ContentPane\" data-dojo-props=\"title:'Details',style:'width:700px;height:700px;overflow :auto','class':'bordered scrollpane',selected:'selected'\">\r\n\t\t\t<form data-dojo-attach-point=\"newsroom_form\" data-dojo-type=\"dijit.form.Form\" data-dojo-props='\"onSubmit\":\"return false\", name:\"statement_form\", style:\"margin:5px\"'>\r\n\t\t\t\t<table width=\"99%\" border=\"0\" cellpadding=\"0\" cellspacing=\"1\" >\r\n\t\t\t\t\t<tr><td align=\"right\" class=\"prmaxrowtag\">Description</td><td colspan=\"2\"><input data-dojo-props='style:\"width:400px\", \"class\":\"prmaxrequired\", name:\"description\", type:\"text\", maxLength:45, trim:true, required:true, invalidMessage:\"Description field must be filled in\"' data-dojo-attach-point=\"description\" data-dojo-type=\"dijit.form.ValidationTextBox\"/></td></tr>\r\n\t\t\t\t\t<tr><td align=\"right\" class=\"prmaxrowtag\" width=\"20%\">News Room Root</td><td colspan=\"2\"><input data-dojo-type=\"dijit.form.ValidationTextBox\" data-dojo-attach-point=\"news_room_root\" data-dojo-props='lowercase:true,\"class\":\"prmaxrequired\",name:\"news_room_root\",trim:true,maxLength:20,type:\"text\",style:\"width:10em\", regExp:\"[\\\\w]+\", invalidMessage:\"Invalid\"'/></td></tr>\r\n\t\t\t\t\t<tr>\r\n\t\t\t\t\t\t<td align=\"right\" class=\"prmaxrowtag\">Custom Link 1</td>\r\n\t\t\t\t\t\t<td colspan=\"2\">\r\n\t\t\t\t\t\t\t<span class=\"prmaxrowtag\">Name</span><input data-dojo-attach-point=\"link_1_name\" data-dojo-props='\"class\":\"prmaxinput\",name:\"link_1_name\",type:\"text\",maxLength:\"80\",trim:true,style:\"width:10em\"' data-dojo-type=\"dijit.form.TextBox\" />\r\n\t\t\t\t\t\t\t<span class=\"prmaxrowtag\">Url</span><input data-dojo-attach-point=\"link_1_url\" data-dojo-props='\"class\":\"prmaxinput\",name:\"link_1_url\",type:\"text\",maxLength:\"80\",regExpGen:dojox.validate.regexp.url,trim:true,style:\"width:20em\"' data-dojo-type=\"dijit.form.ValidationTextBox\" />\r\n\t\t\t\t\t\t</td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t\t<tr>\r\n\t\t\t\t\t\t<td align=\"right\" class=\"prmaxrowtag\">Custom Link 2</td>\r\n\t\t\t\t\t\t<td colspan=\"2\">\r\n\t\t\t\t\t\t\t<span class=\"prmaxrowtag\">Name</span><input data-dojo-attach-point=\"link_2_name\" data-dojo-props='\"class\":\"prmaxinput\",name:\"link_2_name\",type:\"text\",maxLength:\"80\",trim:true,style:\"width:10em\"' data-dojo-type=\"dijit.form.TextBox\" />\r\n\t\t\t\t\t\t\t<span class=\"prmaxrowtag\">Url</span><input data-dojo-attach-point=\"link_2_url\" data-dojo-props='\"class\":\"prmaxinput\",name:\"link_2_url\",type:\"text\",maxLength:\"80\",regExpGen:dojox.validate.regexp.url,trim:true,style:\"width:20em\"' data-dojo-type=\"dijit.form.ValidationTextBox\" />\r\n\t\t\t\t\t\t</td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t\t<tr>\r\n\t\t\t\t\t\t<td align=\"right\" class=\"prmaxrowtag\" valign=\"top\" >Header Color</td>\r\n\t\t\t\t\t\t<td width=\"200px\">\r\n\t\t\t\t\t\t\t<div data-dojo-type=\"prmax.customer.clients.pickcolour\" data-dojo-attach-point=\"header_colour\" data-dojo-props='name:\"header_colour\",style:\"width:200px\"' data-dojo-attach-event=\"onClick:_ColourUpdate\" ></div>\r\n\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t<td >\r\n\t\t\t\t\t\t\t<label><input data-dojo-attach-point=\"default_header_colour\" data-dojo-type=\"dijit.form.CheckBox\" data-dojo-props='\"class\":\"prmaxdefault\",type:\"checkbox\",value:\"0\",checked:false' data-dojo-attach-event=\"onClick:_use_default_color\"/>Use Default</label><br/>\r\n\t\t\t\t\t\t</td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t\t<tr><td align=\"right\" class=\"prmaxrowtag\" valign=\"top\" >Header Image Left</td><td colspan=\"2\"><div data-dojo-type=\"prmax.customer.clients.headerimage\" data-dojo-attach-point=\"headerimage_left\" data-dojo-props='style:\"width:500px;height:120px;margin:2px\",\"class\":\"bordered\",title:\"Left side Image\",imagetypeid:1,name:\"headerimageleftid\"' ></div></td></tr>\r\n\t\t\t\t\t<tr><td align=\"right\" class=\"prmaxrowtag\" valign=\"top\" >Header Image Right</td><td colspan=\"2\"><div data-dojo-type=\"prmax.customer.clients.headerimage\" data-dojo-attach-point=\"headerimage_right\" data-dojo-props='style:\"width:500px;height:120px;margin:2px\",\"class\":\"bordered\",title:\"Right side Image\",imagetypeid:2,name:\"headerimagerightid\"' ></div></td></tr>\r\n\t\t\t\t\t<tr><td align=\"right\" class=\"prmaxrowtag\" valign=\"top\" >About</td><td colspan=\"3\"><div data-dojo-type=\"dijit.Editor\" data-dojo-attach-point=\"about_template\" data-dojo-props='name:\"about_template\", \"class\":\"bordered\", extraPlugins:[{name:\"dijit._editor.plugins.FontChoice\",command:\"fontName\", generic:false},\"fontSize\",\"createLink\",\"viewsource\",\"preview\"],style:\"width:95%;height:150px\"' ></div></td></tr>\r\n\t\t\t\t</table>\r\n\t\t\t</form>\r\n\t\t</div>\r\n\t\t<div data-dojo-attach-point=\"contact\"  data-dojo-type=\"dijit.layout.ContentPane\" data-dojo-props=\"title:'Contact',style:'height:700px;width:700px;overflow :auto','class':'bordered scrollpane'\">\r\n\t\t\t<form data-dojo-attach-point=\"contact_form\" data-dojo-type=\"dijit.form.Form\" data-dojo-props='\"class\":\"prmaxdefault common_prmax_layout\",onsubmit:\"return false\",style:\"margin:5px\"'>\r\n\t\t\t\t<table width=\"99%\" border=\"0\" cellpadding=\"0\" cellspacing=\"1\" >\r\n\t\t\t\t\t<tr><td><input data-dojo-type=\"dijit.form.TextBox\" data-dojo-attach-point=\"newsroomid\" data-dojo-props='name:\"newsroomid\",type:\"hidden\",value:\"-1\"' ></td></tr>\r\n\t\t\t\t\t<tr><td class=\"prmaxrowtag\">Www</td><td><input data-dojo-attach-point=\"www\" data-dojo-props='name:\"www\",type:\"text\",size:\"40\",maxLength:\"90\",trim:true,style:\"width:25em\",regExpGen:dojox.validate.regexp.url' data-dojo-type=\"dijit.form.ValidationTextBox\"/></td></tr>\r\n\t\t\t\t\t<tr><td class=\"prmaxrowtag\">Email</td><td><input data-dojo-attach-point=\"email\" data-dojo-props='name:\"email\",type:\"text\",size:\"40\",maxLength:\"84\",trim:true,style:\"width:25em\",regExpGen:dojox.validate.regexp.emailAddress' data-dojo-type=\"dijit.form.ValidationTextBox\"/></td></tr>\r\n\t\t\t\t\t<tr><td class=\"prmaxrowtag\">Tel</td><td><input data-dojo-attach-point=\"tel\" data-dojo-props='name:\"tel\",type:\"text\",maxLength:\"40\",style:\"15em\"' data-dojo-type=\"dijit.form.TextBox\"/></td></tr>\r\n\t\t\t\t\t<tr><td class=\"prmaxrowtag\">Twitter</td><td><input data-dojo-attach-point=\"twitter\" data-dojo-props='\"class\":\"prmaxinput\",name:\"twitter\",type:\"text\",maxLength:\"90\",regExpGen:dojox.validate.regexp.url,trim:true,style:\"width:25em\"' data-dojo-type=\"dijit.form.ValidationTextBox\" /></td></tr>\r\n\t\t\t\t\t<tr><td class=\"prmaxrowtag\">Facebook</td><td><input data-dojo-attach-point=\"facebook\" data-dojo-props='\"class\":\"prmaxinput\",name:\"facebook\",type:\"text\",maxLength:\"90\",regExpGen:dojox.validate.regexp.url,trim:true,style:\"width:25em\"' data-dojo-type=\"dijit.form.ValidationTextBox\" /></td></tr>\r\n\t\t\t\t\t<tr><td class=\"prmaxrowtag\">Linkedin</td><td><input data-dojo-attach-point=\"linkedin\" data-dojo-props='\"class\":\"prmaxinput\",name:\"linkedin\",type:\"text\",maxLength:\"80\",regExpGen:dojox.validate.regexp.url,trim:true,style:\"width:25em\"' data-dojo-type=\"dijit.form.ValidationTextBox\" /></td></tr>\r\n\t\t\t\t</table>\r\n\t\t\t</form>\r\n\t\t</div>\r\n\t\t\r\n\t</div>\r\n\t<div data-dojo-type=\"dijit.layout.ContentPane\" data-dojo-props=\"style:'height:100px',region:'bottom'\">\r\n\t\t<form data-dojo-attach-point=\"form\" data-dojo-type=\"dijit.form.Form\" data-dojo-props='onSubmit:\"return false\"'>\r\n\t\t\t<br/>\r\n\t\t\t<button data-dojo-attach-event=\"onClick:_Close\" data-dojo-attach-point=\"clearNode\" data-dojo-type=\"dijit.form.Button\" data-dojo-props='type:\"button\", label:\"Close\",\"class\":\"btnleft\",style:\"float:left\"'></button>\r\n\t\t\t<button data-dojo-attach-event=\"onClick:_Add\" data-dojo-attach-point=\"saveNode\" data-dojo-type=\"dojox.form.BusyButton\" data-dojo-props='style:\"padding-right:18px\",type:\"button\",busyLabel:\"Please Wait Saving...\",label:\"Save\",\"class\":\"btnright\",style:\"float:right\"'></button>\r\n\t\t</form>\t\t\t\r\n\t</div>\r\n\r\n</div>\r\n",constructor:function(){this._AddedCallback=dojo.hitch(this,this._Added);this.inherited(arguments);},postCreate:function(){this.icustomerid=PRMAX.utils.settings.cid;this.inherited(arguments);},Load:function(_1){this._dialog=_1;},_Clear:function(){this.description.set("value","");this.news_room_root.set("value","");this.saveNode.set("disabled",false);},_Added:function(_2){if(_2.success=="DU"){alert("Newsroom Already Exists");}else{if(_2.success=="OK"){dojo.publish("/newsroom/add",[_2.data.newsroom]);alert("Newsroom Added");this.saveNode.cancel();}else{if(_2.success=="FA"){alert(_2.message);}else{alert("Problem Adding Newsroom");}}}},_Add:function(){if(ttl.utilities.formValidator(this.newsroom_form)==false||ttl.utilities.formValidator(this.contact_form)==false){alert("Please Enter Details");return false;}var _3=dojo.mixin(this.newsroom_form.get("value"),this.contact_form.get("value"));_3["customerid"]=this.icustomerid;dojo.xhrPost(ttl.utilities.makeParams({load:this._AddedCallback,url:"/newsroom/newsroom_add",content:_3}));},Clear:function(){this._Clear();},showClose:function(_4){this.dlg=_4;dojo.removeClass(this.clearNode,"prmaxhidden");},_Close:function(){this._dialog.hide();},_use_default_color:function(){if(this.default_header_colour.checked){this.header_colour.set("value","#2e74b5");}},_ColourUpdate:function(){this.default_header_colour.set("checked",false);},resize:function(){this.tabcont.resize({w:700,h:700});},});}