/*
	Copyright (c) 2004-2011, The Dojo Foundation All Rights Reserved.
	Available via Academic Free License >= 2.1 OR the modified BSD license.
	see: http://dojotoolkit.org/license for details
*/


if(!dojo._hasResource["prcommon.crm.responses.search"]){dojo._hasResource["prcommon.crm.responses.search"]=true;dojo.provide("prcommon.crm.responses.search");dojo.require("dojo.data.ItemFileReadStore");dojo.declare("prcommon.crm.responses.search",[ttl.BaseWidget],{widgetsInTemplate:true,templateString:"<div>\r\n\t<form data-dojo-attach-point=\"form\" data-dojo-type=\"dijit.form.Form\" data-dojo-props='\"onSubmit\":\"return false\", style:\"margin:5px\"'>\r\n\t\t<table width=\"100%\" class=\"prmaxtable\" >\r\n\t\t\t<tr><td align=\"left\" width=\"85px\" class=\"prmaxrowtag\"><label>Statement: </label></td>\r\n\t\t\t\t<td><select data-dojo-props='name:\"statementid\",autoComplete:true,labelType:\"html\", style:\"width:300px\"' data-dojo-type=\"dijit.form.Select\" data-dojo-attach-point=\"statementid\" ></select></td>\r\n\t\t\t</tr>  \r\n\t\t\t<tr><td colspan=\"2\">&nbsp;</td></tr>\r\n\t\t\t<tr><td colspan=\"2\" align=\"right\"><button data-dojo-attach-event=\"onClick:_select\" data-dojo-attach-point=\"selectbtn\" data-dojo-type=\"dijit.form.Button\" data-dojo-props='\"class\":\"prmaxdefault\", label:\"Select\"'></button></td></tr>\r\n\t\t</table>\r\n\t</form>\r\n</div>\r\n",constructor:function(){this._SelectCallback=dojo.hitch(this,this._Select_Call);this._statements=new prcommon.data.QueryWriteStore({url:"/common/lookups?searchtype=statements"});dojo.subscribe("/statement/add",dojo.hitch(this,this._AddStatementEvent));this.inherited(arguments);},postCreate:function(){this.statementid.set("store",this._statements);this.inherited(arguments);},Load:function(_1){this._dialog=_1;},_select:function(){var _2={};_2["statementid"]=this.statementid.value;dojo.xhrPost(ttl.utilities.makeParams({load:this._SelectCallback,url:"/statement/statement_get",content:_2}));},_Select_Call:function(_3){if(_3.success="OK"){dojo.publish("/statement/get",[{data:_3.data}]);this._dialog.hide();}},_AddStatementEvent:function(_4){_4.id=_4.statementid;_4.name=_4.statementdescription;this._statements.newItem(_4);this.statementid.set("value",_4.statementid);},});}