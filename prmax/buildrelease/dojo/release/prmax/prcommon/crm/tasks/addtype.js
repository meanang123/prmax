/*
	Copyright (c) 2004-2011, The Dojo Foundation All Rights Reserved.
	Available via Academic Free License >= 2.1 OR the modified BSD license.
	see: http://dojotoolkit.org/license for details
*/


if(!dojo._hasResource["prcommon.crm.tasks.addtype"]){dojo._hasResource["prcommon.crm.tasks.addtype"]=true;dojo.provide("prcommon.crm.tasks.addtype");dojo.require("dojo.data.ItemFileWriteStore");dojo.require("ttl.BaseWidget");dojo.declare("prcommon.crm.tasks.addtype",[ttl.BaseWidget],{widgetsInTemplate:true,templateString:"<div>\r\n\t<form data-dojo-attach-point=\"form\"  data-dojo-props='onsubmit:\"return false\"' data-dojo-type=\"dijit.form.Form\">\r\n\t\t<table width=\"100%\" class=\"prmaxtable\" cellspacing=\"0\" cellpadding=\"0\" border=\"0\" style=\"padding-top:5px\">\r\n\t\t\t<tr><td align=\"right\" valign=\"top\" class=\"prmaxrowtag\">Description</td><td><input data-dojo-props='type:\"text\",name:\"tasktypedescription\",style:\"width:20em\"' data-dojo-type=\"dijit.form.TextBox\" data-dojo-attach-point=\"tasktypedescription\" ></td></tr>\r\n\t\t\t<tr>\r\n\t\t\t\t<td><button data-dojo-type=\"dijit.form.Button\" data-dojo-attach-point=\"clsbtn\" data-dojo-attach-event=\"onClick:_close\" data-dojo-props='label:\"Close\"'></button></td>\r\n\t\t\t\t<td align=\"right\"><button data-dojo-type=\"dojox.form.BusyButton\" data-dojo-attach-point=\"addbtn\" data-dojo-props='busyLabel:\"Adding ...\",label:\"Add\"' data-dojo-attach-event=\"onClick:_add\"></button></td>\r\n\t\t\t</tr>\r\n\t\t</table>\r\n\t</form>\r\n</div>\r\n\r\n",constructor:function(){this._add_call_back=dojo.hitch(this,this._add_call);},postCreate:function(){},load:function(_1,_2){this._customerid=_2;this._dialog=_1;this._clear();},_close:function(){if(this._dialog!=null){this._dialog.hide();}},_add_call:function(_3){if(_3.success=="OK"){alert("Task Type Added");this._close();this._clear();dojo.publish("tasktype/add",[_3.data]);}else{alert("Problem Adding Type");}this.addbtn.cancel();},_clear:function(){this.addbtn.cancel();this.tasktypedescription.set("value","");},_add:function(){if(ttl.utilities.formValidator(this.form)==false){alert("Please Enter Details");this.addbtn.cancel();return false;}var _4=this.form.get("value");dojo.xhrPost(ttl.utilities.makeParams({load:dojo.hitch(this,this._add_call_back),url:"/crm/tasks/tasktype_add",content:_4}));}});}