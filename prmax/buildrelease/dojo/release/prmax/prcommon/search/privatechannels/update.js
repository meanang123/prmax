/*
	Copyright (c) 2004-2011, The Dojo Foundation All Rights Reserved.
	Available via Academic Free License >= 2.1 OR the modified BSD license.
	see: http://dojotoolkit.org/license for details
*/


if(!dojo._hasResource["prcommon.search.privatechannels.update"]){dojo._hasResource["prcommon.search.privatechannels.update"]=true;dojo.provide("prcommon.search.privatechannels.update");dojo.require("dojo.data.ItemFileReadStore");dojo.require("dijit.form.ValidationTextBox");dojo.require("dijit.form.FilteringSelect");dojo.require("dijit.form.Button");dojo.require("dojo.data.ItemFileWriteStore");dojo.declare("prcommon.search.privatechannels.update",[ttl.BaseWidget],{widgetsInTemplate:true,templateString:"<div>\r\n\t<form data-dojo-attach-point=\"update_privatechannel_form\" data-dojo-type=\"dijit.form.Form\" data-dojo-props='\"onSubmit\":\"return false\", name:\"update_privatechannel_form\", style:\"margin:5px\"'>\r\n\t\t<input data-dojo-attach-point=\"prmax_outlettypeid\" data-dojo-props='prmax_outlettypeid\", type:\"hidden\", value:\"-1\"' data-dojo-type=\"dijit.form.TextBox\" >\r\n\t\t<table class=\"prmaxtable\" width=\"700px\" >\r\n\t\t\t<tr><td colspan=\"2\" align=\"center\" class=\"prmaxrowdisplaylarge\" > Private Media Channel Details</td></tr>\r\n\t\t\t<tr><td class=\"prmaxrowtag\" >Description</td><td class=\"prmaxrowdisplay\" width=\"86%\"><input data-dojo-props='invalidMessage:\"Description field must be filled in\", style:\"width:98%\", \"class\":\"prmaxrequired\", name:\"prmax_outlettypename\", type:\"text\", maxlength:80, trim:true, required:true' data-dojo-type=\"dijit.form.ValidationTextBox\" data-dojo-attach-point=\"prmax_outlettypename\"/></td></tr>\r\n\t\t\t<tr><td colspan = \"2\" align=\"right\"><button data-dojo-props='\"class\":\"prmaxbutton\", type:\"button\", label:\"Update\", busyLabel:\"Please Wait Updating\" ' data-dojo-type=\"dojox.form.BusyButton\" data-dojo-attach-event=\"onClick:_Update\" data-dojo-attach-point=\"update_form_btn\"></button></td></tr>\r\n\t\t</table>\r\n\t</form>\r\n</div>\r\n",constructor:function(){this._AddedCallback=dojo.hitch(this,this._Added);this._LoadCallback=dojo.hitch(this,this._LoadCall);this._UpdatePrivateChannelCallBack=dojo.hitch(this,this._UpdatePrivateChannelCall);this.inherited(arguments);},postCreate:function(){this.icustomerid=PRMAX.utils.settings.cid;this.inherited(arguments);},Load:function(_1,_2){this._dialog=_1;this._prmax_outlettypeid=_2;this.prmax_outlettypeid.set("value",_2);var _3={};_3["prmax_outlettypeid"]=_2;dojo.xhrPost(ttl.utilities.makeParams({load:this._LoadCallback,url:"/prmax_outlettypes/get",content:_3}));},_LoadCall:function(_4){if(_4.success=="OK"){this.prmax_outlettypeid.set("value",_4.data.prmax_outlettypeid);this.prmax_outlettypename.set("value",_4.data.prmax_outlettypename);}else{alert("Problem Loading Private Media Channel");}},_Update:function(){if(ttl.utilities.formValidator(this.update_privatechannel_form)==false){alert("Not all required field filled in");this.update_form_btn.cancel();return;}if(confirm("Update?")){var _5=this.update_privatechannel_form.get("value");_5["customerid"]=this.icustomerid;dojo.xhrPost(ttl.utilities.makeParams({load:dojo.hitch(this,this._UpdatePrivateChannelCallBack),url:"/prmax_outlettypes/update",content:_5}));}},_UpdatePrivateChannelCall:function(_6){if(_6.success=="OK"){alert("Private Media Channel Updated");this.update_form_btn.cancel();}else{if(_6.success=="DU"){alert("Private Media Channel Already Exists");this.update_form_btn.cancel();}else{alert("Problem updating Private Media Channel");this.update_form_btn.cancel();}}},_Close:function(){this._dialog.hide();},});}