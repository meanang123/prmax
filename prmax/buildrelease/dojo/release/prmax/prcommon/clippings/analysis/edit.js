/*
	Copyright (c) 2004-2011, The Dojo Foundation All Rights Reserved.
	Available via Academic Free License >= 2.1 OR the modified BSD license.
	see: http://dojotoolkit.org/license for details
*/


if(!dojo._hasResource["prcommon.clippings.analysis.edit"]){dojo._hasResource["prcommon.clippings.analysis.edit"]=true;dojo.provide("prcommon.clippings.analysis.edit");dojo.require("ttl.BaseWidget");dojo.declare("prcommon.clippings.analysis.edit",[ttl.BaseWidget],{widgetsInTemplate:true,templateString:"<div>\r\n\t<div data-dojo-attach-point=\"borderControl\" data-dojo-type=\"dijit.layout.BorderContainer\"  style=\"width:100%;height:100%;overflow: hidden\" data-dojo-props=\"gutters:false\">\r\n\t\t<div data-dojo-type=\"dijit.layout.ContentPane\" data-dojo-attach-point=\"controls\" data-dojo-props='region:\"top\",style:\"height:42px;width:100%;overflow:hidden\"'>\r\n\t\t\t<div data-dojo-type=\"dijit.Toolbar\" data-dojo-props='style:\"height:99%;width:100%;padding:0px;margin:0px\"'>\r\n\t\t\t\t<div data-dojo-attach-event=\"onClick:_save\" data-dojo-type=\"dijit.form.Button\" data-dojo-props='iconClass:\"fa fa-floppy-o fa-3x\",label:\"Update Analysis\"'></div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t\t<div data-dojo-attach-point=\"display_zone\" data-dojo-type=\"dijit.layout.ContentPane\" data-dojo-props='region:\"center\"'></div>\r\n\t</div>\r\n</div>\r\n",constructor:function(){this._save_call_back=dojo.hitch(this,this._save_call);dojo.subscribe("/clipping/update",dojo.hitch(this,this._update_clipping_event));this._ignore=false;},clear:function(){this.display_zone.set("href","");this.display_zone.set("content","");},load:function(_1){this.clear();this._clippingid=_1;this.display_zone.set("href",dojo.string.substitute("/clippings/analyse/analysis_clip_view?clippingid=${clippingid}",{clippingid:_1}));},_update_clipping_event:function(_2){if(this._ignore==false){this.load(_2.clippingid);}},_save:function(){var _3=dijit.byId("form_clip_"+this._clippingid);if(ttl.utilities.formValidator(_3)==false){alert("Invalid Value");return;}dojo.xhrPost(ttl.utilities.makeParams({load:this._save_call_back,url:"/clippings/analyse/update",content:_3.get("value")}));},_save_call:function(_4){if(_4.success=="OK"){this._ignore=true;dojo.publish("/clipping/update",[_4.data]);this._ignore=false;alert("Updated");}else{alert("Problem");}},resize:function(){this.borderControl.resize(arguments[0]);}});}