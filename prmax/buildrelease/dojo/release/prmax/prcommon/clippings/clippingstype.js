/*
	Copyright (c) 2004-2011, The Dojo Foundation All Rights Reserved.
	Available via Academic Free License >= 2.1 OR the modified BSD license.
	see: http://dojotoolkit.org/license for details
*/


if(!dojo._hasResource["prcommon.clippings.clippingstype"]){dojo._hasResource["prcommon.clippings.clippingstype"]=true;dojo.provide("prcommon.clippings.clippingstype");dojo.require("ttl.BaseWidget");dojo.declare("prcommon.clippings.clippingstype",[ttl.BaseWidget],{name:"",value:"",displaytitle:"clippingstype",search:"",size:"7",testmode:false,selectonly:false,startopen:false,preload:true,interesttypeid:1,restrict:1,widgetsInTemplate:true,templateString:"<div data-dojo-attach-point=\"containerNode\" >\r\n    <table width=\"100%\" class=\"prmaxtable\" cellpadding=\"0\" cellspacing=\"0\" >\r\n        <tr><td width=\"20%\" class=\"prmaxrowtag\">${displaytitle}</td>\r\n        </tr>\r\n    </table>\r\n    <div class=\"dojolanguagesPane\" >\r\n        <div data-dojo-attach-point=\"selectarea\" class=\"prmaxselectmultiple\" >\r\n            <table width=\"100%\" class=\"prmaxtable\" cellpadding=\"0\" cellspacing=\"0\" border=\"0\">\r\n                  <tr><td width=\"47%\"></td><td width=\"5%\"></td><td width=\"48%\" ></td></tr>\r\n                  <tr><td colspan=\"3\">\r\n                      <table style=\"width:100%\" class=\"prmaxtable\" >\r\n                            <tr>\r\n                            <td width=\"40%\" data-dojo-attach-point=\"master_type_text\"><span class=\"prmaxrowtag\">Select</span><input data-dojo-type=\"dijit.form.TextBox\" data-dojo-props='\"class\":\"prmaxfocus prmaxinput\",type:\"text\",style:\"width:60%\"' data-dojo-attach-point=\"clippingstype_list_select\" data-dojo-attach-event=\"onkeyup:clippingsTypeSelect\" /></td>\r\n                            </tr>\r\n                      </table>\r\n                      </td></tr>\r\n                      <tr><td ><select style=\"width:100%\" data-dojo-attach-point=\"clippingstype_list\" size=\"${size}\" class=\"lists\" multiple=\"multiple\" ></select></td>\r\n                  <td>\r\n                  <button data-dojo-props='style:\"padding:0px;margin:0px\",disabled:\"true\",type:\"button\",\"class\":\"button_add_all\"' data-dojo-attach-point=\"button_all\" data-dojo-attach-event=\"onClick:clippingsTypeSelectAll\" data-dojo-type=\"dijit.form.Button\"><div class=\"std_movement_button\">&gt;&gt;</div></button><br/>\r\n                  <button data-dojo-props='style:\"padding:0px;margin:0px\",disabled:\"true\",type:\"button\",\"class\":\"button_add_single\"' data-dojo-attach-point=\"button_single\" data-dojo-type=\"dijit.form.Button\" data-dojo-attach-event=\"onClick:clippingsTypeSelectSingle\"><div class=\"std_movement_button\">&gt;&nbsp;</div></button><br/>\r\n                  <button data-dojo-props='style:\"padding:0px;margin:0px\",disabled:\"true\",type:\"button\",\"class\":\"button_del_all\"' data-dojo-attach-point=\"button_del_all\" data-dojo-type=\"dijit.form.Button\" data-dojo-attach-event=\"onClick:clippingsTypeRemoveAll\"><div class=\"std_movement_button\">&lt;&lt;</div></button><br/>\r\n                  <button data-dojo-props='style:\"padding:0px;margin:0px\",disabled:\"true\",type:\"button\",\"class\":\"button_del_single\"' data-dojo-attach-point=\"button_del_single\" data-dojo-type=\"dijit.form.Button\" data-dojo-attach-event=\"onClick:clippingsTypeRemoveSingle\"><div class=\"std_movement_button\">&lt;&nbsp;</div></button></td>\r\n                  <td ><select style=\"width:100%\" size=\"${size}\" class=\"lists\" multiple=\"multiple\" data-dojo-attach-point=\"clippingstype_select\" data-dojo-attach-event=\"onchange:clippingsTypeUpdateSelection\" data-dojo-props='required:true, \"class\":\"prmaxrequired\"' ></select></td>\r\n            </tr>\r\n            </table>\r\n        </div>\r\n    </div>\r\n</div>\r\n",constructor:function(){this.disabled=false;this._extended=false;this._LoadSelectionCall=dojo.hitch(this,this._LoadSelection);this.interestTimer=null;},postCreate:function(){dojo.connect(this.clippingstype_list_select.domNode,"onkeyup",dojo.hitch(this,this.clippingsTypeSelect));dojo.connect(this.clippingstype_list,"onchange",dojo.hitch(this,this.clippingsTypeUpdateSelection));dojo.connect(this.clippingstype_list,"ondblclick",dojo.hitch(this,this.clippingsTypeSelectDbl));if(this.preload){this._Send_Request("*");}this.inherited(arguments);},Clear:function(){this._ClearSelectionBox();this._ClearSelectedBox();this.clippingstype_list_select.set("value","");this._Get(this._getValueAttr());this._SelectionOptions();this.inherited(arguments);},_Send_Request:function(_1){dojo.xhrPost(ttl.utilities.makeParams({load:this._LoadSelectionCall,url:"/clippingstypes/listuserselection",content:{word:_1}}));},clippingsTypeSelect:function(p1,_2){var _3=this.clippingstype_list_select.get("value");if(_3.length>0){if(this.interestTimer){clearTimeout(this.interestTimer);this.interestTimer=null;}this.interestTimer=setTimeout(dojo.hitch(this,this._Send_Request,_3),this.searchTime);}else{if(this.interestTimer){clearTimeout(this.interestTimer);this.interestTimer=null;}this._ClearSelectionBox();this._SelectionOptions();}},_LoadSelection:function(_4){this._ClearSelectionBox();for(var i=0;i<_4.data.length;++i){var _5=_4.data[i];this.clippingstype_list.options[this.clippingstype_list.options.length]=new Option(_5.clippingstypedescription,_5.clippingstypeid);}this._SelectionOptions();},_ClearSelectionBox:function(){this.clippingstype_list.options.length=0;},_ClearSelectedBox:function(){this.clippingstype_select.length=0;},clippingsTypeUpdateSelection:function(){this._SelectionOptions();},clippingsTypeSelectDbl:function(){this.clippingsTypeSelectSingle();this._SelectionOptions();},clippingsTypeSelectAll:function(){for(var c=0;c<this.clippingstype_list.options.length;c++){var _6=this.clippingstype_list.options[c];var _7=true;for(var c1=0;c1<this.clippingstype_select.options.length;c1++){if(this.clippingstype_select.options[c1].value==_6.value){_7=false;break;}}if(_7){this.clippingstype_select.options[this.clippingstype_select.options.length]=new Option(_6.text,_6.value);}}this._Get(this._getValueAttr());this.clippingstype_list.options.length=0;this.clippingUpdateSelection();},clippingsTypeSelectSingle:function(){for(var c=0;c<this.clippingstype_list.options.length;c++){var _8=this.clippingstype_list.options[c];if(_8.selected){_8.selected=false;var _9=true;for(var c1=0;c1<this.clippingstype_select.options.length;c1++){if(this.clippingstype_select.options[c1].value==_8.value){_9=false;break;}}if(_9){this.clippingstype_select.options[this.clippingstype_select.options.length]=new Option(_8.text,_8.value);this._Get(this._getValueAttr());}}}},clippingsTypeRemoveAll:function(){this.clippingstype_select.options.length=0;this.clippingsTypeUpdateSelection();this._Get(this._getValueAttr());},clippingsTypeRemoveSingle:function(){for(var c=0;c<this.clippingstype_select.options.length;c++){if(this.clippingstype_select.options[c].selected){this.clippingstype_select.options[c]=null;}}this.clippingsTypeUpdateSelection();this._Get(this._getValueAttr());},addSelect:function(_a){this.clippingstype_select.options[this.clippingstype_select.options.length]=new Option(_a.clippingstypedescription,_a.clippingstypeid);},_setValueAttr:function(_b){this.Clear();if(_b!=null){var _c=_b.data;var _d=false;if(_c==null||_c==undefined){_c=_b;}for(var _e in _c){var _f=_c[_e];this.clippingstype_select.options[this.clippingstype_select.options.length]=new Option(_f.clippingstypedescription,_f.clippingstypeid);opne=true;}if(_d){this.MakeOpen();}this._Get(this._getValueAttr());}},_getValueAttr:function(){var _10=Array();for(var c=0;c<this.clippingstype_select.options.length;c++){if(this._extended){_10[c]={clippingstypeid:parseInt(this.clippingstype_select.options[c].value),clippingstypedescription:this.clippingstype_select.options[c].text};}else{_10[c]=parseInt(this.clippingstype_select.options[c].value);}}var obj={data:_10};if(this._extended){return obj;}else{var _10=_10.length>0?dojo.toJson(obj):"";this.value=_10;return _10;}},_getCountAttr:function(){return this.clippingstype_select.options.length;},_setExtendedAttr:function(_11){this._extended=_11;},_SelectionOptions:function(){this.button_all.set("disabled",this.clippingstype_list.length?false:true);this.button_single.set("disabled",this.clippingstype_list.selectedIndex!=-1?false:true);this.button_del_all.set("disabled",this.clippingstype_select.length?false:true);this.button_del_single.set("disabled",this.clippingstype_select.selectedIndex!=-1?false:true);},_up_down:function(){var _12=true;var _13=true;if(this.clippingstype_select.options.length>1&&this.clippingstype_select.selectedIndex!=-1){if(this.clippingstype_select.selectedIndex>0){_12=false;}if(this.clippingstype_select.selectedIndex<this.clippingstype_select.options.length-1){_13=false;}}},_setDisabledAttr:function(_14){this.disabled=_14;},_getDisabledAttr:function(){return this.disabled;},_Get:function(){if(this.selectonly==false){this.inherited(arguments);}},_focus:function(){this.clippingstype_list_select.focus();},_change_filter:function(){var _15=this.clippingstype_list_select.get("value");if(_15.length==0){_15="*";}this.clippingsTypeSelect(null,_15);},isValid:function(){var _16=this.clippingstype_select.value;if((_16==null||_16=="")){return false;}else{return true;}}});}