/*
	Copyright (c) 2004-2011, The Dojo Foundation All Rights Reserved.
	Available via Academic Free License >= 2.1 OR the modified BSD license.
	see: http://dojotoolkit.org/license for details
*/


if(!dojo._hasResource["prmax.help.HelpBrowser"]){dojo._hasResource["prmax.help.HelpBrowser"]=true;dojo.provide("prmax.help.HelpBrowser");dojo.require("ttl.BaseWidget");dojo.require("dojo.data.ItemFileReadStore");dojo.require("dijit.Tree");dojo.require("dijit.layout.BorderContainer");dojo.require("dijit.layout.ContentPane");dojo.declare("prmax.help.HelpBrowser",[ttl.BaseWidget],{templateString:"<div>\r\n<div  dojoAttachPoint=\"frame\" dojotype=\"dijit.layout.BorderContainer\" style=\"width:100%;height:100%\" >\r\n\t<div  dojoType=\"dijit.layout.ContentPane\" region=\"left\" style=\"width:25%\" >\r\n\t\t<div dojoAttachPoint=\"tree\" style=\"width100%;height:100%\"></div>\r\n\t</div>\r\n\t<div dojoAttachPoint=\"view\"  dojoType=\"dijit.layout.ContentPane\" region=\"right\" style=\"width:75%;height:100%\"></div>\r\n</div></div>\r\n",constructor:function(){this.jsmethod=null;this.store=new dojo.data.ItemFileReadStore({url:"/display/helptree",onError:ttl.utilities.globalerrorchecker,clearOnClose:true,urlPreventCache:true});this.treeModel=new dijit.tree.ForestStoreModel({store:this.store,query:{type:1},rootId:"rootNode",rootLabel:"Help Topics",childrenAttrs:["children"]});},postCreate:function(){this.treenode=new dijit.Tree({model:this.treeModel,showRoot:false,style:"width:200px;height:100%"});this.tree.appendChild(this.treenode.domNode);this.treenode.startup();dojo.connect(this.treenode,"onClick",dojo.hitch(this,this._TreeClick));dojo.connect(this.view,"onLoad",dojo.hitch(this,this._onLoadFrame));},_TreeClick:function(_1){this.jsmethod=null;if(_1.type==2){if(_1.jsmethod!=null){this.jsmethod=_1.jsmethod;}this.view.attr("href",_1.page);}if(_1.type==3){ttl.utilities.openStdWindow(_1.page);}},resize:function(){this.frame.resize(arguments[0]);},_onLoadFrame:function(){if(this.jsmethod){this[this.jsmethod]();}},_LoadAbout:function(){dojo.byId("test_1").innerHTML=dojo.version.toString();}});}