/*
	Copyright (c) 2004-2011, The Dojo Foundation All Rights Reserved.
	Available via Academic Free License >= 2.1 OR the modified BSD license.
	see: http://dojotoolkit.org/license for details
*/


if(!dojo._hasResource["prmax.dataadmin.outlets.OutletEditPrn"]){dojo._hasResource["prmax.dataadmin.outlets.OutletEditPrn"]=true;dojo.provide("prmax.dataadmin.outlets.OutletEditPrn");dojo.declare("prmax.dataadmin.outlets.OutletEditPrn",[ttl.BaseWidget],{widgetsInTemplate:true,templateString:"<div dojoAttachPoint=\"container\" >\r\n\t<div dojoAttachPoint=\"borderControl\" dojotype=\"dijit.layout.BorderContainer\" style=\"width:100%;height:100%\" gutters=\"false\" >\r\n\t\t<div dojotype=\"dijit.layout.ContentPane\"   style=\"width:100%padding-left:5px\" region=\"center\"  >\r\n\t\t\t<form  dojotype=\"dijit.form.Form\" dojoAttachPoint=\"form\" onsubmit=\"return false;\">\r\n\t\t\t\t<input type=\"hidden\" name=\"outletid\" value=\"-1\" dojoType=\"dijit.form.TextBox\" dojoAttachPoint=\"outletid\">\r\n\t\t\t\t<table width=\"100%\" cellspacing=\"0\" cellpadding=\"0\">\r\n\t\t\t\t\t<tr><td align=\"right\" class=\"prmaxrowtag\">Media Channel</td><td class=\"prmaxrowdisplay\">\r\n\t\t\t\t\t<select style=\"width:90%\" class=\"prmaxrequired\" name=\"prmax_outlettypeid\"\r\n\t\t\t\t\t\tautoComplete=\"true\"\r\n\t\t\t\t\t\tsearchAttr=\"name\"\r\n\t\t\t\t\t\tdojoType=\"dijit.form.FilteringSelect\"\r\n\t\t\t\t\t\trequired=\"true\"\r\n\t\t\t\t\t\tinvalidMessage=\"Please select outlet type\"\r\n\t\t\t\t\t\tlabelType=\"html\"\r\n\t\t\t\t\t\tdojoAttachPoint=\"prmax_outlettypeid\"></select>\r\n\t\t\t\t\t</td></tr>\r\n\t\t\t\t\t<tr><td align=\"right\" class=\"prmaxrowtag\" valign=\"top\">Keywords</td><td ><div name=\"interests\" selectonly=\"true\" size=\"6\" displaytitle=\"\" startopen=\"\"  dojoAttachPoint=\"interests\" restrict=\"0\"  dojoType=\"prcommon.interests.Interests\" keytypeid=\"6\" title=\"Select\"></div></td></tr>\r\n\t\t\t\t\t<tr><td align=\"right\" class=\"prmaxrowtag\" valign=\"top\">Geo. Coverage</td><td ><div name=\"coverage\" selectonly=\"true\" size=\"6\" displaytitle=\"\" startopen=\"\"  dojoAttachPoint=\"coverage\" dojoType=\"prmax.geographical.Geographical\"  title=\"Select\"></div></td></tr>\r\n\t\t\t\t\t<tr><td colspan=\"2\">&nbsp;</td></tr>\r\n\t\t\t\t\t<tr><td class=\"prmaxrowtag\" colspan=\"2\" >Reason </td></tr>\r\n\t\t\t\t\t<tr><td align=\"right\" class=\"prmaxrowtag\" width=\"20%\">Code</td><td >\r\n\t\t\t\t\t<select dojoAttachPoint=\"reasoncodeid\" name=\"reasoncodeid\" dojotype =\"dijit.form.FilteringSelect\" searchAttr=\"name\" labelType=\"html\" style=\"width:98%\" class=\"prmaxrequired\"  />\r\n\t\t\t\t\t</td></tr>\r\n\t\t\t\t\t<tr><td align=\"right\" class=\"prmaxrowtag\" valign=\"top\">Description</td><td ><div class=\"reasonframe\" ><textarea dojoAttachPoint=\"reason\" name=\"reason\" required=\"true\" dojoType=\"dijit.form.Textarea\" style=\"width:99%;height:80%\"  ></textarea></div></td></tr>\r\n\t\t\t\t\t<tr><td align=\"right\" colspan=\"2\"><button dojoAttachPoint=\"updateBtn\" type=\"button\" dojoAttachEvent=\"onClick:_Update\" dojoType=\"dojox.form.BusyButton\" busyLabel=\"Please Wait Updating Outlet...\" label=\"Update Outlet\"></button></td></tr>\r\n\t\t\t\t</table>\r\n\t\t\t</form>\r\n\t\t</div>\r\n\t</div>\r\n</div>\r\n",constructor:function(){this._UpdatedCallBack=dojo.hitch(this,this._UpdatedCall);},postCreate:function(){this.prmax_outlettypeid.store=PRCOMMON.utils.stores.OutletTypes();this.reasoncodeid.store=PRCOMMON.utils.stores.Research_Reason_Update_Codes();this.inherited(arguments);},_UpdatedCall:function(_1){if(_1.success=="OK"){alert("Updated");this._ClearReason();}else{alert("Failed to updated");}this.updateBtn.cancel();},Clear:function(){},_ClearReason:function(){this.reasoncodeid.set("value",PRCOMMON.utils.stores.Reason_Upd_Default);this.reason.set("value","");this.updateBtn.cancel();this._outletid=-1;this.outletid.set("value",-1);},Load:function(_2,_3){this._outletid=_2;this.prmax_outlettypeid.set("value",_3.outlet.prmax_outlettypeid);this.interests.set("value",_3.interests);this.coverage.set("value",_3.coverage);this.outletid.set("value",_3.outlet.outletid);this.reasoncodeid.set("value",PRCOMMON.utils.stores.Reason_Upd_Default);this.reason.set("value","");},_Update:function(){if(ttl.utilities.formValidator(this.form)==false){alert("Not all required field filled in");this.updateBtn.cancel();return;}dojo.xhrPost(ttl.utilities.makeParams({load:this._UpdatedCallBack,url:"/outlets/research_update_prn",content:this.form.get("value")}));},resize:function(){this.borderControl.resize(arguments[0]);this.inherited(arguments);}});}