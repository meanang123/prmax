/*
	Copyright (c) 2004-2011, The Dojo Foundation All Rights Reserved.
	Available via Academic Free License >= 2.1 OR the modified BSD license.
	see: http://dojotoolkit.org/license for details
*/


if(!dojo._hasResource["prmax.dataadmin.employees.EmployeeSelect"]){dojo._hasResource["prmax.dataadmin.employees.EmployeeSelect"]=true;dojo.provide("prmax.dataadmin.employees.EmployeeSelect");dojo.declare("prmax.dataadmin.employees.EmployeeSelect",[ttl.BaseWidget],{required:false,nonew:false,name:"eselect",widgetsInTemplate:true,mustexists:false,templateString:"<div>\r\n\t<div dojoAttachPoint=\"select_view\"><input name=\"contacttype\"  value=\"N\" dojoAttachEvent=\"onClick:_ContactMode\"dojoAttachPoint=\"nocontactNode\" dojoType=\"dijit.form.RadioButton\"> </input><label dojoAttachPoint=\"nocontactlabel\">No Person</label>\r\n\t\t<input name=\"contacttype\"  value=\"S\" checked dojoAttachEvent=\"onClick:_ContactMode\" dojoAttachPoint=\"selectContactNode\" dojoType=\"dijit.form.RadioButton\"> </input><label dojoAttachPoint=\"selectcontactlabel\">Select Person</label>\r\n\t</div>\r\n\t<div dojoAttachPoint=\"selectContactForm\" class=\"prmaxvisible prmaxdefault\" >\r\n\t\t<table style=\"width:100%\" class=\"prmaxtable\" cellspacing=\"0\" cellpadding=\"0\">\r\n\t\t\t<tr><td class=\"prmaxrowtag\" dojoAttachPoint=\"displayname\">Person</td><td>\r\n\t\t\t\t<select name=\"contactid\"\r\n\t\t\t\t\tdojoAttachPoint=\"contactlist\"\r\n\t\t\t\t\t autoComplete=\"false\"\r\n\t\t\t\t\t searchAttr=\"contactname\"\r\n\t\t\t\t\t labelAttr=\"contactname\"\r\n\t\t\t\t\t dojoType=\"dijit.form.FilteringSelect\"\r\n\t\t\t\t\t pageSize=\"20\"\r\n\t\t\t\t\t required=\"${required}\"\r\n\t\t\t\t\t labelType=\"html\"\r\n\t\t\t\t\tstyle=\"width:20em\">\r\n\t\t\t\t\t</select></td>\r\n\t\t\t\t<td><button dojoAttachPoint=\"newbutton\" type=\"button\" dojoType=\"dijit.form.Button\" label=\"New Person\" dojoAttachEvent=\"onClick:_AddContactShow\"><td>\r\n\t\t\t</tr>\r\n\t\t</table>\r\n\t</div>\r\n\t<div dojoAttachPoint=\"addContactForm\" class=\"prmaxhidden\" >\r\n\t\t<div dojoAttachPoint=\"addContactControl\" dojoType=\"prmax.dataadmin.employees.EmployeeNew\"></div>\r\n\t</div>\r\n</div>\r\n",constructor:function(){this.contactstore=new dojox.data.QueryReadStore({url:"/contacts/research_lookuplist",onError:ttl.utilities.globalerrorchecker,clearOnClose:true,urlPreventCache:true});this._shopadd=true;},postCreate:function(){this.contactlist.store=this.contactstore;dojo.attr(this.nocontactlabel,"for",this.nocontactNode.id);dojo.attr(this.selectcontactlabel,"for",this.selectContactNode.id);this.addContactControl.set("callback",dojo.hitch(this,this._UpdateAfterAdd));this.addContactControl.Disabled(true);if(this.mustexists==true){dojo.addClass(this.select_view,"prmaxhidden");this.selectContactNode.set("checked",true);dojo.addClass(this.displayname,"prmaxhidden");dojo.addClass(this.contactlist.domNode,"prmaxrequired");}if(this.nonew==true){dojo.addClass(this.newbutton.domNode,"prmaxhidden");}if(this.required==true){dojo.addClass(this.contactlist.domNode,"prmaxrequired");}this.inherited(arguments);},_setCheckedAttr:function(_1){this.nocontactNode.set("checked",_1);this.selectContactNode.set("checked",true);this._ContactMode();},setNoContact:function(){this.nocontactNode.set("checked",true);this._ContactMode();},_getValueAttr:function(){return this.contactlist.get("value");},_setValueAttr:function(_2){this.contactlist.set("value",_2);},isValid:function(){var _3=true;var _4=true;var v=this.contactlist.get("value");if(v==""||v==-1||v==0||v==null){_4=false;}if(this.required==true){if(_4==false){_3=false;}}else{if(this.nocontactNode.get("checked")==false&&_4==false){_3=false;}}return _3;},isFocusable:function(){return true;},focus:function(){this.contactlist.focus();},Clear:function(){this.contactlist.set("value",null);this._shopadd=false;this._AddContactShow();},destroy:function(){this.inherited(arguments);delete this.contactstore;},_ContactMode:function(){var _5=this.nocontactNode.get("checked");dojo.removeClass(this.selectContactForm,_5?"prmaxvisible":"prmaxhidden");dojo.addClass(this.selectContactForm,_5?"prmaxhidden":"prmaxvisible");if(_5){dojo.removeClass(this.contactlist,"prmaxrequired");}else{dojo.addClass(this.contactlist,"prmaxrequired");}this.contactlist.set("disabled",_5);this._shopadd=false;this._AddContactShow();},_AddContactShow:function(){if(this._shopadd==false){dojo.removeClass(this.addContactForm,"prmaxvisible");dojo.addClass(this.addContactForm,"prmaxhidden");this.addContactControl.Disabled(true);this._shopadd=true;}else{dojo.removeClass(this.addContactForm,"prmaxhidden");dojo.addClass(this.addContactForm,"prmaxvisible");this.addContactControl.Disabled(false);this.addContactControl.focus();this._shopadd=false;}},_UpdateAfterAdd:function(_6){this.contactlist.set("value",_6.contactid);this._shopadd=false;this._AddContactShow();}});}