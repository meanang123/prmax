/*
	Copyright (c) 2004-2011, The Dojo Foundation All Rights Reserved.
	Available via Academic Free License >= 2.1 OR the modified BSD license.
	see: http://dojotoolkit.org/license for details
*/


if(!dojo._hasResource["prmax.dataadmin.freelance.FreelanceEdit"]){dojo._hasResource["prmax.dataadmin.freelance.FreelanceEdit"]=true;dojo.provide("prmax.dataadmin.freelance.FreelanceEdit");dojo.declare("prmax.dataadmin.freelance.FreelanceEdit",[ttl.BaseWidget],{widgetsInTemplate:true,templateString:"<div >\r\n\t<div dojoAttachPoint=\"borderControl\" dojotype=\"dijit.layout.BorderContainer\" style=\"width:100%;height:100%\" gutters=\"false\">\r\n\t\t<div dojotype=\"dijit.layout.ContentPane\"  region=\"top\"  style=\"width:100%;height:4em\">\r\n\t\t\t<div style=\"height:100%;width:100%;overflow:hidden;;padding:0px;margin:0px\" class=\"searchresults\">\r\n\t\t\t\t<div style=\"height:100%;width:35%;float:left;padding:0px;margin:0px\" class=\"prmaxrowdisplaylarge dijitToolbar\">Edit Research Freelance</div>\r\n\t\t\t\t<div class=\"dijitToolbarTop\" dojoType=\"dijit.Toolbar\" style=\"float:left;height:100%;width:65%;padding:0px;margin:0px\" >\r\n\t\t\t\t\t<div dojoAttachEvent=\"onClick:_ShowDetails\" dojoType=\"dijit.form.Button\" iconClass=\"PrmaxResultsIcon PrmaxResultsEmpty\" showLabel=\"true\" label=\"Details\"></div>\r\n\t\t\t\t\t<div dojoAttachEvent=\"onClick:_ShowAudit\" dojoType=\"dijit.form.Button\" iconClass=\"PrmaxResultsIcon PrmaxResultsEmpty\" showLabel=\"true\" label=\"Audit\"></div>\r\n\t\t\t\t\t<div dojoAttachEvent=\"onClick:_ShowResearch\" dojoType=\"dijit.form.Button\" iconClass=\"PrmaxResultsIcon PrmaxResultsEmpty\" showLabel=\"true\" label=\"Research\"></div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t\t<div dojoType=\"dijit.layout.StackContainer\" dojoAttachPoint=\"freelance_container\" region=\"center\"  doLayout=\"true\" >\r\n\t\t\t<div title=\"Freelance Details\" dojoType=\"dijit.layout.ContentPane\" dojoAttachPoint=\"freelance_details_view\">\r\n\t\t\t\t<div dojotype=\"dijit.layout.BorderContainer\" style=\"width:100%;height:100%\" gutters=\"false\">\r\n\t\t\t\t\t<div dojotype=\"dijit.layout.ContentPane\"   style=\"width:100%padding-left:5px\" class=\"scrollpanel\" region=\"center\"  >\r\n\t\t\t\t\t<form  class=\"prmaxdefault\" dojoAttachPoint=\"requiredNode\" dojoType=\"dijit.form.Form\">\r\n\t\t\t\t\t<input type=\"hidden\" dojoAttachPoint=\"outletid\" dojotype=\"dijit.form.TextBox\" name=\"outletid\"  value=\"-1\"/>\r\n\t\t\t\t\t<table style=\"width:98%\" class=\"prmaxtable\" cellspacing=\"0\" cellpadding=\"0\" >\r\n\t\t\t\t\t<tr><td align=\"right\" valign=\"top\" class=\"prmaxrowtag\">Person</td><td><div dojoType=\"prmax.dataadmin.employees.EmployeeSelect\" mustexists=\"true\" dojoAttachPoint=\"selectcontact\" nonew=\"true\" required=\"true\" nvalidMessage=\"Person Must be selected\" style=\"width:200px\"></div></td></tr>\r\n\t\t\t\t\t<tr><td class=\"prmaxrowtag\" align=\"right\" width=\"100px\" >Country</td><td><select style=\"width:90%\" class=\"prmaxrequired\" name=\"countryid\" autoComplete=\"true\" searchAttr=\"name\" dojoType=\"dijit.form.FilteringSelect\" required=\"true\" invalidMessage=\"Please select Country Name\" labelType=\"html\" dojoAttachPoint=\"countryid\"></select></td></tr>\r\n\t\t\t\t\t<tr><td align=\"right\" class=\"prmaxrowtag\">Address 1</td>\r\n\t\t\t\t\t<td><input dojoAttachPoint=\"address1\" name=\"address1\" type=\"text\" size=\"40\" required=\"true\" dojoType=\"dijit.form.TextBox\" style=\"width:90%\"/></td></tr>\r\n\t\t\t\t\t<tr><td align=\"right\" class=\"prmaxrowtag\">Address 2</td>\r\n\t\t\t\t\t<td><input dojoAttachPoint=\"address2\" name=\"address2\" type=\"text\" size=\"40\" maxlength=\"80\" dojoType=\"dijit.form.TextBox\" style=\"width:90%\"/></td></tr>\r\n\t\t\t\t\t<tr><td align=\"right\" class=\"prmaxrowtag\">Town</td>\r\n\t\t\t\t\t<td><input dojoAttachPoint=\"townname\" name=\"townname\" type=\"text\" size=\"30\" dojoType=\"dijit.form.TextBox\"/></td></tr>\r\n\t\t\t\t\t<tr><td align=\"right\" class=\"prmaxrowtag\">County</td>\r\n\t\t\t\t\t<td><input dojoAttachPoint=\"county\" name=\"county\" type=\"text\" dojoType=\"dijit.form.TextBox\"/></td></tr>\r\n\t\t\t\t\t<tr><td align=\"right\" class=\"prmaxrowtag\">Postcode</td>\r\n\t\t\t\t\t<td><input dojoAttachPoint=\"postcode\" name=\"postcode\" type=\"text\" size=\"20\" maxlength=\"10\" dojoType=\"dijit.form.TextBox\" style=\"width:10em\"/></td></tr>\r\n\t\t\t\t\t<tr><td align=\"right\" class=\"prmaxrowtag\">Www</td>\r\n\t\t\t\t\t<td><input dojoAttachPoint=\"www\" name=\"www\" type=\"text\" size=\"40\" maxlength=\"120\" trim=\"true\" dojoType=\"dijit.form.TextBox\" style=\"width:90%\"/></td></tr>\r\n\t\t\t\t\t<tr><td align=\"right\" class=\"prmaxrowtag\">Email</td>\r\n\t\t\t\t\t<td><input dojoAttachPoint=\"email\" name=\"email\" type=\"text\" size=\"40\" maxlength=\"80\" trim=\"true\" dojoType=\"dijit.form.ValidationTextBox\" regExpGen=\"dojox.validate.regexp.emailAddress\" trim=\"true\" invalidMessage=\"invalid email address\" size=\"40\" maxlength=\"70\" style=\"width:90%\"/></td></tr>\r\n\t\t\t\t\t<tr><td align=\"right\" class=\"prmaxrowtag\">Tel</td>\r\n\t\t\t\t\t<td><input dojoAttachPoint=\"tel\" name=\"tel\" type=\"text\" size=\"25\" maxlength=\"40\" dojoType=\"dijit.form.TextBox\"/></td></tr>\r\n\t\t\t\t\t<tr><td align=\"right\" class=\"prmaxrowtag\">Fax</td>\r\n\t\t\t\t\t<td><input dojoAttachPoint=\"fax\" name=\"fax\" type=\"text\" size=\"25\" maxlength=\"40\" dojoType=\"dijit.form.TextBox\"/></td></tr>\r\n\t\t\t\t\t<tr><td align=\"right\" class=\"prmaxrowtag\">Mobile</td>\r\n\t\t\t\t\t<td><input dojoAttachPoint=\"mobile\" name=\"mobile\" type=\"text\" size=\"25\" maxlength=\"40\" dojoType=\"dijit.form.TextBox\"/></td></tr>\r\n\t\t\t\t\t<tr><td align=\"right\" class=\"prmaxrowtag\">Twitter</td><td><input dojoAttachPoint=\"twitter\" class=\"prmaxinput\" name=\"twitter\" type=\"text\" maxlength=\"80\" dojoType=\"dijit.form.ValidationTextBox\" regExpGen=\"dojox.validate.regexp.url\" trim=\"true\" style=\"width:90%\"/></td></tr>\r\n\t\t\t\t\t<tr><td align=\"right\" class=\"prmaxrowtag\">Facebook</td><td><input dojoAttachPoint=\"facebook\" class=\"prmaxinput\" name=\"facebook\" type=\"text\" maxlength=\"80\" dojoType=\"dijit.form.ValidationTextBox\" regExpGen=\"dojox.validate.regexp.url\"  trim=\"true\" style=\"width:90%\"/></td></tr>\r\n\t\t\t\t\t<tr><td align=\"right\" class=\"prmaxrowtag\">Linkedin</td><td><input dojoAttachPoint=\"linkedin\" class=\"prmaxinput\" name=\"linkedin\" type=\"text\" maxlength=\"80\" dojoType=\"dijit.form.ValidationTextBox\" regExpGen=\"dojox.validate.regexp.url\" trim=\"true\" style=\"width:90%\" /></td></tr>\r\n\t\t\t\t\t<tr><td align=\"right\" class=\"prmaxrowtag\">Instagram</td><td><input dojoAttachPoint=\"instagram\" class=\"prmaxinput\" name=\"instagram\" type=\"text\" maxlength=\"80\" dojoType=\"dijit.form.ValidationTextBox\" regExpGen=\"dojox.validate.regexp.url\" trim=\"true\" style=\"width:90%\" /></td></tr>\r\n\t\t\t\t\t<tr><td align=\"right\"  valign=\"top\" class=\"prmaxrowtag\">Keywords</td>\r\n\t\t\t\t\t<td><div  dojoAttachPoint=\"interests\" name=\"interests\" title=\"\" startopen=\"true\" restrict=\"0\" dojoType=\"prcommon.interests.Interests\" selectonly=\"true\" keytypeid=\"6\" displaytitle=\"\"></div></td></tr>\r\n\t\t\t\t\t<tr><td align=\"right\"  valign=\"top\" class=\"prmaxrowtag\">Profile</td>\r\n\t\t\t\t\t<td><div class=\"dialogprofileframelarge\" ><textarea dojoAttachPoint=\"profile\" name=\"profile\" dojoType=\"dijit.form.Textarea\"  style=\"width:99%;height:99%\" ></textarea></div></td></tr>\r\n\t\t\t\t\t<tr><td align=\"right\" class=\"prmaxrowtag\" width=\"20%\">Reason Code</td><td ><select dojoAttachPoint=\"reasoncodeid\" name=\"reasoncodeid\" dojotype =\"dijit.form.FilteringSelect\" searchAttr=\"name\" labelType=\"html\" style=\"width:98%\" class=\"prmaxrequired\"  /></td></tr>\r\n\t\t\t\t\t<tr><td align=\"right\" class=\"prmaxrowtag\" valign=\"top\">Description</td><td ><div class=\"reasonframe\" ><textarea dojoAttachPoint=\"reason\" name=\"reason\" required=\"true\" dojoType=\"dijit.form.Textarea\" style=\"width:99%;height:80%\"  ></textarea></div></td></tr>\r\n\t\t\t\t</table>\r\n\t\t\t\t</form>\r\n\t\t\t\t</div>\r\n\t\t\t\t\t<div dojotype=\"dijit.layout.ContentPane\"  region=\"bottom\"  style=\"width:100%;height:3em;padding-right:3px;\">\r\n\t\t\t\t\t\t<table style=\"width:100%;border-style:collapsed\"><tr>\r\n\t\t\t\t\t\t<td><button class=\"prmaxbutton\"  type=\"button\"  dojoType=\"dijit.form.Button\" dojoAttachEvent=\"onClick:_Delete\" label=\"Delete\"></button></td>\r\n\t\t\t\t\t\t<td align=\"right\"><button class=\"prmaxbutton\"  type=\"button\" dojoAttachPoint=\"saveNode\"  dojoType=\"dojox.form.BusyButton\" busyLabel=\"Please Wait Saving...\" dojoAttachEvent=\"onClick:Save\" label=\"Update\"></button></td></tr></table>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t<div title=\"Freelance Activity\" dojoType=\"dijit.layout.ContentPane\" dojoAttachPoint=\"freelance_activity_view\">\r\n\t\t\t\t<div dojoAttachPoint=\"outlet_audit_ctrl\" dojoType=\"prmax.dataadmin.AuditViewer\" objecttypeid=\"4\" style=\"width:100%;height:100%\"></div>\r\n\t\t\t</div>\r\n\t\t\t<div title=\"Research\" dojoType=\"dijit.layout.ContentPane\" dojoAttachPoint=\"freelance_research_view\" style=\"width:100%;height:100%\" >\r\n\t\t\t\t<div dojoAttachPoint=\"outlet_research_ctrl\" dojoType=\"prmax.dataadmin.ResearchDetails\" style=\"width:100%;height:100%\"></div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t</div>\r\n\t<div dojoAttachPoint=\"delete_dlg\" dojoType=\"dijit.Dialog\" title =\"Delete Freelance\">\r\n\t\t<div dojoAttachPoint=\"delete_ctrl\" dojoType=\"prmax.dataadmin.freelance.FreelanceDelete\"></div>\r\n\t</div>\r\n</div>\r\n",constructor:function(){this._SavedCallBack=dojo.hitch(this,this._Saved);this._LoadCallBack=dojo.hitch(this,this._Loaded);this.outletid=-1;dojo.subscribe(PRCOMMON.Events.Dialog_Close,dojo.hitch(this,this._DialogCloseEvent));},postCreate:function(){this.reasoncodeid.store=PRCOMMON.utils.stores.Research_Reason_Update_Codes();this.reasoncodeid.set("value",PRCOMMON.utils.stores.Reason_Upd_Default);this.countryid.store=PRCOMMON.utils.stores.Countries();this.inherited(arguments);},_Saved:function(_1){if(_1.success=="OK"){alert("Freelance Updated");this._ClearReason();}else{alert("Failed to update ");}this.saveNode.cancel();},_ClearReason:function(){this.reasoncodeid.set("value",PRCOMMON.utils.stores.Reason_Upd_Default);this.reason.set("value","");},Save:function(){if(ttl.utilities.formValidator(this.requiredNode)==false){alert("Not all required field filled in");this.saveNode.cancel();return;}dojo.xhrPost(ttl.utilities.makeParams({load:this._SavedCallBack,url:"/outlets/freelance_research_update",content:this.requiredNode.get("value")}));},New:function(){this.Clear();},Clear:function(){this.saveNode.cancel();this.selectcontact.Clear();this.outletid.set("value",-1);this.address1.set("value","");this.address2.set("value","");this.townname.set("value","");this.county.set("value","");this.postcode.set("value","");this.www.set("value","");this.email.set("value","");this.tel.set("value","");this.fax.set("value","");this.mobile.set("value","");this.interests.set("value","");this.profile.set("value","");this.countryid.set("value",1);this.twitter.set("value","");this.facebook.set("value","");this.linkedin.set("value","");this.instagram.set("value","");this._ClearReason();},resize:function(){this.borderControl.resize(arguments[0]);},Load:function(_2){this._outletid=_2;this._name="";this.outlet_audit_ctrl.Load(this._outletid);dojo.xhrPost(ttl.utilities.makeParams({load:this._LoadCallBack,url:"/outlets/freelance_get_for_load",content:{outletid:_2}}));},_Loaded:function(_3){if(_3.success=="OK"){var _4=_3.data;this._name=_4.contact.familyname;this.selectcontact.set("value",_4.employee.contactid);this.outletid.set("value",_4.outlet.outletid);this.address1.set("value",_4.address.address1);this.address2.set("value",_4.address.address2);this.townname.set("value",_4.address.townname);this.county.set("value",_4.address.county);this.postcode.set("value",_4.address.postcode);this.www.set("value",_4.outlet.www);this.email.set("value",_4.comm.email);this.tel.set("value",_4.comm.tel);this.fax.set("value",_4.comm.fax);this.mobile.set("value",_4.comm.mobile);this.interests.set("value",_4.interests);this.profile.set("value",_4.outlet.profile);this.countryid.set("value",_4.outlet.countryid);this.twitter.set("value",_4.comm.twitter);this.facebook.set("value",_4.comm.facebook);this.linkedin.set("value",_4.comm.linkedin);this.instagram.set("value",_4.comm.instagram);this._ClearReason();this.outlet_research_ctrl.Load(_4.outlet.outletid,19);}else{alert("Problem Loading freelancer");}},_ShowDetails:function(){this.freelance_container.selectChild(this.freelance_details_view);},_ShowAudit:function(){this.freelance_container.selectChild(this.freelance_activity_view);},_ShowResearch:function(){this.freelance_container.selectChild(this.freelance_research_view);},_Delete:function(){this.delete_ctrl.Load(this._outletid,this._name);this.delete_dlg.show();},_DialogCloseEvent:function(_5){if(_5=="free_del"){this.delete_dlg.hide();}}});}