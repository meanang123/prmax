/*
	Copyright (c) 2004-2011, The Dojo Foundation All Rights Reserved.
	Available via Academic Free License >= 2.1 OR the modified BSD license.
	see: http://dojotoolkit.org/license for details
*/


if(!dojo._hasResource["prmax.dataadmin.advance.AdvanceDelete"]){dojo._hasResource["prmax.dataadmin.advance.AdvanceDelete"]=true;dojo.provide("prmax.dataadmin.advance.AdvanceDelete");dojo.declare("prmax.dataadmin.advance.AdvanceDelete",[ttl.BaseWidget],{widgetsInTemplate:true,templateString:"<div style=\"width:400px;height:200px;\" >\r\n\t<form  class=\"prmaxdefault\" dojoAttachPoint=\"form\" dojoType=\"dijit.form.Form\" onsubmit=\"return false;\">\r\n\t\t<input dojoAttachPoint=\"advancefeatureid\" name=\"advancefeatureid\" type=\"hidden\" dojoType=\"dijit.form.TextBox\" >\r\n\t\t<table width=\"100%\" class=\"prmaxtable\" cellpadding=\"0\" cellspacing=\"0\"  border =\"0\">\r\n\t\t\t<tr><td  align=\"center\" dojoAttachPoint=\"heading\" class=\"prmaxrowdisplaylarge\" colspan=\"2\" ></td></tr>\r\n\t\t\t<tr><td align=\"right\" class=\"prmaxrowtag\" width=\"20%\">Reason</td><td >\r\n\t\t\t<select dojoAttachPoint=\"reasoncodes\" name=\"reasoncodeid\" dojotype =\"dijit.form.FilteringSelect\" searchAttr=\"name\" labelType=\"html\" style=\"width:98%\" class=\"prmaxrequired\"/>\r\n\t\t\t</td></tr>\r\n\t\t\t<tr><td  align=\"right\" class=\"prmaxrowtag\" valign=\"top\">Description</td><td  ><div class=\"reasonframe\" ><textarea dojoAttachPoint=\"reason\" name=\"reason\" class=\"prmaxrowtag\" required=\"true\" dojoType=\"dijit.form.Textarea\" style=\"width:99%;height:80%;\"></textarea></div></td></tr>\r\n\t\t</table>\r\n\t</form>\r\n\t<br/><br/>\r\n\t<button style=\"float:right;\" dojoType=\"dijit.form.Button\" type=\"button\" dojoAttachEvent=\"onClick:_DeleteSubmit\" name=\"submit\">Delete Feature</button>\r\n</div>\r\n",constructor:function(){this._DeleteCallBack=dojo.hitch(this,this._DeleteCall);},postCreate:function(){this.reasoncodes.store=PRCOMMON.utils.stores.Research_Reason_Del_Codes();this.inherited(arguments);},_DeleteSubmit:function(){if(ttl.utilities.formValidator(this.form)==false){alert("Not all required fields filled in");return;}if(this.reason.get("value").length==0){alert("No Description Given");this.reason.focus();return;}if(confirm("Delete Feature "+dojo.attr(this.heading,"innerHTML")+"?")){if(confirm("Delete Feature are you sure?")){dojo.xhrPost(ttl.utilities.makeParams({load:this._DeleteCallBack,url:"/advance/research_delete",content:this.form.get("value")}));}}},_DeleteCall:function(_1){if(_1.success=="OK"){dojo.publish(PRCOMMON.Events.Feature_Deleted,[_1.data]);alert("Feature  Deleted");dojo.publish(PRCOMMON.Events.Dialog_Close,["feature_del"]);this.Clear();}else{alert("Problem Deleteing Feature");}},Clear:function(){this.advancefeatureid.set("value",-1);this.reasoncodes.set("value",null);this.reason.set("value","");dojo.attr(this.heading,"innerHTML","");},Load:function(_2,_3){this.advancefeatureid.set("value",_2);dojo.attr(this.heading,"innerHTML",_3);this.reasoncodes.set("value",null);this.reason.focus();},focus:function(){this.reason.focus();}});}