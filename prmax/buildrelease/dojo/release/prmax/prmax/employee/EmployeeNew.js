/*
	Copyright (c) 2004-2011, The Dojo Foundation All Rights Reserved.
	Available via Academic Free License >= 2.1 OR the modified BSD license.
	see: http://dojotoolkit.org/license for details
*/


if(!dojo._hasResource["prmax.employee.EmployeeNew"]){dojo._hasResource["prmax.employee.EmployeeNew"]=true;dojo.provide("prmax.employee.EmployeeNew");dojo.require("prcommon.interests.Interests");dojo.require("ttl.utilities");dojo.declare("prmax.employee.EmployeeNew",[ttl.BaseWidget],{widgetsInTemplate:true,templateString:"<div>\r\n<table><tr><td class=\"prmaxrowtag\">New Person</td><td>\r\n\t<input class=\"prmaxinput\" name=\"prefix\" dojoAttachPoint=\"prefix\" type=\"text\" trim=\"true\" dojoType=\"dijit.form.TextBox\" style=\"width: 2em;\" ></input>\r\n\t<input class=\"prmaxinpout\" name=\"firstname\" dojoAttachPoint=\"firstname\" type=\"text\" trim=\"true\" dojoType=\"dijit.form.TextBox\" style=\"width: 5em;\" ></input>\r\n\t<input class=\"prmaxrequired\" name=\"familyname\" dojoAttachPoint=\"familyname\" type=\"text\" trim=\"true\" dojoType=\"dijit.form.TextBox\" style=\"width: 12em;\"></input>\r\n\t<button dojoAttachEvent=\"onClick:_AddContact\" dojoAttachPoint=\"addContactNode\" type=\"button\" dojoType=\"dojox.form.BusyButton\" type=\"submit\" busyLabel=\"Please Wait Saving...\" label=\"Add\"></button>\r\n</td></tr></table>\r\n</div>\r\n",constructor:function(){this._AddCallBack=dojo.hitch(this,this._AddCall);this._parentcallback=null;},_AddContact:function(){if(this.familyname.get("value").length==0){this.addContactNode.cancel();alert("No Contact Name specified");this.familyname.focus();return;}if(confirm("Add Contact?")){dojo.xhrPost(ttl.utilities.makeParams({load:this._AddCallBack,url:"/contacts/addnew",content:{prefix:this.prefix.get("value"),firstname:this.firstname.get("value"),familyname:this.familyname.get("value")}}));}},_AddCall:function(_1){if(_1.success=="OK"){alert("Contact Added");this._parentcallback(_1.contact);this._ClearAddForm();}else{alert("Failed");}this.addContactNode.cancel();},_ClearAddForm:function(){this.prefix.set("value","");this.firstname.set("value","");this.familyname.set("value","");},_setCallbackAttr:function(_2){this._parentcallback=_2;},_Close:function(){},focus:function(){this.familyname.focus();}});}