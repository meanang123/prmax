/*
	Copyright (c) 2004-2011, The Dojo Foundation All Rights Reserved.
	Available via Academic Free License >= 2.1 OR the modified BSD license.
	see: http://dojotoolkit.org/license for details
*/


if(!dojo._hasResource["prmax.iadmin.admin"]){dojo._hasResource["prmax.iadmin.admin"]=true;dojo.provide("prmax.iadmin.admin");dojo.require("dojo.io.iframe");dojo.require("dojox.data.QueryReadStore");dojo.require("ttl.utilities");dojo.require("dojo.data.ItemFileReadStore");dojo.require("dijit.Toolbar");dojo.require("dijit.Dialog");dojo.require("ttl.GridHelpers");dojo.require("dijit.layout.BorderContainer");dojo.require("dijit.layout.StackContainer");dojo.require("dijit.layout.TabContainer");dojo.require("dijit.layout.ContentPane");dojo.require("dijit.layout.AccordionContainer");dojo.require("dijit.Dialog");dojo.require("dijit.TitlePane");dojo.require("dijit.Toolbar");dojo.require("dijit.Menu");dojo.require("dijit.Tree");dojo.require("dijit.ProgressBar");dojo.require("dijit.form.Button");dojo.require("dijit.form.Form");dojo.require("dijit.form.TextBox");dojo.require("dijit.form.FilteringSelect");dojo.require("dijit.form.ValidationTextBox");dojo.require("dijit.form.NumberTextBox");dojo.require("dijit.form.CheckBox");dojo.require("dijit.form.MultiSelect");dojo.require("dijit.form.ComboBox");dojo.require("dijit.form.DateTextBox");dojo.require("dojox.form.FileInput");dojo.require("dijit.form.Form");dojo.require("dijit.form.Textarea");dojo.require("dojox.grid.DataGrid");dojo.require("dojox.data.QueryReadStore");dojo.require("dojox.form.BusyButton");dojo.require("dojox.form.PasswordValidator");dojo.require("dojox.validate.regexp");dojo.require("dojox.collections.Dictionary");dojo.require("prcommon.data.QueryWriteStore");dojo.require("prmax.user.AddUser");dojo.require("prmax.prmaxobjects");dojo.require("dijit.form.CurrencyTextBox");dojo.require("prmax.iadmin.Support");dojo.require("prmax.iadmin.Research");dojo.require("prmax.iadmin.TaskTags");dojo.require("prmax.iadmin.TaskAdd");dojo.require("prmax.iadmin.accounts.FinancialControl");dojo.require("prmax.iadmin.accounts.Reports");dojo.require("prmax.iadmin.accounts.DDView");dojo.require("prmax.iadmin.accounts.PriceCodes");dojo.require("prmax.iadmin.accounts.Diary");dojo.require("prmax.iadmin.accounts.SeoView");dojo.require("prmax.iadmin.sales.SetExpireDate");dojo.require("prmax.iadmin.sales.view");dojo.require("prmax.iadmin.sales.DemoRequestView");dojo.require("prmax.iadmin.sales.ReActivateDemo");dojo.require("prmax.iadmin.sales.SetFreeSEOCount");dojo.require("prmax.iadmin.support.FrontScreen");dojo.require("prmax.iadmin.support.ActiveUsers");dojo.require("prmax.iadmin.support.PrivateData");dojo.require("prmax.iadmin.support.ResetAndSend");dojo.require("prmax.iadmin.support.seo.view");dojo.require("prmax.iadmin.support.seo.Complaints");dojo.require("prmax.iadmin.sales.newsfeed.view");dojo.require("prmax.iadmin.PrmaxDataSets");dojo.require("prcommon.prcommonobjects");dojo.require("prcommon.data.DataStores");dojo.require("prmax.crm.viewer");dojo.require("prmax.crm.AddContact");dojo.require("prmax.crm.ViewContact");dojo.require("prmax.crm.task.viewer");dojo.require("prmax.customer.InternalAddCustomer");dojo.require("prcommon.query.query");dojo.require("dojox.layout.ExpandoPane");dojo.require("dijit.tree.ForestStoreModel");dojo.require("dijit.Tree");dojo.require("prmax.iadmin.sales.prospects.bounces.view");dojo.require("prmax.iadmin.sales.prospects.companies.view");dojo.require("prmax.iadmin.sales.prospects.exclusions.view");dojo.require("prmax.iadmin.sales.prospects.gather.view");dojo.require("prmax.iadmin.sales.prospects.mailing.view");dojo.require("prmax.iadmin.clippings.view");dojo.require("prmax.iadmin.extendedsettings");dojo.require("prmax.iadmin.emailserver");dojo.require("prmax.iadmin.PrmaxDataSets");dojo.declare("prmax.iadmin.admin",[dijit._Widget,dijit._Templated,dijit._Container],{widgetsInTemplate:true,templateString:"<div>\r\n\t<div dojoType=\"dojo.data.ItemFileReadStore\" jsId=\"customerstatus_filter_store\"  url=\"/common/lookups?searchtype=customerstatus&filter=1\"></div>\r\n\t<div dojoType=\"dojo.data.ItemFileReadStore\" jsId=\"customerstatus_no_filter_store\"  url=\"/common/lookups?searchtype=customerstatus\"></div>\r\n<div  dojoAttachPoint=\"frame\" dojotype=\"dijit.layout.BorderContainer\" gutters=\"false\" style=\"width:100%;height:100%\" >\r\n\t<div dojoAttachPoint=\"frame_tabs\" dojotype=\"dijit.layout.TabContainer\"  style=\"width:100%;height:100%\" region=\"center\" gutters=\"false\">\r\n\t\t<div dojoAttachPoint=\"frame_tab_m\" dojotype=\"dijit.layout.BorderContainer\" gutters=\"false\" title=\"Maintenance\" style=\"width:100%;height:100%\" >\r\n\t\t\t<div  dojoType=\"dijit.layout.ContentPane\" region=\"top\" style=\"width:100%\" >\r\n\t\t\t\t<div style=\"height:40px;width:100%;overflow:hidden;padding:0px;margin:0px\" class=\"searchresults\">\r\n\t\t\t\t\t<div style=\"height:100%;width:15%;float:left;padding:0px;margin:0px\" class=\"dijitToolbar prmaxrowdisplaylarge\">Time</div>\r\n\t\t\t\t\t<div class=\"dijitToolbarTop\" dojoType=\"dijit.Toolbar\" style=\"float:left;height:100%;width:85%;padding:0px;margin:0px\" >\r\n\t\t\t\t\t\t<div dojoType=\"dijit.form.DropDownButton\" iconClass=\"PrmaxResultsIcon PrmaxResultsEmpty\" showLabel=\"true\">\r\n\t\t\t\t\t\t\t<span>Filter  By</span>\r\n\t\t\t\t\t\t\t<div dojoType=\"dijit.TooltipDialog\" title=\"Enter Project filter\" dojoAttachEvent=\"execute: _ExecuteCustomerFilter\">\r\n\t\t\t\t\t\t\t\t<table width=\"500px\">\r\n\t\t\t\t\t\t\t\t\t<tr><td class=\"prmaxrowtag\" align=\"right\"><label >Status</label></td><td><select name=\"statusid\" autoComplete=\"true\" dojoType=\"dijit.form.FilteringSelect\" labelType=\"html\" dojoAttachPoint=\"filter_customer_statusid\" store=\"customerstatus_filter_store\"></select></td></tr>\r\n\t\t\t\t\t\t\t\t\t<tr><td class=\"prmaxrowtag\" align=\"right\"><label >Customer Type</label></td><td><select name=\"customertypeid\" autoComplete=\"true\" dojoType=\"dijit.form.FilteringSelect\" labelType=\"html\" dojoAttachPoint=\"filter_customertypeid\" ></select></td></tr>\r\n\t\t\t\t\t\t\t\t\t<tr><td class=\"prmaxrowtag\" align=\"right\"><label >Customer Source</label></td><td><select name=\"customersourceid\" autoComplete=\"true\" dojoType=\"dijit.form.FilteringSelect\" labelType=\"html\" dojoAttachPoint=\"filter_customersourceid\" ></select></td></tr>\r\n\t\t\t\t\t\t\t\t\t<tr><td class=\"prmaxrowtag\" align=\"right\"><label >Financial Status</label></td><td><select name=\"financialstatusid\" autoComplete=\"true\" dojoType=\"dijit.form.FilteringSelect\" labelType=\"html\" dojoAttachPoint=\"filter_financialstatus\" ></select></td></tr>\r\n\t\t\t\t\t\t\t\t\t<tr><td class=\"prmaxrowtag\" align=\"right\"><label >Customer Name</label></td><td><input type=\"text\" name=\"customername\" dojoType=\"dijit.form.TextBox\" dojoAttachPoint=\"filter_customername\"></td></tr>\r\n\t\t\t\t\t\t\t\t\t<tr><td class=\"prmaxrowtag\" align=\"right\"><label >Account Nbr</label></td><td><input type=\"text\" name=\"accountnbr\" dojoType=\"dijit.form.TextBox\" dojoAttachPoint=\"filter_accountnbr\"></td></tr>\r\n\t\t\t\t\t\t\t\t\t<tr><td class=\"prmaxrowtag\" align=\"right\"><label >Not Expired</label></td><td><input type=\"checkbox\" name=\"licence_expired\" dojoAttachPoint=\"filter_licence_expired\" dojoType=\"dijit.form.CheckBox\"></td></tr>\r\n\t\t\t\t\t\t\t\t\t<tr><td class=\"prmaxrowtag\" align=\"right\"><label >Monitoring</label></td><td><select name=\"monitoringstatusid\" autoComplete=\"true\" dojoType=\"dijit.form.FilteringSelect\" labelType=\"html\" dojoAttachPoint=\"filter_monitoringstatusid\" ></select></td></tr>\r\n\t\t\t\t\t\t\t\t\t<tr><td class=\"prmaxrowtag\" align=\"right\"><label >Monitoring Source</label></td><td><select name=\"clippingsourceid\" autoComplete=\"true\" dojoType=\"dijit.form.FilteringSelect\" labelType=\"html\" dojoAttachPoint=\"filter_clippingsourceid\" ></select></td></tr>\r\n\t\t\t\t\t\t\t\t\t<tr><td class=\"prmaxrowtag\" align=\"right\"><label >Email</label></td><td><input type=\"text\" name=\"email\" dojoType=\"dijit.form.TextBox\" dojoAttachPoint=\"filter_customeremail\"></td></tr>\r\n\t\t\t\t\t\t\t\t\t<tr><td class=\"prmaxrowtag\" align=\"right\"><label >Is Internal</label></td><td><input type=\"text\" name=\"isinternal\" dojoType=\"dijit.form.CheckBox\" dojoAttachPoint=\"filter_isinternal\"></td></tr>\r\n\t\t\t\t\t\t\t\t\t<tr><td class=\"prmaxrowtag\" align=\"right\"><label >User Name</label></td><td><input type=\"text\" name=\"contactname\" dojoType=\"dijit.form.TextBox\" dojoAttachPoint=\"filter_contactname\"></td></tr>\r\n\t\t\t\t\t\t\t\t\t<tr><td class=\"prmaxrowtag\" align=\"right\"><label >Invoice Nbr</label></td><td><input type=\"text\" name=\"invoicenbr\" dojoType=\"dijit.form.TextBox\" dojoAttachPoint=\"filter_invoicenbr\"></td></tr>\r\n\t\t\t\t\t\t\t\t\t<tr><td class=\"prmaxrowtag\" align=\"right\"><label >Credit Nt. Nbr</label></td><td><input type=\"text\" name=\"creditnotenbr\" dojoType=\"dijit.form.TextBox\" dojoAttachPoint=\"filter_creditnotenbr\"></td></tr>\r\n\t\t\t\t\t\t\t\t\t<tr><td class=\"prmaxrowtag\" align=\"right\"><label >UnAllocated</label></td><td><input type=\"checkbox\" name=\"unallocated\" dojoType=\"dijit.form.CheckBox\" dojoAttachPoint=\"filter_unallocated\"></td></tr>\r\n\t\t\t\t\t\t\t\t\t<tr>\r\n\t\t\t\t\t\t\t\t\t\t<td align=\"left\"><button dojoType=\"dijit.form.Button\" type=\"button\" dojoAttachEvent=\"onClick:_ClearFilter\">Clear Filter by</button></td>\r\n\t\t\t\t\t\t\t\t\t\t<td align=\"right\"><button dojoType=\"dijit.form.Button\" type=\"submit\" name=\"submit\">Filter by</button></td>\r\n\t\t\t\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t\t\t\t</table>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div dojoType=\"dijit.form.Button\" dojoAttachEvent=\"onClick:_Logout\" showLabel=\"true\">Logout</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t<div  dojoType=\"dijit.layout.ContentPane\" region=\"left\" style=\"width:50%\" splitter=\"true\" gutters=\"false\" >\r\n\t\t\t\t<div dojoAttachPoint=\"customergrid\" dojoType=\"dojox.grid.DataGrid\" query=\"{ name:'*'}\" rowsPerPage=\"50\" structure=\"PRMAX.iadmin.gridlayout.main_view\" style=\"width:100%;height:100%\"></div>\r\n\t\t\t</div>\r\n\t\t\t<div  dojoType=\"dijit.layout.BorderContainer\" region=\"center\" gutters=\"false\" class=\"prmaxhidden\" dojoAttachPoint=\"detailsview\" >\r\n\t\t\t\t<div dojoAttachPoint=\"tabs\" dojoType=\"dijit.layout.TabContainer\" style=\"width:99%;height:100%\" region=\"center\" gutters=\"false\">\r\n\t\t\t\t\t<div dojoType=\"dijit.layout.BorderContainer\" gutters=\"false\" title=\"Options\">\r\n\t\t\t\t\t\t<div dojoType=\"dijit.layout.TabContainer\" region=\"center\" style=\"width:99%;height:100%\" dojoAttachPoint=\"options_tab\">\r\n\t\t\t\t\t\t\t<div  dojoType=\"dijit.layout.ContentPane\" style=\"width:99%;height:100%\" title=\"Details\" dojoAttachPoint=\"options_tab_details\">\r\n\t\t\t\t\t\t\t\t<table style=\"width:100%;border-collapse:collapse;\" cellpadding=\"0\" cellspacing=\"0\">\r\n\t\t\t\t\t\t\t\t\t<tr><td class=\"prmaxrowtag\">Name</td><td class=\"prmaxrowdisplay\" dojoAttachPoint=\"displayname\"></td></tr>\r\n\t\t\t\t\t\t\t\t\t<tr><td class=\"prmaxrowtag\">Customer Source</td><td data-dojo-attach-point=\"customersourcedescription\"></td></tr>\r\n\t\t\t\t\t\t\t\t\t<tr><td class=\"prmaxrowtag\">Status</td><td>\r\n\t\t\t\t\t\t\t\t\t\t<select dojoAttachPoint=\"statusid\"\r\n\t\t\t\t\t\t\t\t\t\t\tautoComplete=\"true\"\r\n\t\t\t\t\t\t\t\t\t\t\tdojoType=\"dijit.form.FilteringSelect\"\r\n\t\t\t\t\t\t\t\t\t\t\tlabelType=\"html\"\r\n\t\t\t\t\t\t\t\t\t\t\tstore=\"customerstatus_no_filter_store\">\r\n\t\t\t\t\t\t\t\t\t\t\t</select><button dojoType=\"dojox.form.BusyButton\" label=\"Change Status\" dojoAttachPoint=\"statusidbutton\" dojoAttachEvent=\"onClick:_ChangeStatus\"></button>\r\n\t\t\t\t\t\t\t\t\t</td></tr>\r\n\t\t\t\t\t\t\t\t\t<tr><td class=\"prmaxrowtag\">Customer type</td><td>\r\n\t\t\t\t\t\t\t\t\t\t<select dojoAttachPoint=\"customertypeid\"\r\n\t\t\t\t\t\t\t\t\t\t\tautoComplete=\"true\"\r\n\t\t\t\t\t\t\t\t\t\t\tdojoType=\"dijit.form.FilteringSelect\"\r\n\t\t\t\t\t\t\t\t\t\t\tlabelType=\"html\"></select>\r\n\t\t\t\t\t\t\t\t\t\t\t<button dojoAttachEvent=\"onClick:_CustomerType\" dojoType=\"dijit.form.Button\" label=\"Set Customer Type\" type=\"button\" ></button>\r\n\t\t\t\t\t\t\t\t\t</td></tr>\r\n\t\t\t\t\t\t\t\t\t<tr><td class=\"prmaxrowtag\">Expire Date</td><td><div style=\"display:inline\" class=\"prmaxrowtag\" dojoAttachPoint=\"expire_display\"></div>&nbsp;<button type=\"button\" dojoType=\"dijit.form.Button\" label=\"Set Expire Date\" dojoAttachEvent=\"onClick:_SetExpireDate\" ></button></td></tr>\r\n\t\t\t\t\t\t\t\t\t<tr><td class=\"prmaxrowtag\">Concurrent Count</td><td>\r\n\t\t\t\t\t\t\t\t\t\t<form dojoAttachPoint=\"setusercountform\"  onsubmit=\"return false\" dojoType=\"dijit.form.Form\">\r\n\t\t\t\t\t\t\t\t\t\t\t<input type=\"text\" name=\"logins\" dojoType=\"dijit.form.NumberTextBox\" dojoAttachPoint=\"logins\" >\r\n\t\t\t\t\t\t\t\t\t\t\t<button dojoAttachPoint=\"setusercount\" dojoType=\"dijit.form.Button\" label=\"Set User Count\" type=\"submit\" ></button>\r\n\t\t\t\t\t\t\t\t\t\t</form>\r\n\t\t\t\t\t\t\t\t\t</td></tr>\r\n\t\t\t\t\t\t\t\t\t<tr><td class=\"prmaxrowtag\">User Name Count</td><td>\r\n\t\t\t\t\t\t\t\t\t\t<form dojoAttachPoint=\"setupernamecount\"  onsubmit=\"return false\" dojoType=\"dijit.form.Form\">\r\n\t\t\t\t\t\t\t\t\t\t\t<input type=\"text\" name=\"nbrofusersaccounts\" dojoType=\"dijit.form.NumberTextBox\" dojoAttachPoint=\"nbrofusersaccounts\" >\r\n\t\t\t\t\t\t\t\t\t\t\t<button dojoAttachPoint=\"setusercount\" dojoType=\"dijit.form.Button\" label=\"Set User Name Count\" type=\"submit\" ></button>\r\n\t\t\t\t\t\t\t\t\t\t</form>\r\n\t\t\t\t\t\t\t\t\t</td></tr>\r\n\t\t\t\t\t\t\t\t\t<tr><td class=\"prmaxrowtag\">Collateral Limit</td><td>\r\n\t\t\t\t\t\t\t\t\t\t<form dojoAttachPoint=\"collaterallimitform\"  onsubmit=\"return false\" dojoType=\"dijit.form.Form\">\r\n\t\t\t\t\t\t\t\t\t\t\t<input type=\"text\" name=\"collateral_size\" dojoType=\"dijit.form.NumberTextBox\" dojoAttachPoint=\"collateral_size\" >\r\n\t\t\t\t\t\t\t\t\t\t\t<button dojoAttachPoint=\"collateral_sizecollateral_size_btn\" dojoType=\"dijit.form.Button\" label=\"Set Collateral Size\" type=\"submit\" ></button>\r\n\t\t\t\t\t\t\t\t\t\t</form>\r\n\t\t\t\t\t\t\t\t\t</td></tr>\r\n\t\t\t\t\t\t\t\t\t<tr><td class=\"prmaxrowtag\">Email Day Limit</td><td>\r\n\t\t\t\t\t\t\t\t\t\t<form dojoAttachPoint=\"emaillimitform\"  onsubmit=\"return false\" dojoType=\"dijit.form.Form\">\r\n\t\t\t\t\t\t\t\t\t\t\t<input type=\"text\" name=\"max_emails_for_day\" dojoType=\"dijit.form.NumberTextBox\" dojoAttachPoint=\"max_emails_for_day\" >\r\n\t\t\t\t\t\t\t\t\t\t\t<button dojoAttachPoint=\"email_limit_btn\" dojoType=\"dijit.form.Button\" label=\"Set Email Day Limit\" type=\"submit\" ></button>\r\n\t\t\t\t\t\t\t\t\t\t</form>\r\n\t\t\t\t\t\t\t\t\t</td></tr>\r\n\t\t\t\t\t\t\t\t\t<tr><td class=\"prmaxrowtag\" valign=\"top\">Demo Status</td><td>\r\n\t\t\t\t\t\t\t\t\t\t<form dojoAttachPoint=\"demoaccountform\"  onsubmit=\"return false\" dojoType=\"dijit.form.Form\">\r\n\t\t\t\t\t\t\t\t\t\t\t<table style=\"width:100%;border-collapse:collapse;\" cellspacing=\"0\" cellpadding=\"0\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<tr><td class=\"prmaxrowtag\" width=\"20%\">Core</td><td align=\"left\"><input type=\"text\" name=\"demo\" dojoType=\"dijit.form.CheckBox\" dojoAttachPoint=\"demoaccount_check\"></td></tr>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<tr><td class=\"prmaxrowtag\">Features</td><td><input type=\"text\" name=\"isadvancedemo\" dojoType=\"dijit.form.CheckBox\" dojoAttachPoint=\"isadvancedemo\"></td></tr>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<tr><td class=\"prmaxrowtag\">Monitoring</td><td><input type=\"text\" name=\"ismonitoringdemo\" dojoType=\"dijit.form.CheckBox\" dojoAttachPoint=\"ismonitoringdemo\"></td></tr>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<tr><td></td><td><button dojoAttachPoint=\"demoaccountset\" dojoType=\"dijit.form.Button\" label=\"Change Demo Status\" type=\"submit\" ></button>\r\n\t\t\t\t\t\t<button dojoAttachPoint=\"reactive_demo\" dojoType=\"dijit.form.Button\" label=\"Re-Activate Demo\" type=\"button\" class=\"prmaxhidden\" dojoAttachEvent=\"onClick:_ReActiveDemo\" ></button></td></tr>\r\n\t\t\t\t\t\t\t\t\t\t\t</table>\r\n\t\t\t\t\t\t\t\t\t\t</form>\r\n\t\t\t\t\t\t\t\t\t</td></tr>\r\n\t\t\t\t\t\t\t\t\t<tr><td class=\"prmaxrowtag\">Email Enabled</td><td>\r\n\t\t\t\t\t\t\t\t\t\t<form dojoAttachPoint=\"emailenabledform\"  onsubmit=\"return false\" dojoType=\"dijit.form.Form\">\r\n\t\t\t\t\t\t\t\t\t\t\t<input type=\"text\" name=\"useemail\" dojoType=\"dijit.form.CheckBox\" dojoAttachPoint=\"useemail_check\" value=\"1\">\r\n\t\t\t\t\t\t\t\t\t\t\t<label> Email Test Mode</label>\r\n\t\t\t\t\t\t\t\t\t\t\t<input type=\"text\" name=\"emailistestmode\" dojoType=\"dijit.form.CheckBox\" dojoAttachPoint=\"emailistestmode_check\" value=\"1\">\r\n\t\t\t\t\t\t\t\t\t\t\t<button dojoAttachPoint=\"useemailset\" dojoType=\"dijit.form.Button\" label=\"Change Email Status\" type=\"submit\" ></button>\r\n\t\t\t\t\t\t\t\t\t\t</form>\r\n\t\t\t\t\t\t\t\t\t</td></tr>\r\n\t\t\t\t\t\t\t\t\t<tr><td class=\"prmaxrowtag\">Is Internal Account</td><td>\r\n\t\t\t\t\t\t\t\t\t\t\t<input type=\"text\" name=\"isinternal\" dojoType=\"dijit.form.CheckBox\" dojoAttachPoint=\"isinternal\">\r\n\t\t\t\t\t\t\t\t\t\t\t<button dojoType=\"dijit.form.Button\" label=\"Change Internal Status\" type=\"button\" dojoAttachEvent=\"onClick:_ChangeInternalStatus\"></button>\r\n\t\t\t\t\t\t\t\t\t</td></tr>\r\n\r\n\t\t\t\t\t\t\t\t\t<tr><td class=\"prmaxrowtag\">Delete Account</td><td><button dojoAttachPoint=\"deleteaccount\" dojoAttachEvent=\"onClick: _DeleteAccount\" dojoType=\"dijit.form.Button\" label=\"Delete Account\" type=\"button\" ></button></td></tr>\r\n\t\t\t\t\t\t\t\t\t<tr><td valign=\"top\" class=\"prmaxrowtag\">Modules</td><td>\r\n\t\t\t\t\t\t\t\t\t\t<table>\r\n\t\t\t\t\t\t\t\t\t\t\t<tr><td align=\"right\" class=\"prmaxrowtag\" >Professional</td><td><input dojoAttachPoint=\"is_bundle\" name=\"is_bundle\" type=\"checkBox\" dojoType=\"dijit.form.CheckBox\" value=\"true\" dojoAttachEvent=\"_bundle_settings\"></td><td></td></tr>\r\n\t\t\t\t\t\t\t\t\t\t\t<tr><td align=\"right\" class=\"prmaxrowtag\" >Features</td><td><input dojoAttachPoint=\"advancefeatures\" name=\"advancefeatures\" type=\"checkBox\" dojoType=\"dijit.form.CheckBox\" value=\"true\" ></td><td></td></tr>\r\n\t\t\t\t\t\t\t\t\t\t\t<tr><td align=\"right\" class=\"prmaxrowtag\" >Crm</td><td><input dojoAttachPoint=\"crm\" name=\"crm\" type=\"checkBox\" dojoType=\"dijit.form.CheckBox\" value=\"true\" ></td></tr>\r\n\t\t\t\t\t\t\t\t\t\t\t<tr><td align=\"right\" class=\"prmaxrowtag\" >International Data</td><td><input dojoAttachPoint=\"has_international_data\" name=\"has_international_data\" type=\"checkBox\" dojoType=\"dijit.form.CheckBox\" value=\"true\" ></td></tr>\r\n\t\t\t\t\t\t\t\t\t\t\t<tr>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<td align=\"right\" class=\"prmaxrowtag\" >Monitoring</td><td><input dojoAttachPoint=\"updatum\" name=\"updatum\" type=\"checkBox\" dojoType=\"dijit.form.CheckBox\" value=\"true\" dojoAttachEvent=\"onClick:_CheckLayout\" ></td>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<td><table width=\"100%\" dojoAttachPoint=\"max_users_monitoring\" class=\"prmaxhidden\"><tr><td class=\"prmaxrowtag\" >Max Logins</td><td><input type=\"text\" name=\"maxmonitoringusers\" dojoType=\"dijit.form.NumberTextBox\" dojoAttachPoint=\"maxmonitoringusers\" ></td></tr></table></td>\r\n\t\t\t\t\t\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t\t\t\t\t\t\t<tr><td align=\"right\" class=\"prmaxrowtag\" >News Room's</td><td><input dojoAttachPoint=\"has_news_rooms\" name=\"has_news_rooms\" type=\"checkBox\" dojoType=\"dijit.form.CheckBox\" value=\"true\" ></td><td></td></tr>\r\n\t\t\t\t\t\t\t\t\t\t\t<tr><td align=\"right\" class=\"prmaxrowtag\" >Global News Room's</td><td><input dojoAttachPoint=\"has_global_newsroom\" name=\"has_global_newsroom\" type=\"checkBox\" dojoType=\"dijit.form.CheckBox\" value=\"true\" ></td><td></td></tr>\r\n\t\t\t\t\t\t\t\t\t\t\t<tr><td align=\"right\" class=\"prmaxrowtag\" >SEO</td><td><input dojoAttachPoint=\"seo\" name=\"seo\" type=\"checkBox\" dojoType=\"dijit.form.CheckBox\" value=\"true\" dojoAttachEvent=\"onChange:_ChangeSeoOption\"></td><td align=\"right\" class=\"prmaxrowtag prmaxhidden\" dojoAttachPoint=\"seotranslation_node\" >SEO Translations<input dojoAttachPoint=\"seotranslation\" name=\"seotranslation\" type=\"checkBox\" dojoType=\"dijit.form.CheckBox\" value=\"true\" ></td></tr>\r\n\t\t\t\t\t\t\t\t\t\t\t<tr><td align=\"right\" class=\"prmaxrowtag\" >Journo Requests</td><td><input dojoAttachPoint=\"has_journorequests\" name=\"has_journorequests\" type=\"checkBox\" dojoType=\"dijit.form.CheckBox\" value=\"true\" ></td></tr>\r\n\t\t\t\t\t\t\t\t\t\t\t<tr><td align=\"right\" class=\"prmaxrowtag\" >Clippings</td><td><input dojoAttachPoint=\"has_clippings\" name=\"has_clippings\" type=\"checkBox\" dojoType=\"dijit.form.CheckBox\" value=\"true\" ></td><td><button dojoAttachEvent=\"onClick:_UpdateModules\" dojoType=\"dijit.form.Button\" label=\"Update Modules\" type=\"button\" ></button></td></tr>\r\n\t\t\t\t\t\t\t\t\t\t</table></td>\r\n\t\t\t\t\t\t\t\t\t</tr>\r\n\r\n\r\n\r\n\t\t\t\t\t\t\t\t\t<tr><td class=\"prmaxrowtag\">Support User</td><td>\r\n\t\t\t\t\t\t\t\t\t\t\t<select dojoAttachPoint=\"support_userid\" autoComplete=\"true\" searchAttr=\"name\" dojoType=\"dijit.form.FilteringSelect\" labelType=\"html\" required=\"true\"></select>\r\n\t\t\t\t\t\t\t\t\t\t\t<button class=\"prmaxbutton\" type=\"button\" dojoAttachEvent=\"onClick:_SetCustomer\" dojoType=\"dijit.form.Button\" label=\"Set Support User to Customer\"></button>\r\n\t\t\t\t\t\t\t\t\t</td></tr>\r\n\t\t\t\t\t\t\t\t\t<tr><td class=\"prmaxrowtag\">SEO Free Qty</td><td class=\"prmaxrowtag\"><button data-dojo-type=\"dijit.form.Button\" data-dojo-attach-event=\"onClick:_SetSeoCount\" data-dojo-props='label:\"Set SEO Free Count\"'></button></td></tr>\r\n\t\t\t\t\t\t\t\t\t<tr><td class=\"prmaxrowtag\">Extended Email Subject</td><td>\r\n\t\t\t\t\t\t\t\t\t\t\t<input type=\"text\" name=\"has_extended_email_subject\" dojoType=\"dijit.form.CheckBox\" dojoAttachPoint=\"has_extended_email_subject\">\r\n\t\t\t\t\t\t\t\t\t\t\t<button dojoType=\"dijit.form.Button\" label=\"Change Extended Subject\" type=\"button\" dojoAttachEvent=\"onClick:_change_extended_subject\"></button>\r\n\t\t\t\t\t\t\t\t\t</td></tr>\r\n\t\t\t\t\t\t\t\t</table>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div  dojoType=\"dijit.layout.ContentPane\" style=\"width:99%;height:100%\" title=\"Menu Settings\" dojoAttachPoint=\"options_tab_menusettings\">\r\n\t\t\t\t\t\t\t\t<table style=\"width:100%;border-collapse:collapse;\" cellpadding=\"0\" cellspacing=\"0\">\r\n\t\t\t\t\t\t\t\t\t<tr><td>&nbsp;</td></tr>\r\n\t\t\t\t\t\t\t\t\t<tr><td>&nbsp;</td></tr>\r\n\t\t\t\t\t\t\t\t\t<tr><td valign=\"top\" class=\"prmaxrowtag\">Private Menu</td><td>\r\n\t\t\t\t\t\t\t\t\t\t<table>\r\n\t\t\t\t\t\t\t\t\t\t\t<tr><td>&nbsp;</td></tr>\r\n\t\t\t\t\t\t\t\t\t\t\t<tr><td>&nbsp;</td></tr>\r\n\t\t\t\t\t\t\t\t\t\t\t<tr><td align=\"right\" class=\"prmaxrowtag\" >New Outlet</td><td><input dojoAttachPoint=\"pm_new_outlet\" name=\"pm_new_outlet\" type=\"checkBox\" dojoType=\"dijit.form.CheckBox\" value=\"true\"></td><td></td></tr>\r\n\t\t\t\t\t\t\t\t\t\t\t<tr><td align=\"right\" class=\"prmaxrowtag\" >New Freelance</td><td><input dojoAttachPoint=\"pm_new_freelance\" name=\"pm_new_freelance\" type=\"checkBox\" dojoType=\"dijit.form.CheckBox\" value=\"true\"></td><td></td></tr>\r\n\t\t\t\t\t\t\t\t\t\t\t<tr><td align=\"right\" class=\"prmaxrowtag\" >Collateral</td><td><input dojoAttachPoint=\"pm_collateral\" name=\"pm_collateral\" type=\"checkBox\" dojoType=\"dijit.form.CheckBox\" value=\"true\"></td><td></td></tr>\r\n\t\t\t\t\t\t\t\t\t\t\t<tr><td align=\"right\" class=\"prmaxrowtag\" >Exclusions</td><td><input dojoAttachPoint=\"pm_exclusions\" name=\"pm_exclusions\" type=\"checkBox\" dojoType=\"dijit.form.CheckBox\" value=\"true\"></td><td></td></tr>\r\n\t\t\t\t\t\t\t\t\t\t\t<tr><td align=\"right\" class=\"prmaxrowtag\" >Clients</td><td><input dojoAttachPoint=\"pm_clients\" name=\"pm_clients\" type=\"checkBox\" dojoType=\"dijit.form.CheckBox\" value=\"true\"></td><td></td></tr>\r\n\t\t\t\t\t\t\t\t\t\t\t<tr><td align=\"right\" class=\"prmaxrowtag\" >Issues</td><td><input dojoAttachPoint=\"pm_issues\" name=\"pm_issues\" type=\"checkBox\" dojoType=\"dijit.form.CheckBox\" value=\"true\"></td><td></td></tr>\r\n\t\t\t\t\t\t\t\t\t\t\t<tr><td align=\"right\" class=\"prmaxrowtag\" >Statements</td><td><input dojoAttachPoint=\"pm_statements\" name=\"pm_statements\" type=\"checkBox\" dojoType=\"dijit.form.CheckBox\" value=\"true\"></td><td></td></tr>\r\n\t\t\t\t\t\t\t\t\t\t\t<tr><td align=\"right\" class=\"prmaxrowtag\" >Questions</td><td><input dojoAttachPoint=\"pm_questions\" name=\"pm_questions\" type=\"checkBox\" dojoType=\"dijit.form.CheckBox\" value=\"true\"></td><td></td></tr>\r\n\t\t\t\t\t\t\t\t\t\t\t<tr><td align=\"right\" class=\"prmaxrowtag\" >Global Analysis</td><td><input dojoAttachPoint=\"pm_global_analysis\" name=\"pm_global_analysis\" type=\"checkBox\" dojoType=\"dijit.form.CheckBox\" value=\"true\"></td><td></td></tr>\r\n\t\t\t\t\t\t\t\t\t\t\t<tr><td align=\"right\" class=\"prmaxrowtag\" >Documents</td><td><input dojoAttachPoint=\"pm_documents\" name=\"pm_documents\" type=\"checkBox\" dojoType=\"dijit.form.CheckBox\" value=\"true\"></td><td></td></tr>\r\n\t\t\t\t\t\t\t\t\t\t\t<tr><td align=\"right\" class=\"prmaxrowtag\" >Private Media Channels</td><td><input dojoAttachPoint=\"pm_private_media_channels\" name=\"pm_private_media_channels\" type=\"checkBox\" dojoType=\"dijit.form.CheckBox\" value=\"true\"></td><td></td></tr>\r\n\t\t\t\t\t\t\t\t\t\t\t<tr><td align=\"right\" class=\"prmaxrowtag\" >User Preferences</td><td><input dojoAttachPoint=\"pm_user_preferences\" name=\"pm_user_preferences\" type=\"checkBox\" dojoType=\"dijit.form.CheckBox\" value=\"true\"></td><td></td></tr>\r\n\t\t\t\t\t\t\t\t\t\t\t<tr><td align=\"right\" class=\"prmaxrowtag\" >Account Details</td><td><input dojoAttachPoint=\"pm_account_details\" name=\"pm_account_details\" type=\"checkBox\" dojoType=\"dijit.form.CheckBox\" value=\"true\"></td><td></td></tr>\r\n\t\t\t\t\t\t\t\t\t\t\t<tr><td align=\"right\" class=\"prmaxrowtag\" >Activity Log</td><td><input dojoAttachPoint=\"pm_activity_log\" name=\"pm_activity_log\" type=\"checkBox\" dojoType=\"dijit.form.CheckBox\" value=\"true\"></td><td></td></tr>\r\n\t\t\t\t\t\t\t\t\t\t\t<tr><td align=\"right\" class=\"prmaxrowtag\" >User Admin</td><td><input dojoAttachPoint=\"pm_user_admin\" name=\"pm_user_admin\" type=\"checkBox\" dojoType=\"dijit.form.CheckBox\" value=\"true\"></td><td></td></tr>\r\n\t\t\t\t\t\t\t\t\t\t\t<tr><td align=\"right\" class=\"prmaxrowtag\" >Financial</td><td><input dojoAttachPoint=\"pm_financial\" name=\"pm_financial\" type=\"checkBox\" dojoType=\"dijit.form.CheckBox\" value=\"true\"></td><td></td></tr>\r\n\t\t\t\t\t\t\t\t\t\t\t<tr><td align=\"right\" class=\"prmaxrowtag\" >PRRequests</td><td><input dojoAttachPoint=\"pm_prrequests\" name=\"pm_prrequests\" type=\"checkBox\" dojoType=\"dijit.form.CheckBox\" value=\"true\"></td><td></td><td><button dojoAttachEvent=\"onClick:_UpdatePrivateMenu\" dojoType=\"dijit.form.Button\" label=\"Update Private Menu\" type=\"button\" ></button></td></tr>\r\n\t\t\t\t\t\t\t\t\t\t</table></td>\r\n\t\t\t\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t\t\t\t</table>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div dojoType=\"prmax.iadmin.PrmaxDataSets\" style=\"width:99%;height:100%\" title=\"Data Sets\" dojoAttachPoint=\"datasets\"></div>\r\n\t\t\t\t\t\t\t<div dojoType=\"prmax.iadmin.clippings.view\" style=\"width:99%;height:100%\" title=\"Clippings Order\" dojoAttachPoint=\"clippings\"></div>\r\n\t\t\t\t\t\t\t<div dojoType=\"prmax.iadmin.extendedsettings\" style=\"width:99%;height:100%\" title=\"Extended Settings\" dojoAttachPoint=\"extendedsettings\"></div>\r\n\t\t\t\t\t\t\t<div dojoType=\"prmax.iadmin.emailserver\" style=\"width:99%;height:100%\" title=\"Email Server\" dojoAttachPoint=\"emailserver\"></div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div dojoType=\"dijit.layout.ContentPane\" title=\"Details\">\r\n\t\t\t\t\t\t<form dojoAttachPoint=\"customerForm\" onsubmit=\"return false\" dojoType=\"dijit.form.Form\">\r\n\t\t\t\t\t\t\t<table class=\"prmaxtable\" width=\"100%\" cellspacing=\"0\" cellpadding=\"0\">\r\n\t\t\t\t\t\t\t\t<tr><td class=\"prmaxrowtag\" align=\"right\" style=\"width:30%\">Business Name</td><td width=\"70%\"><input class=\"prmaxinput\" dojoAttachPoint=\"customername\" name=\"customername\" type=\"text\" trim=\"true\" required=\"true\" invalidMessage=\"Please Enter the name of the business\" dojoType=\"dijit.form.ValidationTextBox\" ></td></tr>\r\n\t\t\t\t\t\t\t\t<tr><td class=\"prmaxrowtag\" align=\"right\" >Is Individual</td><td><input class=\"prmaxinput\" dojoAttachPoint=\"individual\" name=\"individual\" dojoType=\"dijit.form.CheckBox\" ></td></tr>\r\n\t\t\t\t\t\t\t\t<tr><td class=\"prmaxrowtag\" align=\"right\" >Customer Source</td><td><select class=\"prmaxinput\" name=\"customersourceid\" dojoAttachPoint=\"customersourceid\" style=\"width:15em\" dojoType=\"dijit.form.FilteringSelect\" autoComplete=\"true\"></select>\r\n\t\t\t\t\t\t\t\t</td></tr>\r\n\t\t\t\t\t\t\t\t<tr><td class=\"prmaxrowtag\">Contact Name</td></tr>\r\n\t\t\t\t\t\t\t\t<tr><td class=\"prmaxrowtag\" align=\"right\" >Title</td><td><input class=\"prmaxinput\" name=\"contact_title\" dojoAttachPoint=\"contact_title\" type=\"text\" trim=\"true\" dojoType=\"dijit.form.TextBox\" style=\"width: 2em;\" ></input></td></tr>\r\n\t\t\t\t\t\t\t\t<tr><td class=\"prmaxrowtag\" align=\"right\" >First Name</td><td><input class=\"prmaxinput\" name=\"contact_firstname\" dojoAttachPoint=\"contact_firstname\" type=\"text\" trim=\"true\" dojoType=\"dijit.form.TextBox\" style=\"width: 8em;\" ></input></td></tr>\r\n\t\t\t\t\t\t\t\t<tr><td class=\"prmaxrowtag\" align=\"right\" >Surname</td><td><input class=\"prmaxrequired\" name=\"contact_surname\" dojoAttachPoint=\"contact_surname\" type=\"text\" trim=\"true\" dojoType=\"dijit.form.TextBox\" style=\"width: 12em;\"></input></td></tr>\r\n\t\t\t\t\t\t\t\t<tr><td class=\"prmaxrowtag\" align=\"right\" >Job Title</td><td><input class=\"prmaxinput\" dojoAttachPoint=\"contactjobtitle\" name=\"contactjobtitle\" type=\"text\" trim=\"true\" maxlength=\"80\"  dojoType=\"dijit.form.TextBox\" ></td></tr>\r\n\t\t\t\t\t\t\t\t<tr><td class=\"prmaxrowtag\">Address</td></tr>\r\n\t\t\t\t\t\t\t\t<tr><td class=\"prmaxrowtag\" align=\"right\" >Address:</td><td><input class=\"prmaxinput\" dojoAttachPoint=\"address1\" name=\"address1\" type=\"text\" size=\"40\" required=\"true\" dojoType=\"dijit.form.TextBox\"/></td></tr>\r\n\t\t\t\t\t\t\t\t<tr><td class=\"prmaxrowtag\" align=\"right\" >Address 2:</td><td><input class=\"prmaxinput\" dojoAttachPoint=\"address2\" name=\"address2\" type=\"text\" size=\"40\" maxlength=\"80\" dojoType=\"dijit.form.TextBox\"/></td></tr>\r\n\t\t\t\t\t\t\t\t<tr><td class=\"prmaxrowtag\" align=\"right\" >Town</td><td><input class=\"prmaxinput\" dojoAttachPoint=\"townname\" name=\"townname\" type=\"text\" size=\"30\" dojoType=\"dijit.form.TextBox\"/></td></tr>\r\n\t\t\t\t\t\t\t\t<tr><td class=\"prmaxrowtag\" align=\"right\" >County</td><td><input class=\"prmaxinput\" dojoAttachPoint=\"county\" name=\"county\" type=\"text\" dojoType=\"dijit.form.TextBox\"/></td></tr>\r\n\t\t\t\t\t\t\t\t<tr><td class=\"prmaxrowtag\" align=\"right\" >Postcode:</td><td><input class=\"prmaxinput\" dojoAttachPoint=\"postcode\" name=\"postcode\" type=\"text\" style=\"width:10em\" maxlength=\"10\" dojoType=\"dijit.form.TextBox\"/></td></tr>\r\n\t\t\t\t\t\t\t\t<tr><td class=\"prmaxrowtag\" align=\"right\" >Email:</td><td><input class=\"prmaxinput\" dojoAttachPoint=\"email\" name=\"email\" type=\"text\" size=\"40\" maxlength=\"80\" trim=\"true\" required=\"true\" dojoType=\"dijit.form.ValidationTextBox\" regExpGen=\"dojox.validate.regexp.emailAddress\" trim=\"true\" invalidMessage=\"invalid email address\" size=\"40\" maxlength=\"70\"/></td></tr>\r\n\t\t\t\t\t\t\t\t<tr><td class=\"prmaxrowtag\" align=\"right\" >Tel:</td><td><input class=\"prmaxinput\" dojoAttachPoint=\"tel\" name=\"tel\" type=\"text\" size=\"25\" maxlength=\"40\" dojoType=\"dijit.form.TextBox\"/></td></tr>\r\n\t\t\t\t\t\t\t\t<tr><td class=\"prmaxrowtag\" align=\"right\" >Country</td><td><select class=\"prmaxinput\" name=\"countryid\" dojoAttachPoint=\"countryid\" style=\"width:15em\" dojoType=\"dijit.form.FilteringSelect\" autoComplete=\"true\"></select></td></tr>\r\n\t\t\t\t\t\t\t\t<tr><td class=\"prmaxrowtag\" align=\"right\" >Vat No</td><td><input class=\"prmaxinput\" dojoAttachPoint=\"vatnumber\" trim=\"true\" name=\"vatnumber\" type=\"text\" size=\"25\" maxlength=\"40\" dojoType=\"dijit.form.TextBox\" /></td></tr>\r\n\t\t\t\t\t\t\t\t<tr><td class=\"prmaxrowtag\" colspan=\"2\" align=\"right\"><button iconClass=\"dijitPrmaxIcon dijitPrmaxUpdate\" dojoAttachPoint=\"saveNode\" dojoType=\"dojox.form.BusyButton\" busyLabel=\"Please Wait Saving...\" type=\"button\" dojoAttachEvent=\"onClick:_CustomerSave\" label=\"Save\" class=\"prmaxbutton\"></button></td></tr>\r\n\t\t\t\t\t\t\t</table>\r\n\t\t\t\t\t\t</form>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div dojoType=\"prmax.iadmin.accounts.FinancialControl\" dojoAttachPoint=\"financialcontrol\" title=\"Financial Controls\"></div>\r\n\t\t\t\t\t<div  dojoType=\"dijit.layout.ContentPane\" title=\"Financial Log\" >\r\n\t\t\t\t\t\t<div dojoAttachPoint=\"financialgrid\" dojoType=\"prmax.iadmin.accounts.FinancialView\" style=\"width:100%;height:100%\"></div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div  dojoType=\"dijit.layout.BorderContainer\" title=\"Users\" gutters=\"false\">\r\n\t\t\t\t\t\t<div dojoType=\"dijit.layout.ContentPane\" region=\"top\" style=\"width:100%;height:42px\">\r\n\t\t\t\t\t\t\t<div style=\"height:40px;width:100%;overflow:hidden;padding:0px;margin:0px\" class=\"searchresults\">\r\n\t\t\t\t\t\t\t\t<div style=\"height:100%;width:15%;float:left;padding:0px;margin:0px\"class=\"prmaxrowdisplaylarge\">Manage Users</div>\r\n\t\t\t\t\t\t\t\t<div class=\"dijitToolbarTop\" dojoType=\"dijit.Toolbar\" style=\"float:left;height:100%;width:85%;padding:0px;margin:0px\" >\r\n\t\t\t\t\t\t\t\t\t<div dojoType=\"dijit.form.Button\" iconClass=\"PrmaxResultsIcon PrmaxResultsEmpty\" showLabel=\"true\" dojoAttachEvent=\"onClick:_Add_User\">Add User</div>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div  dojoType=\"dijit.layout.BorderContainer\" preload=\"true\" region=\"center\" gutters=\"false\" style=\"width:100%;height:100%\">\r\n\t\t\t\t\t\t\t<div dojoType=\"dijit.layout.ContentPane\" preload=\"true\" region=\"top\" style=\"width:100%;height:30%\" splitter=\"true\">\r\n\t\t\t\t\t\t\t\t<div dojoAttachPoint=\"usergrid\" dojoType=\"dojox.grid.DataGrid\" query=\"{ name:'*'}\" rowsPerPage=\"50\"structure=\"PRMAX.iadmin.gridlayout.user_view\" style=\"width:100%;height:100%\"></div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div dojoType=\"dijit.layout.ContentPane\" region=\"center\" >\r\n\t\t\t\t\t\t\t\t<div class=\"prmaxhidden\" dojoAttachPoint=\"userdetails\" style=\"width:99%;margin:2px\">\r\n\t\t\t\t\t\t\t\t\t<form dojoAttachPoint=\"userdetailsform\"  onsubmit=\"return false\" dojoType=\"dijit.form.Form\">\r\n\t\t\t\t\t\t\t\t\t\t<table class=\"prmaxtable\" width=\"100%\" border=\"0\">\r\n\t\t\t\t\t\t\t\t\t\t\t<tr><td class=\"prmaxrowtag\" style=\"width:30%\">Email Address</td><td width=\"70%\"><input class=\"prmaxinput\" dojoAttachPoint=\"user_email_address\" name=\"email_address\" type=\"text\" trim=\"true\" required=\"true\" invalidMessage=\"Please Enter the name of the business\" dojoType=\"dijit.form.ValidationTextBox\" ></td></tr>\r\n\t\t\t\t\t\t\t\t\t\t\t<tr><td class=\"prmaxrowtag\" style=\"width:30%\">Login Name</td><td width=\"70%\"><input class=\"prmaxinput\" dojoAttachPoint=\"user_user_name\" name=\"user_name\" type=\"text\" trim=\"true\" required=\"true\" invalidMessage=\"Please Enter the name of the business\" dojoType=\"dijit.form.ValidationTextBox\" ></td></tr>\r\n\t\t\t\t\t\t\t\t\t\t\t<tr><td class=\"prmaxrowtag\" style=\"width:30%\">Display Name</td><td width=\"70%\"><input class=\"prmaxinput\" dojoAttachPoint=\"user_display_name\" name=\"display_name\" type=\"text\" trim=\"true\" required=\"true\" invalidMessage=\"Please Enter the name of the business\" dojoType=\"dijit.form.ValidationTextBox\" ></td></tr>\r\n\t\t\t\t\t\t\t\t\t\t\t<tr><td class=\"prmaxrowtag\" style=\"width:30%\">User Admin</td><td><input type=\"checkbox\" name=\"isuseradmin\" dojoAttachPoint=\"isuseradmin\" dojoType=\"dijit.form.CheckBox\"></td></tr>\r\n\t\t\t\t\t\t\t\t\t\t\t<tr><td class=\"prmaxrowtag\" style=\"width:30%\">No Direct Mail</td><td><input type=\"checkbox\" name=\"nodirectmail\" dojoAttachPoint=\"nodirectmail\" dojoType=\"dijit.form.CheckBox\"></td></tr>\r\n\t\t\t\t\t\t\t\t\t\t\t<tr><td class=\"prmaxrowtag\" style=\"width:30%\">See Invoices</td><td><input type=\"checkbox\" name=\"canviewfinancial\" dojoAttachPoint=\"canviewfinancial\" dojoType=\"dijit.form.CheckBox\"></td></tr>\r\n\t\t\t\t\t\t\t\t\t\t\t<tr><td class=\"prmaxrowtag\" style=\"width:30%\">Force Password Recovery</td><td><input type=\"checkbox\" name=\"force_passwordrecovery\" dojoAttachPoint=\"force_passwordrecovery\" dojoType=\"dijit.form.CheckBox\"></td></tr>\r\n\t\t\t\t\t\t\t\t\t\t\t<tr dojoAttachPoint=\"external_id_view\" class=\"prmaxhidden\"><td class=\"prmaxrowtag\" style=\"width:30%\">External Id</td><td width=\"70%\"><input class=\"prmaxinput\" dojoAttachPoint=\"external_key\" name=\"external_key\" type=\"text\" trim=\"true\" required=\"false\" dojoType=\"dijit.form.ValidationTextBox\" ></td></tr>\r\n\t\t\t\t\t\t\t\t\t\t\t<tr>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<td class=\"prmaxrowtag\" align=\"left\"><button dojoAttachEvent=\"onClick:_send_login_details\" dojoType=\"dijit.form.Button\" type=\"button\" label=\"Send Login Details\" class=\"prmaxbutton\"></button></td>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<td class=\"prmaxrowtag\" align=\"right\"><button dojoAttachEvent=\"onClick:_UpdateUserDetails\" iconClass=\"dijitPrmaxIcon dijitPrmaxUpdate\" dojoAttachPoint=\"userdetailsNode\" dojoType=\"dojox.form.BusyButton\" busyLabel=\"Please Wait Saving...\" type=\"button\" label=\"Change Details\" class=\"prmaxbutton\"></button></td></tr>\r\n\t\t\t\t\t\t\t\t\t\t</table>\r\n\t\t\t\t\t\t\t\t\t</form>\r\n\t\t\t\t\t\t\t\t\t<br/>\r\n\t\t\t\t\t\t\t\t\t<form dojoAttachPoint=\"userpasswordform\"  onsubmit=\"return false\" dojoType=\"dijit.form.Form\">\r\n\t\t\t\t\t\t\t\t\t\t<div dojoAttachPoint=\"userpassword\" dojoType=\"dojox.form.PasswordValidator\" name=\"password\" class=\"prmaxrowtag\" style=\"width:100%\">\r\n\t\t\t\t\t\t\t\t\t\t\t<table class=\"prmaxtable\" width=\"100%\" border=\"0\" >\r\n\t\t\t\t\t\t\t\t\t\t\t\t<tr><td class=\"prmaxrowtag\" width=\"30%\">Password:</td><td><input class=\"prmaxrequired\" type=\"password\" pwType=\"new\" /></td></tr>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<tr><td class=\"prmaxrowtag\" >Verify:</td><td><input class=\"prmaxrequired\" type=\"password\" pwType=\"verify\" /></td></tr>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<tr><td class=\"prmaxrowtag\" colspan=\"2\" align=\"right\"><button dojoAttachEvent=\"onClick:_UpdateUserPassword\" iconClass=\"dijitPrmaxIcon dijitPrmaxUpdate\" dojoAttachPoint=\"savePasswordNode\" dojoType=\"dojox.form.BusyButton\" busyLabel=\"Please Wait Saving...\" type=\"button\" label=\"Change Password\" class=\"prmaxbutton\"></button></td></tr>\r\n\t\t\t\t\t\t\t\t\t\t\t</table>\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t</form>\r\n\t\t\t\t\t\t\t\t\t<br/>\r\n\t\t\t\t\t\t\t\t\t<div dojoAttachPoint=\"user_monitor_total_view\" class=\"prmaxhidden\">\r\n\t\t\t\t\t\t\t\t\t\t<form dojoAttachPoint=\"updatumform\"  onsubmit=\"return false\" dojoType=\"dijit.form.Form\">\r\n\t\t\t\t\t\t\t\t\t\t\t<label class=\"prmaxrowtag\"> User Has Monitoring</label><input type=\"checkbox\" name=\"hasmonitoring\" dojoAttachPoint=\"hasmonitoring\" dojoType=\"dijit.form.CheckBox\" dojoAttachEvent=\"onClick:_ChangeMonitoring\">\r\n\t\t\t\t\t\t\t\t\t\t\t<div dojoAttachPoint=\"user_monitor_view\" class=\"prmaxhidden\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<input class=\"prmaxinput\" dojoAttachPoint=\"updatum_iuserid\" name=\"iuserid\" type=\"hidden\" dojoType=\"dijit.form.TextBox\" >\r\n\t\t\t\t\t\t\t\t\t\t\t\t<table class=\"prmaxtable\" width=\"100%\" border=\"0\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<tr><td class=\"prmaxrowtag\" style=\"width:30%\">Current Password</td><td width=\"70%\"><input class=\"prmaxinput\" dojoAttachPoint=\"updatum_pwd_display\" type=\"text\" readonly=\"readonly\" dojoType=\"dijit.form.TextBox\" ></td>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<td>Copy too Support user </td></tr>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<tr><td class=\"prmaxrowtag\" style=\"width:30%\">Monitoring User Name</td><td width=\"70%\"><input class=\"prmaxinput\" dojoAttachPoint=\"updatum_username\" name=\"updatum_username\" type=\"text\" trim=\"true\" required=\"true\" invalidMessage=\"Missing User\" dojoType=\"dijit.form.ValidationTextBox\" ></td></tr>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<tr><td colspan=\"2\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div dojoAttachPoint=\"updatum_password\" dojoType=\"dojox.form.PasswordValidator\" name=\"updatum_password\" class=\"prmaxrowtag\" style=\"width:100%\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<table class=\"prmaxtable\" width=\"100%\" border=\"0\" >\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<tr><td class=\"prmaxrowtag\" width=\"30%\">Password:</td><td><input class=\"prmaxrequired\" type=\"password\" pwType=\"new\" /></td></tr>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<tr><td class=\"prmaxrowtag\" >Verify:</td><td><input class=\"prmaxrequired\" type=\"password\" pwType=\"verify\" /></td></tr>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</table>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</td></tr>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</table>\r\n\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t<button style=\"float:right;padding-right:15px\" dojoAttachEvent=\"onClick:_UpdateUpdatum\" iconClass=\"dijitPrmaxIcon dijitPrmaxUpdate\" dojoAttachPoint=\"saveUpdatum\" dojoType=\"dojox.form.BusyButton\" busyLabel=\"Please Wait Saving...\" type=\"button\" label=\"Update Monitoring Details\" class=\"prmaxbutton\"></button>\r\n\t\t\t\t\t\t\t\t\t\t</form>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t<br/>\r\n\t\t\t\t\t\t\t\t\t<table class=\"prmaxtable\" width=\"99%\" >\r\n\t\t\t\t\t\t\t\t\t\t<tr><td><button iconClass=\"dijitPrmaxIcon dijitPrmaxDelete\" dojoAttachEvent=\"onClick:_DeleteUser\" dojoAttachPoint=\"deleteUserNode\" dojoType=\"dojox.form.BusyButton\" busyLabel=\"Please Wait Saving...\" type=\"button\" label=\"Delete User\" class=\"prmaxbutton\"></button></td></tr>\r\n\t\t\t\t\t\t\t\t\t</table>\r\n\t\t\t\t\t\t\t\t\t<br/>\r\n\t\t\t\t\t\t\t\t\t<table class=\"prmaxtable\" width=\"99%\" >\r\n\t\t\t\t\t\t\t\t\t\t<tr><td><button iconClass=\"fa fa-unlock\" dojoAttachEvent=\"onClick:_UnlockUser\" dojoAttachPoint=\"unlockUserNode\" dojoType=\"dojox.form.BusyButton\" busyLabel=\"Please Wait Saving...\" type=\"button\" label=\"Unlock User\" class=\"prmaxhidden prmaxbutton\"></button></td></tr>\r\n\t\t\t\t\t\t\t\t\t</table>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div dojoAttachPoint=\"notestab\" dojoType=\"dijit.layout.BorderContainer\" title=\"Notes\" style=\"width:100%;height:100%\" gutters=\"false\">\r\n\t\t\t\t\t\t<div  dojoType=\"prmax.crm.viewer\" dojoAttachPoint=\"crmviewer\" region=\"center\" ></div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div  dojoType=\"dijit.layout.ContentPane\" title=\"Audit\" style=\"width:100%;height:100%\">\r\n\t\t\t\t\t\t<div dojoAttachPoint=\"auditgrid\" dojoType=\"dojox.grid.DataGrid\" query=\"{ name:'*'}\" rowsPerPage=\"50\" structure=\"PRMAX.iadmin.gridlayout.audit_view\" style=\"width:100%;height:100%\"></div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div  dojoType=\"dijit.layout.ContentPane\" title=\"Diary\" style=\"width:100%;height:100%\">\r\n\t\t\t\t\t\t<div dojoAttachPoint=\"diary_view\" dojoType=\"prmax.crm.task.viewer\" style=\"width:100%;height:100%\"></div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div  dojoType=\"dijit.layout.ContentPane\" title=\"SEO\" style=\"width:100%;height:100%\">\r\n\t\t\t\t\t\t<div dojoAttachPoint=\"seo_view\" dojoType=\"prmax.iadmin.accounts.SeoView\" style=\"width:100%;height:100%\"></div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t\t<div dojoAttachPoint=\"frame_tab_e\" dojotype=\"dijit.layout.BorderContainer\" gutters=\"false\" title=\"Extra Options\" style=\"width:100%;height:100%;overflow: hidden; border: 0; padding: 0; margin: 0\" >\r\n\t\t\t<div  dojotype=\"dojox.layout.ExpandoPane\"\ttitle=\"Options\"\tregion=\"left\" maxWidth=\"175\" style=\"width:15%;height:100%;overflow: hidden; border: 1px solid black; padding: 0; margin: 0\" >\r\n\t\t\t\t<div dojoType=\"dojo.data.ItemFileReadStore\" jsId=\"catStore\" url=\"/iadmin/options\"></div>\r\n\t\t\t\t<div dojoType=\"dijit.tree.ForestStoreModel\" jsId=\"catModel\" store=\"catStore\" query=\"{type: '1'} \"  childrenAttrs=\"children\" rootId=\"root\" rootLabel=\"root\" ></div>\r\n\t\t\t\t<div  dojoType=\"dijit.Tree\" model=\"catModel\" showRoot=\"false\" dojoAttachEvent=\"onClick: _SelectNode\" ></div>\r\n\t\t\t</div>\r\n\t\t\t<div dojoType=\"dijit.layout.StackContainer\" dojoAttachPoint=\"zone\" region=\"center\"  doLayout=\"true\" style=\"border:1px solid black\"></div>\r\n\t\t</div>\r\n\t</div>\r\n</div>\r\n<div dojoAttachPoint=\"expirectrl\" dojoType=\"prmax.iadmin.sales.SetExpireDate\" ></div>\r\n<div dojoType=\"dijit.Dialog\" title=\"Add User\" dojoAttachPoint=\"adduserdialog\">\r\n\t<div  dojoAttachPoint=\"adduserctrl\" dojoType=\"prmax.user.AddUser\" ></div>\r\n</div>\r\n<form dojoAttachPoint=\"documentform\" target=\"_blank\" method=\"post\" action=\"/iadmin/viewpdf\">\r\n\t<input type=\"hidden\" name=\"audittrailid\"dojoAttachPoint=\"documentform_audittrailid\">\r\n</form>\r\n<form data-dojo-attach-point=\"htmlform\" target=\"_blank\" method=\"post\" action=\"/iadmin/viewhtml\">\r\n\t<input type=\"hidden\" name=\"audittrailid\" data-dojo-attach-point=\"htmlform_audittrailid\">\r\n</form>\r\n\r\n\r\n<div dojoType=\"dijit.Dialog\" title=\"New Task\" dojoAttachPoint=\"newtaskdialog\">\r\n\t<div dojoAttachPoint=\"newtaskctrl\" dojoType=\"prmax.iadmin.TaskAdd\" ></div>\r\n</div>\r\n<div dojoType=\"dijit.Dialog\" title=\"Re-Activate Demo\" dojoAttachPoint=\"reactiveatedialog\">\r\n\t<div dojoAttachPoint=\"reactiveatectrl\" dojoType=\"prmax.iadmin.sales.ReActivateDemo\" ></div>\r\n</div>\r\n<div data-dojo-type=\"prmax.iadmin.sales.SetFreeSEOCount\" data-dojo-attach-point=\"seofree\"></div>\r\n\r\n<div data-dojo-type=\"dijit.Dialog\"data-dojo-props='title:\"Reset Password and Send Login Details\"' data-dojo-attach-point=\"send_password_dialog\">\r\n\t<div data-dojo-attach-point=\"send_password_ctrl\" data-dojo-type=\"prmax.iadmin.support.ResetAndSend\" ></div>\r\n</div>\r\n\r\n<!-- -->\r\n",constructor:function(){this._LoadCustomerCall=dojo.hitch(this,this._LoadCustomer);this._ChangeStatusResponseCall=dojo.hitch(this,this._ChangeStatusResponse);this._UpdateUserPasswordResponseCall=dojo.hitch(this,this._UpdateUserPasswordResponse);this._UpdateUserDetailsResponseCall=dojo.hitch(this,this._UpdateUserDetailsResponse);this._EmailResponseCall=dojo.hitch(this,this._EmailResponse);this._SetUserCountResponseCall=dojo.hitch(this,this._SetUserCountResponse);this._ChangeDemoStatusResponseCall=dojo.hitch(this,this._ChangeDemoStatusResponse);this._ChangeEmailStatusResponseCall=dojo.hitch(this,this._ChangeEmailStatusResponse);this._CustomerSaveResponseCall=dojo.hitch(this,this._CustomerSaveResponse);this._LoadUserCall=dojo.hitch(this,this._LoadUser);this._DeleteAccountResponseCall=dojo.hitch(this,this._DeleteAccountResponse);this._DeleteUserResponseCall=dojo.hitch(this,this._DeleteUserResponse);this._UnlockUserResponseCall=dojo.hitch(this,this._UnlockUserResponse);this._SetUserNameCountResponseCall=dojo.hitch(this,this._SetUserNameCountResponse);this._UserLoggedOffCallBack=dojo.hitch(this,this._UserLoggedOffCall);this._UpdatedCustomerTypeCallBack=dojo.hitch(this,this._UpdatedCustomerTypeCall);this._UpdatedInternalStatusCallBack=dojo.hitch(this,this._UpdatedInternalStatusCall);this._SetCustomerCallBack=dojo.hitch(this,this._SetCustomerCall);this._LoadCustomer2CallBack=dojo.hitch(this,this._LoadCustomer2Call);this._UpdateUpdatumCallBack=dojo.hitch(this,this._UpdateUpdatumCall);this._change_extended_subject_call_back=dojo.hitch(this,this._change_extended_subject_call);this.front_customerid=-1;this._show_all=0;this._extended_security=false;dojo.subscribe(PRCOMMON.Events.User_Added,dojo.hitch(this,this._User_Added_Event));dojo.subscribe(PRCOMMON.Events.Show_Customer_Main,dojo.hitch(this,this._Show_Customer_Event));dojo.subscribe(PRCOMMON.Events.Expire_Date_Changed,dojo.hitch(this,this._Change_Expire_Date));dojo.subscribe("extended_settings",dojo.hitch(this,this._Change_Extended_Setting));this.customerlist=new prcommon.data.QueryWriteStore({url:"/iadmin/customers",onError:ttl.utilities.globalerrorchecker,clearOnClose:true,urlPreventCache:true,nocallback:true});this.auditlist=new dojox.data.QueryReadStore({url:"/iadmin/audit",onError:ttl.utilities.globalerrorchecker,clearOnClose:true,urlPreventCache:true});this.userlist=new prcommon.data.QueryWriteStore({url:"/iadmin/users",onError:ttl.utilities.globalerrorchecker,clearOnClose:true,nocallback:true,urlPreventCache:true});this._financialstatus_filter=new dojo.data.ItemFileReadStore({url:"/common/lookups?searchtype=financialstatus&ignore=1"});this._financialstatus_filter=new dojo.data.ItemFileReadStore({url:"/common/lookups?searchtype=financialstatus&ignore=1"});this._customersourceid=new dojo.data.ItemFileReadStore({url:"/common/lookups?searchtype=customersources"});this._clippingsourceid=new dojo.data.ItemFileReadStore({url:"/common/lookups?searchtype=clippingsource&nofilter=1"});this.user_model=new prcommon.data.QueryWriteStore({url:"/iadmin/users_support",onError:ttl.utilities.globalerrorchecker,clearOnClose:true,nocallback:true,urlPreventCache:true});this._Windows=new dojox.collections.Dictionary();},postCreate:function(){this.filter_customertypeid.store=PRCOMMON.utils.stores.Customer_Types_Filter();this.filter_customersourceid.store=PRCOMMON.utils.stores.Customer_Source_Filter();this.filter_financialstatus.store=this._financialstatus_filter;this.customersourceid.store=this._customersourceid;this.customergrid._setStore(this.customerlist);this.auditgrid._setStore(this.auditlist);this.usergrid._setStore(this.userlist);this.customergrid["onStyleRow"]=dojo.hitch(this,this._OnStyleRow);this.customergrid["onRowClick"]=dojo.hitch(this,this._OnSelectRow);this.usergrid["onRowClick"]=dojo.hitch(this,this._OnSelectUserRow);this.auditgrid["onRowClick"]=dojo.hitch(this,this._OnSelectAudit);this.support_userid.store=this.user_model;this.filter_customer_statusid.set("value","-1");this.filter_customertypeid.set("value","-1");this.filter_financialstatus.set("value","-1");this.filter_customersourceid.set("value","-1");dojo.connect(this.setusercountform,"onSubmit",dojo.hitch(this,this._SetUserCount));dojo.connect(this.setupernamecount,"onSubmit",dojo.hitch(this,this._SetUserNameCount));dojo.connect(this.demoaccountform,"onSubmit",dojo.hitch(this,this._ChangeDemoStatus));dojo.connect(this.emailenabledform,"onSubmit",dojo.hitch(this,this._ChangeEmailStatus));dojo.connect(this.collaterallimitform,"onSubmit",dojo.hitch(this,this._Set_Collateral_Limit));dojo.connect(this.emaillimitform,"onSubmit",dojo.hitch(this,this._set_email_day_limit));this.countryid.store=PRCOMMON.utils.stores.Countries();this.customertypeid.store=PRCOMMON.utils.stores.Customer_Types();this.filter_monitoringstatusid.store=this._init_monitoring_filter();this.filter_monitoringstatusid.set("value",-1);this.filter_clippingsourceid.store=this._clippingsourceid;this.filter_clippingsourceid.set("value",-1);this.inherited(arguments);},startup:function(){this.inherited(arguments);},_OnStyleRow:function(_1){ttl.GridHelpers.onStyleRow(_1);},_LoadUser:function(_2){if(_2.success=="OK"){dojo.removeClass(this.userdetails,"prmaxhidden");this.user_email_address.set("value",_2.data.email_address);this.user_display_name.set("value",_2.data.display_name);this.user_user_name.set("value",_2.data.user_name);this.canviewfinancial.set("value",_2.data.canviewfinancial);this.force_passwordrecovery.set("value",_2.data.force_passwordrecovery);this.isuseradmin.set("value",_2.data.isuseradmin);this.nodirectmail.set("value",_2.data.nodirectmail);this.userpassword.reset();this.hasmonitoring.set("value",_2.data.hasmonitoring);this._ChangeMonitoring();this.updatum_username.set("value",_2.data.updatum_username);this.updatum_pwd_display.set("value",_2.data.updatum_pwd_display);this.updatum_password.reset();this.updatum_iuserid.set("value",this._userrow.i.user_id);this.external_key.set("value",_2.data.external_key);if(_2.data.invalid_login_tries>=10||_2.data.invalid_reset_tries>=10){dojo.removeClass(this.unlockUserNode.domNode,"prmaxhidden");}else{dojo.addClass(this.unlockUserNode.domNode,"prmaxhidden");}}},_ChangeMonitoring:function(){if(this.hasmonitoring.get("checked")){dojo.removeClass(this.user_monitor_view,"prmaxhidden");}else{dojo.addClass(this.user_monitor_view,"prmaxhidden");}},_OnSelectUserRow:function(e){this._userrow=this.usergrid.getItem(e.rowIndex);dojo.xhrPost(ttl.utilities.makeParams({load:this._LoadUserCall,url:"/iadmin/get_user_internal",content:{"iuserid":this._userrow.i.user_id}}));},_OnSelectRow:function(e){var _3=this.customergrid.getItem(e.rowIndex);this._customerid=_3.i.customerid;if(e.cellIndex==0){this.newtaskctrl.Load(PRMAX.utils.settings.groups,this.newtaskdialog,null,this._customerid);this.newtaskdialog.show();}else{dojo.xhrPost(ttl.utilities.makeParams({load:this._LoadCustomerCall,url:"/iadmin/get_internal",content:{"icustomerid":this._customerid}}));this._LoadTabs(this._customerid);this.customergrid.selection.clickSelectEvent(e);}},_LoadTabs:function(_4){this.auditgrid.setQuery(dojo.mixin(ttl.utilities.getPreventCache(),{icustomerid:_4}));this.usergrid.setQuery(dojo.mixin(ttl.utilities.getPreventCache(),{icustomerid:_4}));this.financialgrid.Load(_4);this.crmviewer.LoadControls(null,null,null,_4);},_LoadCustomer:function(_5){this._customertypeid=_5.data.cust.customertypeid;dojo.removeClass(this.detailsview.domNode,"prmaxhidden");dojo.addClass(this.userdetails,"prmaxhidden");this.detailsview.resize();this.statusid.set("value",_5.data.cust.customerstatusid);dojo.attr(this.displayname,"innerHTML",_5.data.cust.customername);dojo.attr(this.customersourcedescription,"innerHTML",_5.data.custsource.customersourcedescription);this.logins.set("value",_5.data.cust.logins);this.nbrofusersaccounts.set("value",_5.data.cust.maxnbrofusersaccounts);this.collateral_size.set("value",_5.data.cust.collateral_size);this.max_emails_for_day.set("value",_5.data.cust.max_emails_for_day);this.advancefeatures.set("value",_5.data.cust.advancefeatures);this.crm.set("value",_5.data.cust.crm);this.seo.set("value",_5.data.cust.seo);if(this.seo.checked==false){dojo.addClass(this.seotranslation_node,"prmaxhidden");this.seotranslation.set("value",false);}else{dojo.removeClass(this.seotranslation_node,"prmaxhidden");this.seotranslation.set("value",_5.data.cust.seotranslation);}this.updatum.set("value",_5.data.cust.updatum);this.maxmonitoringusers.set("value",_5.data.cust.maxmonitoringusers);this._CheckLayout(_5.data.cust,_5.data.mediaaccesstype,_5.data.emailserver);this.customertypeid.set("value",_5.data.cust.customertypeid);this.demoaccount_check.set("value",_5.data.cust.isdemo);this.isadvancedemo.set("value",_5.data.cust.isadvancedemo);this.ismonitoringdemo.set("value",_5.data.cust.ismonitoringdemo);this.is_bundle.set("value",_5.data.cust.is_bundle);this.has_news_rooms.set("value",_5.data.cust.has_news_rooms);this.has_global_newsroom.set("value",_5.data.cust.has_global_newsroom);this.has_journorequests.set("value",_5.data.cust.has_journorequests);this.has_international_data.set("value",_5.data.cust.has_international_data);this.has_clippings.set("value",_5.data.cust.has_clippings);this.customername.set("value",_5.data.cust.customername);this.contact_title.set("value",_5.data.cust.contact_title);this.contact_firstname.set("value",_5.data.cust.contact_firstname);this.contact_surname.set("value",_5.data.cust.contact_surname);this.individual.set("checked",_5.data.cust.individual);this.customersourceid.set("value",_5.data.cust.customersourceid);this.contactjobtitle.set("value",_5.data.cust.contactjobtitle);this.address1.set("value",_5.data.address.address1);this.address2.set("value",_5.data.address.address2);this.townname.set("value",_5.data.address.townname);this.county.set("value",_5.data.address.county);this.postcode.set("value",_5.data.address.postcode);this.email.set("value",_5.data.cust.email);this.tel.set("value",_5.data.cust.tel);this.countryid.set("value",_5.data.cust.countryid);this.vatnumber.set("value",_5.data.cust.vatnumber);this.useemail_check.set("value",_5.data.cust.useemail);this.emailistestmode_check.set("value",_5.data.cust.emailistestmode);this.isinternal.set("value",_5.data.cust.isinternal);this.has_extended_email_subject.set("value",_5.data.cust.has_extended_email_subject);if(_5.data.cust.extended_security){this._extended_security=true;}dojo.attr(this.expire_display,"innerHTML",_5.data.cust.licence_expire_display);this.financialcontrol.Load(_5.data);this.diary_view.Load(_5.data.cust.customerid);if(_5.data.cust.isdemo){dojo.removeClass(this.reactive_demo.domNode,"prmaxhidden");}else{dojo.addClass(this.reactive_demo.domNode,"prmaxhidden");}this.seo_view.Load(_5.data.cust.customerid);this.datasets.load(_5.data.cust.customerid,_5.data.cust.has_international_data);this.clippings.load(_5.data.cust.customerid,_5.data.cust.end_date);if(_5.data.cust.customertypeid==23||_5.data.cust.customertypeid==24){dojo.removeClass(this.external_id_view,"prmaxhidden");this.external_key.set("required",true);}else{dojo.addClass(this.external_id_view,"prmaxhidden");this.external_key.set("required",false);}if(_5.data.customermenusettings){this.pm_new_outlet.set("value",_5.data.customermenusettings.pm_new_outlet);this.pm_new_freelance.set("value",_5.data.customermenusettings.pm_new_freelance);this.pm_collateral.set("value",_5.data.customermenusettings.pm_collateral);this.pm_exclusions.set("value",_5.data.customermenusettings.pm_exclusions);this.pm_clients.set("value",_5.data.customermenusettings.pm_clients);this.pm_issues.set("value",_5.data.customermenusettings.pm_issues);this.pm_statements.set("value",_5.data.customermenusettings.pm_statements);this.pm_questions.set("value",_5.data.customermenusettings.pm_questions);this.pm_global_analysis.set("value",_5.data.customermenusettings.pm_global_analysis);this.pm_documents.set("value",_5.data.customermenusettings.pm_documents);this.pm_private_media_channels.set("value",_5.data.customermenusettings.pm_private_media_channels);this.pm_user_preferences.set("value",_5.data.customermenusettings.pm_user_preferences);this.pm_account_details.set("value",_5.data.customermenusettings.pm_account_details);this.pm_activity_log.set("value",_5.data.customermenusettings.pm_activity_log);this.pm_user_admin.set("value",_5.data.customermenusettings.pm_user_admin);this.pm_financial.set("value",_5.data.customermenusettings.pm_financial);this.pm_prrequests.set("value",_5.data.customermenusettings.pm_prrequests);}else{this._clear_private_menu_settings();}this.options_tab.selectChild(this.options_tab_details);},_clear_private_menu_settings:function(){this.pm_new_outlet.set("value",false);this.pm_new_freelance.set("value",false);this.pm_collateral.set("value",false);this.pm_exclusions.set("value",false);this.pm_clients.set("value",false);this.pm_issues.set("value",false);this.pm_statements.set("value",false);this.pm_questions.set("value",false);this.pm_global_analysis.set("value",false);this.pm_documents.set("value",false);this.pm_private_media_channels.set("value",false);this.pm_user_preferences.set("value",false);this.pm_account_details.set("value",false);this.pm_activity_log.set("value",false);this.pm_user_admin.set("value",false);this.pm_financial.set("value",false);this.pm_prrequests.set("value",false);},_Change_Expire_Date:function(_6){dojo.attr(this.expire_display,"innerHTML",_6.licence_expire_display);},_ChangeStatus:function(){dojo.xhrPost(ttl.utilities.makeParams({load:dojo.hitch(this,this._ChangeStatusResponseCall),url:"/iadmin/changestatus",content:{"customerid":this._customerid,customerstatusid:this.statusid.get("value")}}));},_ChangeStatusResponse:function(_7){if(_7.success=="OK"){alert("Status Changed was Successful");}else{alert("Status Changed Failed ");}this.statusidbutton.cancel();},_CustomerSaveResponse:function(_8){if(_8.success=="OK"){alert("Customer Details Updated");}this.saveNode.cancel();},_CustomerSave:function(){var _9=this.customerForm.get("value");_9["icustomerid"]=this._customerid;dojo.xhrPost(ttl.utilities.makeParams({load:dojo.hitch(this,this._CustomerSaveResponseCall),url:"/iadmin/update_customer",content:_9}));},_EmailResponse:function(_a){this.sendemailbutton.cancel();alert("Email Queued");},_SendEmail:function(){dojo.xhrPost(ttl.utilities.makeParams({load:dojo.hitch(this,this._EmailResponseCall),url:"/iadmin/sendprimarypassword",content:{"customerid":this._customerid,customerstatusid:this.statusid.get("value")}}));},_ResetPassword:function(){},resize:function(){this.frame.resize(arguments[0]);this.inherited(arguments);},_SetExpireDate:function(_b){this.expirectrl.Load(this._customerid);},_SetUserCountResponse:function(_c){if(_c.success=="OK"){alert("Concurrent User Count Re-Set");}else{alert("Problem Resetting Concurrent User Count");}},_SetUserCount:function(){if(ttl.utilities.formValidator(this.setusercountform)==false){alert("form invalid");return false;}var _d=this.setusercountform.get("value");_d["icustomerid"]=this._customerid;dojo.xhrPost(ttl.utilities.makeParams({load:dojo.hitch(this,this._SetUserCountResponseCall),url:"/iadmin/set_login_count",content:_d}));},_SetUserNameCountResponse:function(_e){if(_e.success=="OK"){alert("Nbr of User Names Re-Set");}else{alert("Problem Resetting Nbr of User Names");}},_SetUserNameCount:function(){if(ttl.utilities.formValidator(this.setupernamecount)==false){alert("form invalid");return false;}var _f=this.setupernamecount.get("value");_f["icustomerid"]=this._customerid;dojo.xhrPost(ttl.utilities.makeParams({load:dojo.hitch(this,this._SetUserNameCountResponseCall),url:"/iadmin/set_users_count",content:_f}));},_Set_Collateral_Limit:function(){if(ttl.utilities.formValidator(this.collateral_size)==false){alert("form invalid");return false;}var _10=this.collaterallimitform.get("value");_10["icustomerid"]=this._customerid;dojo.xhrPost(ttl.utilities.makeParams({load:dojo.hitch(this,this._Set_Collateral_Limit_Response),url:"/iadmin/set_collateral_limit",content:_10}));},_Set_Collateral_Limit_Response:function(_11){if(_11.success=="OK"){alert("Collateral Limit Updated");}else{alert("Collateral Limit Update Failed");}},_set_email_day_limit:function(){if(ttl.utilities.formValidator(this.emaillimitform)==false){alert("form invalid");return false;}var _12=this.emaillimitform.get("value");_12["icustomerid"]=this._customerid;dojo.xhrPost(ttl.utilities.makeParams({load:dojo.hitch(this,this._set_email_day_limit_call),url:"/iadmin/set_max_emails_for_day",content:_12}));},_set_email_day_limit_call:function(_13){if(_13.success=="OK"){alert("Email Limit Updated");}else{alert("Email Limit Update Failed");}},_Set_Collateral_Limit_Response:function(_14){if(_14.success=="OK"){alert("Collateral Limit Updated");}else{alert("Collateral Limit Update Failed");}},_ChangeDemoStatusResponse:function(_15){if(_15.success=="OK"){alert("Demo Status Changed");}else{alert("Problem Changing Demo Status ");}},_ChangeDemoStatus:function(){var _16=dojo.mixin({"icustomerid":this._customerid},this.demoaccountform.get("value"));dojo.xhrPost(ttl.utilities.makeParams({load:dojo.hitch(this,this._ChangeDemoStatusResponseCall),url:"/iadmin/set_demo_status",content:_16}));},_ChangeEmailStatusResponse:function(_17){if(_17.success=="OK"){alert("Email Status Changed");}else{alert("Problem Changing Email Status ");}},_ChangeEmailStatus:function(){var _18=dojo.mixin({"icustomerid":this._customerid},this.emailenabledform.get("value"));dojo.xhrPost(ttl.utilities.makeParams({load:dojo.hitch(this,this._ChangeEmailStatusResponseCall),url:"/iadmin/set_email_status",content:_18}));},_SetTime:function(_19){dojo.attr(_19,"innerHTML",new Date().toString());},_UpdateUserDetails:function(){if(ttl.utilities.formValidator(this.userdetailsform)==false){alert("Invalid Info");this.userdetailsNode.cancel();return false;}if(confirm("Update's users details")){var _1a=this.userdetailsform.get("value");_1a["iuserid"]=this._userrow.i.user_id;dojo.xhrPost(ttl.utilities.makeParams({load:dojo.hitch(this,this._UpdateUserDetailsResponseCall),url:"/iadmin/update_user_details",content:_1a}));}return false;},_UpdateUserDetailsResponse:function(_1b){if(_1b.success=="OK"){alert("User Details Changed");}else{alert("Problem Changing user details");}this.userdetailsNode.cancel();},_UpdateUpdatum:function(){if(this.hasmonitoring.get("checked")){if(ttl.utilities.formValidator(this.updatumform)==false){alert("Invalid Details");this.saveUpdatum.cancel();return false;}}if(confirm("Update's Monitoring Details")){var _1c=this.updatumform.get("value");_1c["updatum_password"]=this.updatum_password.value;dojo.xhrPost(ttl.utilities.makeParams({load:dojo.hitch(this,this._UpdateUpdatumCallBack),url:"/iadmin/update_updatum_password",content:_1c}));}return false;},_UpdateUpdatumCall:function(_1d){if(_1d.success=="OK"){alert("Updatum Details Changed");}else{if(_1d.success=="LI"){alert("Use Count for Monitoring Exceeded");}else{alert("Problem Changing Updatum details");}}this.saveUpdatum.cancel();},_has_lower_case:function(str){var i=0;while(i<=str.length){c=str.charAt(i);if(c==c.toLowerCase()){return true;}i++;}return false;},_has_upper_case:function(str){var i=0;while(i<=str.length){c=str.charAt(i);if(c==c.toUpperCase()){return true;}i++;}return false;},_has_number:function(str){var i=0;while(i<=str.length){c=str.charAt(i);if(parseInt(c)){return true;}i++;}return false;},_UpdateUserPassword:function(){if(ttl.utilities.formValidator(this.userpasswordform)==false){alert("Invalid Password");this.savePasswordNode.cancel();return false;}var _1e=this.userpassword.value;if(this._extended_security==true){if(_1e.length<8||this._has_lower_case(_1e)==false||this._has_upper_case(_1e)==false||this._has_number(_1e)==false){alert("Please enter a valid password: minimum length 8 characters, at least one character upper case, one character lower case and one digit");this.savePasswordNode.cancel();return;}}if(confirm("Update's users password")){var _1f=this.userpasswordform.get("value");_1f["iuserid"]=this._userrow.i.user_id;_1f["password"]=this.userpassword.value;dojo.xhrPost(ttl.utilities.makeParams({load:dojo.hitch(this,this._UpdateUserPasswordResponseCall),url:"/iadmin/update_user_password",content:_1f}));}return false;},_UpdateUserPasswordResponse:function(_20){if(_20.success=="OK"){alert("Password Changed");}else{alert("Problem Chnaging user password");}this.savePasswordNode.cancel();},_DeleteUserResponse:function(_21){if(_21.success=="OK"){this.userlist.deleteItem(this._userrow);dojo.addClass(this.userdetails,"prmaxhidden");alert("User Deleted ");}else{alert("Problem Deleting User");}this.deleteUserNode.cancel();},_DeleteUser:function(){if(confirm("Delete User?")){dojo.xhrPost(ttl.utilities.makeParams({load:this._DeleteUserResponseCall,url:"/iadmin/delete_user",content:{iuserid:this._userrow.i.user_id}}));}},_UnlockUserResponse:function(_22){if(_22.success=="OK"){alert("User Unlocked ");}else{alert("Problem unlocking User");}this.unlockUserNode.cancel();dojo.addClass(this.unlockUserNode.domNode,"prmaxhidden");},_UnlockUser:function(){if(confirm("Unlock User?")){dojo.xhrPost(ttl.utilities.makeParams({load:this._UnlockUserResponseCall,url:"/iadmin/unlock_user",content:{iuserid:this._userrow.i.user_id}}));}},_Change_Extended_Setting:function(_23){this._extended_security=_23.cust.extended_security;},_Logout:function(){if(confirm("Logout of Prmax?")==true){window.location.href="/logout?ref=/iadmin/main";}},_OnSelectAudit:function(e){var row=this.auditgrid.getItem(e.rowIndex);if(e.cellIndex==3&&row.i.documentpresent==true){if(row.i.audittypeid==17||row.i.audittypeid==24){dojo.attr(this.htmlform_audittrailid,"value",row.i.audittrailid);dojo.attr(this.htmlform,"action","/iadmin/viewhtml/"+row.i.audittrailid);this.htmlform.submit();}else{dojo.attr(this.documentform_audittrailid,"value",row.i.audittrailid);dojo.attr(this.documentform,"action","/iadmin/viewpdf/"+row.i.audittrailid);this.documentform.submit();}}this.auditgrid.selection.clickSelectEvent(e);},_DeleteAccountResponse:function(_24){if(_24.success=="OK"){this.customergrid.setQuery(ttl.utilities.getPreventCache({}));this.customergrid.selection.clear();dojo.style(this.detailsview.domNode,"display","none");dojo.addClass(this.userdetails,"prmaxhidden");alert("Account Deleted");}else{if(_24.success=="FD"){alert("Record has been marked as Deleted but has not been delete because it has Financial Information attached");}else{alert("Problem Deleteing Account");}}},_DeleteAccount:function(){if(confirm("Do You Wish to Delete Account ?")){if(confirm("Are you REALLY Sure?")){dojo.xhrPost(ttl.utilities.makeParams({load:this._DeleteAccountResponseCall,url:"/iadmin/delete_customer",content:{"icustomerid":this._customerid}}));}}},_Add_User:function(){this.adduserctrl.Clear();this.adduserctrl.set_has_external_level(this._customertypeid);this.adduserctrl.icustomerid.set("value",this._customerid);this.adduserctrl.extended_security.set("value",this._extended_security);this.adduserdialog.show();},_User_Added_Event:function(_25){this.userlist.newItem(_25);this.adduserdialog.hide();this.adduserctrl.Clear();},_ExecuteCustomerFilter:function(){var _26={statusid:arguments[0].statusid,customername:arguments[0].customername,accountnbr:arguments[0].accountnbr,customertypeid:arguments[0].customertypeid,customersourceid:arguments[0].customersourceid,financialstatusid:arguments[0].financialstatusid,email:arguments[0].email,isinternal:arguments[0].isinternal,contactname:arguments[0].contactname,invoicenbr:arguments[0].invoicenbr,creditnotenbr:arguments[0].creditnotenbr,unallocated:arguments[0].unallocated};if(arguments[0].licence_expired){_26["licence_expired"]=arguments[0].licence_expired;}if(arguments[0].monitoringstatusid!=""&&arguments[0].monitoringstatusid!="-1"){_26["monitoringstatusid"]=arguments[0].monitoringstatusid;}if(arguments[0].clippingsourceid!=""&&arguments[0].clippingsourceid!="-1"){_26["clippingsourceid"]=arguments[0].clippingsourceid;}this.customergrid.setQuery(ttl.utilities.getPreventCache(_26));dojo.addClass(this.detailsview.domNode,"prmaxhidden");},_ClearFilter:function(){this.filter_licence_expired.set("checked",false);this.filter_isinternal.set("checked",false);this.filter_customername.set("value","");this.filter_customer_statusid.set("value","-1");this.filter_accountnbr.set("value","");this.filter_customertypeid.set("value",-1);this.filter_customeremail.set("value","");this.filter_customersourceid.set("value",-1);this.filter_contactname.set("value","");this.filter_invoicenbr.set("value","");this.filter_creditnotenbr.set("value","");this.filter_unallocated.set("checked",false);this.filter_monitoringstatusid.set("value",-1);this.filter_clippingsourceid.set("value",-1);},_SelectNode:function(){var obj=arguments[0];if(this._Windows.containsKey(obj.id)==false){var _27=null;if(obj.type==0){_27=new dijit.layout.ContentPane({title:obj.id.toString(),content:"<div dojoType='"+obj.content+"' style='width:100%;height:100%'></div>"});}if(obj.type==2){_27=new dijit.layout.ContentPane({title:obj.id.toString(),href:obj.page});}this.zone.addChild(_27,0);setTimeout("dijit.byId('"+this.zone.id+"').selectChild('"+_27.id+"');",10);this._Windows.add(obj.id,_27.id);}else{var wid=this._Windows.entry(obj.id).value;this.zone.selectChild(dijit.byId(wid));}},_CheckLayout:function(_28,_29,_2a){if(this.updatum.get("checked")){dojo.removeClass(this.max_users_monitoring,"prmaxhidden");dojo.removeClass(this.user_monitor_total_view,"prmaxhidden");}else{dojo.addClass(this.max_users_monitoring,"prmaxhidden");dojo.addClass(this.user_monitor_total_view,"prmaxhidden");}this.financialcontrol.Show_Hide_Fields(_28);this.datasets.load(null,_28.has_international_data);var _2b=(_28.has_clippings)?"":"none";this.clippings.controlButton.domNode.style.display=_2b;_2b=(_28.has_international_data)?"":"none";this.datasets.controlButton.domNode.style.display=_2b;this.extendedsettings.load(_28,_29);this.emailserver.load(_28,_2a);_2b=(_28.customertypeid==20)?"":"none";this.options_tab_menusettings.controlButton.domNode.style.display=_2b;},_UpdateModulesCall:function(_2c){if(_2c.success=="OK"){alert("Module Updated");this._CheckLayout(_2c.data.cust,_2c.data.mediaaccesstype);}else{alert("Module Update Failed");}},_UpdateModules:function(){dojo.xhrPost(ttl.utilities.makeParams({load:dojo.hitch(this,this._UpdateModulesCall),url:"/iadmin/update_customer_modules",content:{"icustomerid":this._customerid,crm:this.crm.get("value"),advancefeatures:this.advancefeatures.get("value"),updatum:this.updatum.get("value"),seo:this.seo.get("value"),seotranslation:this.seotranslation.get("value"),maxmonitoringusers:this.maxmonitoringusers.get("value"),is_bundle:this.is_bundle.get("value"),has_news_rooms:this.has_news_rooms.get("value"),has_global_newsroom:this.has_global_newsroom.get("value"),has_international_data:this.has_international_data.get("value"),has_clippings:this.has_clippings.get("value"),has_journorequests:this.has_journorequests.get("value")}}));},_UpdatePrivateMenu:function(){dojo.xhrPost(ttl.utilities.makeParams({load:dojo.hitch(this,this._UpdatePrivateMenuCall),url:"/iadmin/update_customer_private_menu",content:{"icustomerid":this._customerid,pm_new_outlet:this.pm_new_outlet.get("value"),pm_new_freelance:this.pm_new_freelance.get("value"),pm_collateral:this.pm_collateral.get("value"),pm_exclusions:this.pm_exclusions.get("value"),pm_clients:this.pm_clients.get("value"),pm_issues:this.pm_issues.get("value"),pm_statements:this.pm_statements.get("value"),pm_questions:this.pm_questions.get("value"),pm_global_analysis:this.pm_global_analysis.get("value"),pm_documents:this.pm_documents.get("value"),pm_private_media_channels:this.pm_private_media_channels.get("value"),pm_user_preferences:this.pm_user_preferences.get("value"),pm_account_details:this.pm_account_details.get("value"),pm_activity_log:this.pm_activity_log.get("value"),pm_user_admin:this.pm_user_admin.get("value"),pm_financial:this.pm_financial.get("value"),pm_prrequests:this.pm_prrequests.get("value")}}));},_UpdatePrivateMenuCall:function(_2d){if(_2d.success=="OK"){alert("Private Menu Updated");this._CheckLayout(_2d.data.cust);}else{alert("Private Menu Update Failed");}},_UpdatedCustomerTypeCall:function(_2e){if(_2e.success=="OK"){alert("Customer Type Changed");this.extendedsettings.load(_2e.data.cust,_2e.data.mediaaccesstype);this._CheckLayout(_2e.data.cust);if(_2e.data.customermenusettings){this.pm_new_outlet.set("value",_2e.data.customermenusettings.pm_new_outlet);this.pm_new_freelance.set("value",_2e.data.customermenusettings.pm_new_freelance);this.pm_collateral.set("value",_2e.data.customermenusettings.pm_collateral);this.pm_exclusions.set("value",_2e.data.customermenusettings.pm_exclusions);this.pm_clients.set("value",_2e.data.customermenusettings.pm_clients);this.pm_issues.set("value",_2e.data.customermenusettings.pm_issues);this.pm_statements.set("value",_2e.data.customermenusettings.pm_statements);this.pm_questions.set("value",_2e.data.customermenusettings.pm_questions);this.pm_global_analysis.set("value",_2e.data.customermenusettings.pm_global_analysis);this.pm_documents.set("value",_2e.data.customermenusettings.pm_documents);this.pm_private_media_channels.set("value",_2e.data.customermenusettings.pm_private_media_channels);this.pm_user_preferences.set("value",_2e.data.customermenusettings.pm_user_preferences);this.pm_account_details.set("value",_2e.data.customermenusettings.pm_account_details);this.pm_activity_log.set("value",_2e.data.customermenusettings.pm_activity_log);this.pm_user_admin.set("value",_2e.data.customermenusettings.pm_user_admin);this.pm_financial.set("value",_2e.data.customermenusettings.pm_financial);this.pm_prrequests.set("value",_2e.data.customermenusettings.pm_prrequests);}}else{alert("Problem Changing Customer Type");}},_CustomerType:function(){if(confirm("Change Customer Type")){this._clear_private_menu_settings();dojo.xhrPost(ttl.utilities.makeParams({load:dojo.hitch(this,this._UpdatedCustomerTypeCallBack),url:"/iadmin/update_customertypeid",content:{icustomerid:this._customerid,customertypeid:this.customertypeid.get("value")}}));}},_UpdatedInternalStatusCall:function(_2f){if(_2f.success=="OK"){alert("Status Changed");}else{alert("Problem Changing Status");}},_ChangeInternalStatus:function(){if(confirm("Change Status")){dojo.xhrPost(ttl.utilities.makeParams({load:dojo.hitch(this,this._UpdatedInternalStatusCallBack),url:"/iadmin/update_internal_status",content:{icustomerid:this._customerid,isinternal:this.isinternal.get("value")}}));}},_SetCustomerCall:function(_30){if(_30.success=="OK"){alert("Support Customer updated");}else{alert("pRoblem Updating Support Customer");}},_SetCustomer:function(){var _31=this.support_userid.get("value");if(_31==null||_31===""){alert("No User Specified");return;}if(confirm("Set Support Customer")){dojo.xhrPost(ttl.utilities.makeParams({load:this._SetCustomerCallBack,url:"/iadmin/support_customer_set",content:{iuserid:_31,icustomerid:this._customerid}}));}},_LoadCustomer2Call:function(_32){this._customerid=_32.data.cust.customerid;this._customertypeid=_32.data.cust.customertypeid;this._LoadCustomer(_32);this._LoadTabs(this._customerid);this.tabs.selectChild(this.notestab);this.frame_tabs.selectChild(this.frame_tab_m);},_Show_Customer_Event:function(_33){this._icustomerid=_33;dojo.xhrPost(ttl.utilities.makeParams({load:this._LoadCustomer2CallBack,url:"/iadmin/get_internal",content:{"icustomerid":_33}}));},_ReActiveDemo:function(){this.reactiveatectrl.Load(this._customerid,this.reactiveatedialog);},_SetSeoCount:function(){this.seofree.Load(this._customerid);},_bundle_settings:function(){},_change_extended_subject:function(){dojo.xhrPost(ttl.utilities.makeParams({load:this._change_extended_subject_call_back,url:"/iadmin/update_extended_subject",content:{"icustomerid":this._customerid,has_extended_email_subject:this.has_extended_email_subject.get("value")}}));},_change_extended_subject_call:function(_34){if(_34.success=="OK"){alert("Updated");}else{alert("Problem Updating");}},_send_login_details:function(){this.send_password_ctrl.load(this._userrow.i.user_id,this.send_password_dialog);},_ChangeSeoOption:function(){if(this.seo.checked==false){dojo.addClass(this.seotranslation_node,"prmaxhidden");}else{dojo.removeClass(this.seotranslation_node,"prmaxhidden");}},_init_monitoring_filter:function(){return new dojo.data.ItemFileReadStore({data:{identifier:"id",items:[{id:-1,name:"No Selection"},{id:1,name:"Enabled"},{id:2,name:"Enabled - Has active Orders"},{id:3,name:"Enabled - No Orders"},{id:4,name:"Enabled - Has Expired Orders Only"}]}});}});dojo.declare("prmax.iadmin.gridlayouts",null,{constructor:function(){this.main_view={noscroll:false,cells:[[{name:"",width:"1em",formatter:ttl.utilities.formatRowCtrl},{name:"Acc",width:"4em",field:"customerid",styles:"text-align:right;padding-right:3px;"},{name:"Customer name",width:"20em",field:"customername"},{name:"Type",width:"8em",field:"customertypename"},{name:"Contact",width:"14em",field:"contactname"},{name:"Expires",width:"6em",field:"licence_expire"},{name:"Status",width:"9em",field:"customerstatusname"},{name:"Created",width:"6em",field:"created"},{name:"Last Accessed",width:"10em",field:"last_login_display"},]]};this.audit_view={noscroll:false,cells:[[{name:"Type",width:"4em",field:"audittypeid",style:"text-align:right"},{name:"Date",width:"10em",field:"auditdate"},{name:"Text",width:"25em",field:"audittext"},{name:" ",width:"2em",field:"documentpresent",formatter:ttl.utilities.documentExists},{name:"Who",width:"10em",field:"user_name"}]]};this.user_view={noscroll:false,cells:[[{name:"User Id",width:"5em",field:"user_id"},{name:"Display Name",width:"auto",field:"display_name"},{name:"Login Name",width:"auto",field:"user_name"},{name:"Email",width:"auto",field:"email_address"}]]};this.demorequest={noscroll:false,cells:[[{name:"Customer Name",width:"auto",field:"customername"},{name:"Contact Name",width:"auto",field:"contactname"},{name:"Email",width:"auto",field:"email"},{name:"Address1",width:"auto",field:"address1"},{name:"Town",width:"auto",field:"townname"},{name:"PostCode",width:"auto",field:"postcode"},{name:"Telephone",width:"auto",field:"telephone"}]]};}});}