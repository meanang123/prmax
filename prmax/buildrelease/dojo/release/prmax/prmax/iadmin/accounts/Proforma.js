/*
	Copyright (c) 2004-2011, The Dojo Foundation All Rights Reserved.
	Available via Academic Free License >= 2.1 OR the modified BSD license.
	see: http://dojotoolkit.org/license for details
*/


if(!dojo._hasResource["prmax.iadmin.accounts.Proforma"]){dojo._hasResource["prmax.iadmin.accounts.Proforma"]=true;dojo.provide("prmax.iadmin.accounts.Proforma");dojo.require("ttl.BaseWidget");dojo.declare("prmax.iadmin.accounts.Proforma",[ttl.BaseWidget],{widgetsInTemplate:true,templateString:"<div>\r\n<form dojoAttachPoint=\"form\"  onsubmit=\"return false\" dojoType=\"dijit.form.Form\">\r\n<table width=\"500px\" cellpadding=\"0\" cellpadding=\"0\" >\r\n\t<tr><td colspan=\"2\"><label class=\"prmaxrowdisplaylarge\" style=\"text-align:center;display:inline\">Take Payment for <div style=\"display:inline\" class=\"prmaxrowdisplaylarge\" dojoAttachPoint=\"customername\">Name</div></td>\r\n\t<tr><td width=\"200px\" ><label class=\"prmaxrowlabel\">Text</label></td>\r\n\t<td><input type=\"text\" name=\"proformatext\" dojoType=\"dijit.form.ValidationTextBox\" required=\"true\" trim=\"true\" dojoAttachPoint=\"proformatext\"></td></tr>\r\n\t<tr><td><label class=\"prmaxrowlabel\">Value (Excluding Vat)</label></td>\r\n\t\t<td><input type=\"text\" name=\"value\" dojoType=\"dijit.form.CurrencyTextBox\" required=\"true\" trim=\"true\" dojoAttachPoint=\"payment\"></input></td>\r\n\t</tr>\r\n\t<tr><td class=\"prmaxrowlabel\">Email Address</td>\r\n\t\t<td><input class=\"prmaxinput\" dojoAttachPoint=\"email\" name=\"email\" type=\"text\" style=\"width:100%\" trim=\"true\" required=\"true\" dojoType=\"dijit.form.ValidationTextBox\" regExpGen=\"dojox.validate.regexp.emailAddress\" trim=\"true\" invalidMessage=\"invalid email address\" size=\"40\" maxlength=\"70\"/></td>\r\n\t</tr>\r\n\t<tr><td class=\"prmaxrowlabel\" colspan=\"2\" align=\"right\"><button dojoType=\"dijit.form.Button\" type=\"button\" dojoAttachEvent=\"onClick:_SendProforma\">Send Proforma</button></td>\r\n</table></form>\r\n</div>\r\n",constructor:function(){this._SendProformaCallBack=dojo.hitch(this,this._SendProformaCall);},_SendProformaCall:function(_1){if(_1.success=="OK"){alert("Proforma Sent ");this._dialog.hide();}else{alert("Problem Sending Proforma");}},_SendProforma:function(){if(ttl.utilities.formValidator(this.form)==false){alert("Please Enter Details");return false;}var _2=this.form.get("value");_2["icustomerid"]=this._customerid;dojo.xhrPost(ttl.utilities.makeParams({load:dojo.hitch(this,this._SendProformaCallBack),url:"/iadmin/profoma_send",content:_2}));},setCustomer:function(_3,_4,_5,_6){this._customerid=_3;this._customername=_4;dojo.attr(this.customername,"innerHTML",this._customername);this.email.set("value",_5);this._dialog=_6;}});}