/*
	Copyright (c) 2004-2011, The Dojo Foundation All Rights Reserved.
	Available via Academic Free License >= 2.1 OR the modified BSD license.
	see: http://dojotoolkit.org/license for details
*/


if(!dojo._hasResource["prmax.iadmin.accounts.OrderConfirmation"]){dojo._hasResource["prmax.iadmin.accounts.OrderConfirmation"]=true;dojo.provide("prmax.iadmin.accounts.OrderConfirmation");dojo.require("ttl.BaseWidget");dojo.require("dojo.number");dojo.require("prmax.iadmin.accounts.UpgradeOrderConfirmation");dojo.declare("prmax.iadmin.accounts.OrderConfirmation",[ttl.BaseWidget],{widgetsInTemplate:true,templateString:"<div>\r\n\t<form dojoAttachPoint=\"form\"  onsubmit=\"return false\" dojoType=\"dijit.form.Form\">\r\n\t\t<input type=\"hidden\" dojoAttachPoint=\"taskid\" name=\"taskid\" dojoType=\"dijit.form.TextBox\" value=\"-1\">\r\n\t\t<table width=\"750px\" cellpadding=\"0\" cellpadding=\"0\" style=\"border-collapse:collapse\" >\r\n\t\t\t<tr><td colspan=\"2\"><label class=\"prmaxrowdisplaylarge\" style=\"text-align:center;display:inline\"><div style=\"display:inline\"class=\"prmaxrowdisplaylarge\" dojoAttachPoint=\"customername\">Name</div></label></td></tr>\r\n\t\t\t<tr><td class=\"prmaxrowtag\" width=\"150px\" align=\"right\" >Concurrent Licence</td><td ><input class=\"prmaxrequired\" type=\"text\"  dojoAttachPoint=\"logins\" name=\"logins\" dojoType=\"dijit.form.NumberTextBox\" value=\"1\" style=\"width:4em\" required=\"true\" constraints=\"{min:1,max:50}\" dojoAttachEvent=\"onChange:_PriceChange\"></td></tr>\r\n\t\t\t<tr dojoAttachPoint=\"view_monitoring\" class=\"prmaxhidden\"><td class=\"prmaxrowtag\" align=\"right\" >Monitoring Count</td><td ><input class=\"prmaxrequired\" type=\"text\"  dojoAttachPoint=\"maxmonitoringusers\" name=\"maxmonitoringusers\" dojoType=\"dijit.form.NumberTextBox\" value=\"1\" style=\"width:4em\" constraints=\"{min:0,max:50}\" dojoAttachEvent=\"onChange:_PriceChange\"></td></tr>\r\n\t\t\t<tr><td class=\"prmaxrowtag\" align=\"right\" >Payment Freq</td><td><select class=\"prmaxinput\" name=\"orderpaymentfreqid\" dojoAttachPoint=\"orderpaymentfreqid\" style=\"width:15em\" dojoType=\"dijit.form.FilteringSelect\" autoComplete=\"true\" dojoAttachEvent=\"onChange:_PriceChange\"><options><option value=\"1\">Fixed Term</option><option value=\"2\">Monthly</option></options></select></td></tr>\r\n\t\t\t<tr><td class=\"prmaxrowtag\" align=\"right\" >Payment Method</td><td><select class=\"prmaxinput\" name=\"orderpaymentmethodid\" dojoAttachPoint=\"orderpaymentmethodid\" style=\"width:25em\" dojoType=\"dijit.form.FilteringSelect\" autoComplete=\"true\" dojoAttachEvent=\"onChange:_ChangePayment\"></select></td></tr>\r\n\t\t\t<tr><td class=\"prmaxrowtag\" align=\"right\" >Purchase Order</td><td><input class=\"prmaxinput\" dojoAttachPoint=\"purchase_order\" name=\"purchase_order\" type=\"text\" trim=\"true\" dojoType=\"dijit.form.TextBox\" ></td></tr>\r\n\t\t\t<tr><td class=\"prmaxrowtag\" align=\"right\">Email Confirmation</td><td><input class=\"prmaxinput\" dojoAttachPoint=\"emailtocustomer\" name=\"emailtocustomer\" type=\"checkbox\" dojoType=\"dijit.form.CheckBox\" checked /><input class=\"prmaxinput\" dojoAttachPoint=\"email\" name=\"email\" type=\"text\" style=\"width:20em\" trim=\"true\" required=\"true\" dojoType=\"dijit.form.ValidationTextBox\" regExpGen=\"dojox.validate.regexp.emailAddress\" trim=\"true\" invalidMessage=\"invalid email address\" /></td></tr>\r\n\t\t\t<tr><td class=\"prmaxrowtag\"  align=\"right\">Bundled Invoice</td><td><input data-dojo-attach-point=\"has_bundled_invoice\" data-dojo-props='\"class\":\"prmaxinput\",name:\"has_bundled_invoice\",type:\"checkbox\"' data-dojo-type=\"dijit.form.CheckBox\"/></td></tr>\r\n\t\t\t<tr><td class=\"prmaxrowtag\" align=\"right\">Confirmation On Login</td><td><input class=\"prmaxinput\" dojoAttachPoint=\"confirmation_accepted\" name=\"confirmation_accepted\" type=\"checkbox\" dojoType=\"dijit.form.CheckBox\" checked /></td></tr>\r\n\t\t\t<tr><td colspan=\"2\">&nbsp;</td></tr>\r\n\t\t\t<tr><td colspan=\"2\"><table width=\"100%\" cellpadding=\"0\" cellpadding=\"0\" border=\"0\">\r\n\t\t\t<tr>\r\n\t\t\t\t<td width=\"28%\">&nbsp;</td>\r\n\t\t\t\t<td width=\"12%\">Start Date</td>\r\n\t\t\t\t<td width=\"12%\" dojoAttachPoint=\"view_dd_2\">Free Mths</td>\r\n\t\t\t\t<td width=\"12%\" dojoAttachPoint=\"view_dd_1\">Paid Mths</td>\r\n\t\t\t\t<td width=\"12%\">Price Code</td>\r\n\t\t\t\t<td width=\"12%\">Price ex VAT</td>\r\n\t\t\t\t<td width=\"12%\">Rnwl Code</td>\r\n\t\t\t</tr>\r\n\t\t\t<tr><td class=\"prmaxrowtag\">Media DB</td>\r\n\t\t\t\t<td><input type=\"text\" dojoAttachPoint=\"licence_start_date\" name = \"licence_start_date\" dojoType=\"dijit.form.DateTextBox\" required=\"true\" style=\"width:8em\"></td>\r\n\t\t\t\t<td dojoAttachPoint=\"view_dd_3\"><input type=\"text\" dojoAttachPoint=\"months_free\" name=\"months_free\" dojoType=\"dijit.form.NumberTextBox\" value=\"0\" required=\"true\" constraints=\"{min:0,max:6}\" style=\"width:6em\"></td>\r\n\t\t\t\t<td dojoAttachPoint=\"view_dd_4\"><input type=\"text\" dojoAttachPoint=\"months_paid\" name=\"months_paid\" dojoType=\"dijit.form.NumberTextBox\" value=\"12\" required=\"true\" constraints=\"{min:1,max:36}\" style=\"width:6em\"></td>\r\n\t\t\t\t<td><select class=\"prmaxinput\" name=\"pricecodeid\" dojoAttachPoint=\"pricecodeid\" dojoType=\"dijit.form.FilteringSelect\" autoComplete=\"true\" style=\"width:8em\" dojoAttachEvent=\"onChange:_PriceChange1\"></select></td>\r\n\t\t\t\t<td><input type=\"text\" name=\"cost\" dojoType=\"dijit.form.CurrencyTextBox\" required=\"true\" trim=\"true\" constraints=\"{min:0.01,max:99999.00,fractional:true,places:'0,2'}\" dojoAttachPoint=\"cost\" style=\"width:6em\"></input></td>\r\n\t\t\t\t<td><select class=\"prmaxinput\" name=\"pricecoderenewalid\" dojoAttachPoint=\"pricecoderenewalid\" dojoType=\"dijit.form.FilteringSelect\" autoComplete=\"true\" style=\"width:8em\" ></select></td>\r\n\t\t\t</tr>\r\n\t\t\t<tr ><td class=\"prmaxrowtag\">Features&nbsp;<input class=\"prmaxinput\" dojoAttachPoint=\"advancefeatures\" name=\"advancefeatures\" type=\"checkbox\" dojoType=\"dijit.form.CheckBox\" dojoAttachEvent=\"onClick:_Advance\"/></td>\r\n\t\t\t\t<td dojoAttachPoint=\"features_view_1\" class=\"prmaxhidden\"><input type=\"text\"  dojoAttachPoint=\"advance_licence_start\" name = \"advance_licence_start\" dojoType=\"dijit.form.DateTextBox\" style=\"width:8em\"></td>\r\n\t\t\t\t<td dojoAttachPoint=\"features_view_2\" class=\"prmaxhidden\"><input type=\"text\"  dojoAttachPoint=\"adv_months_free\" name=\"adv_months_free\" dojoType=\"dijit.form.NumberTextBox\" value=\"0\" constraints=\"{min:0,max:36}\" required=\"true\" style=\"width:6em\"></td>\r\n\t\t\t\t<td dojoAttachPoint=\"features_view_3\" class=\"prmaxhidden\"><input type=\"text\"  dojoAttachPoint=\"adv_months_paid\" name=\"adv_months_paid\" dojoType=\"dijit.form.NumberTextBox\" value=\"12\" constraints=\"{min:0,max:36}\" required=\"true\" style=\"width:6em\"></td>\r\n\t\t\t\t<td dojoAttachPoint=\"features_view_4\" class=\"prmaxhidden\"><select class=\"prmaxinput\" name=\"advpricecodeid\" dojoAttachPoint=\"advpricecodeid\" dojoType=\"dijit.form.FilteringSelect\" autoComplete=\"true\" required=\"false\" style=\"width:8em\" dojoAttachEvent=\"onChange:_PriceChange2\" ></select></td>\r\n\t\t\t\t<td dojoAttachPoint=\"features_view_5\" class=\"prmaxhidden\"><input type=\"text\" name=\"advcost\" dojoType=\"dijit.form.CurrencyTextBox\" trim=\"true\" constraints=\"{min:0.00,max:99999.00,fractional:true,places:'0,2'}\" dojoAttachPoint=\"advcost\" style=\"width:6em\"></input></td>\r\n\t\t\t\t<td dojoAttachPoint=\"features_view_6\" class=\"prmaxhidden\"><select class=\"prmaxinput\" name=\"advpricecoderenewalid\" dojoAttachPoint=\"advpricecoderenewalid\" dojoType=\"dijit.form.FilteringSelect\" autoComplete=\"true\" required=\"false\" style=\"width:8em\"></select></td>\r\n\t\t\t</tr>\r\n\t\t\t<tr ><td class=\"prmaxrowtag\">Monitoring&nbsp;<input class=\"prmaxinput\" dojoAttachPoint=\"updatum\" name=\"updatum\" type=\"checkbox\" dojoType=\"dijit.form.CheckBox\" dojoAttachEvent=\"onClick:_Updatum\"/></td>\r\n\t\t\t\t<td dojoAttachPoint=\"updatum_view_1\" class=\"prmaxhidden\"><input type=\"text\"  dojoAttachPoint=\"updatum_start_date\" name = \"updatum_start_date\" dojoType=\"dijit.form.DateTextBox\" style=\"width:8em\"></td>\r\n\t\t\t\t<td dojoAttachPoint=\"updatum_view_2\" class=\"prmaxhidden\"><input type=\"text\"  dojoAttachPoint=\"updatum_months_free\" name=\"updatum_months_free\" dojoType=\"dijit.form.NumberTextBox\" value=\"0\" constraints=\"{min:0,max:36}\" required=\"true\" style=\"width:6em\"></td>\r\n\t\t\t\t<td dojoAttachPoint=\"updatum_view_3\" class=\"prmaxhidden\"><input type=\"text\"  dojoAttachPoint=\"updatum_months_paid\" name=\"updatum_months_paid\" dojoType=\"dijit.form.NumberTextBox\" value=\"12\" constraints=\"{min:0,max:36}\" required=\"true\" style=\"width:6em\"></td>\r\n\t\t\t\t<td dojoAttachPoint=\"updatum_view_4\" class=\"prmaxhidden\"><select class=\"prmaxinput\" name=\"updatumpricecodeid\" dojoAttachPoint=\"updatumpricecodeid\" dojoType=\"dijit.form.FilteringSelect\" autoComplete=\"true\" required=\"false\" style=\"width:8em\" dojoAttachEvent=\"onChange:_PriceChange3\" ></select></td>\r\n\t\t\t\t<td dojoAttachPoint=\"updatum_view_5\" class=\"prmaxhidden\"><input type=\"text\" name=\"updatumcost\" dojoType=\"dijit.form.CurrencyTextBox\" trim=\"true\" constraints=\"{min:0.00,max:99999.00,fractional:true,places:'0,2'}\" dojoAttachPoint=\"updatumcost\" style=\"width:6em\"></input></td>\r\n\t\t\t\t<td dojoAttachPoint=\"updatum_view_6\" class=\"prmaxhidden\"><select class=\"prmaxinput\" name=\"updatumpricecoderenewalid\" dojoAttachPoint=\"updatumpricecoderenewalid\" dojoType=\"dijit.form.FilteringSelect\" autoComplete=\"true\" required=\"false\" style=\"width:8em\"></select></td>\r\n\t\t\t</tr>\r\n\t\t\t<tr ><td class=\"prmaxrowtag\">International&nbsp;<input class=\"prmaxinput\" dojoAttachPoint=\"has_international_data\" name=\"has_international_data\" type=\"checkbox\" dojoType=\"dijit.form.CheckBox\" dojoAttachEvent=\"onClick:_international\"/></td>\r\n\t\t\t\t<td dojoAttachPoint=\"int_view_1\" class=\"prmaxhidden\">&nbsp;</td>\r\n\t\t\t\t<td dojoAttachPoint=\"int_view_2\" class=\"prmaxhidden\">&nbsp;</td>\r\n\t\t\t\t<td dojoAttachPoint=\"int_view_3\" class=\"prmaxhidden\">&nbsp;</td>\r\n\t\t\t\t<td dojoAttachPoint=\"int_view_4\" class=\"prmaxhidden\"><select class=\"prmaxinput\" name=\"intpricecodeid\" dojoAttachPoint=\"intpricecodeid\" dojoType=\"dijit.form.FilteringSelect\" autoComplete=\"true\" required=\"false\" style=\"width:8em\" ></select></td>\r\n\t\t\t\t<td dojoAttachPoint=\"int_view_5\" class=\"prmaxhidden\"><input type=\"text\" name=\"internationalcost\" dojoType=\"dijit.form.CurrencyTextBox\" trim=\"true\" constraints=\"{min:0.00,max:99999.00,fractional:true,places:'0,2'}\" dojoAttachPoint=\"internationalcost\" style=\"width:6em\"></input></td>\r\n\t\t\t\t<td dojoAttachPoint=\"int_view_6\" class=\"prmaxhidden\"><select class=\"prmaxinput\" name=\"intpricecoderenewalid\" dojoAttachPoint=\"intpricecoderenewalid\" dojoType=\"dijit.form.FilteringSelect\" autoComplete=\"true\" required=\"false\" style=\"width:8em\"></select></td>\r\n\t\t\t</tr>\r\n\t\t\t</table></td></tr>\r\n\t\t\t<tr><td colspan=\"2\">&nbsp;</td></tr>\r\n\t\t\t<tr><td valign=\"top\" align=\"right\" ><label class=\"prmaxrowtag\">Message</label></td><td><div class=\"stdframe\" ><textarea dojoAttachPoint=\"order_confirmation_message\" name=\"order_confirmation_message\" class=\"dijitTextarea\" dojoType=\"dijit.form.Textarea\"  style=\"width:99%;height:99%\" ></textarea></div></td></tr>\r\n\t\t\t<tr><td valign=\"top\" align=\"right\" ><label class=\"prmaxrowtag\">Internal Note</label></td><td><div class=\"stdframe\" ><textarea dojoAttachPoint=\"internalnote\" name=\"internalnote\" class=\"dijitTextarea\" dojoType=\"dijit.form.Textarea\"  style=\"width:99%;height:99%\" ></textarea></div></td></tr>\r\n\t\t\t<tr dojoAttachPoint=\"owner_view\" class=\"prmaxhidden\"><td align=\"right\" valign=\"top\" class=\"prmaxrowtag\">Assigned To</td><td><select class=\"prmaxrequired\" required=\"true\" dojoAttachPoint=\"assigntoid\" name=\"assigntoid\" autoComplete=\"true\" style=\"width:15em\" dojoType=\"dijit.form.FilteringSelect\" labelType=\"html\"></select></td></tr>\r\n\t\t\t<tr><td align=\"right\" class=\"prmaxrowtag\">Ordered By</td><td><input class=\"prmaxrequired\" type=\"text\" name=\"orderedby\" dojoType=\"dijit.form.ValidationTextBox\" trim=\"true\" required=\"true\" dojoAttachPoint=\"orderedby\"></input></td></tr>\r\n\t\t\t<tr><td class=\"prmaxrowlabel\" align=\"right\" colspan=\"2\" align=\"right\"><button dojoType=\"dijit.form.Button\" type=\"button\" dojoAttachEvent=\"onClick:_Send\">Send Order Confirmation</button></td></tr>\r\n\t\t</table>\r\n\t</form>\r\n\r\n\t<button dojoType=\"dijit.form.Button\" type=\"button\" dojoAttachEvent=\"onClick:_Save\">Save</button>\r\n\t<button dojoType=\"dijit.form.Button\" type=\"button\" dojoAttachEvent=\"onClick:_Preview\">Preview</button>\r\n\t\t<form dojoAttachPoint=\"previewform\" target=\"_newtab\" action=\"/iadmin/order_confirmation_send_preview\" method=\"post\">\r\n\t\t<input type=\"hidden\" name=\"icustomerid\" dojoAttachPoint=\"icustomerid\">\r\n\t</form>\r\n\r\n</div>\r\n",constructor:function(){this._SendConfirmationCallBack=dojo.hitch(this,this._SendConfirmationCall);this._pricecodes_core=new dojo.data.ItemFileReadStore({url:"/common/lookups?searchtype=pricecodes&type=core"});this._pricecodes_adv=new dojo.data.ItemFileReadStore({url:"/common/lookups?searchtype=pricecodes&type=adv"});this._pricecodes_updatum=new dojo.data.ItemFileReadStore({url:"/common/lookups?searchtype=pricecodes&type=updatum"});this._pricecodes_int=new dojo.data.ItemFileReadStore({url:"/common/lookups?searchtype=pricecodes&type=int"});this._userfilter=new dojo.data.ItemFileReadStore({url:"/common/lookups?searchtype=users&group=accounts,sales"});this._TaskCallBack=dojo.hitch(this,this._TaskCall);this._SendConifirmationCallBack=dojo.hitch(this,this._SendConifirmationCall);this._SaveCallBack=dojo.hitch(this,this._SaveCall);this._pmnodd=new dojo.data.ItemFileReadStore({url:"/common/lookups?searchtype=orderpaymentmethods"});},postCreate:function(){this._get_prices_call_back_1=dojo.hitch(this,this._get_prices_call,this.months_paid);this._get_prices_call_back_2=dojo.hitch(this,this._get_prices_call,this.adv_months_paid);this._get_prices_call_back_3=dojo.hitch(this,this._get_prices_call,this.updatum_months_paid);this.pricecodeid.set("store",this._pricecodes_core);this.pricecoderenewalid.set("store",this._pricecodes_core);this.advpricecodeid.set("store",this._pricecodes_adv);this.advpricecoderenewalid.set("store",this._pricecodes_adv);this.updatumpricecoderenewalid.set("store",this._pricecodes_updatum);this.updatumpricecodeid.set("store",this._pricecodes_updatum);this.intpricecodeid.set("store",this._pricecodes_int);this.intpricecoderenewalid.set("store",this._pricecodes_int);this.assigntoid.set("store",this._userfilter);this.orderpaymentmethodid.set("store",this._pmnodd);this.orderpaymentmethodid.set("value",1);this.pricecodeid.set("value",1);this.pricecoderenewalid.set("value",1);this.advpricecodeid.set("value",2);this.advpricecoderenewalid.set("value",2);this.updatumpricecoderenewalid.set("value",3);this.updatumpricecodeid.set("value",3);this.intpricecoderenewalid.set("value",19);this.intpricecodeid.set("value",19);this.inherited(arguments);},_SendConifirmationCall:function(_1){if(_1.success=="OK"){alert("Order Confirmation");this._dialog.hide();dojo.publish(PRCOMMON.Events.Task_Refresh,null);}else{alert("Problem Sending Order Confirmation");}},_Validate:function(){if(ttl.utilities.formValidator(this.form)==false){alert("Please Enter Details");return null;}if(this.updatum.get("checked")){if(this.updatum_start_date.get("value")==null){alert("Monitoring Need Start Date");}}var _2=this.form.get("value");_2["licence_start_date"]=ttl.utilities.toJsonDate(this.licence_start_date.get("value"));_2["advance_licence_start"]=ttl.utilities.toJsonDate(this.advance_licence_start.get("value"));_2["updatum_start_date"]=ttl.utilities.toJsonDate(this.updatum_start_date.get("value"));_2["icustomerid"]=this._customerid;return _2;},_Send:function(){var _3=this._Validate();if(_3==null){return;}dojo.xhrPost(ttl.utilities.makeParams({load:this._SendConifirmationCallBack,url:"/iadmin/order_confirmation_send",content:_3}));},_SaveCall:function(_4){if(_4.success=="OK"){alert("Order Confirmation");}else{alert("Problem Sending Order Confirmation");}},_Save:function(){var _5=this._Validate();if(_5==null){return;}_5["saveonly"]="on";dojo.xhrPost(ttl.utilities.makeParams({load:this._SaveCallBack,url:"/iadmin/order_confirmation_send_save",content:_5}));},_TaskCall:function(_6){if(_6.success=="OK"){this.assigntoid.set("disabled",false);this.assigntoid.set("value",_6.task.userid);dojo.removeClass(this.owner_view,"prmaxhidden");}else{alert("Problem");}},setCustomer:function(_7,_8,_9,_a){this._customerid=_7;dojo.attr(this.customername,"innerHTML",_9.customername);this.taskid.set("value",_a);if(_a!=null){this.assigntoid.set("disabled",false);dojo.xhrPost(ttl.utilities.makeParams({load:this._TaskCallBack,url:"/iadmin/task_get",content:{taskid:_a}}));}else{this.assigntoid.set("disabled",true);dojo.addClass(this.owner_view,"prmaxhidden");this.taskid.set("value",-1);}this.email.set("value",_9.email);this._dialog=_8;this._Clear();this._PriceChange();this.advancefeatures.set("checked",_9.advancefeatures);this._ShowHideAdvance(_9.advancefeatures);this.updatum.set("checked",_9.updatum);this.has_international_data.set("value",_9.has_international_data);this._ShowHideUpdatum(_9.updatum);this._Show_Hide_DD(_9.advancefeatures,_9.updatum,_9.has_international_data,_9.orderpaymentmethodid);var _b=new Date();this.licence_start_date.set("value",_b);this.advance_licence_start.set("value",_b);this.updatum_start_date.set("value",_b);this.orderedby.set("value",_9.orderedby);this.order_confirmation_message.set("value",_9.order_confirmation_message);this.orderpaymentmethodid.set("value",_9.orderpaymentmethodid);this.orderpaymentfreqid.set("value",_9.orderpaymentfreqid);this._ProductTypeSetting(_9.customertypeid);this.months_free.set("value",_9.months_free);this.months_paid.set("value",_9.months_paid);this.adv_months_free.set("value",_9.adv_months_free);this.adv_months_paid.set("value",_9.adv_months_paid);this.updatum_months_free.set("value",_9.updatum_months_free);this.updatum_months_paid.set("value",_9.updatum_months_paid);this.has_bundled_invoice.set("checked",_9.has_bundled_invoice);},_Clear:function(){this.order_confirmation_message.set("value","");this.months_free.set("value",0);this.months_paid.set("value",12);this.adv_months_free.set("value",0);this.adv_months_paid.set("value",12);this.updatum_months_free.set("value",0);this.updatum_months_paid.set("value",12);this.orderpaymentfreqid.set("value",1);this.logins.set("value",1);},_Preview:function(){dojo.attr(this.icustomerid,"value",this._customerid);this.previewform.submit();},_Advance:function(){this._ShowHideAdvance(this.advancefeatures.get("checked"));},_international:function(){this._show_hide_international(this.has_international_data.get("checked"));},_show_hide_international:function(_c){if(_c){var _d=this.orderpaymentmethodid.get("value");dojo.removeClass(this.int_view_1,"prmaxhidden");dojo.removeClass(this.int_view_2,"prmaxhidden");dojo.removeClass(this.int_view_3,"prmaxhidden");dojo.removeClass(this.int_view_4,"prmaxhidden");dojo.removeClass(this.int_view_5,"prmaxhidden");dojo.removeClass(this.int_view_6,"prmaxhidden");}else{dojo.addClass(this.int_view_1,"prmaxhidden");dojo.addClass(this.int_view_2,"prmaxhidden");dojo.addClass(this.int_view_3,"prmaxhidden");dojo.addClass(this.int_view_4,"prmaxhidden");dojo.addClass(this.int_view_5,"prmaxhidden");dojo.addClass(this.int_view_6,"prmaxhidden");}},_ShowHideAdvance:function(_e){if(_e){var _f=this.orderpaymentmethodid.get("value");dojo.removeClass(this.features_view_1,"prmaxhidden");dojo.removeClass(this.features_view_2,"prmaxhidden");dojo.removeClass(this.features_view_3,"prmaxhidden");dojo.removeClass(this.features_view_4,"prmaxhidden");dojo.removeClass(this.features_view_5,"prmaxhidden");dojo.removeClass(this.features_view_6,"prmaxhidden");this.advpricecoderenewalid.set("required",true);this.advpricecodeid.set("required",true);}else{dojo.addClass(this.features_view_1,"prmaxhidden");dojo.addClass(this.features_view_2,"prmaxhidden");dojo.addClass(this.features_view_3,"prmaxhidden");dojo.addClass(this.features_view_4,"prmaxhidden");dojo.addClass(this.features_view_5,"prmaxhidden");dojo.addClass(this.features_view_6,"prmaxhidden");this.advpricecoderenewalid.set("required",false);this.advpricecodeid.set("required",false);}},_Updatum:function(){this._ShowHideUpdatum(this.updatum.get("checked"));},_ShowHideUpdatum:function(_10){if(_10){var _11=this.orderpaymentmethodid.get("value");dojo.removeClass(this.updatum_view_1,"prmaxhidden");dojo.removeClass(this.updatum_view_2,"prmaxhidden");dojo.removeClass(this.view_monitoring,"prmaxhidden");dojo.removeClass(this.updatum_view_4,"prmaxhidden");dojo.removeClass(this.updatum_view_5,"prmaxhidden");dojo.removeClass(this.updatum_view_6,"prmaxhidden");this.updatumpricecoderenewalid.set("required",true);this.updatumpricecodeid.set("required",true);}else{dojo.addClass(this.updatum_view_1,"prmaxhidden");dojo.addClass(this.updatum_view_2,"prmaxhidden");dojo.addClass(this.updatum_view_3,"prmaxhidden");dojo.addClass(this.updatum_view_4,"prmaxhidden");dojo.addClass(this.updatum_view_5,"prmaxhidden");dojo.addClass(this.updatum_view_6,"prmaxhidden");dojo.addClass(this.view_monitoring,"prmaxhidden");this.updatumpricecoderenewalid.set("required",false);this.updatumpricecodeid.set("required",false);}},_ChangePayment:function(){this._Show_Hide_DD(this.advancefeatures.get("checked"),this.updatum.get("checked"),this.orderpaymentmethodid.get("value"),this.has_international_data.get("value"));},_Show_Hide_DD:function(_12,_13,_14,_15){switch(parseInt(_15)){case 4:case 5:case 6:dojo.addClass(this.view_dd_1,"prmaxhidden");dojo.addClass(this.view_dd_4,"prmaxhidden");if(!_12){dojo.addClass(this.features_view_2,"prmaxhidden");}dojo.addClass(this.features_view_3,"prmaxhidden");if(!_13){dojo.addClass(this.updatum_view_2,"prmaxhidden");}if(!_14){dojo.addClass(this.int_view_2,"prmaxhidden");}dojo.addClass(this.updatum_view_3,"prmaxhidden");break;default:dojo.removeClass(this.view_dd_1,"prmaxhidden");dojo.removeClass(this.view_dd_2,"prmaxhidden");dojo.removeClass(this.view_dd_3,"prmaxhidden");dojo.removeClass(this.view_dd_4,"prmaxhidden");if(_12){dojo.removeClass(this.features_view_2,"prmaxhidden");dojo.removeClass(this.features_view_3,"prmaxhidden");}else{dojo.addClass(this.features_view_2,"prmaxhidden");dojo.addClass(this.features_view_3,"prmaxhidden");}if(_13){dojo.removeClass(this.updatum_view_2,"prmaxhidden");dojo.removeClass(this.updatum_view_3,"prmaxhidden");}else{dojo.addClass(this.updatum_view_2,"prmaxhidden");dojo.addClass(this.updatum_view_3,"prmaxhidden");}if(_14){dojo.removeClass(this.int_view_2,"prmaxhidden");dojo.removeClass(this.int_view_3,"prmaxhidden");}else{dojo.addClass(this.int_view_2,"prmaxhidden");dojo.addClass(this.int_view_3,"prmaxhidden");}break;}},_get_prices_call:function(_16,_17){if(_17.success=="OK"){this.cost.set("value",dojo.number.format(_17.cost.media/100,{places:2}));this.advcost.set("value",dojo.number.format(_17.cost.advance/100,{places:2}));this.updatumcost.set("value",dojo.number.format(_17.cost.updatum/100,{places:2}));this.internationalcost.set("value","0.00");}},_PriceChange1:function(){this._PriceChange(this._get_prices_call_back_1);},_PriceChange2:function(){this._PriceChange(this._get_prices_call_back_2);},_PriceChange3:function(){this._PriceChange(this._get_prices_call_back_3);},_PriceChange:function(_18){dojo.xhrPost(ttl.utilities.makeParams({load:_18,url:"/iadmin/prices_get",content:this.form.get("value")}));},_ProductTypeSetting:function(_19){if(_19==1||_19==20){this.emailtocustomer.set("checked",true);this.emailtocustomer.set("disabled",false);this.confirmation_accepted.set("checked",true);this.confirmation_accepted.set("disabled",false);}else{this.emailtocustomer.set("checked",false);this.emailtocustomer.set("disabled",true);this.confirmation_accepted.set("checked",false);this.confirmation_accepted.set("disabled",true);}}});}