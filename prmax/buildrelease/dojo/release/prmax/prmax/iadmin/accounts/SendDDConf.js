/*
	Copyright (c) 2004-2011, The Dojo Foundation All Rights Reserved.
	Available via Academic Free License >= 2.1 OR the modified BSD license.
	see: http://dojotoolkit.org/license for details
*/


if(!dojo._hasResource["prmax.iadmin.accounts.SendDDConf"]){dojo._hasResource["prmax.iadmin.accounts.SendDDConf"]=true;dojo.provide("prmax.iadmin.accounts.SendDDConf");dojo.require("ttl.BaseWidget");dojo.declare("prmax.iadmin.accounts.SendDDConf",[ttl.BaseWidget],{templateString:"<div>\r\n\t<form data-dojo-attach-point=\"form\" data-dojo-props='onsubmit:\"return false\"' data-dojo-type=\"dijit.form.Form\">\r\n\t\t<table width=\"600px\" cellpadding=\"0\" cellpadding=\"0\" >\r\n\t\t\t<tr><td colspan=\"2\"><div class=\"prmaxrowdisplaylarge\" style=\"text-align:center;display:inline\">Send DD Conformation For</div><div class=\"prmaxrowdisplaylarge\" style=\"display:inline\" data-dojo-attach-point=\"customername\"></div></td>\r\n\t\t\t<tr><td colspan=\"2\"><td><br/></tr>\r\n\t\t\t<tr><td class=\"prmaxrowlabel\" align=\"right\" >Email Address</td><td><input class=\"prmaxinput\" data-dojo-attach-point=\"email\" data-dojo-type=\"dijit.form.ValidationTextBox\" data-dojo-props='name:\"email\",type:\"text\",style:\"width:100%\",trim:\"true\",required:\"true\",regExpGen:dojox.validate.regexp.emailAddress,invalidMessage:\"invalid email address\",size:\"40\",maxlength:\"70\"'/></td></tr>\r\n\t\t\t<tr><td class=\"prmaxrowlabel\" colspan=\"2\" align=\"right\"><button data-dojo-type=\"dojox.form.BusyButton\" data-dojo-attach-point=\"btn\" data-dojo-propa='busylabel:\"Sending ...\",type:\"button\"' data-dojo-attach-event=\"onClick:_send_dd_conf\">Send DD Confirmation</button></td>\r\n\t\t</table>\r\n\t</form>\r\n</div>\r\n",constructor:function(){this._send_dd_conf_call_back=dojo.hitch(this,this._send_dd_conf_call);},set_customer:function(_1,_2){this.btn.cancel();this._customerid=_1.customerid;this._customername=_1.customername;dojo.attr(this.customername,"innerHTML",_1.customername);this.email.set("value",_1.email);this._dialog=_2;},_send_dd_conf_call:function(_3){if(_3.success=="OK"){alert("Confirmation DD Sent");this._dialog.hide();}else{alert("Problem Sending");}this.btn.cancel();},_send_dd_conf:function(){if(ttl.utilities.formValidator(this.form)==false){alert("Please Enter Details");this.btn.cancel();return false;}var _4=this.form.get("value");_4["icustomerid"]=this._customerid;dojo.xhrPost(ttl.utilities.makeParams({load:this._send_dd_conf_call_back,url:"/iadmin/send_conf_dd",content:_4}));}});}