/*
	Copyright (c) 2004-2011, The Dojo Foundation All Rights Reserved.
	Available via Academic Free License >= 2.1 OR the modified BSD license.
	see: http://dojotoolkit.org/license for details
*/


if(!dojo._hasResource["prmax.iadmin.accounts.ManualAllocateAmount"]){dojo._hasResource["prmax.iadmin.accounts.ManualAllocateAmount"]=true;dojo.provide("prmax.iadmin.accounts.ManualAllocateAmount");dojo.require("ttl.BaseWidget");dojo.declare("prmax.iadmin.accounts.ManualAllocateAmount",[ttl.BaseWidget],{widgetsInTemplate:true,templateString:"<div>\r\n\t<div dojoAttachPoint=\"popup_view\" dojoType=\"dijit.Dialog\" title=\"Enter Amount Remaining\">\r\n\t\t<br/>\r\n\t\t<table width=\"300px\" cellpadding=\"0\" cellpadding=\"0\" >\r\n\t\t\t<tr><td colspan>Amount</td><td><input type=\"text\" name=\"value\" dojoType=\"dijit.form.CurrencyTextBox\" trim=\"true\" dojoAttachPoint=\"toallocate_value\" style=\"width:8em\" constraints=\"{min:0.01,max:99999.00,fractional:true,places:'0,2'}\" ></input></td></tr>\r\n\t\t\t<tr><td align=\"left\"><button dojoType=\"dijit.form.Button\" type=\"button\" dojoAttachEvent=\"onClick:_Close\">Close</button></td><td align=\"right\"><button dojoType=\"dijit.form.Button\" type=\"button\" dojoAttachEvent=\"onClick:_Allocate\">Allocate</button></td></tr>\r\n\t\t</table>\r\n\t</div>\r\n</div>\r\n",setValues:function(_1,_2){this.pctrl=_1;this.Clear();this.toallocate_value.constraints.max=_2;this.popup_view.show();},Clear:function(){this.toallocate_value.set("value",0.01);},_Close:function(){this.popup_view.hide();this.Clear();},_Allocate:function(){if(this.toallocate_value.isValid()==false){return;}if(this.pctrl._allocted_row.i.unpaidamount/100<this.toallocate_value.get("value")){alert("Over Allocation");return false;}this.pctrl.alloc_store.setValue(this.pctrl._allocted_row,"allocated",this.toallocate_value.get("value"),true);this.pctrl._onBlurAmount();this._Close();}});}