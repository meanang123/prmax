/*
	Copyright (c) 2004-2011, The Dojo Foundation All Rights Reserved.
	Available via Academic Free License >= 2.1 OR the modified BSD license.
	see: http://dojotoolkit.org/license for details
*/


if(!dojo._hasResource["prmax.iadmin.emailserver"]){dojo._hasResource["prmax.iadmin.emailserver"]=true;dojo.provide("prmax.iadmin.emailserver");dojo.require("ttl.BaseWidget");dojo.declare("prmax.iadmin.emailserver",[ttl.BaseWidget],{widgetsInTemplate:true,templateString:"<div class=\"common_prmax_layout\">\r\n<br/>\r\n\t<form data-dojo-attach-point=\"form\" data-dojo-type=\"dijit.form.Form\" data-dojo-props='onSubmit:\"return false\",\"class\":\"common_prmax_layout\"'>\r\n\t\t<input data-dojo-attach-point=\"customerid\" data-dojo-props='name:\"icustomerid\",type:\"hidden\"' data-dojo-type=\"dijit.form.TextBox\" />\r\n\t\t<label class=\"label_3\"><input data-dojo-attach-point=\"thirdparty\" data-dojo-type=\"dijit.form.CheckBox\" data-dojo-props='name:\"thirdparty\",type:\"checkbox\"' data-dojo-attach-event=\"onChange: _change\"/> Via 3rd Party</label><br/><br/><br/><br/>\r\n\r\n\t\t<label class=\"label_3\" data-dojo-attach-point=\"emailservertype_label\" data-dojo-props='\"class\":\"prmaxhidden\"'>Email Server Type</label><select data-dojo-props='\"class\":\"prmaxinput prmaxhidden\",name:\"emailservertypeid\",autoComplete:true,style:\"width:8em\"' data-dojo-type=\"dijit.form.FilteringSelect\" data-dojo-attach-point=\"emailservertypeid\" data-dojo-attach-event=\"onChange: _set_emailservertype\"></select></br>\r\n\r\n\t\t<label class=\"label_3\" data-dojo-attach-point=\"hostname_label\" data-dojo-props='\"class\":\"prmaxhidden\"'>Host Name</label><input data-dojo-props='\"class\":\"prmaxhidden\", type:\"text\",name:\"hostname\"' data-dojo-type=\"dijit.form.TextBox\" data-dojo-attach-point=\"hostname\" ><br/></br>\r\n\r\n\t\t<br/><br/>\r\n\t\t<button data-dojo-attach-event=\"onClick:_update\" data-dojo-attach-point=\"updatebtn\" data-dojo-type=\"dojox.form.BusyButton\" data-dojo-props='type:\"button\",busyLabel:\"Please Wait Updating ...\",label:\"Update\",'></button><br/><br/>\r\n\t</form>\r\n</div>\r\n",constructor:function(){this._emailservertypes=new dojo.data.ItemFileReadStore({url:"/common/lookups?searchtype=emailservertypes"});this._update_call_back=dojo.hitch(this,this._update_call);},load:function(_1,_2){this.thirdparty.set("checked",_1.thirdparty);this.customerid.set("value",_1.customerid);if(this.thirdparty.get("checked")){dojo.removeClass(this.emailservertypeid.domNode,"prmaxhidden");dojo.removeClass(this.emailservertype_label,"prmaxhidden");if(_2){this.emailservertypeid.set("value",_2.emailservertypeid);if(this.emailservertypeid.get("value")==2){dojo.removeClass(this.hostname.domNode,"prmaxhidden");dojo.removeClass(this.hostname_label,"prmaxhidden");this.hostname.set("value",_2.email_host);}else{dojo.addClass(this.hostname.domNode,"prmaxhidden");dojo.addClass(this.hostname_label,"prmaxhidden");}}}else{dojo.addClass(this.emailservertypeid.domNode,"prmaxhidden");dojo.addClass(this.emailservertype_label,"prmaxhidden");dojo.addClass(this.hostname.domNode,"prmaxhidden");dojo.addClass(this.hostname_label,"prmaxhidden");}},postCreate:function(){this.emailservertypeid.set("store",this._emailservertypes);this.emailservertypeid.set("value",1);},_change:function(){if(this.thirdparty.get("checked")){dojo.removeClass(this.emailservertypeid.domNode,"prmaxhidden");dojo.removeClass(this.emailservertype_label,"prmaxhidden");if(this.emailservertypeid.get("value")==2){dojo.removeClass(this.hostname.domNode,"prmaxhidden");dojo.removeClass(this.hostname_label,"prmaxhidden");}else{dojo.addClass(this.hostname.domNode,"prmaxhidden");dojo.addClass(this.hostname_label,"prmaxhidden");}}else{dojo.addClass(this.emailservertypeid.domNode,"prmaxhidden");dojo.addClass(this.emailservertype_label,"prmaxhidden");dojo.addClass(this.hostname.domNode,"prmaxhidden");dojo.addClass(this.hostname_label,"prmaxhidden");}},_set_emailservertype:function(){if(this.emailservertypeid.get("value")==2){dojo.removeClass(this.hostname.domNode,"prmaxhidden");dojo.removeClass(this.hostname_label,"prmaxhidden");}else{dojo.addClass(this.hostname.domNode,"prmaxhidden");dojo.addClass(this.hostname_label,"prmaxhidden");}},_update:function(){var _3={};_3["icustomerid"]=this.customerid;dojo.xhrPost(ttl.utilities.makeParams({load:this._update_call_back,url:"/emailserver/update_emailserver",content:this.form.get("value")}));},_update_call:function(_4){if(_4.success=="OK"){alert("Updated");}else{alert("Problem");}this.updatebtn.cancel();}});}