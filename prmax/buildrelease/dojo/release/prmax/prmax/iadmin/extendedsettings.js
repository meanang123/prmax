/*
	Copyright (c) 2004-2011, The Dojo Foundation All Rights Reserved.
	Available via Academic Free License >= 2.1 OR the modified BSD license.
	see: http://dojotoolkit.org/license for details
*/


if(!dojo._hasResource["prmax.iadmin.extendedsettings"]){dojo._hasResource["prmax.iadmin.extendedsettings"]=true;dojo.provide("prmax.iadmin.extendedsettings");dojo.declare("prmax.iadmin.extendedsettings",[ttl.BaseWidget],{widgetsInTemplate:true,templateString:"<div class=\"common_prmax_layout\">\r\n<br/>\r\n\t<form data-dojo-attach-point=\"form\" data-dojo-type=\"dijit.form.Form\" data-dojo-props='onSubmit:\"return false\",\"class\":\"common_prmax_layout\"'>\r\n\t\t<input data-dojo-attach-point=\"customerid\" data-dojo-props='name:\"icustomerid\",type:\"hidden\"' data-dojo-type=\"dijit.form.TextBox\" />\r\n\t\t<label class=\"label_3\"><input data-dojo-attach-point=\"search_show_job_roles\" data-dojo-type=\"dijit.form.CheckBox\" data-dojo-props='name:\"search_show_job_roles\",type:\"checkbox\"'/> Job Title Search</label><br/>\r\n\t\t<label class=\"label_3\"><input data-dojo-attach-point=\"search_show_coverage\" data-dojo-type=\"dijit.form.CheckBox\" data-dojo-props='name:\"search_show_coverage\",type:\"checkbox\"'/> Coverage Search</label><br/>\r\n\t\t<label class=\"label_3\"><input data-dojo-attach-point=\"search_show_profile\" data-dojo-type=\"dijit.form.CheckBox\" data-dojo-props='name:\"search_show_profile\",type:\"checkbox\"'/> Profile Search</label><br/>\r\n\t\t<label class=\"label_3\"><input data-dojo-attach-point=\"search_show_smart\" data-dojo-type=\"dijit.form.CheckBox\" data-dojo-props='name:\"search_show_smart\",type:\"checkbox\"'/> Smart Search</label><br/>\r\n\t\t<label class=\"label_3\"><input data-dojo-attach-point=\"view_outlet_results_colours\" data-dojo-type=\"dijit.form.CheckBox\" data-dojo-props='name:\"view_outlet_results_colours\",type:\"checkbox\"'/> Outlet Results Colours </label><br/>\r\n\t\t<label class=\"label_3\"><input data-dojo-attach-point=\"no_distribution\" data-dojo-type=\"dijit.form.CheckBox\" data-dojo-props='name:\"no_distribution\",type:\"checkbox\"'/> No Distribution </label><br/>\r\n\t\t<label class=\"label_3\"><input data-dojo-attach-point=\"distributionistemplated\" data-dojo-type=\"dijit.form.CheckBox\" data-dojo-props='name:\"distributionistemplated\",type:\"checkbox\"'/> Distribution is Templated</label><br/>\r\n\t\t<label class=\"label_3\"><input data-dojo-attach-point=\"no_export\" data-dojo-type=\"dijit.form.CheckBox\" data-dojo-props='name:\"no_export\",type:\"checkbox\"'/> No Export (Excel)</label><br/>\r\n\t\t<label class=\"label_3\"><input data-dojo-attach-point=\"has_clickthrought\" data-dojo-type=\"dijit.form.CheckBox\" data-dojo-props='name:\"has_clickthrought\",type:\"checkbox\"'/> Click Through Release</label><br/>\r\n\t\t<label class=\"label_3\"><input data-dojo-attach-point=\"cla\" data-dojo-type=\"dijit.form.CheckBox\" data-dojo-props='name:\"cla\",type:\"checkbox\",value:\"2\"'/> CLA Licence</label><br/>\r\n\t\t<label class=\"label_3\"><input data-dojo-attach-point=\"nla\" data-dojo-type=\"dijit.form.CheckBox\" data-dojo-props='name:\"nla\",type:\"checkbox\",value:\"3\"'/> NLA Licence</label><br/>\r\n\t\t<label class=\"label_3\"><input data-dojo-attach-point=\"extended_security\" data-dojo-type=\"dijit.form.CheckBox\" data-dojo-props='name:\"extended_security\",type:\"checkbox\"'/> Extended Security</label><br/>\r\n\t\t<label class=\"label_3\"><input data-dojo-attach-point=\"required_client\" data-dojo-type=\"dijit.form.CheckBox\" data-dojo-props='name:\"required_client\",type:\"checkbox\"'/> Required Client</label><br/><br/><br/>\r\n\t\t<br/><br/>\r\n\t\t<label class=\"label_2\">IP Restrictions</label><input data-dojo-props='type:\"text\",name:\"valid_ips\"' data-dojo-type=\"dijit.form.TextBox\" data-dojo-attach-point=\"valid_ips\" ><br/>\r\n\t\t<br/><br/>\r\n\t\t<button data-dojo-attach-event=\"onClick:_update\" data-dojo-attach-point=\"updatebtn\" data-dojo-type=\"dojox.form.BusyButton\" data-dojo-props='type:\"button\",busyLabel:\"Please Wait Updating ...\",label:\"Update\",'></button><br/><br/>\r\n\t</form>\r\n</div>\r\n",constructor:function(){this._update_call_back=dojo.hitch(this,this._update_call);},load:function(_1,_2){this.search_show_job_roles.set("checked",_1.search_show_job_roles);this.search_show_coverage.set("checked",_1.search_show_coverage);this.search_show_profile.set("checked",_1.search_show_profile);this.search_show_smart.set("checked",_1.search_show_smart);this.view_outlet_results_colours.set("checked",_1.view_outlet_results_colours);this.no_distribution.set("checked",_1.no_distribution);this.no_export.set("checked",_1.no_export);this.has_clickthrought.set("checked",_1.has_clickthrought);this.customerid.set("value",_1.customerid);this.distributionistemplated.set("checked",_1.distributionistemplated);this.cla.set("checked",false);this.nla.set("checked",false);this.extended_security.set("checked",_1.extended_security);this.required_client.set("checked",_1.required_client);this.valid_ips.set("value",_1.valid_ips);if(_2!=null&&_2.length>0){for(var i=0;i<_2.length;i++){if(_2[i]==2){this.cla.set("checked",true);}if(_2[i]==3){this.nla.set("checked",true);}}}},_update:function(){dojo.xhrPost(ttl.utilities.makeParams({load:this._update_call_back,url:"/iadmin/update_extendedsettings",content:this.form.get("value")}));},_update_call:function(_3){if(_3.success=="OK"){dojo.publish("extended_settings",[_3.data]);alert("Updated");}else{alert("Problem");}this.updatebtn.cancel();}});}