/*
	Copyright (c) 2004-2011, The Dojo Foundation All Rights Reserved.
	Available via Academic Free License >= 2.1 OR the modified BSD license.
	see: http://dojotoolkit.org/license for details
*/


if(!dojo._hasResource["prmax.iadmin.sales.SetFreeSEOCount"]){dojo._hasResource["prmax.iadmin.sales.SetFreeSEOCount"]=true;dojo.provide("prmax.iadmin.sales.SetFreeSEOCount");dojo.declare("prmax.iadmin.sales.SetFreeSEOCount",[ttl.BaseWidget],{templateString:"<div>\r\n\t<div data-dojo-attach-point=\"dlg\" data-dojo-type=\"dijit.Dialog\" data-dojo-props='title:\"Set Nbr of Free SEO for Customer\"'>\r\n\t\t<form data-dojo-attach-point=\"form\"  data-dojo-props='onsubmit:\"return false\"' data-dojo-type=\"dijit.form.Form\">\r\n\t\t\t<input data-dojo-attach-point=\"icustomerid\" data-dojo-props='name:\"icustomerid\",type:\"hidden\"' data-dojo-type=\"dijit.form.TextBox\">\r\n\t\t\t<table style=\"width:400px;border-collapse:collapse;\" cellpadding=\"0\" cellspacing=\"0\">\r\n\t\t\t\t<tr ><td class=\"prmaxrowtag\" align=\"right\" >SEO Credit Qty</td><td><input data-dojo-props='\"class\":\"prmaxinput\",name:\"seonbrincredit\",type:\"text\",trim:true' data-dojo-attach-point=\"seonbrincredit\" data-dojo-type=\"dijit.form.NumberTextBox\"></td></tr>\r\n\t\t\t\t<tr><td align=\"right\" valign=\"top\" class=\"prmaxrowtag\">Reason</td><td colspan=\"2\"><div class=\"stdframe prmaxrequired\" style=\"height:150px;\"><textarea data-dojo-attach-point=\"reason\" data-dojo-props='\"class\":\"prmaxrequired\", name:\"reason\", trim:true, required:true, style:\"width:99%;height:80%\"' data-dojo-type=\"dijit.form.Textarea\" ></textarea></div></td></tr>\r\n\t\t\t\t<tr><td colspan=\"2\"><br/></td></tr>\r\n\t\t\t\t<tr><td><button data-dojo-attach-event=\"onClick:_Close\" data-dojo-type=\"dijit.form.Button\" data-dojo-props='label:\"Close\", type:\"button\"' ></button></td><td align=\"right\"><button data-dojo-attach-point=\"updBtn\" data-dojo-attach-event=\"onClick:_Update\" data-dojo-type=\"dojox.form.BusyButton\" data-dojo-props='type:\"button\", label:\"Set Free SEO Qty\",busyLabel:\"Please wait Updating\"' ></button></td></tr>\r\n\t\t\t</table>\r\n\t\t</form>\r\n\t</div>\r\n</div>\r\n",constructor:function(){this._UpdatedCallBack=dojo.hitch(this,this._UpdatedCall);this._LoadedCallBack=dojo.hitch(this,this._LoadedCall);},Load:function(_1){this.icustomerid.set("value",_1);dojo.xhrPost(ttl.utilities.makeParams({load:this._LoadedCallBack,url:"/iadmin/get_internal",content:{icustomerid:_1}}));},_LoadedCall:function(_2){if(_2.success=="OK"){this.Clear();this.reason.set("value","");this.seonbrincredit.set("value",_2.data.cust.seonbrincredit);this.dlg.show();}else{alert("Problem Loading SEO Value");}},Clear:function(){this.updBtn.cancel();this.reason.set("value, ");this.seonbrincredit.set("value",0);},_UpdatedCall:function(_3){if(_3.success=="OK"){alert("SEO Free Count Updated");this.dlg.hide();this.Clear();}else{if(_3.message){alert(_3.message);}else{alert("Problem Upating");}}this.updBtn.cancel();},_Update:function(){if(ttl.utilities.formValidator(this.form)==false){alert("Missing Data");this.updBtn.cancel();return false;}dojo.xhrPost(ttl.utilities.makeParams({load:dojo.hitch(this,this._UpdatedCallBack),url:"/iadmin/customer_seo_qty_update",content:this.form.get("value")}));},_Close:function(){this.dlg.hide();this.Clear();}});}