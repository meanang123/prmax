/*
	Copyright (c) 2004-2011, The Dojo Foundation All Rights Reserved.
	Available via Academic Free License >= 2.1 OR the modified BSD license.
	see: http://dojotoolkit.org/license for details
*/


if(!dojo._hasResource["prmax.search.person"]){dojo._hasResource["prmax.search.person"]=true;dojo.provide("prmax.search.person");dojo.require("dijit._Templated");dojo.require("dijit._Widget");dojo.require("dijit._Container");dojo.require("dijit.form.TextBox");dojo.require("prcommon.search.std_search");dojo.declare("prmax.search.person",[prcommon.search.std_search,dijit._Widget,dijit._Templated,dijit._Container],{testmode:false,widgetsInTemplate:true,templateString:"<table width=\"99%\" class=\"prmaxtable\" cellpadding=\"0\" cellspacing=\"0\" >\r\n<tr>\r\n<td width=\"20%\" ><span class=\"prmaxrowtag\">Surname</span></td>\r\n<td width=\"40%\" ><input data-dojo-props='type:\"text\",trim:true,maxlength:\"84\",style:\"width:90%\",\"class\":\"prmaxinput\"' data-dojo-type=\"dijit.form.TextBox\" data-dojo-attach-point=\"data_surname\" data-dojo-attach-event=\"onBlur:_onChange\" /></td>\r\n<td width=\"10%\" ><span class=\"prmaxrowtag\">Firstname</span></td>\r\n<td width=\"20%\" ><input data-dojo-props='type:\"text\",trim:true,maxlength:\"10\",style:\"width:90%\",\"class\":\"prmaxinput\",disabled:true' data-dojo-type=\"dijit.form.TextBox\" data-dojo-attach-point=\"data_firstname\" data-dojo-attach-event=\"onBlur:_onChange\" /></td>\r\n<td align=\"right\"><div data-dojo-attach-point=\"countNode\" data-dojo-type=\"prmax.search.SearchCount\"></div></td></tr></table >\r\n",constructor:function(){this._on_input_call_back=dojo.hitch(this,this._on_input);},postCreate:function(){if(dojo.isMoz||dojo.isOpera){this.connect(this.data_surname.textbox,"oninput",this._on_input_call_back);this.connect(this.data_firstname.textbox,"oninput",this._on_input_call_back);}else{this.connect(this.data_surname.textbox,"onkeyup",this._on_input_call_back);this.connect(this.data_surname.textbox,"onpaste",this._on_input_call_back);this.connect(this.data_surname.textbox,"oncut",this._on_input_call_back);this.connect(this.data_firstname.textbox,"onkeyup",this._on_input_call_back);this.connect(this.data_firstname.textbox,"onpaste",this._on_input_call_back);this.connect(this.data_firstname.textbox,"oncut",this._on_input_call_back);}},_on_input:function(){this._enable_controls();this._Get(this._get_data());},_onChange:function(){this._Get(this._get_data());},Clear:function(){this.data_surname.set("value","");this.data_firstname.set("value","");this._value="";this._setdisplay(this._value);this._enable_controls();this.inherited(arguments);},_setValueAttr:function(_1){if(_1==""||_1==null){this.data_surname.set("value","");this.data_firstname.set("value","");}else{this.data_surname.set("value",_1.data.surname);this.data_firstname.set("value",_1.data.firstname);}},_getValueAttr:function(_2){return this._get_data();},focus:function(){this.data_surname.focus();},_get_data:function(){var _3={surname:this.data_surname.get("value"),firstname:this.data_firstname.get("value")};var _4={data:_3,logic:2};if(this._extended){return _4;}else{var _3="";if(_4["data"]["surname"].length>0){_3=dojo.toJson(_4);}this.value=_3;this._enable_controls();return _3;}},_enable_controls:function(){var _5=this.data_surname.get("value");if(_5.length>0){this.data_firstname.set("disabled",false);}else{this.data_firstname.set("value","");this.data_firstname.set("disabled",true);}}});}