/*
	Copyright (c) 2004-2011, The Dojo Foundation All Rights Reserved.
	Available via Academic Free License >= 2.1 OR the modified BSD license.
	see: http://dojotoolkit.org/license for details
*/


if(!dojo._hasResource["prmax.search.PersonSearch"]){dojo._hasResource["prmax.search.PersonSearch"]=true;dojo.provide("prmax.search.PersonSearch");dojo.require("ttl.BaseWidget");dojo.require("dijit.Dialog");dojo.require("ttl.Form");dojo.require("prmax.search.standard2");dojo.declare("prmax.search.PersonSearch",[ttl.BaseWidget],{templateString:"<div>\r\n\t<div data-dojo-attach-point=\"search_people_dlg\" data-dojo-type=\"dijit.Dialog\" data-dojo-props='title:\"Find People\",style:\"width:500px;height:175px\",\"class\":\"person_search\"'>\r\n\t\t<form data-dojo-props='name:\"std_search_person\",cellspacing:\"0\",cellpadding:\"0\",formid:\"std_search_person_form\",onsubmit:\"return false\",\"class\":\"form_view\"' data-dojo-type=\"ttl.Form\" data-dojo-attach-point=\"form_name\">\r\n\t\t\t<input data-dojo-props='type:\"hidden\",value:\"quick\",name:\"search_type\"' data-dojo-type=\"dijit.form.TextBox\" />\r\n\t\t\t<input data-dojo-props='type:\"hidden\",value:\"1\",name:\"mode\"' data-dojo-type=\"dijit.form.TextBox\" />\r\n\t\t\t<input data-dojo-props='type:\"hidden\",value:\"2\",name:\"search_partial\"' data-dojo-type=\"dijit.form.TextBox\" />\r\n\t\t\t<div class=\"paddingrow\">&nbsp;</div>\r\n\t\t\t<div data-dojo-props='usepartial:true,search:\"std_search_quick\",displayname:\"Surname\",keytypeid:22,name:\"quick_contact\"' data-dojo-attach-point=\"person_searchname\" data-dojo-type=\"prmax.search.standard2\" data-dojo-attach-point=\"person\"></div>\r\n\t\t\t<div data-dojo-props='usepartial:true,displayname:\"Outlet Name\",keytypeid:1,name:\"quick_searchname\",value:\"\"' data-dojo-attach-point=\"person_outletname\" data-dojo-attach-point=\"std_search_outlet_outlet_name\" data-dojo-type=\"prmax.search.standard2\"></div>\r\n\t\t\t<br/>\r\n\t\t\t<button data-dojo-attach-event=\"onClick:_extended_search\" data-dojo-attach-point=\"extended_search_btn\" data-dojo-type=\"dijit.form.Button\" data-dojo-props='type:\"button\",label:\"Extended Search\",\"class\":\"btn_right\",style:\"float:left\"'></button>\r\n\t\t\t<button data-dojo-attach-event=\"onClick:_search\" data-dojo-attach-point=\"searchbtn\" data-dojo-type=\"dijit.form.Button\" data-dojo-props='type:\"button\",label:\"Go\",\"class\":\"btn_right\",style:\"float:right\"'></button>\r\n\t\t</form>\r\n\t</div>\r\n</div>\r\n",constructor:function(){this._dialog=null;this._load_call_back=dojo.hitch(this,this._load_call);},start_search:function(){this.clear();this.search_people_dlg.show();},_search:function(){this.form_name.setExtendedMode(false);var _1=this.form_name.get("value");if(this._is_empty(_1)==true){alert("No Search Criteria Specified");return;}dojo.xhrPost(ttl.utilities.makeParams({load:this._load_call_back,url:"/search/dosearch",content:_1}));},_load_call:function(_2){dojo.publish(PRCOMMON.Events.SearchSession_Changed,[_2.data,PRMAX.utils.settings.searchappend,0]);if(_2.data.total==0){alert("No Result Found");}else{dijit.byId("std_banner_control").ShowResultList();this.search_people_dlg.hide();}},_extended_search:function(){dijit.byId("std_banner_control").ShowSearchStd();this.search_people_dlg.hide();},_is_empty:function(_3){if(this.person_outletname.get("value")!=""){return false;}if(this.person_searchname.get("value")!=""){return false;}return true;},clear:function(){this.person_outletname.Clear();this.person_searchname.Clear();}});}