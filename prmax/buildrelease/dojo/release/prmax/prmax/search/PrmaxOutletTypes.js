/*
	Copyright (c) 2004-2011, The Dojo Foundation All Rights Reserved.
	Available via Academic Free License >= 2.1 OR the modified BSD license.
	see: http://dojotoolkit.org/license for details
*/


if(!dojo._hasResource["prmax.search.PrmaxOutletTypes"]){dojo._hasResource["prmax.search.PrmaxOutletTypes"]=true;dojo.provide("prmax.search.PrmaxOutletTypes");dojo.require("dijit._Templated");dojo.require("dijit._Widget");dojo.require("dijit._Container");dojo.require("dijit.form.CheckBox");dojo.require("prcommon.search.std_search");dojo.declare("prmax.search.PrmaxOutletTypes",[prcommon.search.std_search,dijit._Widget,dijit._Templated,dijit._Container],{name:"",value:"",title:"",search:"",size:"7",testmode:false,widgetsInTemplate:true,templateString:"<div class=\"prmaxoutlettype\">\r\n\t<table width=\"100%\" class=\"prmaxtable\" cellpadding=\"0\" cellspacing=\"0\" >\r\n\t\t<tr><td width=\"20%\"   class=\"prmaxrowtag\">Media Channels</td>\r\n\t\t\t\t<td width=\"5%\" ><i dojoAttachPoint=\"toggleCtrl\" dojoAttachEvent=\"onclick:_Toggle\" class=\"fa fa-plus-circle\" style=\"color:#7F7F7F\"></i></td>\r\n\t\t\t\t<td align=\"right\" v-align=\"top\" ><div dojoAttachPoint=\"countNode\" dojotype=\"prmax.search.SearchCount\"></div></td>\r\n\t\t</tr>\r\n\t</table>\r\n\t<div style=\"border 2px solid black\">\r\n\t\t<div dojoAttachPoint=\"selectarea\" class=\"prmaxselectmultiple\" style=\"display:none\" >\r\n\t\t\t<table width=\"100%\" class=\"prmaxtable\" >\r\n\t\t\t\t<tr>\r\n\t\t\t\t\t <td width=\"33%\">\r\n\t\t\t\t\t <div class=\"box1\">\r\n\t\t\t\t\t <input  style=\"float:left\" class=\"check_input prmaxdefault\" dojoAttachPoint=\"node1\" dojoType=\"dijit.form.CheckBox\" type=\"checkbox\" value=\"1\" />\r\n\t\t\t\t\t <div class=\"imagebox\"><i dojoAttachPoint=\"node1button\" class=\"fa fa-plus-circle\" style=\"margin:3px\"></i></div>\r\n\t\t\t\t\t <label dojoAttachPoint=\"node1label\" class=\"labeltag\" >National Newspapers</label>\r\n\t\t\t\t\t </div>\r\n\t\t\t\t\t </td>\r\n\t\t\t\t\t<td width=\"33%\">\r\n\t\t\t\t\t <div class=\"box1\">\r\n\t\t\t\t\t<input style=\"float:left\"  class=\"check_input prmaxdefault\" dojoAttachPoint=\"node2\" dojoType=\"dijit.form.CheckBox\" type=\"checkbox\" value=\"2\" />\r\n\t\t\t\t\t <div class=\"imagebox\"><i dojoAttachPoint=\"node2button\" class=\"fa fa-plus-circle\" style=\"margin:3px\"></i></div>\r\n\t\t\t\t\t<label  dojoAttachPoint=\"node2label\" class=\"labeltag\" >Regional Newspapers</label>\r\n\t\t\t\t\t</div></td>\r\n\t\t\t\t\t<td width=\"33%\">\r\n\t\t\t\t\t <div class=\"box1\">\r\n\t\t\t\t\t<input style=\"float:left\" class=\"check_input prmaxdefault\" dojoAttachPoint=\"node3\" dojoType=\"dijit.form.CheckBox\" type=\"checkbox\" value=\"3\" />\r\n\t\t\t\t\t <div class=\"imagebox\"><i dojoAttachPoint=\"node3button\" class=\"fa fa-plus-circle\" style=\"margin:3px\"></i></div>\r\n\t\t\t\t\t<label dojoAttachPoint=\"node3label\" class=\"labeltag\" >B2B Magazines</label>\r\n\t\t\t\t\t</div></td>\r\n\t\t\t\t</tr>\r\n\t\t\t\t<tr>\r\n\t\t\t\t\t <td width=\"33%\">\r\n\t\t\t\t\t <div class=\"box1\">\r\n\t\t\t\t\t<input style=\"float:left\" class=\"check_input prmaxdefault\" dojoAttachPoint=\"node4\" dojoType=\"dijit.form.CheckBox\" type=\"checkbox\" value=\"4\" />\r\n\t\t\t\t\t <div class=\"imagebox\"><i dojoAttachPoint=\"node4button\" class=\"fa fa-plus-circle\" style=\"margin:3px\"></i></div>\r\n\t\t\t\t\t<label dojoAttachPoint=\"node4label\" class=\"labeltag\" >Consumer Magazines</label>\r\n\t\t\t\t\t</div></td>\r\n\t\t\t\t\t <td width=\"33%\">\r\n\t\t\t\t\t <div class=\"box1\">\r\n\t\t\t\t\t<input style=\"float:left\" class=\"prmaxdefault\" dojoAttachPoint=\"node5\" dojoType=\"dijit.form.CheckBox\" type=\"checkbox\" value=\"5\" />\r\n\t\t\t\t\t <div class=\"imagebox\"><i dojoAttachPoint=\"node5button\" class=\"fa fa-plus-circle\" style=\"margin:3px\"></i></div>\r\n\t\t\t\t\t<label class=\"labeltag\" dojoAttachPoint=\"node5label\" >Radio</label>\r\n\t\t\t\t\t</div></td>\r\n\t\t\t\t\t <td width=\"33%\">\r\n\t\t\t\t\t <div class=\"box1\">\r\n\t\t\t\t\t<input style=\"float:left\" class=\"prmaxdefault\" dojoAttachPoint=\"node6\" dojoType=\"dijit.form.CheckBox\" type=\"checkbox\" value=\"6\" />\r\n\t\t\t\t\t <div class=\"imagebox\"><i dojoAttachPoint=\"node6button\" class=\"fa fa-plus-circle\" style=\"margin:3px\"></i></div>\r\n\t\t\t\t\t<label class=\"labeltag\" dojoAttachPoint=\"node6label\" >TV</label>\r\n\t\t\t\t\t</div></td>\r\n\t\t\t\t</tr>\r\n\t\t\t\t<tr>\r\n\t\t\t\t\t <td width=\"33%\">\r\n\t\t\t\t\t <div class=\"box1\">\r\n\t\t\t\t\t<input   style=\"float:left\" class=\"prmaxdefault\" dojoAttachPoint=\"node7\" dojoType=\"dijit.form.CheckBox\" type=\"checkbox\" value=\"7\" />\r\n\t\t\t\t\t <div class=\"imagebox\"><i dojoAttachPoint=\"node7button\" class=\"fa fa-plus-circle\" style=\"margin:3px\"></i></div>\r\n\t\t\t\t\t<label class=\"labeltag\" dojoAttachPoint=\"node7label\" >Influencers</label>\r\n\t\t\t\t\t</div></td>\r\n\t\t\t\t\t <td width=\"33%\">\r\n\t\t\t\t\t <div class=\"box1\">\r\n\t\t\t\t\t<input  style=\"float:left\" class=\"prmaxdefault\" dojoAttachPoint=\"node8\" dojoType=\"dijit.form.CheckBox\" type=\"checkbox\" value=\"8\" />\r\n\t\t\t\t\t <div class=\"imagebox\"><i dojoAttachPoint=\"node8button\" class=\"fa fa-plus-circle\" style=\"margin:3px\"></i></div>\r\n\t\t\t\t\t<label class=\"labeltag\" dojoAttachPoint=\"node8label\" >News Services</label>\r\n\t\t\t\t\t</div></td>\r\n\t\t\t\t\t <td width=\"33%\">\r\n\t\t\t\t\t <div class=\"box1\">\r\n\t\t\t\t\t<input  style=\"float:left\" class=\"prmaxdefault\" dojoAttachPoint=\"node9\"  dojoType=\"dijit.form.CheckBox\" type=\"checkbox\" value=\"9\" />\r\n\t\t\t\t\t <div class=\"imagebox\"><i dojoAttachPoint=\"node9button\" class=\"fa fa-plus-circle\" style=\"margin:3px\"></i></div>\r\n\t\t\t\t\t<label class=\"labeltag\" dojoAttachPoint=\"node9label\" >Parliamentary</label>\r\n\t\t\t\t\t</div></td>\r\n\t\t\t\t</tr>\r\n\t\t\t\t<tr>\r\n\t\t\t\t\t <td width=\"33%\">\r\n\t\t\t\t\t <div class=\"box1\">\r\n\t\t\t\t\t <input  style=\"float:left\" class=\"check_input prmaxdefault\" dojoAttachPoint=\"node13\" dojoType=\"dijit.form.CheckBox\" type=\"checkbox\" value=\"13\" />\r\n\t\t\t\t\t <div class=\"imagebox\"><i dojoAttachPoint=\"node13button\" class=\"fa fa-plus-circle\" style=\"margin:3px\"></i></div>\r\n\t\t\t\t\t <label dojoAttachPoint=\"node13label\" class=\"labeltag\" >Private Channels</label>\r\n\t\t\t\t\t </div>\r\n\t\t\t\t\t </td>\r\n\t\t\t\t</tr>\r\n\t\t\t</table>\r\n\t\t\t<br/>\r\n\t\t\t<table width=\"100%\" class=\"prmaxtable\" cellpadding=\"0\" cellspacing=\"0\"\">\r\n\t\t\t\t  <tr><td width=\"48%\"><select style=\"width:100%\" dojoAttachPoint=\"OutletType_list\" size=\"${size}\" class=\"lists\" multiple=\"multiple\" ></select></td>\r\n\t\t\t\t  <td >\r\n\t\t\t\t  <button class=\"button_add_all\" style=\"padding:0px;margin:0px\" dojoAttachPoint=\"button_all\" disabled=\"true\" type=\"button\" dojoAttachEvent=\"onClick:_OutletTypeSelectAll\" dojoType=\"dijit.form.Button\"><div class=\"std_movement_button\">&gt;&gt;</div></button><br/>\r\n\t\t\t\t  <button class=\"button_add_single\" style=\"padding:0px;margin:0px\" dojoAttachPoint=\"button_single\" disabled=\"true\" type=\"button\" dojoType=\"dijit.form.Button\" dojoAttachEvent=\"onClick:_OutletTypeSelectSingle\"><div class=\"std_movement_button\">&gt;&nbsp;</div></button><br/>\r\n\t\t\t\t  <button class=\"button_del_all\" style=\"padding:0px;margin:0px\" dojoAttachPoint=\"button_del_all\" disabled=\"true\" type=\"button\" dojoType=\"dijit.form.Button\" dojoAttachEvent=\"onClick:_OutletTypeRemoveAll\"><div class=\"std_movement_button\">&lt;&lt;</div></button><br/>\r\n\t\t\t\t  <button class=\"button_del_single\" style=\"padding:0px;margin:0px\" dojoAttachPoint=\"button_del_single\" disabled=\"true\" type=\"button\" dojoType=\"dijit.form.Button\" dojoAttachEvent=\"onClick:_OutletTypeRemoveSingle\"><div class=\"std_movement_button\">&lt;&nbsp;</div></button></td>\r\n\t\t\t\t  <td width=\"48%\"><select style=\"width:100%\" dojoAttachPoint=\"OutletType_select\" size=\"${size}\" class=\"lists\" multiple=\"multiple\" ></select></td></tr>\r\n\t\t\t</table>\r\n\t\t</div>\r\n\t</div>\r\n</div>\r\n\r\n",constructor:function(){this._fieldList=[1,2,3,4,5,6,7,8,9,13];this._values="";this.items=new dojo.data.ItemFileReadStore({url:"/common/lookups?searchtype=privatechannels"});this.items.fetch();this._ClearSelectionListCall=dojo.hitch(this,this._ClearSelectionList);this._LoadSelectionCall=dojo.hitch(this,this._LoadSelection);this._ControlButtonsCall=dojo.hitch(this,this._ControlButtons);this._Selected=new dojox.collections.Dictionary();this._GroupTypes=new dojox.collections.Dictionary();this._GroupTypes.add(1,"national");this._GroupTypes.add(2,"regional");this._GroupTypes.add(3,"business");this._GroupTypes.add(4,"consumer");this._GroupTypes.add(5,"radio");this._GroupTypes.add(6,"television");this._GroupTypes.add(7,"internet");this._GroupTypes.add(8,"news");this._GroupTypes.add(9,"parliamentary");this._GroupTypes.add(13,"privatechannels");this._Primary=new dojox.collections.Dictionary();this._Primary.add(1,1);this._Primary.add(2,6);this._Primary.add(3,13);this._Primary.add(4,15);this._Primary.add(5,24);this._Primary.add(6,27);this._Primary.add(7,null);this._Primary.add(8,43);this._Primary.add(9,null);this._Primary.add(13,null);},postCreate:function(){for(var _1 in this._fieldList){var _2=this._fieldList[_1];dojo.attr(this["node"+_2+"label"],"for",this["node"+_2].id);dojo.connect(this["node"+_2],"onClick",dojo.hitch(this,this._SelectPrimary,_2));dojo.connect(this["node"+_2+"button"],"onclick",dojo.hitch(this,this._SelectList,_2));}dojo.connect(this.OutletType_list,"onchange",this._ControlButtonsCall);dojo.connect(this.OutletType_select,"onchange",this._ControlButtonsCall);dojo.connect(this.OutletType_list,"ondblclick",dojo.hitch(this,this._OutletSelectDbl));},_ControlButtons:function(){this.button_all.set("disabled",this.OutletType_list.length?false:true);this.button_single.set("disabled",this.OutletType_list.selectedIndex!=-1?false:true);this.button_del_all.set("disabled",this.OutletType_select.length?false:true);this.button_del_single.set("disabled",this.OutletType_select.selectedIndex!=-1?false:true);},Clear:function(){this._Selected.clear();this.OutletType_list.options.length=0;this.OutletType_select.options.length=0;this._Get(this._getData());for(var _3 in this._fieldList){this["node"+this._fieldList[_3]].set("checked",false);}this.inherited(arguments);},_setValueAttr:function(_4){var _5=false;this.Clear();for(var _6 in _4.data){_5=true;}this._Get(this._getData());if(_5){this.MakeOpen();}},_getValueAttr:function(){return this._getData();},_ClearSelectionList:function(_7,_8){this.OutletType_list.options.length=0;},_LoadSelection:function(_9,_a){for(i=0;i<_9.length;i++){var _b=_9[i];this.OutletType_list.options[this.OutletType_list.options.length]=new Option(_b.name,_b.id);}},_SelectList:function(_c){this.items.fetch({query:{grouptypeid:this._GroupTypes.item(_c)},onBegin:this._ClearSelectionListCall,onComplete:this._LoadSelectionCall});},_SelectPrimary:function(_d){if(this["node"+_d].get("checked")){this.items.fetch({query:{grouptypeid:this._GroupTypes.item(_d)},onBegin:this._ClearSelectionListCall,onComplete:this._LoadSelectionCall});var _e=this._Primary.item(_d);if(_e!=null&&this._Selected.containsKey(_e)==false){var v=this.items._getItemByIdentity(_e);this._SelectItem(_e,v.name);this._ControlButtons();this._Get(this._getValueAttr());}}else{this.OutletType_list.options.length=0;var _e=this._Primary.item(_d);if(this._Selected.containsKey(_e)){this._Selected.remove(_e);for(var c=0;c<this.OutletType_select.options.length;c++){var _f=this.OutletType_select.options[c];if(parseInt(_f.value)==_e){this.OutletType_select.options[c]=null;this._ControlButtons();this._Get(this._getValueAttr());break;}}}}},_SelectItem:function(id,_10){if(this._Selected.containsKey(id)==false){this.OutletType_select.options[this.OutletType_select.options.length]=new Option(_10,id);this._Selected.add(id,_10);}},_getData:function(){var _11=this._Selected.getKeyList();var obj={data:_11,logic:2};if(this._extended){return obj;}else{var _11=this._Selected.count>0?dojo.toJson(obj):"";this.value=_11;return _11;}},_focus:function(){this.node1.focus();},_OutletTypeSelectAll:function(){var _12=false;for(var c=0;c<this.OutletType_list.options.length;c++){var _13=this.OutletType_list.options[c];var _14=parseInt(_13.value);if(this._Selected.containsKey(_14)==false){this.OutletType_select.options[this.OutletType_select.options.length]=new Option(_13.text,_13.value);this._Selected.add(_14,_13.text);}}this.OutletType_list.options.length=0;this._Get(this._getValueAttr());this._ControlButtons();},_OutletTypeSelectSingle:function(){var _15=false;for(var c=0;c<this.OutletType_list.options.length;c++){var _16=this.OutletType_list.options[c];if(_16.selected){var _17=parseInt(_16.value);if(this._Selected.containsKey(_17)==false){this.OutletType_select.options[this.OutletType_select.options.length]=new Option(_16.text,_16.value);this._Selected.add(_17,_16.text);this.OutletType_list.options[c]=null;--c;_15=true;}}}if(_15){this._Get(this._getValueAttr());}this._ControlButtons();},_OutletTypeRemoveAll:function(){for(var c=0;c<this.OutletType_select.options.length;c++){var _18=this.OutletType_select.options[c];var _19=parseInt(_18.value);this._Selected.remove(_19);this.OutletType_list.options[this.OutletType_list.options.length]=new Option(_18.text,_18.value);}this.OutletType_select.options.length=0;this._Get(this._getValueAttr());this._ControlButtons();},_OutletTypeRemoveSingle:function(){var _1a=false;for(var c=0;c<this.OutletType_select.options.length;c++){var _1b=this.OutletType_select.options[c];if(_1b.selected){var _1c=parseInt(_1b.value);this._Selected.remove(_1c);_1a=true;this.OutletType_list.options[this.OutletType_list.options.length]=new Option(_1b.text,_1b.value);this.OutletType_select.options[c]=null;--c;}}if(_1a){this._Get(this._getValueAttr());this._ControlButtons();}},_OutletSelectDbl:function(){this._OutletTypeSelectSingle();},_CaptureExtendedContent:function(_1d){return _1d;},_setValueAttr:function(_1e){this.Clear();var _1f=_1e.data;var _20=false;if(_1f==null||_1f==undefined){_1f=_1e;}for(var key in _1f){var pid=_1f[key];var v=this.items._getItemByIdentity(pid);this._SelectItem(pid,v.name);_20=true;}this._ControlButtons();this._Get(this._getValueAttr());if(_20){this.MakeOpen();}}});}