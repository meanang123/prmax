/*
	Copyright (c) 2004-2011, The Dojo Foundation All Rights Reserved.
	Available via Academic Free License >= 2.1 OR the modified BSD license.
	see: http://dojotoolkit.org/license for details
*/


if(!dojo._hasResource["prmax.searchgrid.Deduplicate"]){dojo._hasResource["prmax.searchgrid.Deduplicate"]=true;dojo.provide("prmax.searchgrid.Deduplicate");dojo.declare("prmax.searchgrid.Deduplicate",[ttl.BaseWidget],{widgetsInTemplate:true,templateString:"<div>\r\n  <div dojoType=\"dijit.TitlePane\" title=\"Deduplicate \" open=\"true\" style=\"width:100%\" >\r\n    <form class=\"prmaxdefault\" dojoAttachPoint=\"form\" dojoType=\"dijit.form.Form\" onSubmit=\"return false\">\r\n      <table style=\"width:100%\" class=\"prmaxtable\" >\r\n        <tr><td width=\"30%\" colspan=2\"><input checked dojoAttachPoint=\"byOutletNode\" value=\"O\" type=\"radio\" name=\"deduplicateby\" dojoType=\"dijit.form.RadioButton\"><label dojoAttachPoint=\"byOutletLabel\" class=\"prmaxlabeltag\">by Outlet</label></td></tr>\r\n        <tr><td width=\"30%\" colspan=2\"><input dojoAttachPoint=\"byEmployeeNode\" value=\"E\"  type=\"radio\" name=\"deduplicateby\" dojoType=\"dijit.form.RadioButton\"><label dojoAttachPoint=\"byEmployeeLabel\" class=\"prmaxlabeltag\">by Contact</label></td></tr>\r\n        <tr><td colspan=\"2\" align=\"right\"><button class=\"prmaxbutton\" dojoAttachPoint=\"saveNode\" dojoAttachEvent=\"onClick:_Deduplidate\" dojoType=\"dojox.form.BusyButton\" busyLabel=\"Please Wait Deduplicating\" label=\"Deduplicate\"></button></td></tr>\r\n      </table>\r\n    </form>\r\n  </div>\r\n</div>\r\n",constructor:function(){this._DeDuplicateCompleteCallBack=dojo.hitch(this,this._DeDuplicateCompleteCall);},startup:function(){this.saveNode.cancel();this.inherited(arguments);},_DeDuplicateCompleteCall:function(_1){if(_1.success=="OK"){alert("Deduplicate Completed");dojo.publish(PRCOMMON.Events.SearchSession_Changed,[_1.data]);dojo.publish(PRCOMMON.Events.Dialog_Close,["deduplocate"]);}else{alert("Problem");this.saveNode.cancel();}},_Deduplidate:function(){dojo.xhrPost(ttl.utilities.makeParams({load:this._DeDuplicateCompleteCallBack,url:"/search/deduplicate_session",content:this.form.getValues()}));}});}