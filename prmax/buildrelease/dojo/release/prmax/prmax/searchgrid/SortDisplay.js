/*
	Copyright (c) 2004-2011, The Dojo Foundation All Rights Reserved.
	Available via Academic Free License >= 2.1 OR the modified BSD license.
	see: http://dojotoolkit.org/license for details
*/


if(!dojo._hasResource["prmax.searchgrid.SortDisplay"]){dojo._hasResource["prmax.searchgrid.SortDisplay"]=true;dojo.provide("prmax.searchgrid.SortDisplay");dojo.declare("prmax.searchgrid.SortDisplay",[ttl.BaseWidget],{widgetsInTemplate:true,templateString:"<div>\r\n  <div dojoType=\"dijit.Dialog\" title=\"Sorting\" dojoAttachPoint=\"dlg\">\r\n    <form class=\"prmaxdefault\" dojoAttachPoint=\"form\" dojoType=\"dijit.form.Form\" onSubmit=\"return false;\">\r\n      <table style=\"width:200px;height:100px\" class=\"prmaxtable\" >\r\n        <tr><td width=\"30%\" class=\"prmaxrowtag\">Sort Field </td><td><select dojoAttachPoint=\"select\" dojotype =\"dijit.form.FilteringSelect\" name=\"sortfield\" searchAttr=\"name\" labelType=\"html\" ></select></td></tr>\r\n        <tr><td width=\"30%\" colspan=2\">\r\n          <label dojoAttachPoint=\"accLabel\" class=\"prmaxlabeltag\">Asc</label><input dojoAttachPoint=\"accNode\" value=\"+\" type=\"radio\" name=\"order\" dojoType=\"dijit.form.RadioButton\">\r\n          <label dojoAttachPoint=\"descLabel\" class=\"prmaxlabeltag\">Desc</label><input dojoAttachPoint=\"descNode\" value=\"-\"  type=\"radio\" name=\"order\" dojoType=\"dijit.form.RadioButton\">\r\n        </td></tr>\r\n        <tr>\r\n          <td align=\"left\"><button class=\"prmaxbutton\" dojoAttachEvent=\"onClick:_Close\" dojoType=\"dijit.form.Button\" label=\"Close\"></button></td>\r\n          <td colspan=\"2\" align=\"right\"><button type=\"button\" class=\"prmaxbutton\" dojoAttachPoint=\"saveNode\" dojoAttachEvent=\"onClick:_Sort\" dojoType=\"dojox.form.BusyButton\" busyLabel=\"Please Wait Sorting...\" label=\"Sort\"></button></td>\r\n        </tr>\r\n      </table>\r\n    </form>\r\n  </div>\r\n</div>\r\n",constructor:function(){this._value=1;this._callback=null;this.store=new dojo.data.ItemFileReadStore({url:"/common/lookups?searchtype=sortorder"});},postCreate:function(){dojo.attr(this.accLabel,"for",this.accNode.id);dojo.attr(this.descLabel,"for",this.descNode.id);this.select.store=this.store;this.inherited(arguments);},_setCallbackAttr:function(_1){this._callback=_1;this.saveNode.cancel();},_setValueAttr:function(_2){this._value=_2.toString();this.saveNode.cancel();if(this._value[0]=="-"){this.accNode.set("checked",true);this.descNode.set("checked",false);}else{this.descNode.set("checked",false);this.accNode.set("checked",true);}this.select.set("value",Math.abs(parseInt(this._value)));},_getValueAttr:function(){return this._value;},_Sort:function(){var f=this.form.getValues();this._value=f.order+f.sortfield;this.dlg.hide();if(this._callback){this._callback(this._value);}},show:function(){this.dlg.show();},_Close:function(){this.dlg.hide();}});}