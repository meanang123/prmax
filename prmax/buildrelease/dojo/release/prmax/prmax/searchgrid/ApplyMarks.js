/*
	Copyright (c) 2004-2011, The Dojo Foundation All Rights Reserved.
	Available via Academic Free License >= 2.1 OR the modified BSD license.
	see: http://dojotoolkit.org/license for details
*/


if(!dojo._hasResource["prmax.searchgrid.ApplyMarks"]){dojo._hasResource["prmax.searchgrid.ApplyMarks"]=true;dojo.provide("prmax.searchgrid.ApplyMarks");dojo.declare("prmax.searchgrid.ApplyMarks",[ttl.BaseWidget],{widgetsInTemplate:true,templateString:"<div>\r\n  <form class=\"prmaxdefault\" dojoAttachPoint=\"form\" dojoType=\"dijit.form.Form\" onSubmit=\"return false;\">\r\n    <table style=\"margin:10px;width:300px\" class=\"prmaxtable\" cellspacing=\"0\" cellpadding=\"0\">\r\n      <tr><td width=\"30%\" class=\"prmaxrowtag\" align=\"right\">Offset</td><td><input type=\"text\" name=\"row_offset\" style=\"width:5em\" dojoType=\"dijit.form.NumberTextBox\" value=\"0\" required=\"true\" dojoAttachPoint=\"row_offset\" ></td></tr>\r\n      <tr><td width=\"30%\" class=\"prmaxrowtag\" align=\"right\">Number of Rows</td><td><input type=\"text\" name=\"row_limit\" style=\"width:5em\" dojoType=\"dijit.form.NumberTextBox\" value=\"500\" required=\"true\" dojoAttachPoint=\"row_limit\" ></td></tr>\r\n\t\t\t<tr><td colspan=\"2\">&nbsp;</td></tr><tr><td colspan=\"2\">&nbsp;</td></tr>\r\n\t\t\t<tr><td align=\"left\"><button class=\"prmaxbutton\" dojoAttachEvent=\"onClick:_Close\" dojoType=\"dijit.form.Button\" label=\"Close\"></button></td><td align=\"right\"><button type=\"button\" class=\"prmaxbutton\" dojoAttachPoint=\"okbtn\" dojoAttachEvent=\"onClick:_Mark\" dojoType=\"dojox.form.BusyButton\" busyLabel=\"Please Wait Marking...\" label=\"Mark\"></button></td></tr>\r\n    </table>\r\n  </form>\r\n</div>\r\n",constructor:function(){this._MarkedCallBack=dojo.hitch(this,this._MarkedCall);this._close_dlg=null;},_MarkedCall:function(_1){if(_1.success=="OK"){dojo.publish(PRCOMMON.Events.SearchSession_Changed,[_1.data]);this._Close();}else{alert("Problem Marking Group");this.okbtn.cancel();}},_Mark:function(){if(confirm("Clear All Existing Marks & mark this group")){dojo.xhrPost(ttl.utilities.makeParams({load:dojo.hitch(this,this._MarkedCallBack),url:"/search/sessionmarkgroup",content:this.form.getValues()}));}else{this.okbtn.cancel();}},_Close:function(){this.okbtn.cancel();this._close_dlg.hide();},_setClosedlgAttr:function(_2){this._close_dlg=_2;}});}