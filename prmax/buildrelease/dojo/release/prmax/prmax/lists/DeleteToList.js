/*
	Copyright (c) 2004-2011, The Dojo Foundation All Rights Reserved.
	Available via Academic Free License >= 2.1 OR the modified BSD license.
	see: http://dojotoolkit.org/license for details
*/


if(!dojo._hasResource["prmax.lists.DeleteToList"]){dojo._hasResource["prmax.lists.DeleteToList"]=true;dojo.provide("prmax.lists.DeleteToList");dojo.declare("prmax.lists.DeleteToList",[ttl.BaseWidget],{selected:-1,widgetsInTemplate:true,templateString:"<div style=\"width:430px;height:200px\">\r\n<form  class=\"prmaxdefault\" dojoAttachPoint=\"requiredNode\" onSubmit=\"return false\" dojoType=\"dijit.form.Form\">\r\n<table width=\"100%\" class=\"prmaxtable\" >\r\n<tr><td colspan=\"2\">&nbsp;</td></tr>\r\n<tr><td class=\"prmaxrowtag\" valign=\"top\">Selection from search</td><td><div name=\"deleteoptions\" dojoAttachPoint=\"source\" dojoType=\"prmax.common.SelectOptions\" i></td></tr>\r\n<tr><td colspan=\"2\">&nbsp;</td></tr>\r\n<tr><td colspan=\"2\" align=\"right\"><button class=\"prmaxbutton\" iconClass=\"dijitPrmaxIcon dijitPrmaxDelete\"  type=\"button\" dojoAttachEvent=\"onClick:_SubmitForm\" dojoAttachPoint=\"saveNode\" dojoType=\"dojox.form.BusyButton\" busyLabel=\"Please Wait Deleteing ...\" label=\"Delete\"></button>\r\n</td></tr>\r\n</table>\r\n</form>\r\n<br/>\r\n<p><b>This button does not remove entries from your list.</b></p>\r\n<p>To delete from your list, please use the Save button and then Save To Existing List - choosing to Overwrite your list with either the Selected or Unselected entries.</p>\r\n</div>\r\n",constructor:function(){this._DeleteListCall=dojo.hitch(this,this._DeleteList);},postCreate:function(){this.source.setOptions(this.selected);dojo.connect(this.requiredNode,"onSubmit",dojo.hitch(this,this._Submit));},_SubmitForm:function(){this.requiredNode.submit();},_Submit:function(){if(confirm("Remove entries from search results?")==false){this.saveNode.cancel();return;}dojo.xhrPost(ttl.utilities.makeParams({load:this._DeleteListCall,url:"search/sessiondelete",content:this.requiredNode.get("value")}));},_DeleteList:function(_1){if(_1.success=="OK"){dojo.publish(PRCOMMON.Events.SearchSession_Changed,[_1.data]);dojo.publish(PRCOMMON.Events.Display_Clear,[false]);PRMAX.search.stdDialog.hide();}else{alert("Problem Deleting Selection");}this.saveNode.cancel();}});}