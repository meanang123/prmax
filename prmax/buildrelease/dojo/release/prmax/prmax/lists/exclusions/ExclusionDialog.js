/*
	Copyright (c) 2004-2011, The Dojo Foundation All Rights Reserved.
	Available via Academic Free License >= 2.1 OR the modified BSD license.
	see: http://dojotoolkit.org/license for details
*/


if(!dojo._hasResource["prmax.lists.exclusions.ExclusionDialog"]){dojo._hasResource["prmax.lists.exclusions.ExclusionDialog"]=true;dojo.provide("prmax.lists.exclusions.ExclusionDialog");dojo.require("ttl.BaseWidget");dojo.declare("prmax.lists.exclusions.ExclusionDialog",[ttl.BaseWidget],{widgetsInTemplate:true,templateString:"<div>\r\n\t<div data-dojo-type=\"dijit.Dialog\" data-dojo-props='title:\"Remove Excluded Outlets/Contacts from the list\"' data-dojo-attach-point=\"dlg_ctrl\" >\r\n\t\t<form class=\"prmaxdefault\" data-dojo-attach-point=\"form\" onSubmit=\"return false\" data-dojo-type=\"dijit.form.Form\">\r\n\t\t\t<input type=\"hidden\" name=\"searchtypeid\" value=\"1\" data-dojo-attach-point=\"searchtypeid\">\r\n\r\n\t\t\t<table width=\"100%\" class=\"prmaxtable\" >\r\n\t\t\t\t<tr><td colspan=\"2\">&nbsp;</td></tr>\r\n\t\t\t\t<tr><td class=\"prmaxrowtag\" colspan=\"2\" valign=\"top\">Restrict To</td>\r\n\t\t\t\t<td><table width=\"100%\" class=\"prmaxtable\">\r\n\t\t\t\t<tr><td class=\"prmaxrowtag\"><label data-dojo-attach-point=\"l_all\">All</label></td><td><input data-dojo-props=\"name:'restict',value:'0',type:'radio',checked:true\" data-dojo-type=\"dijit.form.RadioButton\" data-dojo-attach-point=\"c_all\"></td></tr>\r\n\t\t\t\t<tr><td class=\"prmaxrowtag\"><label data-dojo-attach-point=\"l_out\">Outlets</label></td><td><input data-dojo-props=\"name:'restict',value:'1',type:'radio'\" data-dojo-type=\"dijit.form.RadioButton\" data-dojo-attach-point=\"c_out\"></td></tr>\r\n\t\t\t\t<tr><td class=\"prmaxrowtag\"><label data-dojo-attach-point=\"l_emp\">Employees</label></td><td><input data-dojo-props=\"name:'restict',value:'2',type:'radio'\" data-dojo-type=\"dijit.form.RadioButton\" data-dojo-attach-point=\"c_emp\"></td></tr>\r\n\t\t\t</table></td></tr>\r\n\t\t\t\t<tr><td colspan=\"2\">&nbsp;</td></tr>\r\n\t\t\t\t<tr>\r\n\t\t\t\t\t\t<td align=\"left\"><button data-dojo-attach-event = \"onClick:_Close\"\r\n\t\t\t\t\t\t\t\t\t\t\t\tdata-dojo-type=\"dijit.form.Button\"\r\n\t\t\t\t\t\t\t\t\t\t\t\tdata-dojo-props=\"type:'button',label:'Close'\"></button></td><td>\r\n\t\t\t\t\t\t<td align=\"right\">\r\n\t\t\t\t\t\t\t<button class=\"prmaxbutton\"\r\n\t\t\t\t\t\t\t\tdata-dojo-props='iconClass:\"dijitPrmaxIcon dijitPrmaxDelete\",type:\"button\",busyLabel:\"Please Wait Removing ...\",label:\"Removing\",\"class\":\"prmaxbutton\"'\r\n\t\t\t\t\t\t\t\tdata-dojo-attach-event = \"onClick:_SubmitForm\"\r\n\t\t\t\t\t\t\t\tdata-dojo-attach-point=\"saveNode\"\r\n\t\t\t\t\t\t\t\tdata-dojo-type=\"dojox.form.BusyButton\" ></button></td></tr>\r\n\t\t\t</table>\r\n\t\t</form>\r\n\t</div>\r\n</div>\r\n",constructor:function(){this._SubmittedCallBack=dojo.hitch(this,this._SubmittedCall);},postCreate:function(){this.inherited(arguments);},_SubmittedCall:function(_1){if(_1.success=="OK"){dojo.publish(PRCOMMON.Events.SearchSession_Changed,[_1.data]);dojo.publish(PRCOMMON.Events.Display_Clear,[false]);this.dlg_ctrl.hide();}else{alert("Problem Removeign Exclustion List");}this.saveNode.cancel();},ShowDlg:function(){this.saveNode.cancel();this.c_all.set("checked",true);this.dlg_ctrl.show();},_SubmitForm:function(){if(confirm("Remove Exclusions from selection")){dojo.xhrPost(ttl.utilities.makeParams({load:this._SubmittedCallBack,url:"/search/exclusion",content:this.form.get("value")}));}else{this.saveNode.cancel();}},_Close:function(){this.dlg_ctrl.hide();}});}