/*
	Copyright (c) 2004-2011, The Dojo Foundation All Rights Reserved.
	Available via Academic Free License >= 2.1 OR the modified BSD license.
	see: http://dojotoolkit.org/license for details
*/


if(!dojo._hasResource["prmax.display.startup.plugins.prrequests"]){dojo._hasResource["prmax.display.startup.plugins.prrequests"]=true;dojo.provide("prmax.display.startup.plugins.prrequests");dojo.require("dojox.widget.Portlet");dojo.require("prmax.prrequest.view");dojo.declare("prmax.display.startup.plugins.prrequests",[ttl.BaseWidget],{templateString:dojo.cache("prmax","display/startup/plugins/templates/prrequests.html","<div>\r\n\t<div data-dojo-type=\"dojox.widget.Portlet\" data-dojo-attach-point=\"portlet\" data-dojo-props='title:\"Journalists&#39; Requests\", dndType:\"Portlet\", closable:false, style:\"width:100%;height:100%\",  toggleable:false, dragRestriction:true'>\r\n\t\t<div data-dojo-attach-point=\"borderCtrl\" data-dojo-type=\"dijit.layout.BorderContainer\" data-dojo-props='style:\"width:100%;height:170px\", gutters:false'>\r\n\t\t\t<div data-dojo-type=\"dijit.layout.ContentPane\" data-dojo-props='region:\"top\", style:\"width:100%;height:20px\"'>\r\n\t\t\t\t<div data-dojo-type=\"dijit.Toolbar\" data-dojo-props='style:\"height:99%;width:100%;padding:0px;margin:0px\"'>\r\n\t\t\t\t\t<div data-dojo-type=\"dijit.form.DropDownButton\" data-dojo-props='iconClass:\"PRMaxSmallIcon PRMaxSmallFilterIcon\",label:\"Filter\",showLabel:false'>\r\n\t\t\t\t\t\t<div data-dojo-type=\"dijit.TooltipDialog\" data-dojo-props='title:\"Filter By\"' data-dojo-attach-event=\"execute:_execute_filter\">\r\n\t\t\t\t\t\t\t<table width=\"500px\" cellpadding=\"0\" cellspacing=\"0\">\r\n\t\t\t\t\t\t\t\t<tr><td style=\"width:100px\" class=\"prmaxlabel\">Phrase</td><td><input data-dojo-type=\"dijit.form.TextBox\" data-dojo-attach-point=\"pprrequest\" data-dojo-props='name:\"pprrequest\",type:\"text\"' ></td></tr>\r\n\t\t\t\t\t\t\t\t<tr><td><br/></td></tr>\r\n\t\t\t\t\t\t\t\t<tr>\r\n\t\t\t\t\t\t\t\t\t<td align=\"left\"><button data-dojo-attach-event=\"onClick: _clear_filter\" data-dojo-type=\"dijit.form.Button\" data-dojo-props='type:\"button\"' >Clear Filter</button></td>\r\n\t\t\t\t\t\t\t\t\t<td align=\"right\"><button data-dojo-type=\"dijit.form.Button\" data-dojo-props='type:\"submit\",name:\"submit\"'>Filter</button></td>\r\n\t\t\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t\t\t</table>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t<div data-dojo-attach-event=\"onClick:_refresh\" data-dojo-type=\"dijit.form.Button\" data-dojo-props='iconClass:\"PRMaxSmallIcon PRMaxSmallSearchIcon\",label:\"Refresh\",showLabel:false'></div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t<div data-dojo-attach-point=\"ppr_request_ctrl\" data-dojo-type=\"prmax.prrequest.view\" data-dojo-props='region:\"center\"'></div>\r\n\t\t</div>\r\n\t</div>\r\n</div>\r\n"),height:170,constructor:function(){},postCreate:function(){this.borderCtrl.resize({w:400,h:this.height});this.inherited(arguments);},startup:function(){this.inherited(arguments);setTimeout(dojo.hitch(this,this.correct_start_up_size),400);},resize:function(){this.inherited(arguments);},correct_start_up_size:function(){var _1=dojo.position(this.portlet.domNode,true);var _2=_1.w-10;this.borderCtrl.resize({w:_2,h:this.height});this.ppr_request_ctrl.grid.resize({w:_2,h:this.height});},_execute_filter:function(){var _3={};var _4=this.pprrequest.get("value");if(_4.length>0){_3["phrase"]=_4;}this.ppr_request_ctrl.filter(_3);},_clear_filter:function(){this.pprrequest.set("value","");},_refresh:function(){this.ppr_request_ctrl.filter({});}});}