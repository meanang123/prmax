/*
	Copyright (c) 2004-2011, The Dojo Foundation All Rights Reserved.
	Available via Academic Free License >= 2.1 OR the modified BSD license.
	see: http://dojotoolkit.org/license for details
*/


if(!dojo._hasResource["prmax.pressrelease.seo.edit"]){dojo._hasResource["prmax.pressrelease.seo.edit"]=true;dojo.provide("prmax.pressrelease.seo.edit");dojo.require("dijit.Editor");dojo.require("ttl.form.ValidationTextarea");dojo.require("dijit.form.TimeTextBox");dojo.require("dijit._editor.plugins.AlwaysShowToolbar");dojo.require("dijit._editor.plugins.ViewSource");dojo.require("dijit._editor.plugins.FontChoice");dojo.require("dojox.editor.plugins.Preview");dojo.require("prmax.editor.SeoImgLinkDialog");dojo.require("prmax.editor.CollateralDialog");dojo.require("prmax.customer.clients.add");dojo.require("prmax.pressrelease.seo.seoimage");dojo.require("dijit.form.CheckBox");dojo.require("prcommon.newsrooms.globalnewsrooms");dojo.require("dojox.validate");dojo.declare("prmax.pressrelease.seo.edit",[ttl.BaseWidget],{widgetsInTemplate:true,templateString:"<div>\r\n\t<div data-dojo-attach-point=\"frame\" data-dojo-type=\"dijit.layout.BorderContainer\" data-dojo-props='gutters:false,style:\"width:100%;height:100%\"'>\r\n\t\t<div data-dojo-type=\"dijit.layout.ContentPane\" data-dojo-props='region:\"left\",style:\"overflow:auto;width:50%;height:100%\",splitter:true'>\r\n\t\t\t<form data-dojo-attach-point=\"form\" data-dojo-type=\"dijit.form.Form\" data-dojo-props='\"class\":\"prmaxdefault\",onsubmit:\"return false\"'>\r\n\t\t\t\t<input data-dojo-type=\"dijit.form.TextBox\" data-dojo-attach-point=\"emailtemplateid\" data-dojo-props='name:\"emailtemplateid\",type:\"hidden\"' >\r\n\t\t\t\t<input data-dojo-type=\"dijit.form.TextBox\" data-dojo-attach-point=\"seoreleaseid\" data-dojo-props='name:\"seoreleaseid\",type:\"hidden\",value:\"-1\"' >\r\n\t\t\t\t<table>\r\n\t\t\t\t\t<tr><td align=\"right\" class=\"prmaxrowtag\">Headline</td><td><input data-dojo-type=\"dijit.form.ValidationTextBox\" data-dojo-attach-point=\"headline\" data-dojo-props='\"class\":\"prmaxrequired\",name:\"headline\",required:true,trim:true,maxLength:120,promptMessage:\"Typically this will be the headline from your press release and PRmax automatically adds your original headline for the release into the field but you can change and edit it if you choose\",missingMessage:\"Typically this will be the headline from your press release and PRmax automatically adds your original headline for the release into the field but you can change and edit it if you choose\",type:\"text\",style:\"width:30em\"' ></td></tr>\r\n\t\t\t\t\t<tr><td align=\"right\" valign=\"top\" class=\"prmaxrowtag\">Synopsis</td><td><textarea data-dojo-props='maxLength:254, \"class\":\"prmaxrequired\",name:\"synopsis\",rows:2,cols:49,required:true,promptMessage:\"This can be a summary of the content of your press release or an extract from the first few lines of the press release included automatically by PRmax\",missingMessage:\"This can be a summary of the content of your press release or an extract from the first few lines of the press release included automatically by PRmax\"' data-dojo-type=\"ttl.form.ValidationTextarea\" data-dojo-attach-point=\"synopsis\"></textarea></td></tr>\r\n\t\t\t\t\t<tr><td align=\"right\" class=\"prmaxrowtag\">Keywords</td><td><input data-dojo-type=\"dijit.form.ValidationTextBox\" data-dojo-attach-point=\"keywords\" data-dojo-props='\"class\":\"prmaxrequired\",name:\"keywords\",required:true,trim:true,maxLength:120, promptMessage:\"Enter the keywords separated by a space that reflect the main subject areas of your press release to enable journalists to easily and quickly find your release when they search the Internet\", missingMessage:\"Enter the keywords separated by a space that reflect the main subject areas of your press release to enable journalists to easily and quickly find your release when they search the Internet\", type:\"text\",style:\"width:30em\"' ></td></tr>\r\n\t\t\t\t\t<tr><td align=\"right\" valign=\"top\" class=\"prmaxrowtag\">Categories<br/><br/><label class=\"prmaxrowtagcomment\">Tick the subject category boxes that relate to your release</label></td>\r\n\t\t\t\t\t\t\t<td>\r\n\t\t\t\t\t\t\t<table>\r\n\t\t\t\t\t\t\t\t<tr><td><input data-dojo-type=\"dijit.form.CheckBox\" data-dojo-attach-point=\"cat_1\" data-dojo-props='name:\"cat_1\",type:\"checkbox\"'><label>Arts &amp; Entertainment</label></td><td><input data-dojo-type=\"dijit.form.CheckBox\" data-dojo-attach-point=\"cat_14\" data-dojo-props='name:\"cat_14\",type:\"checkbox\"'><label>Homes &amp; Gardens</label></td></tr>\r\n\t\t\t\t\t\t\t\t<tr><td><input data-dojo-type=\"dijit.form.CheckBox\" data-dojo-attach-point=\"cat_2\" data-dojo-props='name:\"cat_2\",type:\"checkbox\"'><label>Automotive, Shipping &amp; Aviation</label></td><td><input data-dojo-type=\"dijit.form.CheckBox\" data-dojo-attach-point=\"cat_15\" data-dojo-props='name:\"cat_15\",type:\"checkbox\"'><label>Manufacturing Industry</label></td></tr>\r\n\t\t\t\t\t\t\t\t<tr><td><input data-dojo-type=\"dijit.form.CheckBox\" data-dojo-attach-point=\"cat_3\" data-dojo-props='name:\"cat_3\",type:\"checkbox\"'><label>Business &amp; Finance</label></td><td><input data-dojo-type=\"dijit.form.CheckBox\" data-dojo-attach-point=\"cat_16\" data-dojo-props='name:\"cat_16\",type:\"checkbox\"'><label>Media &amp; Marketing</label></td></tr>\r\n\t\t\t\t\t\t\t\t<tr><td><input data-dojo-type=\"dijit.form.CheckBox\" data-dojo-attach-point=\"cat_4\" data-dojo-props='name:\"cat_4\",type:\"checkbox\"'><label>Charities</label></td><td><input data-dojo-type=\"dijit.form.CheckBox\" data-dojo-attach-point=\"cat_17\" data-dojo-props='name:\"cat_17\",type:\"checkbox\"'><label>Mens Interests</label></td></tr>\r\n\t\t\t\t\t\t\t\t<tr><td><input data-dojo-type=\"dijit.form.CheckBox\" data-dojo-attach-point=\"cat_5\" data-dojo-props='name:\"cat_5\",type:\"checkbox\"'><label>Children, Youths &amp; Family Life</label></td><td><input data-dojo-type=\"dijit.form.CheckBox\" data-dojo-attach-point=\"cat_18\" data-dojo-props='name:\"cat_18\",type:\"checkbox\"'><label>Retailing &amp; Wholesaling</label></td></tr>\r\n\t\t\t\t\t\t\t\t<tr><td><input data-dojo-type=\"dijit.form.CheckBox\" data-dojo-attach-point=\"cat_6\" data-dojo-props='name:\"cat_6\",type:\"checkbox\"'><label>Construction</label></td><td><input data-dojo-type=\"dijit.form.CheckBox\" data-dojo-attach-point=\"cat_19\" data-dojo-props='name:\"cat_19\",type:\"checkbox\"'><label>Science &amp; Medicine</label></td></tr>\r\n\t\t\t\t\t\t\t\t<tr><td><input data-dojo-type=\"dijit.form.CheckBox\" data-dojo-attach-point=\"cat_7\" data-dojo-props='name:\"cat_7\",type:\"checkbox\"'><label>Crafts &amp; Hobbies</label></td><td><input data-dojo-type=\"dijit.form.CheckBox\" data-dojo-attach-point=\"cat_20\" data-dojo-props='name:\"cat_20\",type:\"checkbox\"'><label>Sport, Health &amp; Fitness</label></td></tr>\r\n\t\t\t\t\t\t\t\t<tr><td><input data-dojo-type=\"dijit.form.CheckBox\" data-dojo-attach-point=\"cat_8\" data-dojo-props='name:\"cat_8\",type:\"checkbox\"'><label>Energy</label></td><td><input data-dojo-type=\"dijit.form.CheckBox\" data-dojo-attach-point=\"cat_21\" data-dojo-props='name:\"cat_21\",type:\"checkbox\"'><label>Technology</label></td><tr>\r\n\t\t\t\t\t\t\t\t<tr><td><input data-dojo-type=\"dijit.form.CheckBox\" data-dojo-attach-point=\"cat_9\" data-dojo-props='name:\"cat_9\",type:\"checkbox\"'><label>Environment &amp; Animals</label></td><td><input data-dojo-type=\"dijit.form.CheckBox\" data-dojo-attach-point=\"cat_22\" data-dojo-props='name:\"cat_22\",type:\"checkbox\"'><label>Trade, Transport &amp; the Supply Chain</label></td></tr>\r\n\t\t\t\t\t\t\t\t<tr><td><input data-dojo-type=\"dijit.form.CheckBox\" data-dojo-attach-point=\"cat_10\" data-dojo-props='name:\"cat_10\",type:\"checkbox\"'><label>Farming, Fishing &amp; Forestry</label></td><td><input data-dojo-type=\"dijit.form.CheckBox\" data-dojo-attach-point=\"cat_23\" data-dojo-props='name:\"cat_23\",type:\"checkbox\"'><label>Travel &amp; Tourism</label></td></tr>\r\n\t\t\t\t\t\t\t\t<tr><td><input data-dojo-type=\"dijit.form.CheckBox\" data-dojo-attach-point=\"cat_11\" data-dojo-props='name:\"cat_11\",type:\"checkbox\"'><label>Fashion &amp; Beauty</label></td><td><input data-dojo-type=\"dijit.form.CheckBox\" data-dojo-attach-point=\"cat_24\" data-dojo-props='name:\"cat_24\",type:\"checkbox\"'><label>Womans Interests</label></td></tr>\r\n\t\t\t\t\t\t\t\t<tr><td><input data-dojo-type=\"dijit.form.CheckBox\" data-dojo-attach-point=\"cat_12\" data-dojo-props='name:\"cat_12\",type:\"checkbox\"'><label>Food, Drink &amp; Hospitality</label></td><td><input data-dojo-type=\"dijit.form.CheckBox\" data-dojo-attach-point=\"cat_25\" data-dojo-props='name:\"cat_25\",type:\"checkbox\"'><label>Work &amp; Education</label></td></tr>\r\n\t\t\t\t\t\t\t\t<tr><td><input data-dojo-type=\"dijit.form.CheckBox\" data-dojo-attach-point=\"cat_13\" data-dojo-props='name:\"cat_13\",type:\"checkbox\"'><label>Government, Defence &amp; Law</label></td></tr>\r\n\t\t\t\t\t\t\t</table>\r\n\t\t\t\t\t\t</td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t\t<tr data-dojo-attach-point=\"language_node\" data-dojo-props='\"class\":\"prmaxhidden\"'><td>Language</td><td><select data-dojo-props='style:\"width:15em\",name:\"languageid\",autoComplete:true,searchAttr:\"name\",required:false,placeHolder:\"No Selection\"' data-dojo-type=\"dijit.form.FilteringSelect\" data-dojo-attach-point=\"languageid\" data-dojo-attach-event=\"onChange:_change_lang\"></select></td><tr>\r\n\t\t\t\t\t<tr data-dojo-attach-point=\"tranlatedseo_node\" data-dojo-props='\"class\":\"prmaxhidden\"'><td>Translated SEO</td><td><select data-dojo-props='style:\"width:15em\",name:\"translatedseoreleaseid\",autoComplete:true,searchAttr:\"name\",required:false,placeHolder:\"No Selection\"' data-dojo-type=\"dijit.form.FilteringSelect\" data-dojo-attach-point=\"translatedseoreleaseid\"></select></td><tr>\r\n\r\n\t\t\t\t\t<tr data-dojo-attach-point=\"globalnewsrooms_tr\"><td>Newsroom</td><td><span><input data-dojo-attach-point=\"option0\" data-dojo-attach-event=\"onClick:_option_changed\" data-dojo-props='\"class\":\"prmaxlabeltag\",type:\"radio\",name:\"is_client_newsroom\",value:\"1\",checked:\"checked\"' data-dojo-type=\"dijit.form.RadioButton\" /><label>Client</label></span>\r\n\t\t\t\t\t\t\t\t\t <span><input data-dojo-attach-point=\"option1\" data-dojo-attach-event=\"onClick:_option_changed\" data-dojo-props='\"class\":\"prmaxlabeltag\",type:\"radio\",name:\"is_client_newsroom\",value:\"0\"' data-dojo-type=\"dijit.form.RadioButton\" /><label>Global</label></span></td></tr>\r\n\t\t\t\t\t<tr>\r\n\t\t\t\t\t\t<td valign=\"top\" align=\"right\" class=\"prmaxrowtag\" data-dojo-attach-point=\"client_name\"></td>\r\n\t\t\t\t\t\t<td>\r\n\t\t\t\t\t\t\t<select data-dojo-props='name:\"clientid\",autoComplete:true,searchAttr:\"clientname\",labelType:\"html\",promptMessage:\"If appropriate add the name of the brand or service that the press release relates to.\", missingMessage:\"If appropriate add the name of the brand or service that the press release relates to.\"' data-dojo-type=\"dijit.form.FilteringSelect\" data-dojo-attach-point=\"clientid\" data-dojo-attach-event=\"onChange:_ChangeClient\"></select>\r\n\t\t\t\t\t\t\t<button data-dojo-attach-point=\"addclientbtn\" data-dojo-attach-event=\"onClick: _New_Client\" data-dojo-type=\"dijit.form.Button\" data-dojo-props='type:\"button\",\"class\":\"prmaxdefault\"' >New</button>\r\n\t\t\t\t\t\t</td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t\t<tr>\r\n\t\t\t\t\t\t<td colspan=\"2\">\r\n\t\t\t\t\t\t\t<div data-dojo-attach-point=\"globalnewsrooms_node\" data-dojo-props='\"class\":\"prmaxhidden\",style:\"height:160px;width:49%;float:left;padding:0px;margin:0px\"'>\r\n\t\t\t\t\t\t\t\t<div data-dojo-attach-point=\"globalnewsrooms\" data-dojo-props='startopen:true, size:6, searchmode:true, selectonly:false,orderbtns:false,style:\"width:450px\",name:\"newsrooms\", \"class\":\"prmaxhidden\"' data-dojo-type=\"prcommon.newsrooms.globalnewsrooms\"></div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</td>\r\n\t\t\t\t\t</tr>\r\n\r\n\t\t\t\t\t<tr><td><label>Is Capital Ambition?</label></td><td><input data-dojo-type=\"dijit.form.CheckBox\" data-dojo-attach-point=\"iskeytopic\" data-dojo-props='name:\"iskeytopic\",type:\"checkbox\"'></td></tr>\r\n\r\n\t\t\t\t\t<tr><td align=\"right\" class=\"prmaxrowtag\" data-dojo-attach-point=\"companyname_label\">Company Name</td><td><input data-dojo-type=\"dijit.form.ValidationTextBox\" data-dojo-attach-point=\"companyname\" data-dojo-props='\"class\":\"prmaxrequired\",name:\"companyname\",required:true,trim:true,maxLength:120,promptMessage:\"Add the name of the company that the press release relates to\",missingMessage:\"Add the name of the company that the press release related to\",type:\"text\",style:\"width:20em\"' ></td></tr>\r\n\t\t\t\t\t<tr><td align=\"right\" class=\"prmaxrowtag\" data-dojo-attach-point=\"www_label\">Www</td><td><input data-dojo-attach-point=\"www\" data-dojo-props='name:\"www\",type:\"text\",size:\"40\",maxLength:\"90\",trim:true,style:\"width:25em\",regExpGen:dojox.validate.regexp.url,promptMessage:\"The main web site that relates to the content of the press release\",missingMessage:\"The main web site that relates to the content of the press release\"' data-dojo-type=\"dijit.form.ValidationTextBox\"/></td></tr>\r\n\t\t\t\t\t<tr><td align=\"right\" class=\"prmaxrowtag\" data-dojo-attach-point=\"email_label\">Email</td><td><input data-dojo-attach-point=\"email\" data-dojo-props='name:\"email\",type:\"text\",size:\"40\",maxLength:\"84\",trim:true,style:\"width:25em\",regExpGen:dojox.validate.regexp.emailAddress,promptMessage:\"The main email address for media enquiries about the release\",missingMessage:\"The main email address for media enquiries about the release\"' data-dojo-type=\"dijit.form.ValidationTextBox\"/></td></tr>\r\n\t\t\t\t\t<tr><td align=\"right\" class=\"prmaxrowtag\" data-dojo-attach-point=\"tel_label\">Tel</td><td><input data-dojo-attach-point=\"tel\" data-dojo-props='name:\"tel\",type:\"text\",maxLength:\"40\",style:\"15em\",missingMessage:\"The main telephone number for media enquiries about the release\",promptMessage:\"The main telephone number for media enquiries about the release\"' data-dojo-type=\"dijit.form.ValidationTextBox\"/></td></tr>\r\n\t\t\t\t\t<tr><td align=\"right\" class=\"prmaxrowtag\" data-dojo-attach-point=\"twitter_label\">Twitter</td><td><input data-dojo-attach-point=\"twitter\" data-dojo-props='\"class\":\"prmaxinput\",name:\"twitter\",type:\"text\",maxLength:\"90\",regExpGen:dojox.validate.regexp.url,trim:true,style:\"width:25em\",missingMessage:\"The main Twitter account that relates to the content of the press release\",promptMessage:\"The main Twitter account that relates to the content of the press release\"' data-dojo-type=\"dijit.form.ValidationTextBox\" /></td></tr>\r\n\t\t\t\t\t<tr><td align=\"right\" class=\"prmaxrowtag\" data-dojo-attach-point=\"facebook_label\">Facebook</td><td><input data-dojo-attach-point=\"facebook\" data-dojo-props='\"class\":\"prmaxinput\",name:\"facebook\",type:\"text\",maxLength:\"90\",regExpGen:dojox.validate.regexp.url,trim:true,style:\"width:25em\",promptMessage:\"The main Facebook account that relates to the content of the press release\",missingMessage:\"The main Facebook account that relates to the content of the press release\"' data-dojo-type=\"dijit.form.ValidationTextBox\" /></td></tr>\r\n\t\t\t\t\t<tr><td align=\"right\" class=\"prmaxrowtag\" data-dojo-attach-point=\"linkedin_label\">Linkedin</td><td><input data-dojo-attach-point=\"linkedin\" data-dojo-props='\"class\":\"prmaxinput\",name:\"linkedin\",type:\"text\",maxLength:\"80\",regExpGen:dojox.validate.regexp.url,trim:true,style:\"width:25em\",promptMessage:\"The main LinkedIn account that relates to the content of the press release\",missingMessage:\"The main LinkedIn account that relates to the content of the press release\"' data-dojo-type=\"dijit.form.ValidationTextBox\" /></td></tr>\r\n\t\t\t\t\t<tr><td align=\"right\" class=\"prmaxrowtag\" data-dojo-attach-point=\"instagram_label\">Instagram</td><td><input data-dojo-attach-point=\"instagram\" data-dojo-props='\"class\":\"prmaxinput\",name:\"instagram\",type:\"text\",maxLength:\"80\",regExpGen:dojox.validate.regexp.url,trim:true,style:\"width:25em\",promptMessage:\"The main Instagram account that relates to the content of the press release\",missingMessage:\"The main Instagram account that relates to the content of the press release\"' data-dojo-type=\"dijit.form.ValidationTextBox\" /></td></tr>\r\n\t\t\t\t\t<tr><td align=\"right\" class=\"prmaxrowtag\" valign=\"top\" >Image</td><td><div data-dojo-type=\"prmax.pressrelease.seo.seoimage\" data-dojo-attach-point=\"seoimage\" data-dojo-props='style:\"width:350px;height:120px\"'></div></td></tr>\r\n\t\t\t\t</table>\r\n\t\t\t</form>\r\n\r\n\t\t</div>\r\n\t\t<div data-dojo-type=\"dijit.Editor\" data-dojo-attach-point=\"seocontent\" data-dojo-props='\"class\":\"bordered\",region:\"center\",extraPlugins:[{name:\"dijit._editor.plugins.FontChoice\",command:\"fontName\", generic:false},\"fontSize\",\"createLink\",\"viewsource\",\"preview\",\"seoinsertimage\",\"insertCollateral\"],splitter:true' ></div>\r\n\t</div>\r\n\t<div data-dojo-type=\"dijit.Dialog\" data-dojo-attach-point=\"client_add_dialog\" data-dojo-props='title:\"Add New Client\",style:\"width:700px;height:600px\"'>\r\n\t\t<div data-dojo-type=\"prmax.customer.clients.add\" data-dojo-attach-point=\"client_add_ctrl\"></div>\r\n\t</div>\r\n</div>\r\n",constructor:function(){this._languages=new dojo.data.ItemFileReadStore({url:"/common/lookups?searchtype=languages&nofilter=1"});this._nochange=false;this._LoadCallBack=dojo.hitch(this,this._LoadCall);this._SavedCallBack=dojo.hitch(this,this._SavedCall);this._Client_Add_Call_Back=dojo.hitch(this,this._Client_Add_Call);this._call_back=null;this._client_data=new dojox.data.QueryReadStore({url:"/clients/combo",onError:ttl.utilities.globalerrorchecker,clearOnClose:true,urlPreventCache:true});this._translatedseorelease=new dojox.data.JsonRestStore({target:"/emails/seorelease/list_rest",idAttribute:"id"});},postCreate:function(){dojo.attr(this.client_name,"innerHTML",PRMAX.utils.settings.client_name);this.client_add_dialog.set("title","Add New "+PRMAX.utils.settings.client_name);this.clientid.store=this._client_data;this.clientid.set("value",-1);this._Client_Get_Call_Back=dojo.hitch(this,this._Client_Get_Call);this.translatedseoreleaseid.store=this._translatedseorelease;this._has_global_newsrooms=PRMAX.utils.settings.has_global_newsroom;this._is_client_newsroom=true;this.languageid.set("store",this._languages);this.languageid.set("value",1945);this.inherited(arguments);if(PRMAX.utils.settings.cid==5454){dojo.removeClass(this.tranlatedseo_node,"prmaxhidden");dojo.removeClass(this.language_node,"prmaxhidden");}else{dojo.addClass(this.tranlatedseo_node,"prmaxhidden");dojo.addClass(this.language_node,"prmaxhidden");}},_LoadCall:function(_1){if(_1.success=="OK"){this.Load(_1.data.emailtemplateid,_1.data);}else{}},_SavedCall:function(_2){if(_2.success=="OK"){this.seoreleaseid.set("value",_2.data.seoreleaseid);if(this._call_back!=null){this._call_back(_2.data);}alert("SEO Release Updated");}else{alert("Problem updating SEO Release");}},LoadDefault:function(_3){this.emailtemplateid.set("value",_3);},LoadSeo:function(_4,_5){this._call_back=_5;dojo.xhrPost(ttl.utilities.makeParams({load:this._LoadCallBack,url:"/emails/seorelease/get",content:{seoreleaseid:_4}}));},Load:function(_6,_7){this.LoadDefault(_6);this._Load(_7);},_change_lang:function(){this.translatedseoreleaseid.set("query",{languageid:this.languageid.get("value")});this.translatedseoreleaseid.value=-1;},_Load:function(_8){this.translatedseoreleaseid.set("query",{languageid:_8.languageid});this._nochange=true;for(var x=1;x<26;x++){this["cat_"+x].set("value",_8["cat_"+x]);}this.clientid.set("value",(_8.clientid==null)?-1:_8.clientid);this._nochange=false;this.seocontent.set("value",_8.content);this.emailtemplateid.set("value",_8.emailtemplateid);this.seoreleaseid.set("value",_8.seoreleaseid);this.headline.set("value",_8.headline);this.synopsis.set("value",_8.synopsis);this.keywords.set("value",_8.keywords);this.seoimage.set("value",(_8.seoimageid==null)?-1:_8.seoimageid);this._is_client_newsroom=_8.is_client_newsroom;this.languageid.set("value",_8.languageid);this.translatedseoreleaseid.set("value",_8.translatedseoreleaseid);this.iskeytopic.set("value",_8.iskeytopic);if(this._has_global_newsrooms){dojo.removeClass(this.globalnewsrooms_tr,"prmaxhidden");if(_8.is_client_newsroom==false&&_8.newsrooms.length>0){this.option1.set("checked",true);this._show_hide_fields("globalnewsrooms",_8);this.globalnewsrooms.set("value",_8.newsrooms);this.clientid.set("value",-1);}else{this.option0.set("checked",true);this._show_hide_fields("client");this.globalnewsrooms.Clear();this.companyname.set("value",_8.companyname);this.www.set("value",_8.www);this.email.set("value",_8.email);this.tel.set("value",_8.tel);this.twitter.set("value",_8.twitter);this.facebook.set("value",_8.facebook);this.linkedin.set("value",_8.linkedin);this.instagram.set("value",_8.instagram);}}else{dojo.addClass(this.globalnewsrooms_tr,"prmaxhidden");this._show_hide_fields("client");this.companyname.set("value",_8.companyname);this.www.set("value",_8.www);this.email.set("value",_8.email);this.tel.set("value",_8.tel);this.twitter.set("value",_8.twitter);this.facebook.set("value",_8.facebook);this.linkedin.set("value",_8.linkedin);this.instagram.set("value",_8.instagram);}},Save:function(){if(ttl.utilities.formValidator(this.form)==false){alert("Please Enter Details");return false;}if(this.option1.checked){if(this.globalnewsrooms.value==""){alert("Please Select at least one Global newsroom");return false;}}if(this.synopsis.get("value").length>254){alert("Synopsis too long");return false;}var _9=this.form.get("value");_9["content"]=this.seocontent.get("value");dojo.xhrPost(ttl.utilities.makeParams({load:this._SavedCallBack,url:"/emails/seorelease/save",content:_9}));return true;},Clear:function(){this.emailtemplateid.set("value","-1");this.seoreleaseid.set("value","-1");this.headline.set("value","");this.synopsis.set("value","");this.companyname.set("value","");this.keywords.set("value","");this.www.set("value","");this.email.set("value","");this.tel.set("value","");this.twitter.set("value","");this.facebook.set("value","");this.linkedin.set("value","");this.instagram.set("value","");this.seocontent.set("value","");this.clientid.set("value",-1);this.seoimage.set("value",-1);this.option0.set("checked","checked");this.globalnewsrooms.set("value","");this.languageid.set("value",1945);this._lang=1945;this.translatedseoreleaseid.set("value","");this.iskeytopic.set("value",false);for(var x=1;x<26;x++){this["cat_"+x].set("value",false);}},resize:function(){this.frame.resize(arguments[0]);},isValid:function(){if(ttl.utilities.formValidator(this.form)==false){alert("Please Enter Details");return false;}return true;},seoform:function(_a){var _b=this.form.get("value");_b["content"]=this.seocontent.get("value");return dojo.mixin(_a,_b);},_Client_Get_Call:function(_c){if(_c.success=="OK"){this.www.set("value",_c.data.www);this.email.set("value",_c.data.email);this.tel.set("value",_c.data.tel);this.twitter.set("value",_c.data.twitter);this.facebook.set("value",_c.data.facebook);this.linkedin.set("value",_c.data.linkedin);this.instagram.set("value",_c.data.instagram);this.companyname.set("value",_c.data.clientname);}},_ChangeClient:function(){var _d=this.clientid.get("value");if(_d==2014||_d==1966){dojo.removeClass(this.iskeytopic_tr,"prmaxhidden");}else{dojo.addClass(this.iskeytopic_tr,"prmaxhidden");}if(_d!=-1&&this._nochange==false){dojo.xhrPost(ttl.utilities.makeParams({load:this._Client_Get_Call_Back,url:"/clients/get",content:{clientid:_d}}));}},_Client_Add_Call:function(_e,_f){if(_e==2){this.clientid.set("value",_f.clientid);this.client_add_dialog.hide();}},_New_Client:function(){this.client_add_ctrl.Load(-1,this._Client_Add_Call_Back);this.client_add_dialog.show();},_setSeoreleaseidAttr:function(_10){this.seoreleaseid.set("value",_10);},_option_changed:function(){if(this.option0.get("checked")){this._show_hide_fields("client");this.globalnewsrooms.Clear();}else{if(this.option1.get("checked")){this._show_hide_fields("globalnewsrooms");this.clientid.set("value",-1);}}},_show_hide_fields:function(_11){if(_11=="globalnewsrooms"){dojo.addClass(this.client_name,"prmaxhidden");dojo.addClass(this.clientid.domNode,"prmaxhidden");dojo.addClass(this.addclientbtn.domNode,"prmaxhidden");dojo.removeClass(this.globalnewsrooms_node,"prmaxhidden");dojo.removeClass(this.globalnewsrooms.domNode,"prmaxhidden");dojo.addClass(this.companyname_label,"prmaxhidden");dojo.addClass(this.companyname.domNode,"prmaxhidden");dojo.addClass(this.www_label,"prmaxhidden");dojo.addClass(this.www.domNode,"prmaxhidden");dojo.addClass(this.email_label,"prmaxhidden");dojo.addClass(this.email.domNode,"prmaxhidden");dojo.addClass(this.tel_label,"prmaxhidden");dojo.addClass(this.tel.domNode,"prmaxhidden");dojo.addClass(this.twitter_label,"prmaxhidden");dojo.addClass(this.twitter.domNode,"prmaxhidden");dojo.addClass(this.facebook_label,"prmaxhidden");dojo.addClass(this.facebook.domNode,"prmaxhidden");dojo.addClass(this.linkedin_label,"prmaxhidden");dojo.addClass(this.linkedin.domNode,"prmaxhidden");dojo.addClass(this.instagram_label,"prmaxhidden");dojo.addClass(this.instagram.domNode,"prmaxhidden");}else{if(_11=="client"){dojo.removeClass(this.client_name,"prmaxhidden");dojo.removeClass(this.clientid.domNode,"prmaxhidden");dojo.removeClass(this.addclientbtn.domNode,"prmaxhidden");dojo.addClass(this.globalnewsrooms_node,"prmaxhidden");dojo.addClass(this.globalnewsrooms.domNode,"prmaxhidden");dojo.removeClass(this.companyname_label,"prmaxhidden");dojo.removeClass(this.companyname.domNode,"prmaxhidden");dojo.removeClass(this.www_label,"prmaxhidden");dojo.removeClass(this.www.domNode,"prmaxhidden");dojo.removeClass(this.email_label,"prmaxhidden");dojo.removeClass(this.email.domNode,"prmaxhidden");dojo.removeClass(this.tel_label,"prmaxhidden");dojo.removeClass(this.tel.domNode,"prmaxhidden");dojo.removeClass(this.twitter_label,"prmaxhidden");dojo.removeClass(this.twitter.domNode,"prmaxhidden");dojo.removeClass(this.facebook_label,"prmaxhidden");dojo.removeClass(this.facebook.domNode,"prmaxhidden");dojo.removeClass(this.linkedin_label,"prmaxhidden");dojo.removeClass(this.linkedin.domNode,"prmaxhidden");dojo.removeClass(this.instagram_label,"prmaxhidden");dojo.removeClass(this.instagram.domNode,"prmaxhidden");}}},});}