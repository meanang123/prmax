/*
	Copyright (c) 2004-2011, The Dojo Foundation All Rights Reserved.
	Available via Academic Free License >= 2.1 OR the modified BSD license.
	see: http://dojotoolkit.org/license for details
*/


if(!dojo._hasResource["prmax.pressrelease.removelistmembers"]){dojo._hasResource["prmax.pressrelease.removelistmembers"]=true;dojo.provide("prmax.pressrelease.removelistmembers");dojo.declare("prmax.pressrelease.removelistmembers",[ttl.BaseWidget],{widgetsInTemplate:true,templateString:"<div>\r\n<span class=\"common_prmax_layout\"><br/>\r\n    <form data-dojo-attach-point=\"form_output\" data-dojo-type=\"dijit.form.Form\" data-dojo-props='onSubmit:\"return false\"'>\r\n        <p>Remove members: </p></br></br>      \r\n        <label><input data-dojo-attach-point=\"option0\" data-dojo-props=\"name:'option',value:'0',type:'radio',checked:'checked'\" data-dojo-type=\"dijit.form.RadioButton\">&nbsp;Selected</label></br>\r\n        <label><input data-dojo-attach-point=\"option1\" data-dojo-props=\"name:'option',value:'1',type:'radio'\" data-dojo-type=\"dijit.form.RadioButton\">&nbsp;Non Selected</label></br></br>\r\n        <button data-dojo-attach-event=\"onClick:_close\" data-dojo-attach-point=\"closebtn\" data-dojo-type=\"dijit.form.Button\" data-dojo-props='type:\"button\",label:\"Close\",\"class\":\"btnleft\"'></button>\r\n        <button data-dojo-attach-event=\"onClick:_remove\" data-dojo-attach-point=\"removebtn\" data-dojo-type=\"dijit.form.Button\" data-dojo-props='type:\"button\",label:\"Remove\",\"class\":\"btnright\"'></button>\r\n        <br/><br/>\r\n    </form>\r\n</span>\r\n\r\n</div>\r\n\r\n",constructor:function(){this._RemoveSelectedListMembersCallBack=dojo.hitch(this,this._RemoveSelectedListMembersCall);this.option=0;},postCreate:function(){this.inherited(arguments);},load:function(_1,_2,_3){this._dialog=_1;this._selected_listmemberids=[];for(var x=0;x<_2.length;x++){this._selected_listmemberids.push(_2[x].i.listmemberid);}this._selected_listmemberids=JSON.stringify(this._selected_listmemberids);this._listid=_3;},clear:function(){this.option0.set("checked",true);},_close:function(){if(this._dialog){this._dialog.hide();this.clear();}},_remove:function(){if(confirm("Remove members from Distribution?")){var _4={};if(this.option0.get("checked")){_4["option"]=0;}else{if(this.option1.get("checked")){_4["option"]=1;this.option=1;}}_4["selected_listmemberids"]=this._selected_listmemberids;_4["listid"]=this._listid;dojo.xhrPost(ttl.utilities.makeParams({load:this._RemoveSelectedListMembersCallBack,url:"/lists/list_member_delete_selected",content:_4}));}},_RemoveSelectedListMembersCall:function(_5){if(_5.success=="OK"){dojo.publish("/distribution/listmembers_remove",[this.option]);this._dialog.hide();}else{alert("Problem deleting selected members");}},});}