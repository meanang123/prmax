//>>built
require({cache:{"url:prmaxquestionnaires/main/templates/deskframe.html":"<div>\r\n\t<div data-dojo-type=\"prmaxquestionnaires/main/deskbanner\" data-dojo-props='region:\"top\",style:\"width:100%;height:62px\",title:\"Banner\"'></div>\r\n\t<div data-dojo-type=\"dijit/layout/StackContainer\" data-dojo-attach-point=\"zone_cont\" data-dojo-props='region:\"center\",doLayout:true'>\r\n\t\t<div  data-dojo-props='style:\"width:100%;height:100%\",title:\"maindetails\"' data-dojo-attach-point=\"maindetails\" data-dojo-type=\"prmaxquestionnaires/pages/DeskDetails\" ></div>\r\n\t\t<div  data-dojo-props='style:\"width:100%;height:100%\",title:\"journalists\"' data-dojo-attach-point=\"journalists\" data-dojo-type=\"prmaxquestionnaires/pages/Journalists\" ></div>\r\n\t\t<div  data-dojo-props='style:\"width:100%;height:100%\",title:\"Related Outlets\"' data-dojo-attach-point=\"related_outlets\" data-dojo-type=\"prmaxquestionnaires/pages/RelatedOutlets\" ></div>\r\n\t</div>\r\n\t<div  data-dojo-props='region:\"bottom\",style:\"height:55px;width:100%;overflow:hidden\"' data-dojo-attach-point=\"bottom_panel\" data-dojo-type=\"dijit/layout/ContentPane\">\r\n\t\t<table style=\"width:100%;border-collapse:collapse;\" cellspacing=\"0\" cellpadding=\"0\" border=\"0\">\r\n\t\t\t<tr>\r\n\t\t\t\t<td><img src=\"/prmax_common_s/images/prmax_logo.png\" height=\"51px\" width=\"118px\"></td>\r\n\t\t\t\t<td><p class=\"footer_text\">Contact PRmax. Email <a data-dojo-attach-point=\"support_email_address\" href=\"mailto:updates@prmax.co.uk\" target=\"_blank\">updates@prmax.co.uk</a></p></td>\r\n\t\t\t\t<td><p class=\"footer_text\"><a href=\"http://app.prmax.co.uk/static2/html/prmax-data-use-policy.html\" target=\"_blank\">Data Protection statement</a></p></td>\r\n\t\t\t\t<td><p class=\"footer_text\"><a href=\"http://app.prmax.co.uk/static2/html/prmax-copyright-statement.html\" target=\"_blank\">Copyright statement</a></p></td>\r\n\t\t\t\t<td align=\"right\">\r\n\t\t\t\t\t<button data-dojo-attach-event=\"onClick:_update_save\" data-dojo-attach-point=\"savebtn\" data-dojo-type=\"dojox/form/BusyButton\" data-dojo-props='float:\"right\",type:\"button\",busyLabel:\"Please Wait\",label:\"Save\"'></button>\r\n\t\t\t\t\t<button data-dojo-attach-event=\"onClick:_update_prev\" data-dojo-attach-point=\"prevbtn\" data-dojo-type=\"dojox/form/BusyButton\" data-dojo-props='\"class\":\"prmaxhidden\",float:\"right\",type:\"button\",busyLabel:\"Please Wait\",label:\"Prev\"'></button>\r\n\t\t\t\t\t<button data-dojo-attach-event=\"onClick:_update_next\" data-dojo-attach-point=\"nextbtn\" data-dojo-type=\"dojox/form/BusyButton\" data-dojo-props='float:\"right\",type:\"button\",busyLabel:\"Please Wait\",label:\"Next\"'></button>\r\n\t\t\t\t</td>\r\n\t\t\t</tr>\r\n\t\t</table>\r\n\t</div>\r\n</div>\r\n"}});define("prmaxquestionnaires/main/deskframe",["dojo/_base/declare","ttl/BaseWidgetAMD","dojo/topic","dojo/text!../main/templates/deskframe.html","dijit/layout/BorderContainer","dojo/_base/lang","dojo/dom-class","dojo/dom-attr","dojox/collections/Dictionary","dijit/layout/ContentPane","dijit/layout/StackContainer","prmaxquestionnaires/main/deskbanner","prmaxquestionnaires/pages/DeskDetails"],function(_1,_2,_3,_4,_5,_6,_7,_8,_9){return _1("prmaxquestionnaires.main.deskframe",[_2,_5],{questionnaireid:-1,gutters:true,templateString:_4,constructor:function(){_3.subscribe("/show_page",_6.hitch(this,this._show_page_call));this._current_page="title";this._pages_control=new _9();this._save_sequence=null;this.reset_controls_back=_6.hitch(this,this.reset_controls);},postCreate:function(){this._pages_control.add("title",{next:"journalists",prev:null,save:true,ctrl:this.maindetails,saves:new Array()});this._pages_control.add("journalists",{next:"related_outlets",prev:"title",save:true,ctrl:this.journalists,saves:new Array()});this._pages_control.add("related_outlets",{next:null,prev:"journalists",save:true,ctrl:this.related_outlets,saves:new Array()});var _a=this._pages_control.item("title");_a.saves.push(this._pages_control.item("related_outlets"));_a=this._pages_control.item("related_outlets");_a.saves.push(this._pages_control.item("title"));_a=this._pages_control.item("journalists");_a.saves.push(this._pages_control.item("title"));_a.saves.push(this._pages_control.item("related_outlets"));if(PRMAX.questionnaire.outlet.outlet.countryid==119){_8.set(this.support_email_address,"href","mailto:researchgroup@prmax.co.uk");_8.set(this.support_email_address,"innerHTML","researchgroup@prmax.co.uk");}this.inherited(arguments);},_show_page_call:function(_b){switch(_b){case "title":this.zone_cont.selectChild(this.maindetails);this._current_page="title";break;case "journalists":this.zone_cont.selectChild(this.journalists);this._current_page="journalists";break;case "related_outlets":this.zone_cont.selectChild(this.related_outlets);this._current_page="related_outlets";break;}this._enable_controls();_3.publish("/shop_page_tab",_b);},_update_next:function(){var _c=this._pages_control.item(this._current_page);if(_c.save!=null){_c.ctrl.save_move(_6.hitch(this,this.move_page_next,_c),this.reset_controls_back);}else{this._show_page_call(_c.next);throw "N";}},move_page_next:function(_d){this._show_page_call(_d.next);},move_page_prev:function(_e){this._show_page_call(_e.prev);},_update_prev:function(){var _f=this._pages_control.item(this._current_page);if(_f.save!=null){_f.ctrl.save_move(_6.hitch(this,this.move_page_prev,_f),this.reset_controls_back);}else{this._show_page_call(_f.prev);throw "N";}},_save_completed:function(){var _10=this._save_sequence.pop();if(_10){_10.ctrl.save_move(_6.hitch(this,this._save_completed,_10),this.reset_controls_back);}else{this.savebtn.cancel();alert("Saved");}},_update_save:function(){var _11=this._pages_control.item(this._current_page);if(_11.save!=null){this._save_sequence=new Array();for(var key in _11.saves){this._save_sequence.push(_11.saves[key]);}_11.ctrl.save_move(_6.hitch(this,this._save_completed,_11),this.reset_controls_back);}},_enable_controls:function(){var _12=this._pages_control.item(this._current_page);if(_12.next==null){_7.add(this.nextbtn.domNode,"prmaxhidden");}else{_7.remove(this.nextbtn.domNode,"prmaxhidden");}if(_12.prev==null){_7.add(this.prevbtn.domNode,"prmaxhidden");}else{_7.remove(this.prevbtn.domNode,"prmaxhidden");}if(_12.save==null){_7.add(this.savebtn.domNode,"prmaxhidden");}else{_7.remove(this.savebtn.domNode,"prmaxhidden");}this.reset_controls();},reset_controls:function(){this.nextbtn.cancel();this.prevbtn.cancel();this.savebtn.cancel();}});});