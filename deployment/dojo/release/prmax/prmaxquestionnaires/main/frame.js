//>>built
require({cache:{"url:prmaxquestionnaires/main/templates/frame.html":"<div>\r\n\t<div data-dojo-type=\"prmaxquestionnaires/main/banner\" data-dojo-props='region:\"top\",style:\"width:100%;height:62px\",title:\"Banner\"'></div>\r\n\t<div data-dojo-type=\"dijit/layout/StackContainer\" data-dojo-attach-point=\"zone_cont\" data-dojo-props='region:\"center\",doLayout:true'>\r\n\t\t<div  data-dojo-props='style:\"width:100%;height:100%\",title:\"maindetails\"' data-dojo-attach-point=\"maindetails\" data-dojo-type=\"prmaxquestionnaires/pages/MainDetails\" ></div>\r\n\t\t<div  data-dojo-props='style:\"width:100%;height:100%\",title:\"journalists\"' data-dojo-attach-point=\"journalists\" data-dojo-type=\"prmaxquestionnaires/pages/Journalists\" ></div>\r\n\t\t<div  data-dojo-props='style:\"width:100%;height:100%\",title:\"profile\",\"class\":\"scrollpanel\"' data-dojo-attach-point=\"profile\" data-dojo-type=\"prmaxquestionnaires/pages/Profile\" ></div>\r\n\t\t<div  data-dojo-props='style:\"width:100%;height:100%\",title:\"Related Outlets\"' data-dojo-attach-point=\"related_outlets\" data-dojo-type=\"prmaxquestionnaires/pages/RelatedOutlets\" ></div>\r\n\t\t<div  data-dojo-props='style:\"width:100%;height:100%\",title:\"Geographical Coverage\"' data-dojo-attach-point=\"geographical_coverage\" data-dojo-type=\"prmaxquestionnaires/pages/GeographicalCoverage\" ></div>\r\n\t\t<div  data-dojo-props='title:\"blank\"' data-dojo-attach-point=\"blank\" data-dojo-type=\"dijit/layout/ContentPane\"></div>\r\n\t</div>\r\n\t<div  data-dojo-props='region:\"bottom\",style:\"height:55px;width:100%;overflow:hidden\"' data-dojo-attach-point=\"bottom_panel\" data-dojo-type=\"dijit/layout/ContentPane\">\r\n\t\t<table style=\"width:100%;border-collapse:collapse;\" cellspacing=\"0\" cellpadding=\"0\" border=\"0\">\r\n\t\t\t<tr>\r\n\t\t\t\t<td><img src=\"/prmax_common_s/images/prmax_logo.png\" height=\"51px\" width=\"118px\"></td>\r\n\t\t\t\t<td><p class=\"footer_text\">Contact PRmax. Email <a data-dojo-attach-point=\"support_email_address\" href=\"mailto:updates@prmax.co.uk\" target=\"_blank\">updates@prmax.co.uk</a></p></td>\r\n\t\t\t\t<td><p class=\"footer_text\"><a href=\"http://app.prmax.co.uk/static2/html/prmax-data-use-policy.html\" target=\"_blank\">Data Protection statement</a></p></td>\r\n\t\t\t\t<td><p class=\"footer_text\"><a href=\"http://app.prmax.co.uk/static2/html/prmax-copyright-statement.html\" target=\"_blank\">Copyright statement</a></p></td>\r\n\t\t\t\t<td align=\"right\">\r\n\t\t\t\t\t<button data-dojo-attach-event=\"onClick:_update_save\" data-dojo-attach-point=\"savebtn\" data-dojo-type=\"dojox/form/BusyButton\" data-dojo-props='float:\"right\",type:\"button\",busyLabel:\"Please Wait\",label:\"Save\"'></button>\r\n\t\t\t\t\t<button data-dojo-attach-event=\"onClick:_update_prev\" data-dojo-attach-point=\"prevbtn\" data-dojo-type=\"dojox/form/BusyButton\" data-dojo-props='\"class\":\"prmaxhidden\",float:\"right\",type:\"button\",busyLabel:\"Please Wait\",label:\"Prev\"'></button>\r\n\t\t\t\t\t<button data-dojo-attach-event=\"onClick:_update_next\" data-dojo-attach-point=\"nextbtn\" data-dojo-type=\"dojox/form/BusyButton\" data-dojo-props='float:\"right\",type:\"button\",busyLabel:\"Please Wait\",label:\"Next\"'></button>\r\n\t\t\t\t</td>\r\n\t\t\t</tr>\r\n\t\t</table>\r\n\t</div>\r\n</div>\r\n"}});define("prmaxquestionnaires/main/frame",["dojo/_base/declare","ttl/BaseWidgetAMD","dojo/topic","dojo/text!../main/templates/frame.html","dijit/layout/BorderContainer","dojo/_base/lang","dojo/dom-class","dojo/dom-attr","dojox/collections/Dictionary","dijit/layout/ContentPane","dijit/layout/StackContainer","prmaxquestionnaires/main/banner","prmaxquestionnaires/pages/MainDetails","prmaxquestionnaires/pages/Freelance","prmaxquestionnaires/pages/Profile","prmaxquestionnaires/pages/Journalists","prmaxquestionnaires/pages/GeographicalCoverage","prmaxquestionnaires/pages/RelatedOutlets"],function(_1,_2,_3,_4,_5,_6,_7,_8,_9){return _1("prmaxquestionnaires.main.frame",[_2,_5],{questionnaireid:-1,gutters:true,templateString:_4,constructor:function(){_3.subscribe("/show_page",_6.hitch(this,this._show_page_call));this._current_page="title";this._pages_control=new _9();this._save_sequence=null;this.reset_controls_back=_6.hitch(this,this.reset_controls);},postCreate:function(){this._pages_control.add("title",{next:"journalists",prev:null,save:true,ctrl:this.maindetails,saves:new Array()});this._pages_control.add("journalists",{next:"profile",prev:"title",save:true,ctrl:this.journalists,saves:new Array()});this._pages_control.add("profile",{next:"geographical_coverage",prev:"journalists",save:true,ctrl:this.profile,saves:new Array()});this._pages_control.add("geographical_coverage",{next:"related_outlets",prev:"profile",save:true,ctrl:this.geographical_coverage,saves:new Array()});this._pages_control.add("related_outlets",{next:null,prev:"geographical_coverage",save:true,ctrl:this.related_outlets,saves:new Array()});var _a=["title","profile","geographical_coverage","related_outlets","journalists"];for(var _b in _a){var _c=this._pages_control.item(_a[_b]);_c.saves.push(this._pages_control.item("title"));_c.saves.push(this._pages_control.item("profile"));_c.saves.push(this._pages_control.item("geographical_coverage"));_c.saves.push(this._pages_control.item("related_outlets"));}if(PRMAX.questionnaire.outlet.outlet.countryid==119){_8.set(this.support_email_address,"href","mailto:researchgroup@prmax.co.uk");_8.set(this.support_email_address,"innerHTML","researchgroup@prmax.co.uk");}this.inherited(arguments);},_show_page_call:function(_d){switch(_d){case "title":this.zone_cont.selectChild(this.maindetails);this._current_page="title";break;case "profile":this.zone_cont.selectChild(this.profile);this._current_page="profile";break;case "journalists":this.zone_cont.selectChild(this.journalists);this._current_page="journalists";break;case "related_outlets":this.zone_cont.selectChild(this.related_outlets);this._current_page="related_outlets";break;case "geographical_coverage":this.zone_cont.selectChild(this.geographical_coverage);this._current_page="geographical_coverage";break;}this._enable_controls();_3.publish("/shop_page_tab",_d);},_update_next:function(){var _e=this._pages_control.item(this._current_page);if(_e.save!=null){_e.ctrl.save_move(_6.hitch(this,this.move_page_next,_e),this.reset_controls_back);}else{this._show_page_call(_e.next);throw "N";}},move_page_next:function(_f){this._show_page_call(_f.next);},move_page_prev:function(_10){this._show_page_call(_10.prev);},_update_prev:function(){var _11=this._pages_control.item(this._current_page);if(_11.save!=null){_11.ctrl.save_move(_6.hitch(this,this.move_page_prev,_11),this.reset_controls_back);}else{this._show_page_call(_11.prev);throw "N";}},_save_completed:function(){var _12=this._save_sequence.pop();if(_12){_12.ctrl.save_move(_6.hitch(this,this._save_completed,_12),this.reset_controls_back);}else{this.savebtn.cancel();alert("Saved");}},_update_save:function(){var _13=this._pages_control.item(this._current_page);if(_13.save!=null){this._save_sequence=new Array();for(var key in _13.saves){this._save_sequence.push(_13.saves[key]);}if(_13.ctrl.save_mov!=null){_13.ctrl.save_move(_6.hitch(this,this._save_completed,_13),this.reset_controls_back);}else{var _13=this._save_sequence.pop();_13.ctrl.save_move(_6.hitch(this,this._save_completed,_13),this.reset_controls_back);}}},_enable_controls:function(){var _14=this._pages_control.item(this._current_page);if(_14.next==null){_7.add(this.nextbtn.domNode,"prmaxhidden");}else{_7.remove(this.nextbtn.domNode,"prmaxhidden");}if(_14.prev==null){_7.add(this.prevbtn.domNode,"prmaxhidden");}else{_7.remove(this.prevbtn.domNode,"prmaxhidden");}if(_14.save==null){_7.add(this.savebtn.domNode,"prmaxhidden");}else{_7.remove(this.savebtn.domNode,"prmaxhidden");}this.reset_controls();},reset_controls:function(){this.nextbtn.cancel();this.prevbtn.cancel();this.savebtn.cancel();}});});