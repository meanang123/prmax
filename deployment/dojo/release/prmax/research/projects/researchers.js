//>>built
require({cache:{"url:research/projects/templates/researchers.html":"<div data-dojo-attach-point=\"containerNode\" >\r\n    <table width=\"100%\" class=\"prmaxtable\" cellpadding=\"0\" cellspacing=\"0\" >\r\n        <tr><td width=\"20%\" class=\"prmaxrowtag\">Researchers</td>\r\n        </tr>\r\n    </table>\r\n    <div class=\"dojolanguagesPane\" >\r\n        <div data-dojo-attach-point=\"selectarea\" >\r\n            <table width=\"100%\" class=\"prmaxtable\" cellpadding=\"0\" cellspacing=\"0\" border=\"0\">\r\n                  <tr><td width=\"47%\"></td><td width=\"5%\"></td><td width=\"48%\" ></td></tr>\r\n                  <tr><td colspan=\"3\">\r\n                      <table style=\"width:100%\" class=\"prmaxtable\" >\r\n                            <tr>\r\n                            <td width=\"40%\" data-dojo-attach-point=\"master_type_text\"><span class=\"prmaxrowtag\">Select</span><input data-dojo-type=\"dijit/form/TextBox\" data-dojo-props='\"class\":\"prmaxfocus prmaxinput\",type:\"text\",style:\"width:60%\"' data-dojo-attach-point=\"researchers_list_select\" data-dojo-attach-event=\"onkeyup:researchersSelect\" /></td>\r\n                            </tr>\r\n                      </table>\r\n                      </td></tr>\r\n                      <tr><td ><select style=\"width:100%\" data-dojo-attach-point=\"researchers_list\" size=\"${size}\" class=\"lists\" multiple=\"multiple\" ></select></td>\r\n                  <td>\r\n                  <button data-dojo-props='style:\"padding:0px;margin:0px\",disabled:\"true\",type:\"button\",\"class\":\"button_add_all\"' data-dojo-attach-point=\"button_all\" data-dojo-attach-event=\"onClick:researchersSelectAll\" data-dojo-type=\"dijit/form/Button\"><div class=\"std_movement_button\">&gt;&gt;</div></button><br/>\r\n                  <button data-dojo-props='style:\"padding:0px;margin:0px\",disabled:\"true\",type:\"button\",\"class\":\"button_add_single\"' data-dojo-attach-point=\"button_single\" data-dojo-type=\"dijit/form/Button\" data-dojo-attach-event=\"onClick:researchersSelectSingle\"><div class=\"std_movement_button\">&gt;&nbsp;</div></button><br/>\r\n                  <button data-dojo-props='style:\"padding:0px;margin:0px\",disabled:\"true\",type:\"button\",\"class\":\"button_del_all\"' data-dojo-attach-point=\"button_del_all\" data-dojo-type=\"dijit/form/Button\" data-dojo-attach-event=\"onClick:researchersRemoveAll\"><div class=\"std_movement_button\">&lt;&lt;</div></button><br/>\r\n                  <button data-dojo-props='style:\"padding:0px;margin:0px\",disabled:\"true\",type:\"button\",\"class\":\"button_del_single\"' data-dojo-attach-point=\"button_del_single\" data-dojo-type=\"dijit/form/Button\" data-dojo-attach-event=\"onClick:researchersRemoveSingle\"><div class=\"std_movement_button\">&lt;&nbsp;</div></button></td>\r\n                  <td ><select style=\"width:100%\" size=\"${size}\" class=\"lists\" multiple=\"multiple\" data-dojo-attach-point=\"researchers_select\" data-dojo-attach-event=\"onChange:researchersUpdateSelection\" data-dojo-props='required:true, \"class\":\"prmaxrequired\"' ></select></td>\r\n            </tr>\r\n            </table>\r\n        </div>\r\n    </div>\r\n</div>"}});define("research/projects/researchers",["dojo/_base/declare","ttl/BaseWidgetAMD","dojo/text!../projects/templates/researchers.html","dijit/layout/BorderContainer","ttl/utilities2","dojo/topic","dojo/request","dojo/json","dojo/_base/lang","dojo/dom-style","dojo/dom-attr","dojo/dom-class","dojo/data/ItemFileReadStore","dojo/data/ItemFileWriteStore","ttl/store/JsonRest","dojo/store/Observable","dojo/on",],function(_1,_2,_3,_4,_5,_6,_7,_8,_9,_a,_b,_c,_d,_e,_f,_10,on){return _1("research.projects.researchers",[_2,_4],{templateString:_3,name:"",value:"",search:"",size:"7",testmode:false,selectonly:false,startopen:false,preload:true,restrict:1,widgetsInTemplate:true,constructor:function(){this.disabled=false;this._extended=false;this._LoadSelectionCall=dojo.hitch(this,this._LoadSelection);this.interestTimer=null;},postCreate:function(){on(this.researchers_list_select.domNode,"keyup",_9.hitch(this,this.researchersSelect));on(this.researchers_list,"change",_9.hitch(this,this.researchersUpdateSelection));on(this.researchers_list,"dblclick",_9.hitch(this,this.researchersSelectDbl));if(this.preload){this._Send_Request("*");}this.inherited(arguments);},Clear:function(){this._ClearSelectionBox();this._ClearSelectedBox();this.researchers_list_select.set("value","");this._Get(this._getValueAttr());this._SelectionOptions();this.inherited(arguments);},_Send_Request:function(_11){_7.post("/research/admin/user/listuserselection_researchers",_5.make_params({data:{word:_11}})).then(this._LoadSelectionCall);},researchersSelect:function(p1,_12){var _13=this.researchers_list_select.get("value");if(_13.length>0){if(this.interestTimer){clearTimeout(this.interestTimer);this.interestTimer=null;}this.interestTimer=setTimeout(dojo.hitch(this,this._Send_Request,_13),this.searchTime);}else{if(this.interestTimer){clearTimeout(this.interestTimer);this.interestTimer=null;}this._ClearSelectionBox();this._SelectionOptions();}},_LoadSelection:function(_14){this._ClearSelectionBox();for(var i=0;i<_14.data.length;++i){var _15=_14.data[i];this.researchers_list.options[this.researchers_list.options.length]=new Option(_15.user_name,_15.user_id);}this._SelectionOptions();},_ClearSelectionBox:function(){this.researchers_list.options.length=0;},_ClearSelectedBox:function(){this.researchers_select.length=0;},researchersUpdateSelection:function(){this._SelectionOptions();},researchersSelectDbl:function(){this.researchersSelectSingle();this._SelectionOptions();},researchersSelectAll:function(){for(var c=0;c<this.researchers_list.options.length;c++){var _16=this.researchers_list.options[c];var _17=true;for(var c1=0;c1<this.researchers_select.options.length;c1++){if(this.researchers_select.options[c1].value==_16.value){_17=false;break;}}if(_17){this.researchers_select.options[this.researchers_select.options.length]=new Option(_16.text,_16.value);}}this._Get(this._getValueAttr());this.researchers_list.options.length=0;this.researchersUpdateSelection();},researchersSelectSingle:function(){for(var c=0;c<this.researchers_list.options.length;c++){var _18=this.researchers_list.options[c];if(_18.selected){_18.selected=false;var _19=true;for(var c1=0;c1<this.researchers_select.options.length;c1++){if(this.researchers_select.options[c1].value==_18.value){_19=false;break;}}if(_19){this.researchers_select.options[this.researchers_select.options.length]=new Option(_18.text,_18.value);this._Get(this._getValueAttr());}}}},researchersRemoveAll:function(){this.researchers_select.options.length=0;this.researchersUpdateSelection();this._Get(this._getValueAttr());},researchersRemoveSingle:function(){for(var c=0;c<this.researchers_select.options.length;c++){if(this.researchers_select.options[c].selected){this.researchers_select.options[c]=null;}}this.researchersUpdateSelection();this._Get(this._getValueAttr());},addSelect:function(_1a){this.researchers_select.options[this.researchers_select.options.length]=new Option(_1a.user_name,_1a.user_id);},_setValueAttr:function(_1b){this.Clear();if(_1b!=null){var _1c=_1b.data;var _1d=false;if(_1c==null||_1c==undefined){_1c=_1b;}for(var key in _1c){var _1e=_1c[key];this.researchers_select.options[this.researchers_select.options.length]=new Option(_1e.user_name,_1e.user_id);opne=true;}if(_1d){this.MakeOpen();}this._Get(this._getValueAttr());}},_getValueAttr:function(){var _1f=Array();for(var c=0;c<this.researchers_select.options.length;c++){if(this._extended){_1f[c]={user_id:parseInt(this.researchers_select.options[c].value),user_name:this.researchers_select.options[c].text};}else{_1f[c]=parseInt(this.researchers_select.options[c].value);}}var obj={data:_1f};if(this._extended){return obj;}else{var _1f=_1f.length>0?dojo.toJson(obj):"";this.value=_1f;return _1f;}},_getCountAttr:function(){return this.researchers_select.options.length;},_setExtendedAttr:function(_20){this._extended=_20;},_SelectionOptions:function(){this.button_all.set("disabled",this.researchers_list.length?false:true);this.button_single.set("disabled",this.researchers_list.selectedIndex!=-1?false:true);this.button_del_all.set("disabled",this.researchers_select.length?false:true);this.button_del_single.set("disabled",this.researchers_select.selectedIndex!=-1?false:true);},_up_down:function(){var _21=true;var _22=true;if(this.researchers_select.options.length>1&&this.researchers_select.selectedIndex!=-1){if(this.researchers_select.selectedIndex>0){_21=false;}if(this.researchers_select.selectedIndex<this.researchers_select.options.length-1){_22=false;}}},_setDisabledAttr:function(_23){this.disabled=_23;},_getDisabledAttr:function(){return this.disabled;},_Get:function(){if(this.selectonly==false){this.inherited(arguments);}},_focus:function(){this.researchers_list_select.focus();},_change_filter:function(){var _24=this.researchers_list_select.get("value");if(_24.length==0){_24="*";}this.researchersSelect(null,_24);},isValid:function(){var _25=this.researchers_select.value;if((_25==null||_25=="")){return false;}else{return true;}}});});