//>>built
require({cache:{"url:research/advance/templates/view.html":"<div>\r\n\t<div data-dojo-type=\"dijit/layout/BorderContainer\" data-dojo-props='region:\"left\",style:\"width:50%;height:100%\",gutters:false' >\r\n\t\t<div data-dojo-type=\"dijit/layout/BorderContainer\" data-dojo-props='style:\"width:100%;height:55%; border: 0; padding: 0; margin: 0\",region:\"top\",gutters:false'>\r\n\t\t\t<div data-dojo-attach-point=\"search_form_pane\" data-dojo-type=\"dijit/layout/TabContainer\" data-dojo-props='region:\"center\"' >\r\n\t\t\t\t<div data-dojo-attach-point=\"std_search_advance\" data-dojo-type=\"prcommon2/search/AdvanceSearch\" data-dojo-props='title:\"Features\",style:\"overflow:auto\"' ></div>\r\n\t\t\t</div>\r\n\t\t\t<div data-dojo-type=\"dijit/layout/ContentPane\" data-dojo-props='region:\"bottom\",style:\"width:100%;height:35px\"'>\r\n\t\t\t\t<table width=\"100%\" cellspacing=\"0\" cellpadding=\"0\" style=\"border-collapse: collapse;\" >\r\n\t\t\t\t\t<tr>\r\n\t\t\t\t\t\t<td><button data-dojo-attach-event=\"onClick:_clear_search\" data-dojo-type=\"dijit/form/Button\" data-dojo-props='\"class\":\"prmaxbutton\",label:\"Clear Search Criteria\",iconClass:\"fa fa-eraser\"' ></button></td>\r\n\t\t\t\t\t\t<td><button data-dojo-attach-event=\"onClick:_clear_search_results\" data-dojo-type=\"dijit/form/Button\" data-dojo-props='\"class\":\"prmaxbutton\",label:\"Clear Search Results\",iconClass:\"fa fa-eraser\"' ></button></td>\r\n\t\t\t\t\t\t<td align=\"right\"><button data-dojo-attach-point=\"searchbutton\" data-dojo-attach-event=\"onClick:_search\" data-dojo-type=\"dojox/form/BusyButton\" data-dojo-props='\"class\":\"prmaxbutton\",busyLabel:\"Searching...\",label:\"Search\",iconClass:\"fa fa-search-plus fa-2x\"' ></button></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t\t<div  data-dojo-type=\"dijit/layout/ContentPane\" data-dojo-props='region:\"center\",splitter:true' data-dojo-attach-point=\"searchgrid_view\" ></div>\r\n\t</div>\r\n\t<div data-dojo-attach-point=\"outlet_advance_ctrl\" data-dojo-type=\"prcommon2/advance/advance\" data-dojo-props='region:\"center\"'></div>\r\n</div>\r\n"}});define("research/advance/view",["dojo/_base/declare","ttl/BaseWidgetAMD","dojo/text!../advance/templates/view.html","dijit/layout/BorderContainer","ttl/grid/Grid","ttl/store/JsonRest","dojo/store/Observable","dojo/request","ttl/utilities2","dojo/json","dojo/data/ItemFileReadStore","dojo/_base/lang","dojo/topic","dojo/dom-attr","dojo/dom-class","dojo/on","dojo/_base/array","dijit/registry","dijit/layout/ContentPane","dijit/form/Button","prcommon2/advance/advance","dijit/layout/BorderContainer","dijit/layout/TabContainer","dijit/layout/ContentPane","dijit/form/Button","dojox/form/BusyButton","prcommon2/search/AdvanceSearch"],function(_1,_2,_3,_4,_5,_6,_7,_8,_9,_a,_b,_c,_d,_e,_f,on,_10,_11){return _1("research.advance.view",[_2,_4],{templateString:_3,constructor:function(){this.results=new _7(new _6({target:"/advance/viewpage_rest",idProperty:"advancefeatureid"}));this._load_call_back=_c.hitch(this,this._load_call);this._clear_all_call_back=_c.hitch(this,this._clear_all_call);},postCreate:function(){var _12=[{label:"Outlet Name",className:"dgrid-column-title ",field:"outletname"},{label:"Publication Date",className:"dgrid-column-date",field:"pub_date_display"},{label:"Feature",className:"dgrid-column-contact",field:"feature"}];this.searchgrid=new _5({columns:_12,selectionMode:"single",store:this.results,sort:[{attribute:"pub_date_display",descending:false}],query:_9.EMPTYGRID});this.searchgrid_view.set("content",this.searchgrid);this.searchgrid.on("dgrid-select",_c.hitch(this,this._on_cell_call));on(this.search_form_pane,"onLoad",_c.hitch(this,this._connect_pane));this.inherited(arguments);},_on_cell_call:function(e){var row=e.rows[0].data;this.outlet_advance_ctrl.load(row.advancefeatureid,row.outletid);_f.remove(this.outlet_advance_ctrl.domNode,"prmaxhidden");},_connect_pane:function(){on(_11.byId(this.form_name),"onSubmit",_c.hitch(this,this._submit));},_submit:function(){this._do_search();},_clear_search:function(){var _13=this._get_form();_10.every(_13.getChildren(),function(_14){if(_14.clear!=null){_14.clear();}if(_14.Clear!=null){_14.Clear();}return true;});this.searchbutton.cancel();},_clear_search_results:function(){_8.post("/advance/delete_list_all",_9.make_params({})).then(this._clear_all_call_back);},_clear_all_call:function(_15){this.searchgrid.set("query",{});_f.add(this.outlet_advance_ctrl.domNode,"prmaxhidden");},_search:function(){this._do_search();},_do_search:function(){var _16=this._get_form();_16.setExtendedMode(false);var _17=_16.get("value");_17["mode"]=1;_17["search_partial"]=2;_17["searchtypeid"]=3;_17["research"]=1;_8.post("/search/dosearch",_9.make_params({data:_17})).then(this._load_call_back);},_load_call:function(_18){this.searchgrid.set("query",{});this.searchbutton.cancel();},_get_form:function(){return this.std_search_advance.get("form");}});});