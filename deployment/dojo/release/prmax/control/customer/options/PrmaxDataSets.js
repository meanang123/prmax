//>>built
require({cache:{"url:control/customer/options/templates/prmaxdatasets.html":"<div>\r\n\t<div data-dojo-attach-point=\"datasetsgrid\" data-dojo-type=\"dijit/layout/ContentPane\"  data-dojo-props='region:\"center\"'></div>\r\n</div>\r\n"}});define("control/customer/options/PrmaxDataSets",["dojo/_base/declare","ttl/BaseWidgetAMD","dojo/text!../options/templates/prmaxdatasets.html","dijit/layout/BorderContainer","ttl/utilities2","dojo/request","dojo/_base/lang","dojo/dom-style","dojo/dom-attr","dojo/dom-class","dojo/data/ItemFileReadStore","ttl/store/JsonRest","dojo/store/Observable","ttl/grid/Grid"],function(_1,_2,_3,_4,_5,_6,_7,_8,_9,_a,_b,_c,_d,_e){_data_set_selected=function(_f){var _10=_f?"checked.gif":"unchecked.gif";return "<img  height=\"10px\" width=\"10px\" style=\"padding:0x;margin:0px\" src=\"/static/images/"+_10+"\" ></img>";};return _1("control.customer.options.PrmaxDataSets",[_2,_4],{templateString:_3,gutters:false,constructor:function(){this._datasets=new _d(new _c({target:"/datasets/customer_data_sets",idProperty:"prmaxdatasetid",onError:_5.globalerrorchecker,clearOnClose:true,urlPreventCache:true}));this._update_data_set_call_back=_7.hitch(this,this._update_data_set_call);this._has_international_data=false;},postCreate:function(){this.inherited(arguments);var _11=[{label:"Selected",className:"grid-field-image-view",field:"customerprmaxdatasetid",formatter:_data_set_selected},{label:"Data Set",className:"dgrid-column-status",field:"prmaxdatasetdescription"}];this.datasetsgrid_view=new _e({columns:_11,selectionMode:"single",store:this._datasets,sort:[{attribute:"prmaxdatasetdescription",descending:false}],query:{}});this.datasetsgrid.set("content",this.datasetsgrid_view);this.datasetsgrid_view.on(".dgrid-cell:click",_7.hitch(this,this._on_row_select));},_on_row_select:function(e){if(this._has_international_data==true){var _12=this.datasetsgrid_view.cell(e);this._row=_12.row.data;var _13="Remove Data Set "+this._row.prmaxdatasetdescription+" ?";if(this._row.customerprmaxdatasetid==null){_13=null;}if(_13==null||confirm(_13)==true){var _14={};_14["icustomerid"]=this._customerid;_14["customerprmaxdatasetid"]=this._row.customerprmaxdatasetid;_14["prmaxdatasetid"]=this._row.prmaxdatasetid;_6.post("/datasets/customer_data_set_update",_5.make_params({data:_14})).then(this._update_data_set_call_back);}}else{alert("International Data Disabled");}},_update_data_set_call:function(_15){if(_15.success=="OK"){this._row.customerprmaxdatasetid=_15.data.customerprmaxdatasetid;this._datasets.put(this._row);}else{alert("Problem Updating");}},load:function(_16,_17){if(_16!=null){this._customerid=_16;var _18=_7.mixin(_5.get_prevent_cache(),{icustomerid:_16});this.datasetsgrid_view.set("query",_18);}this._has_international_data=_17;}});});