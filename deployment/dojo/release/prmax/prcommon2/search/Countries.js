//>>built
require({cache:{"url:prcommon2/search/templates/Countries.html":"<div data-dojo-attach-point=\"containerNode\" >\r\n\t<table width=\"100%\" class=\"prmaxtable\" cellpadding=\"0\" cellspacing=\"0\" >\r\n\t\t<tr><td width=\"20%\" class=\"prmaxrowtag\">${displaytitle}</td>\r\n\t\t\t\t<td width=\"5%\" ><img height=\"16px\" width=\"16px\" data-dojo-attach-point=\"togglectrl\" data-dojo-attach-event=\"onclick:_toggle\" src=\"/prmax_common_s/images/toopen.gif\" class=\"toggleselect\"></img></td>\r\n\t\t\t\t<td align=\"right\" valign=\"top\" ><div data-dojo-attach-point=\"countnode\" data-dojo-type=\"prcommon2/search/SearchCount\"></div></td>\r\n\t\t</tr>\r\n\t</table>\r\n\t<div class=\"dojoInterestPane\" >\r\n\t\t<div data-dojo-attach-point=\"selectarea\" style=\"display:none\" >\r\n\t\t\t<table width=\"100%\" class=\"prmaxtable\" cellpadding=\"0\" cellspacing=\"0\" >\r\n\t\t\t\t  <tr><td width=\"47%\"></td><td width=\"5%\"></td><td width=\"48%\" ></td></tr>\r\n\t\t\t\t  <tr><td colspan=\"3\">\r\n\t\t\t\t\t  <table style=\"width:100%\" class=\"prmaxtable\" >\r\n\t\t\t\t\t\t\t<tr>\r\n\t\t\t\t\t\t\t<td width=\"40%\" data-dojo-attach-point=\"master_type_text\"><span class=\"prmaxrowtag\">Select</span><input data-dojo-type=\"dijit/form/TextBox\" data-dojo-props='\"class\":\"prmaxfocus prmaxinput\",type:\"text\",style:\"width:60%\"' data-dojo-attach-point=\"interest_list_select\" data-dojo-attach-event=\"onkeyup:interest_select_event\" /></td>\r\n\t\t\t\t\t\t\t<td width=\"3%\" align=\"right\"><input data-dojo-props='\"class\":\"prmaxdefault\",checked:\"checked\",type:\"checkbox\",value:\"2\"' data-dojo-attach-point=\"andor\" data-dojo-type=\"dijit/form/CheckBox\" data-dojo-attach-event=\"onClick:and_or\"/></td>\r\n\t\t\t\t\t\t\t<td width=\"15%\"><label data-dojo-attach-point=\"andorlabel\" class=\"prmaxlabeltag\" >All</label></td>\r\n\t\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t\t</table>\r\n\t\t\t\t\t  </td></tr>\r\n\t\t\t\t\t  <tr><td ><select style=\"width:100%\" data-dojo-attach-point=\"interest_list\" size=\"${size}\" class=\"lists\" multiple=\"multiple\" ></select></td>\r\n\t\t\t\t  <td>\r\n\t\t\t\t  <button data-dojo-props='style:\"padding:0px;margin:0px\",disabled:\"true\",type:\"button\",\"class\":\"button_add_all\"' data-dojo-attach-point=\"button_all\" data-dojo-attach-event=\"onClick:interest_select_all\" data-dojo-type=\"dijit/form/Button\"><div class=\"std_movement_button\">&gt;&gt;</div></button><br/>\r\n\t\t\t\t  <button data-dojo-props='style:\"padding:0px;margin:0px\",disabled:\"true\",type:\"button\",\"class\":\"button_add_single\"' data-dojo-attach-point=\"button_single\" data-dojo-type=\"dijit/form/Button\" data-dojo-attach-event=\"onClick:interest_select_single\"><div class=\"std_movement_button\">&gt;&nbsp;</div></button><br/>\r\n\t\t\t\t  <button data-dojo-props='style:\"padding:0px;margin:0px\",disabled:\"true\",type:\"button\",\"class\":\"button_del_all\"' data-dojo-attach-point=\"button_del_all\" data-dojo-type=\"dijit/form/Button\" data-dojo-attach-event=\"onClick:interest_remove_all\"><div class=\"std_movement_button\">&lt;&lt;</div></button><br/>\r\n\t\t\t\t  <button data-dojo-props='style:\"padding:0px;margin:0px\",disabled:\"true\",type:\"button\",\"class\":\"button_del_single\"' data-dojo-attach-point=\"button_del_single\" data-dojo-type=\"dijit/form/Button\" data-dojo-attach-event=\"onClick:interest_remove_single\"><div class=\"std_movement_button\">&lt;&nbsp;</div></button></td>\r\n\t\t\t\t  <td ><select style=\"width:100%\" size=\"${size}\" class=\"lists\" multiple=\"multiple\" data-dojo-attach-point=\"interest_select\" data-dojo-attach-event=\"onchange:interest_update_selection\"></select></td>\r\n\t\t\t</tr>\r\n\t\t\t</table>\r\n\t\t</div>\r\n\t</div>\r\n</div>"}});define("prcommon2/search/Countries",["dojo/_base/declare","ttl/BaseWidgetAMD","dojo/text!../search/templates/Countries.html","prcommon2/search/std_search","dojo/_base/lang","dojo/dom-attr","dojo/dom-class","dojo/dom-style","dojo/json","dojo/request","ttl/utilities2","prcommon2/search/std_search","prcommon2/search/SearchCount"],function(_1,_2,_3,_4,_5,_6,_7,_8,_9,_a,_b){return _1("prcommon2.search.Countries",[_2,_4],{templateString:_3,name:"",value:"",displaytitle:"Countries",search:"",size:"7",testmode:false,selectonly:false,startopen:false,preload:true,interesttypeid:1,restrict:1,constructor:function(){this.disabled=false;this._extended=false;this._load_selection_call=_5.hitch(this,this._load_selection);this.interestTimer=null;this.inherited(arguments);},postCreate:function(){dojo.connect(this.interest_list_select.domNode,"onkeyup",_5.hitch(this,this.interest_select_event));dojo.connect(this.interest_list,"onchange",_5.hitch(this,this.interest_update_selection));dojo.connect(this.interest_list,"ondblclick",_5.hitch(this,this.interest_select_dbl));_6.set(this.andorlabel,"for",this.andor.id);if(this.selectonly){this.andor.domNode.style.display="None";this.countnode.domNode.style.display="None";this.andor.style.display="None";}if(this.startopen){_8.set(this.togglectrl,"display","none");_8.set(this.selectarea,"display","block");}if(this.preload){for(var _c in PRMAX.Settings.countries){var _d=PRMAX.Settings.countries[_c];this.interest_select.options[this.interest_select.options.length]=new Option(_d.countryname,_d.countryid);}if(PRMAX.Settings.countries.length>0){this.make_open();this._get_selector(this._getValueAttr(),true);}}this.inherited(arguments);},clear:function(){this._clear_selection_box();this._clear_selected_box();this.interest_list_select.set("value","");this._get_selector(this._getValueAttr());this._selection_options();this.inherited(arguments);},_send_request:function(_e){this._transactionid=PRCOMMON.utils.uuid.createUUID();_a.post("/geographical/countries_listselection",_b.make_params({data:{word:_e,logic:this.andor.get("value"),keytypeid:this.keytypeid,restrict:this.restrict,transactionid:this._transactionid}})).then(this._load_selection_call);},interest_select_event:function(p1,_f){var _10=this.interest_list_select.get("value");if(_f!=null){_10=_f;}if(_10.length>0){if(this.interestTimer){clearTimeout(this.interestTimer);this.interestTimer=null;}this.interestTimer=setTimeout(dojo.hitch(this,this._send_request,_10),this.searchTime);}else{this.interestTimer=null;this._clear_selection_box();this._selection_options();}},_load_selection:function(_11){if(this._transactionid==_11.transactionid){this._clear_selection_box();for(var i=0;i<_11.data.length;++i){var _12=_11.data[i];this.interest_list.options[this.interest_list.options.length]=new Option(_12.countryname,_12.countryid);}this._selection_options();}},_clear_selection_box:function(){this.interest_list.options.length=0;},_clear_selected_box:function(){this.interest_select.length=0;},and_or:function(){this._get_selector(this._getValueAttr(),true);},interest_update_selection:function(){this._selection_options();},interest_select_dbl:function(){this.interest_select_single();this._selection_options();},interest_select_all:function(){for(var c=0;c<this.interest_list.options.length;c++){var _13=this.interest_list.options[c];var _14=true;for(var c1=0;c1<this.interest_select.options.length;c1++){if(this.interest_select.options[c1].value==_13.value){_14=false;break;}}if(_14){this.interest_select.options[this.interest_select.options.length]=new Option(_13.text,_13.value);}}this._get_selector(this._getValueAttr());this.interest_list.options.length=0;this.interest_update_selection();},interest_select_single:function(){for(var c=0;c<this.interest_list.options.length;c++){var _15=this.interest_list.options[c];if(_15.selected){_15.selected=false;var _16=true;for(var c1=0;c1<this.interest_select.options.length;c1++){if(this.interest_select.options[c1].value==_15.value){_16=false;break;}}if(_16){this.interest_select.options[this.interest_select.options.length]=new Option(_15.text,_15.value);this._get_selector(this._getValueAttr());}}}},interest_remove_all:function(){this.interest_select.options.length=0;this.interest_update_selection();this._get_selector(this._getValueAttr());},interest_remove_single:function(){for(var c=0;c<this.interest_select.options.length;c++){if(this.interest_select.options[c].selected){this.interest_select.options[c]=null;}}this.interest_update_selection();this._get_selector(this._getValueAttr());},add_select:function(_17){this.interest_select.options[this.interest_select.options.length]=new Option(_17.countryname,_17.countryid);},_setValueAttr:function(_18){this.clear();var _19=_18.data;var _1a=false;if(_19==null||_19==undefined){_19=_18;}for(var key in _19){var _1b=_19[key];this.interest_select.options[this.interest_select.options.length]=new Option(_1b.countryname,_1b.countryid);opne=true;}if(_1a){this.make_open();}this._get_selector(this._getValueAttr());},_getValueAttr:function(){var _1c=Array();for(var c=0;c<this.interest_select.options.length;c++){if(this._extended){_1c[c]={countryid:parseInt(this.interest_select.options[c].value),countryname:this.interest_select.options[c].text};}else{_1c[c]=parseInt(this.interest_select.options[c].value);}}var obj={data:_1c,logic:this.andor.get("value")};if(this._extended){return obj;}else{var _1c=_1c.length>0?_9.stringify(obj):"";this.value=_1c;return _1c;}},_getCountAttr:function(){return this.interest_select.options.length;},_setExtendedAttr:function(_1d){this._extended=_1d;},_selection_options:function(){this.button_all.set("disabled",this.interest_list.length?false:true);this.button_single.set("disabled",this.interest_list.selectedIndex!=-1?false:true);this.button_del_all.set("disabled",this.interest_select.length?false:true);this.button_del_single.set("disabled",this.interest_select.selectedIndex!=-1?false:true);},_capture_extended_content:function(_1e){var _1f=this.andor.get("value");return dojo.mixin(_1e,{logic:_1f});},_setDisabledAttr:function(_20){this.disabled=_20;},_getDisabledAttr:function(){return this.disabled;},_get_selector:function(){if(this.selectonly==false){this.inherited(arguments);}},_focus:function(){this.interest_list_select.focus();}});});