//>>built
define("prcommon2/store/JsonRest",["dojo/_base/xhr","dojo/json","dojo/_base/declare","dojo/store/util/QueryResults"],function(_1,_2,_3,_4){return _3("pprcommom.store.JsonRest",null,{constructor:function(_5){_3.safeMixin(this,_5);},target:"",idProperty:"id",get:function(id,_6){},accepts:"application/javascript, application/json",getIdentity:function(_7){return _7[this.idProperty];},put:function(_8,_9){return _8;},add:function(_a,_b){_b=_b||{};_b.overwrite=false;return this.put(_a,_b);},remove:function(id){},query:function(_c,_d){var _e={Accept:this.accepts};_d=_d||{};if(_d.start>=0||_d.count>=0){_e.Range="items="+(_d.start||"0")+"-"+(("count" in _d&&_d.count!=Infinity)?(_d.count+(_d.start||0)-1):"");}if(_c&&typeof _c=="object"){_c=_1.objectToQuery(_c);if(this.target.indexOf("?")!=-1){_c="&"+_c;}else{_c=_c?"?"+_c:"";}}if(_d&&_d.sort){var _f=this.sortParam;_c+=(_c?"&":"?")+(_f?_f+"=":"sort=");for(var i=0;i<_d.sort.length;i++){var _10=_d.sort[i];_c+=(i>0?",":"")+(_10.descending?"-":"+")+encodeURIComponent(_10.attribute);}}var _11=_1("GET",{url:this.target+(_c||""),handleAs:"json",headers:_e,preventCache:true});_11.total=_11.then(function(){var _12=_11.ioArgs.xhr.getResponseHeader("Content-Range");return _12&&(_12=_12.match(/\/(.*)/))&&+_12[1];});return _4(_11);}});});